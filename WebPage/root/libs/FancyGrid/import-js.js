/**
 * @function
 * @return {undefined}
 *
 * @example
 * <code>
 * </code>
 */
(function(){
	window.TtwLog.log( "- [ S ] - Import templates FancyGrid 1.7.20" );

	//----------------------------------------------------------------------------------------------------;

	//CSS;
	//SUtilTemplateHTML.addCSS__URLToHead( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min.css" );
	SUtilTemplateHTML.addCSS__URLToHead( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min-122.css" );
	//SUtilTemplateHTML.addCSS__URLToHead( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min-122-domain.css" );
	//SUtilTemplateHTML.addCSS__URLToHead( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min-122-domain-s.css" );
	//SUtilTemplateHTML.addCSS__URLToHead( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min-123.css" );
	//SUtilTemplateHTML.addCSS__URLToHead( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min-123-domain.css" );
	//SUtilTemplateHTML.addCSS__URLToHead( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min-123-domain-s.css" );

	//JS;
	//window.apis.util.importJS__Reuse( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.min.js" );
		/**
		 * All of the code within the FancyGrid software is developed and copyrighted by FancyGrid, Inc., and may not be copied,
		 * replicated, or used in any other software or application without prior permission from FancyGrid. All usage must coincide with the
		 * FancyGrid End User License Agreement which can be requested by email at support@fancygrid.com.
		 *
		 * Build: 1.7.20
		 */
		!function(e,t){"object"==typeof module&&module.exports?module.exports=e.document?t(e):t:e.Fancy=t(e)}("undefined"!=typeof window?window:this,function(win){var Fancy={global:window,version:"1.7.20",site:"fancygrid.com",COLORS:["#9DB160","#B26668","#4091BA","#8E658E","#3B8D8B","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"]};return window.Fancy=Fancy,Fancy.apply=function(e,t){if(void 0!==t)for(var n in t)e[n]=t[n]},Fancy.applyIf=function(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n])},Fancy.namespace=function(){for(var e=0,t=arguments.length;t>e;e++){var n=arguments[e],i=n.split("."),r=1,o=i.length;Fancy.global[i[0]]=Fancy.global[i[0]]||{};for(var a=Fancy.global[i[0]];o>r;r++)a[i[r]]=a[i[r]]||{},a=a[i[r]]}},Fancy.ns=Fancy.namespace,Fancy.typeOf=function(e){if(null===e)return"null";var t=typeof e;if("undefined"===t||"string"===t||"number"===t||"boolean"===t)return t;var n=Object.prototype.toString,i=n.call(e);if(void 0!==e.length&&"function"!=typeof e)return"array";switch(i){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}return"function"===t?"function":"object"===t?"object":void 0},Fancy.isArray="isArray"in Array?Array.isArray:function(e){var t=Object.prototype.toString;return"[object Array]"===t.call(e)},Fancy.isObject=function(e){var t=Object.prototype.toString;return"[object Object]"===t.call(e)},Fancy.isFunction=function(e){var t=Object.prototype.toString;return"[object Function]"===t.apply(e)},Fancy.isString=function(e){return"string"==typeof e},Fancy.isNumber=function(e){return"number"==typeof e&&isFinite(e)},Fancy.isBoolean=function(e){return"boolean"==typeof e},Fancy.isDate=function(e){return"date"===Fancy.typeOf(e)},Fancy.each=function(e,t){var n=Fancy.typeOf(e);switch(n){case"array":case"string":for(var i=0,r=e.length;r>i&&t(e[i],i,e)!==!0;i++);break;case"object":for(var o in e)if(t(e[o],o,e)===!0)break}},Fancy.mixin=function(e,t){var n=0,i=t.length;if("object"===Fancy.typeOf(t[0]))for(;i>n;n++)for(var r=t[n],o=r._class,a=r.methods,s=0,l=a.length;l>s;s++){var d=a[s];e[d]=o.prototype[d]}else for(;i>n;n++){var r=t[n];if(Fancy.isString(r)){var c=Fancy.ClassManager.getMixin(r);c?Fancy.apply(e,c.prototype):Fancy.ClassManager.waitMixin(r,e)}else Fancy.apply(e,r.prototype)}},Fancy.Mixin=function(e,t){var n=e.split("."),i=1,r=n.length-1;Fancy.ns(e);for(var o=Fancy.global[n[0]];r>i;i++)o=o[n[i]];n.length>1?(o[n[n.length-1]]=function(){},o[n[n.length-1]].prototype=t):(Fancy.global[n[0]]=function(){},Fancy.global[n[0]].prototype=t);var a=Fancy.ClassManager.waitMixins[e];if(a){a=a.waiters;for(var i=0,r=a.length;r>i;i++)Fancy.apply(a[i],t)}},Fancy.applyConfig=function(e,t){var n,t=t||{};if(e.plugins&&t.plugins&&(e.plugins=e.plugins.concat(t.plugins),delete t.plugins),e._isConfigApplied===!0)return e;for(n in t)e[n]=t[n];return e._isConfigApplied=!0,e},Fancy.styleToString=function(e){var t="";e=e||{};for(var n in e)t+=n+": "+e[n]+";";return t},Fancy.apply(Fancy,{prefix:"fancy-gen-",idSeed:0,zIndex:1,id:function(e,t){return e?(e=e.dom||{},e.id||(e.id=(t||Fancy.prefix)+ ++Fancy.idSeed),e.id):(t||Fancy.prefix)+ ++Fancy.idSeed}}),Fancy.apply(Fancy,{cls:"fancy",TOUCH_CLS:"fancy-touch",HIDDEN_CLS:"fancy-display-none",CLEARFIX_CLS:"fancy-clearfix",MODAL_CLS:"fancy-modal",PANEL_CLS:"fancy-panel",PANEL_BODY_CLS:"fancy-panel-body",PANEL_BODY_INNER_CLS:"fancy-panel-body-inner",PANEL_GRID_INSIDE_CLS:"fancy-panel-grid-inside",PANEL_SHADOW_CLS:"fancy-panel-shadow",PANEL_SUB_HEADER_CLS:"fancy-panel-sub-header",PANEL_SUB_HEADER_TEXT_CLS:"fancy-panel-sub-header-text",PANEL_HEADER_CLS:"fancy-panel-header",PANEL_HEADER_IMG_CLS:"fancy-panel-header-img",PANEL_HEADER_TEXT_CLS:"fancy-panel-header-text",PANEL_HEADER_TOOLS_CLS:"fancy-panel-header-tools",PANEL_TBAR_CLS:"fancy-panel-tbar",PANEL_BBAR_CLS:"fancy-panel-bbar",PANEL_SUB_TBAR_CLS:"fancy-panel-sub-tbar",PANEL_BUTTONS_CLS:"fancy-panel-buttons",PANEL_NOFRAME_CLS:"fancy-panel-noframe",PANEL_FOOTER_CLS:"fancy-panel-footer",PANEL_TAB_CLS:"fancy-panel-tab",PANEL_DRAGGABLE_CLS:"fancy-panel-draggable",BAR_CLS:"fancy-bar",BAR_TEXT_CLS:"fancy-bar-text",BAR_CONTAINER_CLS:"fancy-bar-container",BAR_BUTTON_CLS:"fancy-bar-button",BAR_SEG_BUTTON_CLS:"fancy-bar-seg-button",BAR_LEFT_SCROLLER_CLS:"fancy-bar-left-scroller",BAR_RIGHT_SCROLLER_CLS:"fancy-bar-right-scroller",FORM_CLS:"fancy-form",FORM_BODY_CLS:"fancy-form-body",FIELD_CLS:"fancy-field",FIELD_LABEL_CLS:"fancy-field-label",FIELD_EMPTY_CLS:"fancy-field-empty",FIELD_DISABLED_CLS:"fancy-field-disabled",FIELD_BLANK_ERR_CLS:"fancy-field-blank-err",FIELD_NOT_VALID_CLS:"fancy-field-not-valid",FIELD_TEXT_CLS:"fancy-field-text",FIELD_TEXT_INPUT_CLS:"fancy-field-text-input",FIELD_ERROR_CLS:"fancy-field-error",FIELD_SPIN_CLS:"fancy-field-spin",FIELD_SPIN_UP_CLS:"fancy-field-spin-up",FIELD_SPIN_DOWN_CLS:"fancy-field-spin-down",FIELD_CHECKBOX_CLS:"fancy-field-checkbox",FIELD_CHECKBOX_DISABLED_CLS:"fancy-field-checkbox-disabled",FIELD_CHECKBOX_INPUT_CLS:"fancy-field-checkbox-input",FIELD_CHECKBOX_ON_CLS:"fancy-checkbox-on",FIELD_INPUT_LABEL_CLS:"fancy-field-input-label",FIELD_BUTTON_CLS:"fancy-field-button",FIELD_TAB_CLS:"fancy-field-tab",FIELD_COMBO_CLS:"fancy-combo",FIELD_COMBO_SELECTED_ITEM_CLS:"fancy-combo-item-selected",FIELD_COMBO_FOCUSED_ITEM_CLS:"fancy-combo-item-focused",FIELD_COMBO_DROPDOWN_BUTTON_CLS:"fancy-combo-dropdown-button",FIELD_COMBO_INPUT_CONTAINER_CLS:"fancy-combo-input-container",FIELD_COMBO_LIST_VALUE_CLS:"fancy-combo-list-value",FIELD_COMBO_LEFT_EL_CLS:"fancy-combo-left-el",FIELD_SEARCH_CLS:"fancy-field-search",FIELD_SEARCH_LIST_CLS:"fancy-field-search-list",FIELD_SEARCH_PARAMS_LINK_CLS:"fancy-field-search-params-link",FIELD_SEARCH_PARAMED_CLS:"fancy-field-search-paramed",FIELD_SEARCH_PARAMED_EMPTY_CLS:"fancy-field-search-paramed-empty",FIELD_PICKER_BUTTON_CLS:"fancy-field-picker-button",FIELD_LABEL_ALIGN_TOP_CLS:"fancy-field-label-align-top",FIELD_LABEL_ALIGN_RIGHT_CLS:"fancy-field-label-align-right",FIELD_TEXTAREA_CLS:"fancy-textarea",FIELD_TEXTAREA_TEXT_CLS:"fancy-textarea-text",FIELD_TEXTAREA_TEXT_INPUT_CLS:"fancy-textarea-text-input",FIELD_RADIO_CLS:"fancy-field-radio",FIELD_RADIO_COLUMN_CLS:"fancy-field-radio-column",FIELD_RADIO_ON_CLS:"fancy-field-radio-on",FIELD_RADIO_INPUT_CLS:"fancy-field-radio-input",FIELD_TAB_ACTIVE_CLS:"fancy-field-tab-active",GRID_CLS:"fancy-grid",GRID_UNSELECTABLE_CLS:"fancy-grid-unselectable",GRID_EMPTY_CLS:"fancy-grid-empty-text",GRID_LEFT_EMPTY_CLS:"fancy-grid-left-empty",GRID_RIGHT_EMPTY_CLS:"fancy-grid-right-empty",GRID_CENTER_CLS:"fancy-grid-center",GRID_LEFT_CLS:"fancy-grid-left",GRID_RIGHT_CLS:"fancy-grid-right",GRID_RESIZER_LEFT_CLS:"fancy-grid-resizer-left",GRID_RESIZER_RIGHT_CLS:"fancy-grid-resizer-right",GRID_STATE_DRAG_COLUMN_CLS:"fancy-grid-state-drag-column",GRID_STATE_RESIZE_COLUMN_CLS:"fancy-grid-state-resize-column",GRID_HEADER_CLS:"fancy-grid-header",GRID_HEADER_CELL_CLS:"fancy-grid-header-cell",GRID_HEADER_CELL_CONTAINER_CLS:"fancy-grid-header-cell-container",GRID_HEADER_CELL_TEXT_CLS:"fancy-grid-header-cell-text",GRID_HEADER_CELL_DOUBLE_CLS:"fancy-grid-header-cell-double",GRID_HEADER_CELL_TRIPLE_CLS:"fancy-grid-header-cell-triple",GRID_HEADER_CELL_TRIGGER_CLS:"fancy-grid-header-cell-trigger",GRID_HEADER_CELL_TRIGGER_IMAGE_CLS:"fancy-grid-header-cell-trigger-image",GRID_HEADER_CELL_TRIGGER_DISABLED_CLS:"fancy-grid-header-cell-trigger-disabled",GRID_HEADER_CELL_GROUP_LEVEL_1_CLS:"fancy-grid-header-cell-group-level-1",GRID_HEADER_CELL_GROUP_LEVEL_2_CLS:"fancy-grid-header-cell-group-level-2",GRID_HEADER_CELL_SELECT_CLS:"fancy-grid-header-cell-select",GRID_HEADER_CELL_TRIGGER_UP_CLS:"fancy-grid-header-cell-trigger-up",GRID_HEADER_CELL_TRIGGER_DOWN_CLS:"fancy-grid-header-cell-trigger-down",GRID_HEADER_COLUMN_TRIGGERED_CLS:"fancy-gridf-header-column-triggered",GRID_HEADER_CELL_FILTER_CLS:"fancy-grid-header-filter-cell",GRID_HEADER_CELL_FILTER_FULL_CLS:"fancy-grid-header-filter-cell-full",GRID_HEADER_CELL_FILTER_SMALL_CLS:"fancy-grid-header-filter-cell-small",GRID_HEADER_CELL_CHECKBOX_CLS:"fancy-grid-header-cell-checkbox",GRID_CELL_CLS:"fancy-grid-cell",GRID_CELL_INNER_CLS:"fancy-grid-cell-inner",GRID_CELL_OVER_CLS:"fancy-grid-cell-over",GRID_CELL_SELECTED_CLS:"fancy-grid-cell-selected",GRID_CELL_ACTIVE_CLS:"fancy-grid-cell-active",GRID_CELL_EVEN_CLS:"fancy-grid-cell-even",GRID_CELL_WRAPPER_CLS:"fancy-grid-cell-wrapper",GRID_CELL_DIRTY_CLS:"fancy-grid-cell-dirty",GRID_CELL_DIRTY_EL_CLS:"fancy-grid-cell-dirty-el",GRID_PSEUDO_CELL_CLS:"fancy-grid-pseudo-cell",GRID_COLUMN_CLS:"fancy-grid-column",GRID_COLUMN_OVER_CLS:"fancy-grid-column-over",GRID_COLUMN_SELECT_CLS:"fancy-grid-column-select",GRID_COLUMN_SELECTED_CLS:"fancy-grid-column-selected",GRID_COLUMN_ELLIPSIS_CLS:"fancy-grid-column-ellipsis",GRID_COLUMN_ORDER_CLS:"fancy-grid-column-order",GRID_COLUMN_TEXT_CLS:"fancy-grid-column-text",GRID_COLUMN_SORT_ASC:"fancy-grid-column-sort-ASC",GRID_COLUMN_SORT_DESC:"fancy-grid-column-sort-DESC",GRID_COLUMN_COLOR_CLS:"fancy-grid-column-color",GRID_COLUMN_RESIZER_CLS:"fancy-grid-column-resizer",GRID_COLUMN_ROW_DRAG_CLS:"fancy-grid-column-row-drag",GRID_COLUMN_SPARKLINE_CLS:"fancy-grid-column-sparkline",GRID_COLUMN_SPARKLINE_BULLET_CLS:"fancy-grid-column-sparkline-bullet",GRID_COLUMN_SPARK_PROGRESS_DONUT_CLS:"fancy-grid-column-spark-progress-donut",GRID_COLUMN_CHART_CIRCLE_CLS:"fancy-grid-column-chart-circle",GRID_COLUMN_GROSSLOSS_CLS:"fancy-grid-column-grossloss",GRID_COLUMN_PROGRESS_CLS:"fancy-grid-column-progress",GRID_COLUMN_PROGRESS_BAR_CLS:"fancy-grid-column-progress-bar",GRID_COLUMN_H_BAR_CLS:"fancy-grid-column-h-bar",GRID_COLUMN_ACTION_ITEM_CLS:"fancy-grid-column-action-item",GRID_ROW_OVER_CLS:"fancy-grid-cell-over",GRID_ROW_EDIT_CLS:"fancy-grid-row-edit",GRID_ROW_EDIT_BUTTONS_CLS:"fancy-grid-row-edit-buttons",GRID_ROW_EDIT_BUTTON_UPDATE_CLS:"fancy-edit-row-button-update",GRID_ROW_EDIT_BUTTON_CANCEL_CLS:"fancy-edit-row-button-cancel",GRID_ROW_GROUP_CLS:"fancy-grid-group-row",GRID_ROW_GROUP_INNER_CLS:"fancy-grid-group-row-inner",GRID_ROW_GROUP_COLLAPSED_CLS:"fancy-grid-group-row-collapsed",GRID_ROW_SUMMARY_CLS:"fancy-grid-summary-row",GRID_ROW_SUMMARY_CONTAINER_CLS:"fancy-grid-summary-container",GRID_ROW_SUMMARY_BOTTOM_CLS:"fancy-grid-summary-row-bottom",GRID_ROW_EXPAND_CLS:"fancy-grid-expand-row",GRID_ROW_EXPAND_OVER_CLS:"fancy-grid-expand-row-over",GRID_ROW_EXPAND_SELECTED_CLS:"fancy-grid-expand-row-selected",GRID_ROW_DRAG_EL_CLS:"fancy-grid-row-drag-el",GRID_BODY_CLS:"fancy-grid-body",MENU_CLS:"fancy-menu",MENU_ITEM_CLS:"fancy-menu-item",MENU_ITEM_IMAGE_CLS:"fancy-menu-item-image",MENU_ITEM_TEXT_CLS:"fancy-menu-item-text",MENU_ITEM_SIDE_TEXT_CLS:"fancy-menu-item-side-text",MENU_ITEM_ACTIVE_CLS:"fancy-menu-item-active",MENU_ITEM_RIGHT_IMAGE_CLS:"fancy-menu-item-right-image",MENU_ITEM_EXPAND_CLS:"fancy-menu-item-expand",MENU_ITEM_DISABLED_CLS:"fancy-menu-item-disabled",MENU_ITEM_SEP_CLS:"fancy-menu-item-sep",MENU_ITEM_NO_IMAGE_CLS:"fancy-menu-item-no-image",TAB_WRAPPER_CLS:"fancy-tab-wrapper",TAB_ACTIVE_WRAPPER_CLS:"fancy-active-tab-wrapper",TAB_TBAR_CLS:"fancy-toolbar-tab",TAB_TBAR_ACTIVE_CLS:"fancy-toolbar-tab-active",BUTTON_CLS:"fancy-button",BUTTON_DISABLED_CLS:"fancy-button-disabled",BUTTON_PRESSED_CLS:"fancy-button-pressed",BUTTON_IMAGE_CLS:"fancy-button-image",BUTTON_IMAGE_COLOR_CLS:"fancy-button-image-color",BUTTON_TEXT_CLS:"fancy-button-text",BUTTON_DROP_CLS:"fancy-button-drop",BUTTON_MENU_CLS:"fancy-button-menu",SEG_BUTTON_CLS:"fancy-seg-button",TOOLTIP_CLS:"fancy-tooltip",TOOLTIP_INNER_CLS:"fancy-tooltip-inner",SEPARATOR_CLS:"fancy-separator",FOOTER_STATUS_CLS:"fancy-footer-status",STATUS_SOURCE_TEXT_CLS:"fancy-status-source-text",STATUS_SOURCE_LINK_CLS:"fancy-status-source-link",FOOTER_SOURCE_CLS:"fancy-footer-source",PICKER_MONTH_CELL_ACTIVE_CLS:"fancy-month-picker-cell-active",PICKER_MONTH_CLS:"fancy-month-picker",PICKER_BUTTON_BACK_CLS:"fancy-picker-button-back",PICKER_BUTTON_NEXT_CLS:"fancy-picker-button-next",PICKER_MONTH_ACTION_BUTTONS_CLS:"fancy-month-picker-action-buttons",PICKER_DATE_CLS:"fancy-date-picker",PICKER_DATE_CELL_TODAY_CLS:"fancy-date-picker-cell-today",PICKER_DATE_CELL_ACTIVE_CLS:"fancy-date-picker-cell-active",PICKER_DATE_CELL_OUT_RANGE_CLS:"fancy-date-picker-cell-out-range",PICKER_BUTTON_DATE_CLS:"fancy-picker-button-date",PICKER_BUTTON_DATE_WRAPPER_CLS:"fancy-picker-button-date-wrapper",PICKER_BUTTON_TODAY_CLS:"fancy-picker-button-today",PICKER_BUTTON_TODAY_WRAPPER_CLS:"fancy-picker-button-today-wrapper"}),Fancy.ANIMATE_DURATION=300,function(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t.test(e)},n=t(/opera/),i=!n&&t(/msie/),r=window.chrome,o=window.navigator,a=o.vendor,s=o.userAgent.indexOf("Edge")>-1,l=o.userAgent.match("CriOS"),d=function(){var e=o.userAgent.indexOf("OPR")>-1;return l?!0:null!==r&&"undefined"!=typeof r&&"Google Inc."===a&&e===!1&&s===!1?!0:!1}(),c=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var t=navigator.userAgent,n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e};11===c()&&(i=!0),i===!1&&s&&(i=!0),Fancy.apply(Fancy,{isOpera:n,isIE:i,isChrome:d}),Fancy.getViewSize=function(){var e=[];return Fancy.isIE?(e[0]=document.documentElement.clientHeight,e[1]=document.documentElement.clientWidth):(e[0]=window.innerHeight,e[1]=window.innerWidth),e},Fancy.getScroll=function(){var e=document.documentElement,t=document.body;return e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:t?[t.scrollTop,t.scrollLeft]:[0,0]},Fancy.getMouseWheelEventName=function(){return"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll"},Fancy.getWheelDelta=function(e){var t=0;return e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t},Fancy.isTouch=void 0!==document.ontouchstart,Fancy.i18n={},Fancy.currencies={map:{EUR:"€",USD:"$",GBP:"£",RUB:"₽",CZK:"Kč",AUD:"$",JPY:"¥",PLN:"zł",TRY:"₺",DKK:"kr",KRW:"₩",BRL:"R$",CNY:"¥",SEK:"kr",CAD:"$",NOK:"kr",IDR:"Rp"}}}(),Fancy.modules={},function(){var e={};Fancy.loadModule=function(t,n){var i=document.getElementsByTagName("body")[0],r=document.createElement("script"),o=t,a=Fancy.DEBUG?".js":".min.js",n=n||function(){},s=Fancy.version.replace(/\./g,""),l=Fancy.MODULESDIR||FancyGrid.MODULESDIR||"https://cdn.fancygrid.com/modules/";Fancy.MODULELOAD!==!1&&Fancy.MODULESLOAD!==!1&&(t=t.replace(/ /g,"-"),a+=Fancy.DEBUG?"?_dc="+ +new Date:"?_v="+s,Fancy.Modules.on("loaded",function(e,i){i===t&&(Fancy.modules[o]=!0,n(t))}),e[t]||(e[t]=!0,r.src=l+t+a,r.charset="utf-8",r.onload=function(){Fancy.Modules.fire("loaded",t)},r.onerror=function(){throw new Error("[FancyGrid error] - module "+t+" was not loaded")},i.appendChild(r)))},Fancy.loadLang=function(e,t){if(void 0!==Fancy.i18n[e])return!0;var n=document.getElementsByTagName("body")[0],i=document.createElement("script"),r=".js",o=Fancy.MODULESDIR||FancyGrid.MODULESDIR||"https://cdn.fancygrid.com/modules/";i.src=o+"i18n/"+e+r,i.charset="utf-8",i.async="true",i.onload=function(){t({lang:Fancy.i18n[e]})},n.appendChild(i)},Fancy.loadStyle=function(){var e=document.querySelectorAll("link");if(!Fancy.stylesLoaded){Fancy.each(e,function(e){/fancy\./.test(e.href)&&(Fancy.stylesLoaded=!0)});var e=document.querySelectorAll("link");if(!Fancy.stylesLoaded&&(Fancy.each(e,function(e){/fancy\./.test(e.href)&&(Fancy.stylesLoaded=!0)}),!Fancy.stylesLoaded)){var t=document.getElementsByTagName("head")[0],n=document.createElement("link"),i="fancy",r=Fancy.DEBUG?".css":".min.css",o=Fancy.version.replace(/\./g,""),a=Fancy.MODULESDIR||FancyGrid.MODULESDIR||"https://cdn.fancygrid.com/";a=a.replace("modules/",""),a=a.replace("modules",""),r+=Fancy.DEBUG?"?_dc="+ +new Date:"?_v="+o,n.href=a+i+r,n.rel="stylesheet",t.appendChild(n)}}}}(),Fancy.fullBuilt=!0,Fancy.themes={},Fancy.defineTheme=function(e,t){var n={};t.extend?Fancy.apply(n,Fancy.getTheme(t.extend).config):"default"!==e&&Fancy.apply(n,Fancy.getTheme("default").config),Fancy.apply(n,t.config),t.config=n,Fancy.themes[e]=t},Fancy.getTheme=function(e){var t={config:{}};return Fancy.isObject(e)?(Fancy.applyIf(t,Fancy.themes[e.name||"default"]),Fancy.apply(t.config,Fancy.themes[e.name||"default"].config),Fancy.apply(t.config,e.config),t):Fancy.themes[e]},Fancy.defineTheme("default",{config:{cellHeaderHeight:30,cellWidth:70,minCellWidth:40,cellHeight:32,titleHeight:42,subTitleHeight:42,barHeight:38,bottomScrollHeight:12,minCenterWidth:100,panelBorderWidth:2,groupRowHeight:31,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,2,2,2],knobOffSet:2,fieldHeight:37,charWidth:7}}),Fancy.defineTheme("blue",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7}}),Fancy.defineTheme("gray",{config:{panelBorderWidth:0,gridBorders:[0,0,1,0],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7}}),Fancy.defineTheme("dark",{config:{panelBorderWidth:1,gridBorders:[0,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7}}),Fancy.defineTheme("sand",{config:{panelBorderWidth:1,gridBorders:[0,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7}}),Fancy.defineTheme("bootstrap",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7}}),Fancy.defineTheme("bootstrap-no-borders",{config:{panelBorderWidth:0,gridBorders:[0,0,0,0],gridWithoutPanelBorders:[0,0,0,0],panelBodyBorders:[0,0,0,0],columnLines:!1,charWidth:8}}),Fancy.String={format:function(e){var t,n,i;if("array"===Fancy.typeOf(arguments[1]))t=arguments[1];else for(i=arguments.length,t=[],n=1;i>n;n++)t[n-1]=arguments[n];return e.replace(/\[(\d+)]/g,function(e,n){return t[n]})},upFirstChar:function(e){return e[0].toLocaleUpperCase()+e.substr(1,e.length)},trim:function(e){return e.replace(/\s/g,"")}},Fancy.Array={copy:function(e,t){if(!t)return e.slice();for(var n=[],i=0,r=e.length;r>i;i++)switch(Fancy.typeOf(e[i])){case"object":n[i]=Fancy.Object.copy(e[i]);break;case"array":n[i]=Fancy.Array.copy(e[i]);break;default:n=e[i]}return n},each:function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)},count:function(e){return e.length},sum:function(e){var t=0,n=e.length,i=0;if(Fancy.isArray(e[0]))for(i=[];n>t;t++)for(var r=0,o=e[t].length;o>r;r++)void 0===i[r]&&(i[r]=0),i[r]+=e[t][r];else for(;n>t;t++)i+=e[t];return i},min:function(e){return Math.min.apply(this,e)},max:function(e){return Math.max.apply(this,e)},average:function(e){for(var t=0,n=0,i=e.length;i>n;n++)t+=e[n];return t/e.length},insert:function(e,t,n){var i=e.splice(t,e.length-t);return e=e.concat(n).concat(i)}},Fancy.Object={copy:function(e){var t={};for(var n in e)t[n]=e[n];return t},isEmpty:function(e){var t=!0;for(var n in e)t=!1;return t}},Fancy.Date={daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],dayIndexes:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],format:function(e,t,n,i){var r,o,a,s,l,d,c,u,h,f,g,p,m,v,y,C="",i=i||"";i=i.toLocaleLowerCase(),void 0===n?n=Fancy.i18n.en:Fancy.isString(n)&&(n=Fancy.i18n[n]);for(var w=0,b=t.length;b>w;w++){var x=t[w];switch(x){case"i":o=e.getMinutes(),C+=10>o?"0"+o:o;break;case"s":if(o=e.getSeconds(),"sql"===i){if("ss"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);C+=10>o?"0"+o:o,w++}else C+=10>o?"0"+o:o;break;case"S":if(o=e.getSeconds(),"sql"!==i)throw new Error("[FancyGrid Error] - Invalid date format: "+t);if("SS"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);C+=10>o?"0"+o:o,w++;break;case"a":r=e.getHours(),C+=13>r?n.date.am:n.date.pm;break;case"A":r=e.getHours(),C+=13>r?n.date.AM:n.date.PM;break;case"n":C+=e.getMonth();break;case"j":C+=e.getDate();break;case"m":if(y=e.getMonth()+1,"sql"===i)if("mm"===t.substr(w,2))10>y&&(y="0"+y),C+=y,w++;else{if("mi"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);o=e.getMinutes(),C+=10>o?"0"+o:o,w++}else 10>y&&(y="0"+y),C+=y;break;case"d":if(v=e.getDate(),"sql"===i){if("dd"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);10>v&&(v="0"+v),C+=v,w++}else 10>v&&(v="0"+v),C+=v;break;case"Y":if("sql"===i)if("YYYY"===t.substr(w,4))C+=e.getFullYear(),w+=3;else{if("YY"!==t.substr(0,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);String(e.getFullYear()).substr(2,C.length),w+=1}else C+=e.getFullYear();break;case"y":if("sql"===i)if("yyyy"===t.substr(w,4))C+=e.getFullYear(),w+=3;else{if("yy"!==t.substr(0,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);String(e.getFullYear()).substr(2,C.length),w+=1}else C+=String(e.getFullYear()).substr(2,C.length);break;case"D":if(a=e.getDay(),"sql"===i){if("DD"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);C+=n.date.days[a].substr(0,3),w++}else C+=n.date.days[a].substr(0,3);break;case"l":s=e.getDay(),C+=n.date.days[s];break;case"N":l=e.getDay(),0===l&&(l=7),C+=l;break;case"w":d=e.getDay(),C+=d;break;case"F":c=e.getMonth(),C+=n.date.months[c];break;case"M":if(u=e.getMonth(),"sql"===i)if("MM"===t.substr(w,2))C+=n.date.months[u].substr(0,3),w+=1;else{if("MI"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);o=e.getMinutes(),C+=10>o?"0"+o:o,w++}else C+=n.date.months[u].substr(0,3);break;case"t":"sql"===i?C+=" ":(h=new Date(e.getFullYear(),e.getMonth(),0).getDate(),C+=h);break;case"T":if("sql"!==i)throw new Error("[FancyGrid Error] - Invalid date format: "+t);C+=" ";break;case"g":f=e.getHours()%12,C+=f;break;case"G":f=e.getHours(),C+=f;break;case"h":if(r=e.getHours(),"sql"===i){if("hh"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);C+=r>12?r-12:r>9&&13>r?r:"0"+r,w+=1}else C+=r>12?r-12:r>9&&13>r?r:"0"+r;break;case"H":if(g=e.getHours(),"sql"===i){if("HH"!==t.substr(w,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);C+=10>g?"0"+g:g,w+=1}else C+=10>g?"0"+g:g;break;case"u":p=e.getMilliseconds(),C+=p;break;case"U":m=Number(e)/1e3,C+=m;break;default:C+=x}}return C},parse:function(e,t,n){var i,r=new Date,o=r.getFullYear(),a=r.getMonth(),s=r.getDate(),l=0,d=0,c=0,u=0,n=n||"";n=n.toLocaleLowerCase();for(var h=0,f=t.length;f>h;h++){var g,p,m,v=t[h];switch(v){case"n":var y;"0"===e[1]||"1"===e[1]||"2"===e[1]?(y=e[0]+e[1],e=e.substr(2,e.length)):(y=e[0],e=e.substr(1,e.length)),a=Number(y);break;case"j":Fancy.isNumber(parseInt(e[1]))?(g=e[0]+e[1],e=e.substr(2,e.length)):(g=e[0],e=e.substr(1,e.length)),s=Number(g);break;case"h":if("sql"===n){if("hh"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);var C;isNaN(Number(e[1]))?(C=e[0],e=e.substr(1,e.length)):(C=e[0]+e[1],e=e.substr(2,e.length),h+=1),l=Number(C)}else{var C;"0"===e[1]||"1"===e[1]||"2"===e[1]?(C=e[0]+e[1],e=e.substr(2,e.length)):(C=e[0],e=e.substr(1,e.length)),l=Number(C)}break;case"a":"m"===e[1]&&(l+=12),e=e.substr(2,e.length);break;case"A":"M"===e[1]&&(l+=12),e=e.substr(2,e.length);break;case"i":d=e[0]+e[1],e=e.substr(2,e.length);break;case"s":if("sql"===n){if("ss"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);c=e[0]+e[1],e=e.substr(2,e.length),h++}else c=e[0]+e[1],e=e.substr(2,e.length);break;case"S":if("sql"===n){if("SS"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);c=e[0]+e[1],e=e.substr(2,e.length),h++}else c=e[0]+e[1],e=e.substr(2,e.length);break;case"u":u=e[0]+e[1]+e[2],e=e.substr(3,e.length);break;case"m":if("sql"===n)if("mm"===t.substr(h,2))switch(e[0]){case"0":case"1":case"2":case"3":isNaN(parseInt(e[1]))?(a=Number(e[0])-1,e=e.substr(1,e.length)):(a=Number(e[0]+e[1])-1,e=e.substr(2,e.length)),h+=1;break;default:a=Number(e[0])-1,e=e.substr(1,e.length)}else{if("mi"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);d=e[0]+e[1],e=e.substr(2,e.length),h++}else switch(e[0]){case"0":case"1":case"2":case"3":isNaN(parseInt(e[1]))?(a=Number(e[0])-1,e=e.substr(1,e.length)):(a=Number(e[0]+e[1])-1,e=e.substr(2,e.length));break;default:a=Number(e[0])-1,e=e.substr(1,e.length)}break;case"d":if("sql"===n){if("dd"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);isNaN(parseInt(e[1]))?(s=Number(e[0]),e=e.substr(1,e.length)):(s=Number(e[0]+e[1]),e=e.substr(2,e.length)),h++}else isNaN(parseInt(e[1]))?(s=Number(e[0]),e=e.substr(1,e.length)):(s=Number(e[0]+e[1]),e=e.substr(2,e.length));break;case"Y":if("sql"===n)if("YYYY"===t.substr(h,4))o=Number(e[0]+e[1]+e[2]+e[3]),e=e.substr(4,e.length),h+=3;else{if("YY"!==t.substr(0,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);o=Number(e[0]+e[1]),e=e.substr(2,e.length),h+=1,o=51>o?Number("20"+o):Number("19"+o)}else o=Number(e[0]+e[1]+e[2]+e[3]),e=e.substr(4,e.length);break;case"y":if("sql"===n)if("yyyy"===t.substr(h,4))o=Number(e[0]+e[1]+e[2]+e[3]),e=e.substr(4,e.length),h+=3;else{if("yy"!==t.substr(0,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);o=Number(e[0]+e[1]),e=e.substr(2,e.length),h+=1,o=51>o?Number("20"+o):Number("19"+o)}else o=Number(e[0]+e[1]),o=51>o?Number("20"+o):Number("19"+o),e=e.substr(2,e.length);break;case"D":if("sql"===n){if("DD"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);isNaN(parseInt(e[1]))?(s=Number(e[0]),e=e.substr(1,e.length)):(s=Number(e[0]+e[1]),e=e.substr(2,e.length)),h++}else e=e.substr(3,e.length);break;case"l":for(m=e[0]+e[1]+e[2],g=0,p=7;p>g;g++){var w=lang.days[g];if(m===w.substr(0,3)){e=e.substr(w.length,e.length);break}}break;case"N":e=e.substr(1,e.length);break;case"w":e=e.substr(1,e.length);break;case"F":for(m=e[0]+e[1]+e[2],g=0,p=7;p>g;g++){var b=lang.months[g];if(m===b.substr(0,3)){e=e.substr(b.length,e.length);break}}break;case"M":if("sql"===n)if("MM"===t.substr(h,2))switch(e[0]){case"0":case"1":case"2":case"3":isNaN(parseInt(e[1]))?(a=Number(e[0])-1,e=e.substr(1,e.length)):(a=Number(e[0]+e[1])-1,e=e.substr(2,e.length)),h+=1;break;default:a=Number(e[0])-1,e=e.substr(1,e.length)}else{if("MI"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);d=e[0]+e[1],e=e.substr(2,e.length),h++}else e=e.substr(3,e.length);break;case"t":e="sql"===n?e.substr(1,e.length):e.substr(2,e.length);break;case"T":if("sql"!==n)throw new Error("[FancyGrid Error] - Invalid date format: "+t);e=e.substr(1,e.length);break;case"G":Fancy.isNumber(parseInt(e[1]))?(l=Number(e[0]+e[1]),e=e.substr(2,e.length)):(l=Number(e[0]),e=e.substr(1,e.length));break;case"g":e=e.substr(1,e.length);break;case"H":if("sql"===n){if("HH"!==t.substr(h,2))throw new Error("[FancyGrid Error] - Invalid date format: "+t);var C;isNaN(Number(e[1]))?(C=e[0],e=e.substr(1,e.length)):(C=e[0]+e[1],e=e.substr(2,e.length),h+=1),l=Number(C)}else l=Number(e[0]+e[1]),e=e.substr(2,e.length);break;default:e=e.substr(1,e.length)}}return i=new Date(o,a,s,l,d,c,u)},getDaysInMonth:function(e){var t=e.getMonth();return 1===t&&Fancy.Date.isLeapYear(e)?29:Fancy.Date.daysInMonth[t]},getFirstDayOfMonth:function(e){var t=(e.getDay()-(e.getDate()-1))%7;return 0>t?t+7:t},isLeapYear:function(e){var t=e.getFullYear();return!(0!==(3&t)||!(t%100||t%400===0&&t))},getMonthNumber:function(e,t){return new Date(e,t+1,0).getDate()}},Fancy.Number={isFloat:function(e){return Number(e)===e&&e%1!==0},getPrecision:function(e){return(e+"").split(".")[1].length+1},correctFloat:function(e){return parseFloat(e.toPrecision(14))}},Fancy.Collection=function(e){var t=this;if(t.items=[],t.keys=[],t.map={},t.indexMap={},t.length=0,e)if(e.length>0)for(var n=0,i=e.length;i>n;n++)t.add(n,e[n]);else for(var r in e)t.add(r,e[r])},Fancy.Collection.prototype={add:function(e,t){var n=this;n.items.push(t),n.keys.push(e),n.map[e]=t,n.indexMap[e]=n.length,n.length++},remove:function(e){var t=this,n=t.indexMap[e];t.items.splice(n,1),t.keys.splice(n,1),delete t.indexMap[n],delete t.map[e],t.length--,t.updateIndexMap()},updateIndexMap:function(){var e=this,t=0,n=e.keys.length;for(e.indexMap={};n>t;t++)e.indexMap[e.keys[t]]=t},removeAll:function(){var e=this;e.items=[],e.keys=[],e.indexMap={},e.map={},e.length=0},get:function(e){return this.map[e]},each:function(e){for(var t=this,n=0,i=t.length;i>n;n++)e(t.keys[n],t.items[n],n,t.length)}},Fancy.Template=function(e){var t=this;Fancy.isArray(e)?t.tpl=e.join(""):t.tpl=e,t.compile()},Fancy.Template.prototype={re:/\{([\w\-]+)\}/g,getHTML:function(e){return this.compiled(e||{})},compile:function(){function fn(e,t){return t="values['"+t+"']","'+("+t+" === undefined ? '' : "+t+")+'"}var me=this;return eval("me.compiled = function(values){ return '"+me.tpl.replace(me.re,fn)+"';};"),me}},Fancy.key={BACKSPACE:8,TAB:9,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_PLUS:107,NUM_MINUS:109,NUM_DOT:110,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,DOT:190},Fancy.Key={isNum:function(e){var t=Fancy.key;switch(e){case t.ZERO:case t.ONE:case t.TWO:case t.THREE:case t.FOUR:case t.FIVE:case t.SIX:case t.SEVEN:case t.EIGHT:case t.NINE:case t.NUM_ZERO:case t.NUM_ONE:case t.NUM_TWO:case t.NUM_THREE:case t.NUM_FOUR:case t.NUM_FIVE:case t.NUM_SIX:case t.NUM_SEVEN:case t.NUM_EIGHT:case t.NUM_NINE:return!0;default:return!1}},isNumControl:function(e,t){var n=Fancy.key;if(Fancy.Key.isNum(e))return!0;if(t.shiftKey&&187===e)return!0;switch(e){case n.NUM_PLUS:case 189:case n.NUM_MINUS:case n.NUM_DOT:case n.BACKSPACE:case n.DELETE:case n.TAB:case n.ENTER:case n.RETURN:case n.SHIFT:case n.CTRL:case n.ALT:case n.ESC:case n.END:case n.HOME:case n.LEFT:case n.UP:case n.RIGHT:case n.DOWN:case n.INSERT:case n.DOT:return!0;default:return!1}}},function(){var e={},t={},n=function(e,t){for(var n in t.prototype)void 0===e.prototype[n]&&(e.prototype[n]=t.prototype[n])},i=function(){this.waitMixins={}};i.prototype={items:new Fancy.Collection,add:function(e,t){var n=e.split("."),i=1,r=n.length-1;Fancy.ns(e);for(var o=Fancy.global[n[0]];r>i;i++)o=o[n[i]];n.length>1?o[n[n.length-1]]=t:Fancy.global[n[0]]=t,this.items.add(e,t)},get:function(e){return this.items.get(e)},waitMixin:function(e,t){var n=this;n.waitMixins[e]=n.waitMixins[e]||{waiters:[]},n.waitMixins[e].waiters.push(t)},getMixin:function(e){var t=e.split("."),n=1,i=t.length,r=Fancy.global[t[0]];if(void 0===r)return!1;for(;i>n;n++)if(r=r[t[n]],void 0===r)return!1;return r}},Fancy.ClassManager=new i,Fancy.define=function(i,r){var r=r||{},o=[];if(Fancy.isArray(i)&&(o=i,i=o[0]),r.constructor===Object&&(void 0===r.extend?r.constructor=function(){}:r.constructor=function(){this.Super("constructor",arguments)}),void 0===r.extend)e[i]=r.constructor;else{e[i]=r.constructor;var a;switch(typeof r.extend){case"string":a=Fancy.ClassManager.get(r.extend),e[i].prototype.$Super=Fancy.ClassManager.get(r.extend);break;case"function":a=r.extend,e[i].prototype.$Super=r.extend}delete r.extend,e[i].prototype.Super=function(e,t){var n=this;switch(n.$Iam?n.$Iam=Fancy.ClassManager.get(n.$Iam.prototype.$Super.prototype.$name):n.$Iam=Fancy.ClassManager.get(n.$Super.prototype.$name),e){case"const":case"constructor":n.$Iam.apply(n,t);break;default:n.$Iam.prototype[e].apply(n,t)}delete n.$Iam},n(e[i],a)}e[i].prototype.$name=i,r.mixins&&(Fancy.mixin(e[i].prototype,r.mixins),delete e[i].prototype.mixins),void 0!==r.plugins&&(void 0===e[i].prototype.$plugins&&(e[i].prototype.$plugins=[]),e[i].prototype.$plugins=e[i].prototype.$plugins.concat(r.plugins),delete e[i].prototype.plugins);for(var s in r)e[i].prototype[s]=r[s];var l=e[i];r.singleton===!0&&(delete e[i],l=new l(r),e[i]=l),o.length>1?Fancy.each(o,function(e){Fancy.ClassManager.add(e,l)}):Fancy.ClassManager.add(i,l),r.type?(t[r.type]=l,Fancy.addWidgetType(r.type,l)):r.ptype&&(t[r.type]=l,Fancy.addPluginByType(r.ptype,l))},Fancy.getClassByType=function(e){return t[e]}}(),Fancy.MixinClass=function(){},Fancy.MixinClass.prototype={initId:function(){var e=this,t=e.prefix||Fancy.prefix;e.id=e.id||Fancy.id(null,t),Fancy.addWidget(e.id,e)},initPlugins:function(){var e,t,n,i=this,r=i;if(i.plugins=i.plugins||[],i._plugins&&(i.plugins=i.plugins.concat(i._plugins)),void 0!==i.plugins&&(i.$plugins=i.plugins,delete i.plugins),void 0!==i.$plugins)for(var o,a=0,s=i.$plugins,l=s.length,d={};l>a;a++){n=s[a],n.widget=r;var c=n.type||n.ptype;if(d[c]!==!0){if(d[c]=!0,e=Fancy.getPluginByType(c),void 0===e)throw new Error("[FancyGrid Error] - some of module was not loaded. Grid plugin does not exist - "+c);t=new e(n),o=n.inWidgetName||t.inWidgetName,void 0!==o&&(r[o]=t)}}}},Fancy.define("Fancy.Data",{constructor:function(e){var t=this;if(t.map={},e)for(var n=0,i=e.length,r=t.map;i>n;n++)r[n]=e[n];t.length=0},add:function(e,t){this.map[e]=t,this.length++},get:function(e){return this.map[e]}}),Fancy.define("Fancy.Model",{constructor:function(e){var t=this,n={},i=t.fields||[],r=0,o=i.length;if(Fancy.isArray(e)){for(;o>r;r++){var a=i[r];n[a]=e[r]}void 0===n.id&&(Fancy.idSeed++,n.id=Fancy.idSeed+1e3),t.data=n,t.id=t.data.id}else{if(e.id?t.id=e.id:(Fancy.idSeed++,t.id=Fancy.idSeed+1e3,e.id=t.id),void 0===t.fields){i=[];for(var a in e)i.push(a);t.fields=i}for(o=i.length;o>r;r++){var a=i[r];void 0===e[a]?n[a]="":n[a]=e[a]}n.id||(t.fields.push("id"),e.id||(e.id=t.id),n.id=e.id),t.data=n}},get:function(e){var t=this;return void 0===e?t.data:t.data[e]},set:function(e,t){var n=this;if(void 0===t&&Fancy.isObject(e))for(var i in e)n.set(i,e[i]);else n.data[e]=t}}),Fancy.define("Fancy.PluginManager",{singleton:!0,constructor:function(){this.ptypes=new Fancy.Data},addPlugin:function(e,t){this.ptypes.add(e,t)},getPlugin:function(e){return this.ptypes.get(e)}}),Fancy.addPluginByType=function(e,t){Fancy.PluginManager.addPlugin(e,t)},Fancy.getPluginByType=function(e){return Fancy.PluginManager.getPlugin(e)},function(){var e=Fancy;e.define("Fancy.WidgetManager",{singleton:!0,constructor:function(){this.wtypes=new e.Data,this.widgets=new e.Data},addWidgetType:function(e,t){t.prototype.wtype=e,this.wtypes.add(e,t)},getWidgetClassByType:function(e){return this.wtypes.get(e)},addWidget:function(e,t){this.widgets.add(e,t)},getWidget:function(e){return this.widgets.get(e)}});var t=e.WidgetManager;e.addWidgetType=function(e,n){t.addWidgetType(e,n)},e.getWidgetClassByType=function(e){return t.getWidgetClassByType(e)},e.addWidget=function(e,n){t.addWidget(e,n)},e.getWidget=function(e){return t.getWidget(e)}}(),function(){var e=0,t={};Fancy.define(["Fancy.Event","Fancy.Observable"],{mixins:[Fancy.MixinClass],constructor:function(e){var t=this;if(Fancy.applyConfig(t,e||{}),t.$events={},t.listeners||t.events)for(var n=t.listeners||t.events,i=0,r=n.length;r>i;i++){var o=n[i],a=null,s=null,l=null,d=0,c=[];for(var u in o)switch(u){case"scope":l=o[u];break;case"params":c=o[u];break;case"delay":d=o[u];break;default:a=u,s=o[u]}if(null===a)throw new Error("Event was not set");switch(Fancy.typeOf(s)){case"string":s=t[s],o.handler=s,void 0===o.scope&&(l=t),o.scope=l;break;case"function":break;default:throw new Error("Handler has wrong type or not defined")}if(Fancy.isArray(c)===!1)throw new Error("params must be array");t.addEvent(a),t.on(a,s,l,c,d)}},on:function(n,i,r,o,a){if(void 0===this.$events[n])throw new Error("Event name is not set: "+n);if(void 0===i)throw new Error("Handler is undefined. Name of event is "+n+".");i.$fancyFnSeed=e,t[e]=i,e++,this.$events[n].push({fn:i,scope:r,params:o||[],delay:a})},un:function(e,t){var n=this,i=n.$events[e];if(!i)return!1;for(var r=0,o=i.length;o>r;r++){var a=i[r];if(a.fn.$fancyFnSeed===t.$fancyFnSeed)return a.toRemove=!0,!0}return!1},once:function(e,t,n){var i=this,r=function(){t.apply(this,arguments),i.un(e,r)};i.on(e,r,n)},unAll:function(){this.$events={}},unAllByType:function(e){this.$events[e]=[]},fire:function(e){var t=this,n=t.$events[e];if(!n)return!1;for(var i=1,r=arguments.length,o=[t];r>i;i++)o.push(arguments[i]);for(var i=0,r=n.length;r>i;i++){var a=n[i],s=[];a.toRemove!==!0?(s=s.concat(o),a.params&&(s=s.concat(a.params)),a.delay?setTimeout(function(){a.fn.apply(a.scope||t,s)},a.delay):a.fn.apply(a.scope||t,s)):(n.splice(i,1),i--,r=n.length)}},addEvent:function(e){return this.addEvents(e)},addEvents:function(e){var t=this;if(arguments.length>1){for(var n=[],i=0,r=arguments.length;r>i;i++)n[i]=arguments[i];e=n}if("string"===Fancy.typeOf(e))t.$events[e]=t.$events[e]||[];else if("array"===Fancy.typeOf(e))for(var i=0,r=e.length;r>i;i++)t.$events[e[i]]=t.$events[e[i]]||[]},has:function(e){var t=this.$events[e];return t?0!==t.length:!1}}),Fancy.define("Fancy.Modules",{extend:Fancy.Event,singleton:!0,constructor:function(){this.Super("const",arguments),this.init()},init:function(){this.addEvents("loaded")}})}(),Fancy.Mixin("Fancy.store.mixin.Paging",{initPaging:function(){var e=this;void 0!==e.paging&&(Fancy.isObject(e.paging)&&Fancy.apply(e,e.paging),e.calcPages(),e.changeDataView())},firstPage:function(){var e=this;e.calcPages(),e.showPage=0,"server"===e.pageType?e.loadPage():e.changeDataView()},prevPage:function(){var e=this;e.calcPages(),e.showPage--,e.showPage<0&&(e.showPage=0),"server"===e.pageType?e.loadPage():e.changeDataView()},nextPage:function(){var e=this;e.calcPages(),e.showPage++,e.showPage===e.pages&&e.showPage--,e.showPage<0&&(e.showPage=0),"server"===e.pageType?e.loadPage():e.changeDataView()},lastPage:function(){var e=this;e.calcPages(),e.showPage=e.pages-1,e.showPage<0&&(e.showPage=0),"server"===e.pageType?e.loadPage():e.changeDataView()},calcPages:function(){var e=this;if("server"===e.pageType){var t=e.pages;if(e.pages=Math.ceil(e.getTotal()/e.pageSize),!isNaN(t)&&t>e.pages)return e.showPage--,e.showPage<0&&(e.showPage=0),"needs reload"}else e.pages=Math.ceil(e.getTotal()/e.pageSize);e.showPage>=e.pages&&(e.showPage=e.pages-1),e.showPage<0&&(e.showPage=0),e.fire("changepages",e.showPage)},setPage:function(e){var t=this;t.showPage=e,t.showPage===t.pages&&t.showPage--,t.showPage<0&&(t.showPage=0),"server"===t.pageType?t.loadPage():t.changeDataView()},refresh:function(){var e=this;"server"===e.pageType?e.loadPage():e.changeDataView()},processPagingData:function(e){var t=this;void 0!==e.totalCount&&(t.totalCount=e.totalCount),t.checkPagingType(e),t.setData(e[t.readerRootProperty]),t.changeDataView({stoppedFilter:!0}),"needs reload"===t.calcPages()&&t.loadPage()},checkPagingType:function(e){var t=this;void 0!==e.totalCount&&e.totalCount!==e[t.readerRootProperty].length&&(t.totalCount=e.totalCount,t.pageType="server",void 0===t.remoteSort&&(t.remoteSort=!0))},loadPage:function(){var e=this;e.loadData()},setPageSize:function(e){var t=this;t.pageSize=e,t.calcPages(),"server"===t.pageType?t.loadPage():t.changeDataView()}}),Fancy.Mixin("Fancy.store.mixin.Proxy",{pageParam:"page",startParam:"start",limitParam:"limit",sortParam:"sort",directionParam:"dir",keyParam:"key",valueParam:"value",filterParam:"filter",autoLoad:!0,autoSave:!0,saveOrder:["create","update","destroy"],batch:!0,filterOperators:{"<":"lt",">":"gt","<=":"lteq",">=":"gteq","=":"eq","==":"eq","===":"stricteq","!=":"noteq","!==":"notstricteq","":"like","*":"likeor","|":"or"},loadedTimes:0,initProxy:function(){var e=this;e.proxy=e.data.proxy||{};var t=e.proxy;void 0!==t.autoLoad&&(e.autoLoad=t.autoLoad),void 0!==t.autoSave&&(e.autoSave=t.autoSave),void 0!==t.batch&&(e.batch=t.batch),e.initReader(),e.initWriter(),"rest"===e.proxy.type?e.initRest():(e.initServerAPI(),e.initActionMethods(),e.checkProxy()),e.autoLoad&&e.loadData()},checkProxy:function(){var e=this,t=e.proxy;if(void 0===t.api.read)throw new Error("[FancyGrid Error] - in data proxy there is not url")},checkUrl:function(){var e=this,t=e.proxy;if(void 0===t.url)throw new Error("[FancyGrid Error] - in data proxy there is not url")},initServerAPI:function(){var e=this,t=e.proxy;t.api=t.api||{},t.url&&(t.api.read=t.url),(t.api.update||t.api.read||t.api.create&&t.api.destroy)&&(e.proxyType="server")},initActionMethods:function(){var e=this,t=e.proxy,n=t.methods||{},i=t.method||"GET";n.create=n.create||i,n.read=n.read||i,n.update=n.update||i,n.destroy=n.destroy||i,t.methods=n},loadData:function(){var e=this,t=e.proxy,n={},i=t.headers||{};Fancy.apply(n,e.params),Fancy.applyIf(n,t.params),e.fire("beforeload"),"server"===e.pageType&&(n[e.pageParam]=e.showPage,n[e.limitParam]=e.pageSize,n[e.startParam]=e.showPage*e.pageSize),e.loading=!0,Fancy.Ajax({url:t.api.read,method:t.methods.read,params:n,getJSON:!0,headers:i,success:function(t,n,i){e.loadedTimes++,e.loading=!1,e.defineModel(t[e.readerRootProperty]),e.paging?e.processPagingData(t):(e.setData(t[e.readerRootProperty]),e.widget.setSidesHeight()),e.fire("change"),e.fire("load"),e.fire("serversuccess",t,i)},error:function(t,n,i){e.fire("servererror",n,i,t)}})},proxyCRUD:function(e,t,n,i){var r=this;switch(e){case"UPDATE":r.proxyServerUpdate(t,n,i);break;case"DESTROY":r.proxyServerDestroy(t,n);break;case"CREATE":r.proxyServerCreate(t,n)}},proxyServerUpdate:function(e,t,n){var i=this,r=i.proxy,o={},a="json"===i.writerType;Fancy.apply(o,i.params),Fancy.applyIf(o,r.params),r.api.update&&(a?o=Fancy.isArray(e)&&void 0===t&&void 0===n?e:i.prepareWriterJSONParams(e,t,n):(o.id=e,o[i.keyParam]=t,o[i.valueParam]=n,o.action="update"),i.loading=!0,i.fire("beforeupdate",e,t,n),Fancy.Ajax({url:r.api.update,method:r.methods.update,params:o,sendJSON:a,success:function(r,o,a){i.loading=!1,i.fire("update",e,t,n),i.fire("serversuccess",r,a)},error:function(e,t,n){i.fire("servererror",t,n,e)}}))},proxyServerDestroy:function(e,t){var n=this,i=n.proxy,r={},o="json"===n.writerType||n.autoSave===!1;Fancy.apply(r,n.params),Fancy.applyIf(r,i.params),o&&Fancy.isArray(e)?r=e:t?r=t:r.id=e,n.loading=!0,n.fire("beforedestroy"),Fancy.Ajax({url:i.api.destroy,method:i.methods.destroy,params:r,sendJSON:o,success:function(t,i,r){n.loading=!1,n.fire("destroy",e,t),n.fire("serversuccess",t,r)},error:function(e,t,i){n.fire("servererror",t,i,e)}})},proxyServerCreate:function(e,t){var n=this,i=n.proxy,r={},o="json"===n.writerType||n.autoSave===!1;Fancy.apply(r,n.params),Fancy.applyIf(r,i.params),o&&Fancy.isArray(e)?r=e:t?r=t:(r.id=e,void 0===r.id&&delete r.id),n.loading=!0,n.fire("beforecreate"),Fancy.Ajax({url:i.api.create,method:i.methods.create,params:r,sendJSON:o,success:function(t,i,r){if(n.loading=!1,Fancy.isObject(t.data)&&String(e)!==String(t.data.id))n.changeItemId(e,t.data.id);else if(Fancy.isArray(t.data))for(var o=0,a=e.length;a>o;o++)String(e[o].id)!==String(t.data[o].id)&&n.changeItemId(String(e[o].id),String(t.data[o].id));n.fire("create",t.data),n.fire("serversuccess",t,r)},error:function(e,t,i){n.fire("servererror",t,i,e)}})},save:function(){for(var e=this,t=e.removed,n=e.changed,i=e.inserted,r=0,o=e.saveOrder.length;o>r;r++)switch(e.saveOrder[r]){case"create":e.saveInsertActions(i);break;case"update":e.saveChangeActions(n);break;case"destroy":e.saveRemoveActions(t)}e.changed={length:0},e.removed={length:0},e.inserted={length:0}},saveChangeActions:function(e){var t=this;if(e.length)if(t.batch){var n=[];for(var i in e)if("length"!==i){var r=e[i],o={id:i};if(t.writeAllFields)o=t.getById(i).data;else for(var a in r)"length"!==a&&(o[a]=r[a].value);n.push(o)}1===n.length?(n=n[0],t.proxyCRUD("UPDATE",n.id,n)):t.proxyCRUD("UPDATE",n)}else for(var i in e)if("length"!==i){var r=e[i],n={};if(t.writeAllFields)n=t.getById(i).data;else for(var a in r)"length"!==a&&(n[a]={id:r.id});t.proxyCRUD("UPDATE",i,n)}},saveRemoveActions:function(e){var t=this;if(0!==e.length)if(t.batch){var n=[];for(var i in e)if("length"!==i){var r=e[i],o={id:i};if(t.writeAllFields)o=t.getById(i).data;else for(var a in r)"length"!==a&&(o={id:r.id});n.push(o)}1===n.length?(n=n[0],t.proxyCRUD("DESTROY",n.id,n)):t.proxyCRUD("DESTROY",n)}else for(var i in e)if("length"!==i){var r=e[i],n={};if(t.writeAllFields)n=r;else for(var a in r)"length"!==a&&(n[a]=r[a].value);t.proxyCRUD("DESTROY",i,n)}},saveInsertActions:function(e){var t=this;if(0!==e.length)if(t.batch){var n=[];for(var i in e)if("length"!==i){var r=e[i],o={id:i};if(t.writeAllFields)o=t.getById(i).data;else for(var a in r.data)o[a]=r.data[a];n.push(o)}1===n.length?(n=n[0],t.proxyCRUD("CREATE",n.id,n)):t.proxyCRUD("CREATE",n)}else for(var i in e)if("length"!==i){var r=e[i],n={};if(t.writeAllFields)n=r;else for(var a in r)"length"!==a&&(n[a]=r[a].value);t.proxyCRUD("CREATE",i,n)}}}),Fancy.Mixin("Fancy.store.mixin.Rest",{initRest:function(){var e=this;e.proxyType="server",e.checkUrl(),e.initRestServerAPI(),e.initRestActionMethods()},initRestServerAPI:function(){var e=this,t=e.proxy,n=t.url;t.api=t.api||{},t.api.create=n,t.api.read=n,t.api.update=n,t.api.destroy=n},initRestActionMethods:function(){var e=this,t=e.proxy,n=t.methods||{};n.create=n.create||t.method||"POST",n.read=n.read||t.method||"GET",n.update=n.update||t.method||"PUT",n.destroy=n.destroy||t.method||"DELETE",t.methods=n}}),Fancy.Mixin("Fancy.store.mixin.Reader",{readerType:"json",readerRootProperty:"data",initReader:function(){var e=this,t=e.proxy;t.reader&&e.configReader(t.reader)},configReader:function(e){var t=this;switch(Fancy.typeOf(e)){case"string":switch(e){case"json":t.readerType=e;break;default:throw new Error("[FancyGrid Error] - reader "+e+" does not exist")}break;case"object":switch(e.type){case void 0:t.readerType="json";break;case"json":t.readerType=e.type;break;default:throw new Error("[FancyGrid Error] - reader "+e.type+" does not exist")}e.root&&(t.readerRootProperty=e.root)}}}),Fancy.Mixin("Fancy.store.mixin.Writer",{writerType:"string",writeAllFields:!1,initWriter:function(){var e=this,t=e.proxy;t.writer&&e.configWriter(t.writer)},configWriter:function(e){var t=this;switch(e.allFields&&(t.writeAllFields=e.allFields,e.writeAllFields=e.allFields),Fancy.typeOf(e)){case"string":switch(e){case"json":case"string":t.writerType=e;break;default:throw new Error("[FancyGrid Error] - writer "+e.type+" does not exist")}break;case"object":switch(e.type){case void 0:t.writerType="string";break;case"json":case"string":t.writerType=e.type;break;default:throw new Error("[FancyGrid Error] - writer "+e+" does not exist")}e.writeFields&&(t.writeFields=!0),e.root&&(t.writerRootProperty=e.root)}},prepareWriterJSONParams:function(e,t,n){var i=this,r=i.params||{},o={};return o.id=e,i.writeAllFields?Fancy.applyIf(o,i.getById(e).data):void 0===n&&Fancy.isObject(t)?Fancy.applyIf(o,t):void 0===n&&Fancy.isArray(t)?o=t:o[t]=n,i.rootProperty?(r[i.rootProperty]=o,r):o}}),Fancy.Mixin("Fancy.store.mixin.Sort",{multiSortLimit:3,sort:function(e,t,n,i){var r,o,a=this;switch(a.fire("beforesort",{key:"key",action:e}),a.multiSort&&a.multiSortInited!==!0&&a.initMultiSort(),t){case"number":case"checkbox":case"switcher":case"progressdonut":case"progressbar":case"grossloss":case"date":case"currency":r="sortNumber",o="number";break;case"string":case"combo":case"text":case"color":case"tree":r="sortString",o="string";break;default:throw new Error("[FancyGrid error] - does not exist sort function for type "+t)}if(a.multiSort?a.addSorter(n,e.toLocaleUpperCase(),o):(a.sorters=[],a.sorters.push({key:n,dir:e.toLocaleUpperCase().toLocaleUpperCase(),type:o,_type:t})),a.remoteSort)return void a.serverSort(e,t,n);if(i.type=t,"drop"===e?delete a.order:a[r](e,n,i),a.multiSort)for(var s=0,l=a.sorters.length-1;l>s;s++)a.multiSortOrder(s);a.changeDataView(),a.fire("sort",{key:n,action:e})},serverSort:function(e,t,n){var i=this;i.params=i.params||{},i.multiSort?i.params.sorters=i.sorters:(i.params[i.sortParam]=n,"drop"===e?delete i.params[i.directionParam]:i.params[i.directionParam]=e),i.loadData()},sortNumber:function(e,t,n){var i,r,o,a=this,s=[];if(a.isTree){s=a.getColumnOriginalValues("id");var l=a.treeGetDataAsTree(),d=a.treeSort(l,e,t,"number");i=a.treeReadSortedId(d)}else if(a.grouping){var c=a.getColumnOriginalValuesByGroup(t,a.grouping.by,n);switch(i=[],r=0,o=c.length,e){case"asc":for(;o>r;r++)s=s.concat(c[r].values),i=i.concat(c[r].values.sort(function(e,t){return e-t}));break;case"desc":for(;o>r;r++)s=s.concat(c[r].values),i=i.concat(c[r].values.sort(function(e,t){return t-e}))}}else{s=a.getColumnOriginalValues(t,n);for(var u=[],h=Fancy.Array.copy(s),r=0,o=h.length;o>r;r++)isNaN(h[r])&&(u.push(h[r]),h.splice(r,1),o--);switch(e){case"asc":i=Fancy.Array.copy(h).sort(function(e,t){return e-t}),i=i.concat(u);break;case"desc":i=Fancy.Array.copy(h).sort(function(e,t){return t-e}),i=u.concat(i)}}a.order=a.getOrder(s,i)},sortString:function(e,t){var n,i,r,o=this,a=[];if(o.isTree){a=o.getColumnOriginalValues("id");var s=o.treeGetDataAsTree(),l=o.treeSort(s,e,t,"string");n=o.treeReadSortedId(l)}else if(o.grouping){var d=o.getColumnOriginalValuesByGroup(t,o.grouping.by);switch(n=[],i=0,r=d.length,e){case"asc":for(;r>i;i++)a=a.concat(d[i].values),n=n.concat(d[i].values.sort());break;case"desc":for(;r>i;i++)a=a.concat(d[i].values),n=n.concat(d[i].values.sort().reverse())}}else switch(a=o.getColumnOriginalValues(t),e){case"asc":n=Fancy.Array.copy(a).sort();break;case"desc":n=Fancy.Array.copy(a).sort(),n=n.reverse()}o.order=o.getOrder(a,n)},getOrder:function(e,t){for(var n,i={},r=0,o=e.length,a=[];o>r;r++){var s=e[r];void 0===i[s]&&(i[s]=[]),i[s].push(r)}for(r=0;o>r;r++)s=t[r],n=i[s],a.push(n[0]),n.length>1&&n.splice(0,1);return a},changeOrderIndexes:function(e,t){var n=this;if(void 0===t&&(t="-"),void 0!==n.order){var i=0,r=n.order.length;if("-"===t)for(;r>i;i++)n.order[i]>e&&n.order[i]--;else for(;r>i;i++)n.order[i]>=e&&n.order[i]++}},initMultiSort:function(){var e=this;e.multiSortInited=!0,e.sorters||(e.sorters=[])},addSorter:function(e,t,n){for(var i=this,r=0,o=i.sorters.length;o>r;r++)if(i.sorters[r].key===e){i.sorters.splice(r,1);break}i.sorters.push({key:e,dir:t.toLocaleUpperCase(),type:n}),i.sorters.length>i.multiSortLimit&&i.sorters.shift()},multiSortOrder:function(e){for(var t,n,i,r=this,o=r.widget,a=o.store,s=r.sorters[e],l=r.sorters[e+1].key,d=s.key,c=0,u=r.getTotal(),h=[],f=[],g=[];u>c;c++)t=a.get(r.order[c],l,!0),i=a.get(r.order[c],d,!0),t===n?(h[h.length-1].push(i),f[f.length-1].push(r.order[c])):(h.push([i]),f.push([r.order[c]])),n=t;for(c=0,u=f.length;u>c;c++)if(1!==f[c].length){var p;if("number"===s.type)switch(s.dir){case"ASC":p=Fancy.Array.copy(h[c]).sort(function(e,t){return e-t});break;case"DESC":p=Fancy.Array.copy(h[c]).sort(function(e,t){return t-e})}else if("string"===s.type)switch(s.dir){case"ASC":p=Fancy.Array.copy(h[c]).sort();break;case"DESC":p=Fancy.Array.copy(h[c]).sort().reverse()}var m,v=f[c],y=[];m=r.getOrder(h[c],p);for(var C=0,w=m.length;w>C;C++)y.push(v[m[C]]);g=g.concat(y)}else g.push(f[c][0]);r.order=g},reSort:function(){var e=this;Fancy.each(e.sorters,function(t){e.sort(t.dir.toLocaleLowerCase(),t.type,t.key,{})})}}),Fancy.Mixin("Fancy.store.mixin.Edit",{remove:function(e){var t,n,i,r=this,o=e.id;switch(Fancy.typeOf(e)){case"string":case"number":o=e;break;default:o=e.id||e.data.id}if(r.isTree&&r.treeCollapsing!==!0){var a=r.getById(o),s=r.getById(a.get("parentId"));if(a.get("leaf")===!1&&a.get("expanded")){var l=a.data.child.length-1;Fancy.each(a.data.child,function(e,t,n){r.remove(n[l]),l--})}s&&Fancy.each(s.data.child,function(e,t){return e.id===o?(s.data.child.splice(t,1),!0):void 0})}if("server"===r.proxyType&&r.autoSave&&r.proxy.api.destroy)return void r.proxyCRUD("DESTROY",o);if(e.rowIndex)t=r.dataViewIndexes[e.rowIndex],n=e.rowIndex;else if(t=r.getDataIndex(o),n=r.getRow(o),void 0===t&&void 0===n)return;if(r.isTree&&r.treeCollapsing&&r.filteredData){var d;Fancy.each(r.data,function(e,t){return e.data.id===o?(d=t,!0):void 0}),i=r.data.splice(d,1)[0]}else i=r.data.splice(t,1)[0];r.paging&&(n+=r.showPage*r.pageSize),r.order&&r.order.splice(n,1),r.changeOrderIndexes&&r.changeOrderIndexes(t),r.paging&&(0!==r.showPage&&r.showPage*r.pageSize===r.getTotal()&&r.showPage--,r.calcPages()),delete r.map[o],r.treeCollapsing||r.fire("remove",o,i,t),r.changeDataView()},removeAt:function(e){var t=this;t.remove({rowIndex:e,id:t.getId(e)})},removeAll:function(){var e=this;e.data=[],e.dataView=[],delete e.order,e.paging&&(e.showPage=0,e.calcPages()),e.filters&&(delete e.filters,delete e.filteredData,delete e.filterOrder)},add:function(e){var t=this;return t.insert(t.getTotal(),e)},insert:function(e,t){var n=this;if(n.grouping&&!n.bugFixGrouping&&(n.defineModel(t,!0),n.bugFixGrouping=!0),n.addIndex=e,void 0===t.id){Fancy.idSeed++;var i=Fancy.idSeed+1e3;"server"===n.proxyType?t.id="Temp-"+i:t.id=i}return n.getById(t.id)&&n.remove(t.id),"server"===n.proxyType&&n.autoSave&&n.proxy.api.create?(n.once("create",n.onCreate,n),void n.proxyCRUD("CREATE",t)):n.insertItem(t,e)},insertItem:function(e){var t=this,n=t.model,i=new n(e),r=t.addIndex;return t.treeExpanding||t.fire("beforeinsert"),delete t.addIndex,t.data.splice(r,0,i),t.order&&(t.order.splice(r,0,r),t.changeOrderIndexes(r,"+"),t.order[r]--),t.changeDataView(),t.map[e.id]=i,t.treeExpanding||t.fire("insert",i),i},onCreate:function(e,t){return this.insertItem(t)}}),Fancy.Mixin("Fancy.store.mixin.Grouping",{expand:function(e,t){var n=this,i=n.data,r=0,o=i.length,a=[],s={},l={};for(n.filteredData&&(i=n.filteredData,o=i.length),n.expanded=n.expanded||{},n.expanded[t]=!0;o>r;r++){var d=i[r];n.expanded[d.data[e]]&&(a.push(d),s[d.id]=a.length-1,l[a.length-1]=r)}n.dataView=a,n.dataViewMap=s,n.dataViewIndexes=l},collapse:function(e,t){var n=this,i=n.data,r=0,o=i.length,a=[],s={},l={};for(n.expanded=n.expanded||{},delete n.expanded[t];o>r;r++){var d=i[r];n.expanded[d.data[e]]&&(a.push(d),s[d.id]=a.length-1,l[a.length-1]=r)}n.dataView=a,n.dataViewMap=s,n.dataViewIndexes=l},changeOrderByGroups:function(e,t){var n=this,i={},r=[];Fancy.each(e,function(e){i[e]=[]}),Fancy.isArray(n.data)&&Fancy.each(n.data,function(e){var n=e.data[t];i[n]&&i[n].push(e)}),Fancy.each(e,function(e){r=r.concat(i[e])}),n.grouping={by:t},n.data=r},getColumnOriginalValuesByGroup:function(e,t,n){var i=this,r=i.data,o=0,a=r.length,s=[],l=[],d=r[0].data[t];if(n&&n.format&&"date"===n.type)for(;a>o;o++)r[o].data[t]===d?l.push(Fancy.Date.parse(r[o].data[e],n.format,n.mode)):(s.push({values:l,groupName:d}),l=[],d=r[o].data[t],o--);else for(;a>o;o++)r[o].data[t]===d?l.push(r[o].data[e]):(s.push({values:l,groupName:d}),l=[],d=r[o].data[t],o--);return a>0&&s.push({values:l,groupName:d}),s},initGroups:function(e){var t=this,n=t.widget,i=n.grouping,e=e||"data",r=i.by;if(!r)throw new Error("[FancyGrid Error] - not set by param in grouping");var o=t.getColumnOriginalValues(r,{dataProperty:e,groupMap:!0}),a={};Fancy.each(o,function(e){void 0===a[e]&&(a[e]=0),a[e]++});var s=[];for(var l in a)s.push(l);return{groups:s,_groups:a}},orderDataByGroupOnStart:function(){var e=this,t=e.widget.grouping,n=e.initGroups(),i=n.groups,r={},o=[];Fancy.each(i,function(e){var t=e.toLocaleUpperCase();r[t]=e,o.push(t)}),o=o.sort();for(var a=0,s=i.length;s>a;a++)i[a]=r[o[a]];e.changeOrderByGroups(i,t.by),e.expanded={},t.collapsed?e.collapsed=!0:Fancy.each(i,function(n){t.expanded&&void 0!==t.expanded[n]||(e.expanded[n]=!0)}),e.changeDataView({doNotFired:!0})}}),Fancy.Mixin("Fancy.store.mixin.Filter",{filterCheckItem:function(e){var t=this,n=t.widget,i=n.filter.caseSensitive,r=n.filter.successRepeat,o=t.filters,a=!0,s=!1;if(t.isTree){var l=e.get("child");e.get("expanded");if(l){var d=[];if(Fancy.each(l,function(e,n){var i=e.data?e:new t.model(e),r=t.filterCheckItem(i);r&&d.push(e)}),e.set("filteredChild",d),d.length)return!0}}for(var c in o){var u=o[c],h=e.data[c];if(t.smartIndexes&&t.smartIndexes[c])h=t.smartIndexes[c](e.data);else if(/\./.test(c)){var f=c.split(".");h=e.data[f[0]][f[1]]}"date"===u.type&&(h=Number(Fancy.Date.parse(h,u.format.read,u.format.mode))),!i&&Fancy.isString(h)&&(h=h.toLocaleLowerCase());for(var g in u){switch(g){case"type":case"format":continue}var p=u[g];switch(!i&&Fancy.isString(p)&&(p=p.toLocaleLowerCase()),g){case"<":a=Number(h)<p;break;case">":a=Number(h)>p;break;case"<=":a=Number(h)<=p;break;case">=":a=Number(h)>=p;break;case"=":case"==":Fancy.isArray(p)?(Fancy.each(p,function(e,t){p[t]=String(e)}),h=String(h),a=-1!==p.indexOf(h)):a=h==p;break;case"===":Fancy.isArray(p)?(h=String(h),a=-1!==p.indexOf(h)):a=h===p;break;case"!==":a=h!==p;break;case"!=":Fancy.isArray(p)?(Fancy.each(p,function(e,t){p[t]=String(e)}),h=String(h),a=-1===p.indexOf(h)):a=h!=p;break;case"":p=String(p).toLocaleLowerCase(),h=String(h).toLocaleLowerCase(),p=p.replace(/\(/g,"bracketleft"),p=p.replace(/\)/g,"bracketright"),h=h.replace(/\(/g,"bracketleft"),h=h.replace(/\)/g,"bracketright"),a=new RegExp(p).test(h);break;case"*":a=new RegExp(String(p).toLocaleLowerCase()).test(String(h).toLocaleLowerCase()),s=!0;break;case"|":a=p[String(h).toLocaleLowerCase()]===!0;break;default:throw new Error("FancyGrid Error 5: Unknown filter "+g)}if(a===!0&&r>1&&(r--,a=!1),s===!0){if(a===!0)return!0}else if(a===!1)return!1}}return s===!0&&a===!1?!1:!0},filterData:function(){var e=this,t=e.data,n=[],i=0,r=t.length,o=[],a=[];if(e.remoteFilter)return void e.serverFilter();for(e.filteredDataMap={};r>i;i++)e.order?(o.push(e.order[i]),a=t[e.order[i]]):(o.push(i),a=t[i]),e.filterCheckItem(a)&&(n.push(a),e.filteredDataMap[a.id]=a);e.filterOrder=o,e.filteredData=n,e.paging&&e.calcPages(),e.fire("filter")},serverFilter:function(){var e=this,t="[",n=e.filters||{};for(var i in n){var r=n[i];for(var o in r){switch(o){case"type":case"format":continue}var a=e.filterOperators[o];if("or"===a){var s=[];for(var l in r[o])s.push(l);var d=s.join(", ");t+='{"operator":"'+a+'","value":"'+d+'","property":"'+i+'"},'}else t+='{"operator":"'+a+'","value":"'+r[o]+'","property":"'+i+'"},'}}t=t.replace(/\,$/,""),t+="]",e.params=e.params||{},"[]"===t?(t="",delete e.params[e.filterParam]):e.params[e.filterParam]=encodeURIComponent(t),e.loadData()}}),Fancy.Mixin("Fancy.store.mixin.Tree",{initTreeData:function(){var e=this;if(e.isTree=!0,e.data&&0!==e.data.length){var t;t=Fancy.isObject(e.data)?e.treeReadData(e.data.items):e.treeReadData(e.data),e.setData(t)}else;},treeReadData:function(e,t,n){var i=this,r=[];return t=t||1,Fancy.each(e,function(e){e.data&&(e=e.data),e.$deep=t,e.leaf=!!e.leaf,e.expanded=!!e.expanded,Fancy.isArray(e.filteredChild)&&e.filteredChild.length?e.leaf=!1:e.child&&e.child.length&&(e.leaf=!1),n&&(e.parentId=n),e.id||(Fancy.idSeed++,e.id=Fancy.idSeed+1e3),r.push(e),e.expanded&&(r=r.concat(i.treeReadData(e.child||[],t+1,e.id)))}),r},treeGetDataAsTree:function(){var e=this,t=[];return Fancy.each(e.data,function(e){1===e.get("$deep")&&t.push(e)}),t},treeSort:function(e,t,n,i){var r=this,o=[],a=[],s={},l=[];Fancy.each(e,function(e){var t=e.data||e;o.push(t[n]),void 0===s[t[n]]?s[t[n]]=e:(Fancy.isArray(s[t[n]])||(s[t[n]]=[s[t[n]]]),s[t[n]].push(e))});var d=!1,c=!1;if(o.length){d=!0,c=!0;var u;Fancy.each(e,function(e,t){var i=e.data||e;""!==i[n]&&(d=!1),void 0!==u&&u!==i[n]&&(c=!1),u=i[n]})}if("number"===i)switch(t){case"asc":a=Fancy.Array.copy(o).sort(function(e,t){return e-t});break;case"desc":a=Fancy.Array.copy(o).sort(function(e,t){return t-e})}else switch(t){case"asc":a=Fancy.Array.copy(o).sort();break;case"desc":a=Fancy.Array.copy(o).sort(),a=a.reverse()}return Fancy.each(a,function(o,a){var u=s[o];Fancy.isArray(u)&&(u=u.splice(0,1)[0]),(d||c)&&(u=e[a]);var h=u.data||u;h.child&&h.expanded&&(u.data.sorted=r.treeSort(h.child,t,n,i)),l.push(u)}),l},treeReadSortedId:function(e){var t=this,n=[];return Fancy.each(e,function(e,i){n.push(e.id),e=t.getById(e.id),e.data.expanded&&(e.data.sorted?n=n.concat(t.treeReadSortedId(e.data.sorted)):e.data.child&&(n=n.concat(t.treeReadSortedId(e.data.child))))}),n},treeReBuildData:function(){var e=this,t=[],n=[];Fancy.each(e.data,function(e){1===e.get("$deep")&&t.push(e.data)}),n=e.treeReadData(t),e.setData(n)}}),Fancy.Mixin("Fancy.store.mixin.Dirty",{initTrackDirty:function(){var e=this;e.changed={length:0},e.removed={length:0},e.inserted={length:0},e.undoActions=[],e.redoActions=[],e.on("remove",e.onDirtyRemove,e),e.on("set",e.onDirtySet,e),e.on("insert",e.onDirtyInsert,e)},onDirtySet:function(e,t){var n=this,i=t.id;if("$selected"!==t.key){if(void 0===n.changed[i]?(n.changed[i]={length:1},n.changed.length++):n.changed[i].length++,void 0===n.changed[i][t.key]&&(n.changed[i][t.key]={originValue:t.oldValue}),n.changed[i][t.key].value=t.value,n.changed[i][t.key].value===n.changed[i][t.key].originValue){delete n.changed[i][t.key],n.changed[i].length--;for(var r=0,o=n.undoActions.length-1;o>=r;r++){var a=o-r,s=n.undoActions[a];if(s.id===i&&t.key===s.key){var l=n.undoActions.splice(a,1);n.redoActions.push(l)}}}else n.redoing||(n.redoActions=[]),n.undoActions.push({id:i,type:"edit",key:t.key,value:t.value,oldValue:t.oldValue});0===n.changed[i].length&&(delete n.changed[i],n.changed.length--)}},onDirtyRemove:function(e,t,n,i){var r=this;r.removed[t]=n.data,r.removed.length++,r.undoStoppped!==!0&&(r.redoing||(r.redoActions=[]),r.undoActions.push({id:t,type:"remove",data:n.data,rowIndex:i}))},onDirtyInsert:function(e,t){var n=this;n.treeExpanding||(n.inserted[t.id]=t,n.inserted.length++,n.undoStoppped!==!0&&(n.redoing||(n.redoActions=[]),n.undoActions.push({id:t.id,type:"insert",data:t.data})))}}),Fancy.define("Fancy.Store",{extend:Fancy.Event,mixins:["Fancy.store.mixin.Paging","Fancy.store.mixin.Proxy","Fancy.store.mixin.Rest","Fancy.store.mixin.Reader","Fancy.store.mixin.Writer","Fancy.store.mixin.Sort","Fancy.store.mixin.Edit","Fancy.store.mixin.Grouping","Fancy.store.mixin.Filter","Fancy.store.mixin.Search","Fancy.store.mixin.Dirty","Fancy.store.mixin.Tree"],pageSize:10,showPage:0,pages:0,dirty:!1,constructor:function(){var e=this;e.Super("const",arguments),e.init(),e.data=e.data||[],e.dataView=e.dataView||[],e.dataViewMap=e.dataViewMap||{},e.map={},e.setModel(),e.data&&(e.data.proxy?e.initProxy():e.widget.isTreeData||e.setData(e.data)),e.readSmartIndexes(),e.widget.grouping&&e.orderDataByGroupOnStart(),e.widget.isTreeData&&e.initTreeData()},init:function(){var e=this;e.addEvents("add","change","changepages","set","beforeupdate","update","beforeremove","remove","beforedestroy","destroy","beforecreate","create","beforesort","sort","beforeload","load","filter","beforeinsert","insert","servererror","serversuccess"),e.initId(),e.initPlugins(),e.paging&&e.initPaging(),e.initTrackDirty&&e.initTrackDirty()},setModel:function(){var e=this,t=e.model;if(t=void 0===t?Fancy.Model:Fancy.ClassManager.get(e.model),e.model=t,e.fields=t.prototype.fields,void 0===e.fields)throw new Error("needed to set fields in Model of Store")},setData:function(e){var t,n=this,i=0,r=e.length,o=n.model;if(n.data=[],n.dataView=[],n.dataViewMap={},n.dataViewIndexes={},n.collapsed)for(;r>i;i++)t=new o(e[i]),n.data[i]=t,n.map[t.id]=t;else if(n.expanded)for(;r>i;i++)t=new o(e[i]),n.data[i]=t,n.map[t.id]=t;else if(n.paging)for(;r>i;i++)t=new o(e[i]),n.data[i]=t,i<n.pageSize&&(n.dataView[i]=t,n.dataViewMap[t.id]=i,n.dataViewIndexes[i]=i),n.map[t.id]=t;else for(;r>i;i++)t=new o(e[i]),n.data[i]=t,n.dataView[i]=t,n.dataViewMap[t.id]=i,n.dataViewIndexes[i]=i,n.map[t.id]=t;n.isTree&&Fancy.each(n.data,function(e,t){e.get("expanded")&&Fancy.each(e.data.child,function(t,i){var r=n.getById(t.id);e.data.child[i]=r})})},getItem:function(e){var t=this;return t.dataView[e]},get:function(e,t,n){var i,r=this;if(void 0===e)return r.data;var o=r.dataView[e];return o?void 0===t?(i=o.data,void 0===i.id&&(i.id=r.dataView[e].id),r.dataView[e].data):"none"===t?"":n?(o=r.data[e],"id"===t?o.data[t]||o.id:o.data[t]):(o=r.dataView[e],"id"===t?o.data[t]||o.id:o.data[t]):(o=r.order?r.data[r.order[e]]:r.data[e],o?"id"===t?o.data[t]||o.id:o.data[t]:o)},getId:function(e){return this.dataView[e].id},getRow:function(e){return this.dataViewMap[e]},set:function(e,t,n,i){var r,o,a=this;if(-1===e?r=a.getById(i):(r=a.dataView[e],i=r.data.id||r.id),void 0===n){var s=t;for(var l in s)if("id"!==l){var d;-1===e?(o=r.get(l),r.set(l,s[l]),d=r.data):(o=a.get(e,l),a.dataView[e].data[l]=s[l],d=a.dataView[e].data),a.fire("set",{id:i,data:d,rowIndex:e,key:l,value:s[l],oldValue:o,item:r})}return void("server"===a.proxyType&&a.autoSave&&a.proxyCRUD("UPDATE",i,s))}if(o=-1===e?r.get(t):a.get(e,t),o!=n){if(-1===e)r.set(t,n);else{var c=a.dataView[e];if(c.data.parentId){var u=a.getById(c.data.parentId);Fancy.each(u.data.child,function(e,i){e.id===c.id&&(e[t]=n)})}c.data[t]=n}"server"===a.proxyType&&a.autoSave&&a.proxyCRUD("UPDATE",i,t,n);var d;d=-1===e?r.data:a.dataView[e].data,a.fire("set",{id:i,data:d,rowIndex:e,key:t,value:n,oldValue:o,item:r})}},setItemData:function(e,t){var n=this,i=n.get(e);if(n.writeAllFields&&"server"===n.proxyType)n.set(e,t);else for(var r in t)i[r]!=t[r]&&n.set(e,r,t[r])},getLength:function(){return this.dataView.length},getTotal:function(){var e=this;return"server"===e.pageType?e.totalCount:e.filteredData?e.filteredData.length:void 0===e.data?0:Fancy.isObject(e.data)?0:e.data.length},defineModel:function(e,t){var n=this,i=n.store;if(!n.model||!n.fields||0===n.fields.length||t){var e=e||n.data||i.data,r=n.getFieldsFromData(e),o="Fancy.model."+Fancy.id();Fancy.define(o,{extend:Fancy.Model,fields:r}),n.model=o,n.fields=r,n.setModel()}},getFieldsFromData:function(e){var t=e.items||e;if(e.fields)return e.fields;if(!t)throw new Error("not set fields of data");var n=t[0],i=[];void 0===t.length&&(n=t);for(var r in n)i.push(r);return i},getColumnOriginalValues:function(e,t){var n=this,i=0,r=[],t=t||{},o=t.dataProperty||"data",a=n[o],s=a.length;if(t.smartIndexFn)for(;s>i;i++)r.push(t.smartIndexFn(a[i].data));else if(t.format)if("date"===t.type)for(;s>i;i++)r.push(Fancy.Date.parse(a[i].data[e],t.format,t.mode));else for(;s>i;i++)r.push(a[i].data[e]);else if(t.groupMap)for(n.groupMap={};s>i;i++){var l=a[i],d=l.data[e];r.push(d),n.groupMap[l.id]=d}else for(;s>i;i++){var c=a[i].data||a[i];r.push(c[e])}return r},changeDataView:function(e){var t,n=this,e=e||{},i=[],r={},o=0,a=n.data.length,s=!!n.filters,l=!!n.searches,d=n.data;if(s){if(e.stoppedFilter||e.doNotFired){if(n.paging&&"server"===n.pageType)return}else n.filterData();n.remoteFilter||(d=n.filteredData,a=d.length)}l&&(n.searchData(),d=n.searchedData,a=d.length),n.dataViewIndexes={},n.dataViewMap={},n.paging&&(o="server"===n.pageType?0:n.showPage*n.pageSize,a=o+n.pageSize);var c=n.getTotal();a>n.data.length&&(a=n.data.length),s&&a>c&&(a=c),Fancy.isObject(n.data)&&(a=0);var u;if(n.order)if(n.grouping)for(t=n.grouping.by;a>o;o++)n.expanded[n.data[n.order[o]].data[t]]&&(s===!0?(n.dataViewIndexes[i.length]=n.filterOrder[o],u=d[o]):(n.dataViewIndexes[i.length]=n.order[o],u=d[n.order[o]]),i.push(u),r[u.id]=i.length-1);else for(;a>o;o++)s===!0?(n.dataViewIndexes[i.length]=n.filterOrder[o],u=d[o]):(n.dataViewIndexes[i.length]=n.order[o],u=d[n.order[o]]),i.push(u),r[u.id]=i.length-1;else if(n.grouping)for(t=n.grouping.by;a>o;o++)n.expanded[n.data[o].data[t]]&&(n.dataViewIndexes[i.length]=o,u=d[o],i.push(u),r[u.id]=i.length-1);else for(;a>o;o++)n.dataViewIndexes[i.length]=o,u=d[o],i.push(d[o]),r[u.id]=i.length-1;n.dataView=i,n.dataViewMap=r,e.doNotFired||n.fire("change")},getColumnData:function(e,t){var n=this,i=0,r=n.data.length,o=[];if(t)for(;r>i;i++)o.push(t(n.data[i].data));else for(;r>i;i++)o.push(n.data[i].data[e]);return o},getData:function(){for(var e=this,t=0,n=e.data.length,i=[];n>t;t++)i.push(e.data[t].data);return i},getDataView:function(){for(var e=this,t=0,n=e.dataView.length,i=[];n>t;t++)i.push(e.dataView[t].data);return i},getById:function(e){var t=this;return t.map[e]},changeItemId:function(e,t){var n=this,i=n.getById(e);return i?(i.id=t,void 0!==i.data.id&&(i.data.id=t),delete n.map[e],n.map[t]=i,void n.fire("changeitemid",e,t)):!1},find:function(e,t,n){var i,r=this,o=r.dataView,a=0,s=o.length,l=[];if(n)for(s=r.data.length;s>a;a++)i=r.order?r.data[r.order[a]]:r.data[a],i.data[e]===t&&l.push(a);else for(;s>a;a++)i=o[a],i.data[e]===t&&l.push(a);return l},findItem:function(e,t){for(var n,i=this,r=i.data,o=0,a=r.length,s=[];a>o;o++)n=r[o],n.data[e]===t&&s.push(n);return s},getDataIndex:function(e){for(var t,n,i=this,r=i.data,o=0,a=r.length;a>o;o++)t=r[o],t.data.id===e&&(n=o);return n},each:function(e,t){var n=this,i=n.dataView,r=0,o=i.length;if(t)for(;o>r;r++)e.apply(this,[i[r]]);else for(;o>r;r++)e(i[r])},readSmartIndexes:function(){var e=this,t=e.widget,n=0,i={};Fancy.each(t.columns,function(e){e.smartIndexFn&&(i[e.index]=e.smartIndexFn,n++)}),n&&(e.smartIndexes=i)}}),Fancy.$=window.$||window.jQuery,Fancy.nojQuery=void 0===Fancy.$,Fancy.get=function(e){var t=Fancy.typeOf(e);switch(t){case"string":return new Fancy.Element(Fancy.$("#"+e)[0]);case"array":return new Fancy.Elements(e);default:return new Fancy.Element(e)}},Fancy.Element=function(e){var t=this;t.dom=e,t.$dom=Fancy.$(e),t.length=1},Fancy.Element.prototype={last:function(){return Fancy.get(this.$dom)},closest:function(e){return Fancy.get(this.$dom.closest(e)[0])},destroy:function(){this.$dom.remove()},remove:function(){this.$dom.remove()},prev:function(){return Fancy.get(this.$dom.prev()[0])},lastChild:function(){var e=this.$dom.children();return Fancy.get(e[e.length-1])},firstChild:function(){return Fancy.get(this.$dom.children()[0])},on:function(e,t,n,i){var r=this;switch(n&&(t=Fancy.$.proxy(t,n)),i?r.$dom.on(e,i,t):r.$dom.on(e,t),e){case"mouseenter":r.onTouchEnterEvent&&r.onTouchEnterEvent(e,t,n,i);break;case"mouseleave":r.onTouchLeaveEvent&&r.onTouchLeaveEvent(e,t,n,i);break;case"mousemove":r.onTouchMove&&r.onTouchMove("touchmove",t)}},once:function(e,t,n,i){var r=this;n&&(t=Fancy.$.proxy(t,n)),i?r.$dom.one(e,i,t):r.$dom.one(e,t)},prop:function(e){return this.$dom.prop(e)},un:function(e,t,n,i){var r=this;n&&(t=Fancy.$.proxy(t,n)),i?r.$dom.off(e,i,t):r.$dom.off(e,t)},show:function(){this.$dom.show()},hide:function(){this.$dom.hide()},replaceClass:function(e,t){this.$dom.removeClass(e),this.$dom.addClass(t)},getByTag:function(e){return Fancy.get(this.$dom.find(e)[0])},getByClass:function(e){return this.$dom.find("."+e)[0]},addClass:function(e){this.addCls.apply(this,arguments)},addCls:function(e){if(this.$dom.addClass(e),arguments.length>1)for(var t=1,n=arguments.length;n>t;t++)this.addClass(arguments[t])},removeClass:function(e){this.$dom.removeClass(e)},removeCls:function(e){this.$dom.removeClass(e)},hasClass:function(e){return this.$dom.hasClass(e)},hasCls:function(e){return this.$dom.hasClass(e)},toggleClass:function(e){this.$dom.toggleClass(e)},toggleCls:function(e){this.$dom.toggleClass(e)},select:function(e){var t=this,n=t.$dom.find(e);return 1===n.length?Fancy.get(n[0]):n.length>1?Fancy.get(n):0===n.length?{length:0,dom:void 0,addClass:function(){},addCls:function(){},removeClass:function(){},removeCls:function(){},destroy:function(){},remove:function(){},css:function(){},each:function(){},last:function(){},attr:function(){}}:n},css:function(e,t){return void 0===t?this.$dom.css(e):this.$dom.css(e,t)},attr:function(e,t){return void 0===t?this.$dom.attr(e):this.$dom.attr(e,t)},append:function(e){return Fancy.get(this.$dom.append(e)[0])},after:function(e){return Fancy.get(this.$dom.after(e)[0])},next:function(){return Fancy.get(this.$dom.next()[0])},insertAfter:function(e){return Fancy.get(this.$dom.insertAfter(e)[0])},before:function(e){return Fancy.get(this.$dom.before(e)[0])},height:function(e){return e?(this.$dom.height(e),this):this.$dom.height()},width:function(e){return e?(this.$dom.width(e),this):this.$dom.width()},parent:function(e){return Fancy.get(this.$dom.parent(e)[0])},update:function(e){this.dom.innerHTML=e},hover:function(e,t){e&&this.$dom.on("mouseenter",e),e&&this.$dom.on("mouseleave",t)},position:function(){return this.$dom.position()},offset:function(){return this.$dom.offset()},focus:function(){this.$dom.focus()},blur:function(){this.$dom.blur()},within:function(e){var t,n=this,i=!0,r=!1;return e=Fancy.get(e),t=e.attr("id"),(void 0===t||""===t)&&(t=Fancy.id(),r=!0),e.attr("id",t),0===n.select("#"+t).length&&(i=!1),n.dom.id===e.dom.id&&(i=!0),r&&n.removeAttr(t),i},removeAttr:function(e){this.$dom.removeAttr(e)},item:function(){return this},animate:function(e,t,n,i){this.$dom.animate(e,t,n,i)},stop:function(){this.$dom.stop&&this.$dom.stop()},index:function(){return this.$dom.index()},onTouchEnterEvent:function(e,t,n,i){var r=this,o=Fancy.get(document.body);if(Fancy.isTouch){var a=function(e,o){var a=Fancy.id(),s="fancy-tempt-attr";r.attr(s,a);for(var l=e.originalEvent.targetTouches[0],d=[l.pageX,l.pageY],c=Fancy.get(document.elementFromPoint(d[0]-document.body.scrollLeft,d[1]-document.body.scrollTop)),u=!1,h=10,f=c;h>0&&f.dom;){if(f.attr(s)===a){u=!0;break}f=f.parent(),h--}if(!u||r.touchIn||i||(e.pageX=l.pageX,e.pageY=l.pageY,t(e,o),r.touchIn=!0),u&&i){h=10,f=c;for(var g=!1,p=c,m=[],v=0;h>0&&f.dom;){var y=f.select(i);if(0!==y.length){g=!0;var C=r.getDelegateTarget(i,y,m,v);C&&(e.currentTarget=C,e.delegateTarget=C,e.pageX=l.pageX,e.pageY=l.pageY,r.touchIn=!0,r.touchInDelegate=r.touchInDelegate||{},void 0===r.touchInDelegate[i]?r.touchInDelegate[i]=C:r.touchInDelegate[i]!==C&&(r.touchInDelegate[i]=[r.touchInDelegate[i],C]),t.apply(n,[e,C]));break}if(f.attr(s)===a)break;m.push(f.dom),p=f,f=f.parent(),h--,v++}}r.removeAttr(s)};o.on("touchmove",a)}},onTouchLeaveEvent:function(e,t,n,i){var r=this,o=Fancy.get(document.body),a=[];if(Fancy.isTouch){var s=function(e,n){var o=Fancy.id(),s="fancy-tempt-attr";if(r.attr(s,o),r.touchIn!==!0)return void r.removeAttr(s);var l=e.originalEvent.targetTouches[0],d=[l.pageX,l.pageY],c=Fancy.get(document.elementFromPoint(d[0]-document.body.scrollLeft,d[1]-document.body.scrollTop));if(!i){for(var u=!1,h=10,f=c;h>0&&f.dom;){if(f.attr(s)===o){u=!0;break}f=f.parent(),h--}if(u===!1)return e.pageX=l.pageX,e.pageY=l.pageY,r.touchIn=!1,t(e,n),void r.removeAttr(s)}if(a.length>30&&(a=a.slice(a.length-5,a.length-1)),a.push(c.dom),i&&r.touchInDelegate[i]){var g,p=Fancy.id();g=Fancy.isArray(r.touchInDelegate[i])?Fancy.get(r.touchInDelegate[i][0]):Fancy.get(r.touchInDelegate[i]),g.attr(s,p),h=10;var m=!1;for(f=c;h>0&&f.dom;){if(f.attr(s)===p){m=!0;break}f=f.parent(),h--}g.removeAttr(s),m||(delete r.touchInDelegate[i],r.touchIn=!1,e.currentTarget=g.dom,e.delegateTarget=g.dom,e.pageX=l.pageX,e.pageY=l.pageY,t(e,g.dom))}r.removeAttr(s)};o.on("touchmove",s)}},getDelegateTarget:function(e,t,n,i){for(var r=n[i-e.match(/\./g).length],o=0,a=t.length;a>o;o++)if(t.item(o).dom===r)return r;return!1},onTouchMove:function(e,t,n){var i=this,r=Fancy.get(document.body);if(Fancy.isTouch){var o=function(e,n){var r=Fancy.id(),o="fancy-tempt-attr";i.attr(o,r);for(var a=e.originalEvent.targetTouches[0],s=[a.pageX,a.pageY],l=!1,d=10,c=Fancy.get(document.elementFromPoint(s[0]-document.body.scrollLeft,s[1]-document.body.scrollTop)),u=c;d>0&&u.dom;){if(u.attr(o)===r){l=!0;break}u=u.parent(),d--}i.removeAttr(o),l&&(e.pageX=a.pageX,e.pageY=a.pageY,t(e,n))};r.on("touchmove",o)}},each:function(e){e(this,0)}},Fancy.Elements=function(e){var t=this;t.dom=e,t.$dom=e,t.length=e.length},Fancy.Elements.prototype={attr:function(e,t){var n=this,i=n.$dom;return n.length>1&&(i=n.$dom[0]),void 0===t?i.attr(e):i.attr(e,t)},addClass:function(e){this.addCls.apply(this,arguments)},addCls:function(e){for(var t=this,n=0,i=t.length;i>n;n++)Fancy.get(t.$dom[n]).addClass(e);if(arguments.length>1)for(n=1,i=arguments.length;i>n;n++)t.addClass(arguments[n])},removeClass:function(e){this.removeCls.apply(this,arguments)},removeCls:function(e){for(var t=this,n=0,i=t.length;i>n;n++)Fancy.get(t.$dom[n]).removeCls(e)},hover:function(e){this.$dom.on("mouseenter",e)},on:Fancy.Element.prototype.on,once:Fancy.Element.prototype.once,item:function(e){return Fancy.get(this.$dom[e])},css:function(e,t){for(var n=this,i=0,r=n.length;r>i;i++)Fancy.get(n.$dom[i]).css(e,t)},toggleClass:function(e){for(var t=this,n=0,i=t.length;i>n;n++)Fancy.get(t.$dom[n]).toggleClass(e)},toggleCls:function(e){for(var t=this,n=0,i=t.length;i>n;n++)Fancy.get(t.$dom[n]).toggleClass(e)},destroy:function(){for(var e=this,t=0,n=e.length;n>t;t++)Fancy.get(e.$dom[t]).destroy()},remove:function(){this.destroy()},hide:function(){for(var e=this,t=0,n=e.length;n>t;t++)Fancy.get(e.$dom[t]).hide()},show:function(){for(var e=this,t=0,n=e.length;n>t;t++)Fancy.get(e.$dom[t]).show()},index:function(){return this.$dom[0].index()},each:function(e){for(var t,n=this,i=0,r=n.length;r>i;i++)t=new Fancy.Element(n.$dom[i]),e(t,i)},last:function(){var e=this;return new Fancy.Element(e.$dom[e.length-1])}},Fancy.select=function(e){return Fancy.get(document.body).select(e)},Fancy.onReady=function(e){Fancy.$(document).ready(e)},Fancy.Ajax=function(e){var t={};e.url&&(t.url=e.url),e.success&&(t.success=e.success),e.error&&(t.error=e.error),e.method&&(t.type=e.method),e.params&&(t.data=e.params),e.sendJSON&&(t.dataType="json",t.contentType="application/json; charset=utf-8",t.data=JSON.stringify(t.data)),e.getJSON&&(t.dataType="json",t.contentType="application/json; charset=utf-8"),e.headers&&(t.headers=e.headers),Fancy.$.ajax(t)},Fancy.nojQuery&&(Fancy.$=function(){function e(e){return null==e?String(e):j[Y.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function o(e){return r(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){return"number"==typeof e.length}function s(e){return D.call(e,function(e){return null!=e})}function l(e){return e.length>0?E.fn.concat.apply([],e):e}function d(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(e){return e in B?B[e]:B[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function u(e,t){return"number"!=typeof t||A[d(e)]?t:t+"px"}function h(e){var t,n;return M[e]||(t=R.createElement(e),R.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),M[e]=n),M[e]}function f(e){return"children"in e?k.call(e.children):E.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function g(e,t){var n,i=e?e.length:0;for(n=0;i>n;n++)this[n]=e[n];this.length=i,this.selector=t||""}function p(e,t,n){for(S in t)n&&(o(t[S])||Q(t[S]))?(o(t[S])&&!o(e[S])&&(e[S]={}),Q(t[S])&&!Q(e[S])&&(e[S]=[]),p(e[S],t[S],n)):t[S]!==x&&(e[S]=t[S])}function m(e,t){return null==t?E(e):E(e).filter(t)}function v(e,n,i,r){return t(n)?n.call(e,i,r):n}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function C(e,t){var n=e.className||"",i=n&&n.baseVal!==x;return t===x?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function w(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?E.parseJSON(e):e):e}catch(t){return e}}function b(e,t){t(e);for(var n=0,i=e.childNodes.length;i>n;n++)b(e.childNodes[n],t)}var x,S,E,I,T,L,F=[],_=F.concat,D=F.filter,k=F.slice,R=window.document,M={},B={},A={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},N=/^\s*<(\w+|!)[^>]*>/,O=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,H=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,P=/^(?:body|html)$/i,G=/([A-Z])/g,W=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],V=R.createElement("table"),z=R.createElement("tr"),K={tr:R.createElement("tbody"),tbody:V,thead:V,tfoot:V,td:z,th:z,"*":R.createElement("div")},$=/complete|loaded|interactive/,X=/^[\w-]*$/,j={},Y=j.toString,q={},Z=R.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Q=Array.isArray||function(e){return e instanceof Array};return q.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=Z).appendChild(e),i=~q.qsa(r,t).indexOf(e),o&&Z.removeChild(e),i},T=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},L=function(e){return D.call(e,function(t,n){return e.indexOf(t)==n})},q.fragment=function(e,t,n){var i,r,a;return O.test(e)&&(i=E(R.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(H,"<$1></$2>")),t===x&&(t=N.test(e)&&RegExp.$1),t in K||(t="*"),a=K[t],a.innerHTML=""+e,i=E.each(k.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(r=E(i),E.each(n,function(e,t){W.indexOf(e)>-1?r[e](t):r.attr(e,t)})),i},q.Z=function(e,t){return new g(e,t)},q.isZ=function(e){return e instanceof q.Z},q.init=function(e,n){var i;if(!e)return q.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&N.test(e))i=q.fragment(e,RegExp.$1,n),e=null;else{if(n!==x)return E(n).find(e);i=q.qsa(R,e)}else{if(t(e))return E(R).ready(e);if(q.isZ(e))return e;if(Q(e))i=s(e);else if(r(e))i=[e],e=null;else if(N.test(e))i=q.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==x)return E(n).find(e);i=q.qsa(R,e)}}return q.Z(i,e)},E=function(e,t){return q.init(e,t)},E.extend=function(e){var t,n=k.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){p(e,n,t)}),e},q.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],o=i||r?t.slice(1):t,a=X.test(o);return e.getElementById&&a&&i?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:k.call(a&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},E.contains=R.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},E.type=e,E.isFunction=t,E.isWindow=n,E.isArray=Q,E.isPlainObject=o,E.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},E.inArray=function(e,t,n){return F.indexOf.call(t,e,n)},E.camelCase=T,E.trim=function(e){return null==e?"":String.prototype.trim.call(e)},E.uuid=0,E.support={},E.expr={},E.noop=function(){},E.map=function(e,t){var n,i,r,o=[];if(a(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&o.push(n);else for(r in e)n=t(e[r],r),null!=n&&o.push(n);return l(o)},E.each=function(e,t){var n,i;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},E.grep=function(e,t){return D.call(e,t)},window.JSON&&(E.parseJSON=JSON.parse),E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){j["[object "+t+"]"]=t.toLowerCase()}),E.fn={constructor:q.Z,length:0,forEach:F.forEach,reduce:F.reduce,push:F.push,sort:F.sort,splice:F.splice,indexOf:F.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=q.isZ(t)?t.toArray():t;return _.apply(q.isZ(this)?this.toArray():this,n)},map:function(e){return E(E.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return E(k.apply(this,arguments))},ready:function(e){return $.test(R.readyState)&&R.body?e(E):R.addEventListener("DOMContentLoaded",function(){e(E)},!1),this},get:function(e){return e===x?k.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return F.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):E(D.call(this,function(t){return q.matches(t,e)}))},add:function(e,t){return E(L(this.concat(E(e,t))))},is:function(e){return this.length>0&&q.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==x)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):a(e)&&t(e.item)?k.call(e):E(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return E(n)},has:function(e){return this.filter(function(){return r(e)?E.contains(this,e):E(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:E(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:E(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?E(e).filter(function(){var e=this;return F.some.call(n,function(t){return E.contains(t,e)})}):1==this.length?E(q.qsa(this[0],e)):this.map(function(){return q.qsa(this,e)}):E()},closest:function(e,t){var n=this[0],r=!1;for("object"==typeof e&&(r=E(e));n&&!(r?r.indexOf(n)>=0:q.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return E(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=E.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return m(t,e)},parent:function(e){return m(L(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||k.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return D.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return E.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=E(e).get(0),r=i.parentNode||this.length>1;return this.each(function(t){E(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){E(this[0]).before(e=E(e));for(var t;(t=e.children()).length;)e=t.first();E(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=E(this),r=i.contents(),o=n?e.call(this,t):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){E(this).replaceWith(E(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=E(this);(e===x?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return E(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return E(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;E(this).empty().append(v(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=v(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(e))for(S in e)y(this,S,e[S]);else y(this,e,v(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:x},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){y(this,e)},this)})},prop:function(e,t){return e=J[e]||e,1 in arguments?this.each(function(n){this[e]=v(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(G,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?w(i):x},val:function(e){return 0 in arguments?this.each(function(t){this.value=v(this,e,t,this.value)}):this[0]&&(this[0].multiple?E(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=E(this),i=v(this,e,t,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;if(!E.contains(R.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var i,r=this[0];if(!r)return;if(i=getComputedStyle(r,""),"string"==typeof t)return r.style[T(t)]||i.getPropertyValue(t);if(Q(t)){var o={};return E.each(t,function(e,t){o[t]=r.style[T(t)]||i.getPropertyValue(t)}),o}}var a="";if("string"==e(t))n||0===n?a=d(t)+":"+u(t,n):this.each(function(){this.style.removeProperty(d(t))});else for(S in t)t[S]||0===t[S]?a+=d(S)+":"+u(S,t[S])+";":this.each(function(){this.style.removeProperty(d(S))});return this.each(function(){this.style.cssText+=";"+a})},index:function(e){return e?this.indexOf(E(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?F.some.call(this,function(e){return this.test(C(e))},c(e)):!1},addClass:function(e){return e?this.each(function(t){if("className"in this){I=[];var n=C(this),i=v(this,e,t,n);i.split(/\s+/g).forEach(function(e){E(this).hasClass(e)||I.push(e)},this),I.length&&C(this,n+(n?" ":"")+I.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===x)return C(this,"");I=C(this),v(this,e,t,I).split(/\s+/g).forEach(function(e){I=I.replace(c(e)," ")}),C(this,I.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var i=E(this),r=v(this,e,n,C(this));r.split(/\s+/g).forEach(function(e){(t===x?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===x?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===x?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=P.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(E(e).css("margin-top"))||0,n.left-=parseFloat(E(e).css("margin-left"))||0,i.top+=parseFloat(E(t[0]).css("border-top-width"))||0,i.left+=parseFloat(E(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||R.body;e&&!P.test(e.nodeName)&&"static"==E(e).css("position");)e=e.offsetParent;return e})}},E.fn.detach=E.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});E.fn[e]=function(r){var o,a=this[0];return r===x?n(a)?a["inner"+t]:i(a)?a.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each(function(t){a=E(this),a.css(e,v(this,r,t,a[e]()))})}}),U.forEach(function(t,n){var i=n%2;E.fn[t]=function(){var t,r,o=E.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:q.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(e,t){r=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var s=E.contains(R.documentElement,r);o.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!r)return E(e).remove();r.insertBefore(e,t),s&&b(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},E.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return E(e)[t](this),this}}),q.Z.prototype=g.prototype=E.fn,q.uniq=L,q.deserializeValue=w,E.zepto=q,E}()),Fancy.nojQuery&&!function(e){function t(e){return e._zid||(e._zid=h++)}function n(e,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(m[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||s.test(e.ns))&&(!o||t(e.fn)===t(o))&&(!a||e.sel==a)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(e,t){return e.del&&!y&&e.e in C||!!t}function a(e){return w[e]||y&&C[e]||e}function s(n,r,s,l,c,h,f){var g=t(n),p=m[g]||(m[g]=[]);r.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var r=i(t);r.fn=s,r.sel=c,r.e in w&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=h;var g=h||s;r.proxy=function(e){if(e=d(e),!e.isImmediatePropagationStopped()){e.data=l;var t=g.apply(n,e._args==u?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},r.i=p.length,p.push(r),"addEventListener"in n&&n.addEventListener(a(r.e),r.proxy,o(r,f))})}function l(e,i,r,s,l){var d=t(e);(i||"").split(/\s/).forEach(function(t){n(e,t,r,s).forEach(function(t){delete m[d][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,o(t,l))})})}function d(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(E,function(e,i){var r=n[e];t[e]=function(){return this[i]=b,r&&r.apply(n,arguments)},t[i]=x}),(n.defaultPrevented!==u?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function c(e){var t,n={originalEvent:e};for(t in e)S.test(t)||e[t]===u||(n[t]=e[t]);return d(n,e)}var u,h=1,f=Array.prototype.slice,g=Fancy.isFunction,p=function(e){return"string"==typeof e},m={},v={},y="onfocusin"in window,C={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:s,remove:l},e.proxy=function(n,i){var r=2 in arguments&&f.call(arguments,2);if(g(n)){var o=function(){return n.apply(i,r?r.concat(f.call(arguments)):arguments)};return o._zid=t(n),o}if(p(i))return r?(r.unshift(n[i],n),e.proxy.apply(null,r)):e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var b=function(){return!0},x=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,r,o){var a,d,h=this;return t&&!p(t)?(e.each(t,function(e,t){h.on(e,n,i,t,o)}),h):(p(n)||g(r)||r===!1||(r=i,i=n,n=u),(r===u||i===!1)&&(r=i,i=u),r===!1&&(r=x),h.each(function(u,h){o&&(a=function(e){return l(h,e.type,r),r.apply(this,arguments)}),n&&(d=function(t){var i,o=e(t.target).closest(n,h).get(0);return o&&o!==h?(i=e.extend(c(t),{currentTarget:o,liveFired:h}),(a||r).apply(o,[i].concat(f.call(arguments,1)))):void 0}),s(h,t,r,i,n,d||a)}))},e.fn.off=function(t,n,i){var r=this;return t&&!p(t)?(e.each(t,function(e,t){r.off(e,n,t)}),r):(p(n)||g(i)||i===!1||(i=n,n=u),i===!1&&(i=x),r.each(function(){l(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=p(t)||e.isPlainObject(t)?e.Event(t):d(t),t._args=n,this.each(function(){t.type in C&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,i){var r,o;return this.each(function(a,s){r=c(p(t)?e.Event(t):t),r._args=i,r.target=s,e.each(n(s,t.type||t),function(e,t){return o=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){p(e)||(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),d(n)}}(Fancy.$),Fancy.nojQuery&&!function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(e){return r?r+e:e.toLowerCase()}var r,o,a,s,l,d,c,u,h,f,g="",p={Webkit:"webkit",Moz:"",O:"o"},m=document.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};e.each(p,function(e,n){return m.style[e+"TransitionProperty"]!==t?(g="-"+e.toLowerCase()+"-",r=n,!1):void 0}),o=g+"transform",y[a=g+"transition-property"]=y[s=g+"transition-duration"]=y[d=g+"transition-delay"]=y[l=g+"transition-timing-function"]=y[c=g+"animation-name"]=y[u=g+"animation-duration"]=y[f=g+"animation-delay"]=y[h=g+"animation-timing-function"]="",e.fx={off:r===t&&m.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:g,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(n,i,r,o,a){return e.isFunction(i)&&(o=i,r=t,i=t),e.isFunction(r)&&(o=r,r=t),e.isPlainObject(i)&&(r=i.easing,o=i.complete,a=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(n,i,r,o,a)},e.fn.anim=function(i,r,g,p,m){var C,w,b,x={},S="",E=this,I=e.fx.transitionEnd,T=!1;if(r===t&&(r=e.fx.speeds._default/1e3),m===t&&(m=0),e.fx.off&&(r=0),"string"==typeof i)x[c]=i,x[u]=r+"s",x[f]=m+"s",x[h]=g||"linear",I=e.fx.animationEnd;else{w=[];for(C in i)v.test(C)?S+=C+"("+i[C]+") ":(x[C]=i[C],w.push(n(C)));S&&(x[o]=S,w.push(o)),r>0&&"object"==typeof i&&(x[a]=w.join(", "),x[s]=r+"s",x[d]=m+"s",x[l]=g||"linear")}return b=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(I,b)}else e(this).unbind(I,b);T=!0,e(this).css(y),p&&p.call(this)},r>0&&(this.bind(I,b),setTimeout(function(){T||b.call(E)},1e3*(r+m)+25)),this.size()&&this.get(0).clientLeft,this.css(x),0>=r&&setTimeout(function(){E.each(function(){b.call(this)})},0),this},m=null}(Fancy.$),Fancy.nojQuery&&!function(e,t){function n(n,i,r,o,a){"function"!=typeof i||a||(a=i,i=t);var s={opacity:r};return o&&(s.scale=o,n.css(e.fx.cssPrefix+"transform-origin","0 0")),n.animate(s,i,null,a)}function i(t,i,r,a){return n(t,i,0,r,function(){o.call(e(this)),a&&a.call(this)})}var r=e.fn.show,o=e.fn.hide,a=e.fn.toggle;e.fn.show=function(e,i){return r.call(this),e===t?e=0:this.css("opacity",0),n(this,e,1,"1,1",i)},e.fn.hide=function(e,n){return e===t?o.call(this):i(this,e,"0,0",n)},e.fn.toggle=function(n,i){return n===t||"boolean"==typeof n?a.call(this,n):this.each(function(){var t=e(this);t["none"==t.css("display")?"show":"hide"](n,i)})},e.fn.fadeTo=function(e,t,i){return n(this,e,t,null,i)},e.fn.fadeIn=function(e,t){var n=this.css("opacity");return n>0?this.css("opacity",0):n=1,r.call(this).fadeTo(e,n,t)},e.fn.fadeOut=function(e,t){return i(this,e,null,t)},e.fn.fadeToggle=function(t,n){return this.each(function(){var i=e(this);i[0==i.css("opacity")||"none"==i.css("display")?"fadeIn":"fadeOut"](t,n)})}}(Fancy.$),Fancy.nojQuery&&!function(e){function t(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}function n(e,n,i,r){return e.global?t(n||y,i,r):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function r(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function o(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function a(e,t,i,r){var o=i.context,a="success";i.success.call(o,e,a,t),r&&r.resolveWith(o,[e,a,t]),n(i,o,"ajaxSuccess",[t,i,e]),l(a,t,i)}function s(e,t,i,r,o){var a=r.context;r.error.call(a,i,t,e),o&&o.rejectWith(a,[i,t,e]),n(r,a,"ajaxError",[i,r,e||t]),l(t,i,r)}function l(e,t,i){var o=i.context;i.complete.call(o,t,e),n(i,o,"ajaxComplete",[t,i]),r(i)}function d(){}function c(e){return e&&(e=e.split(";",2)[0]),e&&(e==S?"html":e==x?"json":w.test(e)?"script":b.test(e)&&"xml")||"text"}function u(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function h(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=u(t.url,t.data),t.data=void 0)}function f(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}function g(t,n,i,r){var o,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,l){o=e.type(l),r&&(n=i?r:r+"["+(s||"object"==o||"array"==o?n:"")+"]"),!r&&a?t.add(l.name,l.value):"array"==o||!i&&"object"==o?g(t,l,i,n):t.add(n,l)})}var p,m,v=0,y=window.document,C=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,x="application/json",S="text/html",E=/^\s*$/,I=y.createElement("a");I.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var i,r,l=t.jsonpCallback,d=(e.isFunction(l)?l():l)||"jsonp"+ ++v,c=y.createElement("script"),u=window[d],h=function(t){e(c).triggerHandler("error",t||"abort")},f={abort:h};return n&&n.promise(f),e(c).on("load error",function(o,l){clearTimeout(r),e(c).off().remove(),"error"!=o.type&&i?a(i[0],f,t,n):s(null,l||"error",f,t,n),window[d]=u,i&&e.isFunction(u)&&u(i[0]),u=i=void 0}),o(f,t)===!1?(h("abort"),f):(window[d]=function(){i=arguments},c.src=t.url.replace(/\?(.+)=\?/,"?$1="+d),y.head.appendChild(c),t.timeout>0&&(r=setTimeout(function(){h("timeout")},t.timeout)),f)},e.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n,r,l=e.extend({},t||{}),f=e.Deferred&&e.Deferred();for(p in e.ajaxSettings)void 0===l[p]&&(l[p]=e.ajaxSettings[p]);i(l),l.crossDomain||(n=y.createElement("a"),n.href=l.url,n.href=n.href,l.crossDomain=I.protocol+"//"+I.host!=n.protocol+"//"+n.host),l.url||(l.url=window.location.toString()),(r=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,r)),h(l);var g=l.dataType,v=/\?.+=\?/.test(l.url);if(v&&(g="jsonp"),l.cache!==!1&&(t&&t.cache===!0||"script"!=g&&"jsonp"!=g)||(l.url=u(l.url,"_="+Date.now())),"jsonp"==g)return v||(l.url=u(l.url,l.jsonp?l.jsonp+"=?":l.jsonp===!1?"":"callback=?")),e.ajaxJSONP(l,f);var C,w=l.accepts[g],b={},x=function(e,t){b[e.toLowerCase()]=[e,t]},S=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,T=l.xhr(),L=T.setRequestHeader;if(f&&f.promise(T),l.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",w||"*/*"),(w=l.mimeType||w)&&(w.indexOf(",")>-1&&(w=w.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(w)),(l.contentType||l.contentType!==!1&&l.data&&"GET"!=l.type.toUpperCase())&&x("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(m in l.headers)x(m,l.headers[m]);if(T.setRequestHeader=x,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=d,clearTimeout(C);var t,n=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==S){if(g=g||c(l.mimeType||T.getResponseHeader("content-type")),"arraybuffer"==T.responseType||"blob"==T.responseType)t=T.response;else{t=T.responseText;try{"script"==g?(1,eval)(t):"xml"==g?t=T.responseXML:"json"==g&&(t=E.test(t)?null:e.parseJSON(t))}catch(i){n=i}if(n)return s(n,"parsererror",T,l,f)}a(t,T,l,f)}else s(T.statusText||null,T.status?"error":"abort",T,l,f)}},o(T,l)===!1)return T.abort(),s(null,"abort",T,l,f),T;if(l.xhrFields)for(m in l.xhrFields)T[m]=l.xhrFields[m];var F="async"in l?l.async:!0;T.open(l.type,l.url,F,l.username,l.password);for(m in b)L.apply(T,b[m]);return l.timeout>0&&(C=setTimeout(function(){T.onreadystatechange=d,T.abort(),s(null,"timeout",T,l,f)},l.timeout)),T.send(l.data?l.data:null),T},e.get=function(){return e.ajax(f.apply(null,arguments))},e.post=function(){var t=f.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=f.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,a=t.split(/\s/),s=f(t,n,i),l=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(t){o.html(r?e("<div>").html(t.replace(C,"")).find(r):t),l&&l.apply(o,arguments)},e.ajax(s),this};var T=encodeURIComponent;e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(T(t)+"="+T(n))},g(i,t,n),i.join("&").replace(/%20/g,"+")}}(Fancy.$),Fancy.i18n.en={paging:{first:"First Page",last:"Last Page",prev:"Previous Page",next:"Next Page",info:"Rows [0] - [1] of [2]",page:"Page",of:"of [0]"},loadingText:"Loading...",thousandSeparator:",",decimalSeparator:".",currencySign:"$",sourceText:"Source",date:{read:"m/d/Y",write:"m/d/Y",edit:"m/d/Y",today:"Today",startDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],am:"am",pm:"pm",AM:"AM",PM:"PM",ok:"OK",cancel:"Cancel"},yes:"Yes",no:"No",dragText:"[0] selected row[1]",update:"Update",cancel:"Cancel",columns:"Columns",sortAsc:"Sort ASC",sortDesc:"Sort DESC",lock:"Lock",unlock:"Unlock",rightLock:"Right Lock"},Fancy.i18n["en-US"]=Fancy.i18n.en,Fancy.controllers={},Fancy.defineController=function(e,t){Fancy.controllers[e]=t},Fancy.defineControl=Fancy.defineController,Fancy.getController=function(e){return Fancy.controllers[e]},Fancy.getControl=Fancy.getController,Fancy.define("Fancy.DD",{extend:Fancy.Event,singleton:!0,constructor:function(e){this.Super("const",arguments),this.init()},init:function(){this.addEvents(),this.els={}},add:function(e){var t=this,n=Fancy.id(e.overEl);t.els[n]=e,e.overEl.on("mousedown",t.onMouseDown,t)},onMouseDown:function(e){var t=this,n=Fancy.get(document),i=Fancy.get(e.currentTarget),r=t.els[i.attr("id")].dragEl;e.preventDefault(),t.clientX=e.clientX,t.clientY=e.clientY,t.startX=parseInt(r.css("left")),t.startY=parseInt(r.css("top")),t.activeId=i.attr("id"),n.once("mouseup",t.onMouseUp,t),n.on("mousemove",t.onMouseMove,t)},onMouseUp:function(){var e=Fancy.get(document);e.un("mousemove",this.onMouseMove,this)},onMouseMove:function(e){var t=this,n=t.els[t.activeId],i=n.dragEl,r=e.clientX,o=e.clientY,a=t.clientX-r,s=t.clientY-o,l=t.startX-a,d=t.startY-s;0>d&&(d=0),i.css({left:l,top:d})}}),Fancy.define("Fancy.Widget",{extend:Fancy.Event,constructor:function(e){var t=this;Fancy.applyConfig(t,e),t.preInitControls(),t.Super("const",arguments),t.init(),t.initControls()},init:function(){var e=this;e.initId(),e.addEvents("beforerender","afterrender","render","show","beforehide","hide","destroy"),e.initPlugins()},renderItems:function(e){var t=this;Fancy.each(t.items,function(n,i){var r=Fancy.getClassByType(n.type);n.renderTo=e,t.items[i]=new r(n)})},preInitControls:function(){var e=this,t=e.controller||e.controllers;if(t)switch(Fancy.typeOf(t)){case"string":t=Fancy.getController(t);for(var n in t)void 0===e[n]&&(e[n]=t[n]);break;case"array":for(var i=[],r=0,o=t.length;o>r;r++){var a=Fancy.getController(t[r]);for(var n in a)"controls"!==n?void 0===e[n]&&(e[n]=a[n]):i=i.concat(a.controls)}e.controls=i}},initControls:function(){var e=this;if(void 0!==e.controls)for(var t=e.controls,n=0,i=t.length;i>n;n++){var r=t[n];if(void 0===r.event)throw new Error("[FancyGrid Error]: - not set event name for control");if(void 0===r.handler)throw new Error("[FancyGrid Error]: - not set handler for control");var o=r.event,a=r.handler,s=r.scope||e,l=r.selector;Fancy.isString(a)&&(a=e[a]),l?!function(t,n,i,r){e.$events[t]?e.on(t,function(e,t){var o=t.e.target,a=Fancy.get(o),s=a.parent(),l=s.select(r);if(1===l.length&&l.within(o))n.apply(i,arguments);else if(l.length>1)for(var d=0,c=l.length;c>d;d++)l.item(d).within(o)&&n.apply(i,arguments)},i):e.on("render",function(){e.el.on(t,n,i,r)})}(o,a,s,l):void 0===l&&void 0===r.widget&&e.on(o,a,s)}},css:function(e,t){return this.el.css(e,t)},addClass:function(e){this.el.addCls(e)},addCls:function(e){this.el.addCls(e)},removeClass:function(e){this.el.removeCls(e)},removeCls:function(e){this.el.removeCls(e)},hasClass:function(e){return this.el.hasCls(e)},hasCls:function(e){return this.el.hasCls(e)},toggleClass:function(e){this.el.toggleCls(e)},toggleCls:function(e){this.el.toggleCls(e)},destroy:function(){this.el&&this.el.destroy()},show:function(){this.el.show()},hide:function(){this.el.hide()},initTpl:function(){var e=this;e.tpl&&(e.tpl=new Fancy.Template(e.tpl))}}),Fancy.define("Fancy.Plugin",{extend:Fancy.Event,constructor:function(e){this.Super("const",arguments),this.init()},init:function(){this.initId(),this.addEvents("beforerender","afterrender","render","show","hide","destroy")},initTpl:function(){var e=this.tpl;e&&(this.tpl=new Fancy.Template(e))}}),function(){var e={},t=Fancy,n=t.GRID_CLS,i=t.PANEL_BODY_CLS,r=t.BUTTON_CLS,o=t.BUTTON_DISABLED_CLS,a=t.BUTTON_PRESSED_CLS,s=t.BUTTON_IMAGE_CLS,l=t.BUTTON_IMAGE_COLOR_CLS,d=t.BUTTON_TEXT_CLS,c=t.BUTTON_DROP_CLS,u=t.BUTTON_MENU_CLS;t.define("Fancy.Button",{extend:t.Widget,minWidth:30,constructor:function(t,n){var i=this;t.toggleGroup&&(e[t.toggleGroup]=e[t.toggleGroup]||{active:!1,items:[]},e[t.toggleGroup].items.push(i)),i.scope=n,i.Super("const",arguments)},init:function(){var e=this;e.addEvents("click","mousedown","mouseup","mouseover","mouseout","pressedchange"),e.Super("init",arguments),e.style=e.style||{},e.initTpl(),e.render(),e.setOns()},setOns:function(){var e=this,t=e.el;t.on("click",e.onClick,e),t.on("mousedown",e.onMouseDown,e),t.on("mouseup",e.onMouseUp,e),t.on("mouseover",e.onMouseOver,e),t.on("mouseout",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},widgetCls:r,cls:"",extraCls:"",disabledCls:o,pressedCls:a,buttonImageCls:s,buttonImageColorCls:l,textCls:d,dropCls:c,text:"",height:28,paddingTextWidth:5,imageWidth:20,rightImageWidth:20,pressed:!1,theme:"default",tpl:['<div class="'+s+'"></div>','<a class="'+d+'">{text}</a>','<div class="'+c+'" style="{dropDisplay}"></div>'],render:function(){var e,n=this,i=t.get(document.createElement("div")),r=0,a=7;if(n.theme&&Fancy.themes[n.theme]&&(a=Fancy.themes[n.theme].config.charWidth),n.fire("beforerender"),n.wrapper&&n.renderWrapper(),e=t.get(n.renderTo||document.body).dom,n.width?r=n.width:n.text!==!1&&(r+=n.text.length*a+2*a),n.imageColor&&(n.imageCls=l),r<n.minWidth&&(r=n.text&&n.text.length>0?n.minWidth:n.minWidth),n.imageCls&&n.text&&(r+=n.imageWidth),n.menu&&(r+=n.rightImageWidth),i.addCls(t.cls,n.widgetCls,n.cls,n.extraCls),n.disabled&&i.addCls(o),n.menu&&i.addCls(u),i.css({width:r+"px",height:n.height+"px"}),n.hidden&&i.css("display","none"),i.css(n.style||{}),i.update(n.tpl.getHTML({text:n.text||""})),n.imageCls){var d=i.select("."+s);n.imageColor&&d.css("background-color",n.imageColor),d.css("display","block"),t.isString(n.imageCls)&&d.addCls(n.imageCls)}n.id&&i.attr("id",n.id),n.el=t.get(e.appendChild(i.dom)),n.disabled&&n.disable(),n.pressed&&n.setPressed(n.pressed),n.initToggle(),n.width=r,n.fire("afterrender"),n.fire("render")},renderWrapper:function(){var e=this,n=e.wrapper,i=t.get(e.renderTo||document.body).dom,r=t.get(document.createElement("div"));r.css(n.style||{}),r.addCls(n.cls||""),e.wrapper=t.get(i.appendChild(r.dom)),e.renderTo=e.wrapper.dom},initToggle:function(){return this.enableToggle?void 0:!1},setPressed:function(t,n){var i=this;if(t){if(i.addCls(a),i.pressed=!0,i.toggleGroup){var r=e[i.toggleGroup].active;r&&r.setPressed(!1),e[i.toggleGroup].active=i}}else i.removeCls(a),i.pressed=!1;n!==!1&&i.fire("pressedchange",i.pressed)},toggle:function(){var e=this,t=!e.pressed;e.setPressed(t),e.pressed=t},onClick:function(e){var n=this,i=n.handler;n.fire("click"),n.disabled!==!0&&(i&&(t.isString(i)&&(i=n.getHandler(i)),n.scope?i.apply(n.scope,[n]):i(n)),n.enableToggle&&(n.toggleGroup?n.setPressed(!0):n.toggle()),n.menu&&(n.toggle(),n.toggleMenuShow(e)))},getHandler:function(e){var r=this,o=t.getWidget(r.el.closest("."+i).select("."+n).attr("id"));return o[e]||function(){throw new Error("[FancyGrid Error] - handler does not exist")}},onMouseDown:function(){this.fire("mousedown")},onMouseUp:function(){this.fire("mouseup")},onMouseOver:function(e){var t=this;t.fire("mouseover"),t.tip&&t.renderTip(e)},renderTip:function(e){var n=this;n.tooltip&&n.tooltip.destroy(),n.tooltip=new t.ToolTip({text:n.tip}),n.tooltip.css("display","block"),n.tooltip.show(e.pageX+15,e.pageY-25)},onMouseOut:function(){var e=this;e.fire("mouseout"),e.tooltip&&(e.tooltip.destroy(),delete e.tooltip)},setText:function(e,t){var n=this,i=n.el,r=7;t||(t=0),t||(n.theme&&Fancy.themes[n.theme]&&(r=Fancy.themes[n.theme].config.charWidth),t+=e.length*r+2*r,n.imageColor&&(n.imageCls=l),t<n.minWidth&&(t=n.text&&n.text.length>0?n.minWidth:n.minWidth),n.imageCls&&n.text&&(t+=n.imageWidth),n.menu&&(t+=n.rightImageWidth)),n.css("width",t),i.select("."+d).update(e)},disable:function(){this.disabled=!0,this.addCls(o)},enable:function(){this.disabled=!1,this.removeCls(o)},onMouseMove:function(e){var t=this;t.tip&&t.tooltip&&t.tooltip.show(e.pageX+15,e.pageY-25)},toggleMenuShow:function(e){var n=this,i=n.el.$dom.offset(),r=[i.left,i.top+n.el.$dom.height()];t.isArray(n.menu)&&n.initMenu(),setTimeout(function(){n.menu.showAt(r[0],r[1])},100)},initMenu:function(){var e=this;e.menu=new t.Menu({items:e.menu,theme:e.theme,events:[{hide:e.onMenuHide,scope:e}]})},onMenuHide:function(){this.setPressed(!1)}})}(),Fancy.define("Fancy.SegButton",{extend:Fancy.Widget,constructor:function(e,t){this.scope=t,this.Super("const",arguments)},init:function(){var e=this;e.addEvents("toggle"),e.Super("init",arguments),e.style=e.style||{},e.render()},widgetCls:Fancy.SEG_BUTTON_CLS,cls:"",extraCls:"",text:"",render:function(){var e,t=this,n=Fancy.get(document.createElement("div"));t.fire("beforerender"),e=Fancy.get(t.renderTo||document.body).dom,n.addCls(Fancy.cls,t.widgetCls,t.cls,t.extraCls),t.hidden&&n.css("display","none"),t.el=Fancy.get(e.appendChild(n.dom)),Fancy.each(t.style,function(e,n){t.el.css(n,e)}),t.renderButtons(),t.fire("afterrender"),t.fire("render")},renderButtons:function(){for(var e=this,t=e.items,n=0,i=t.length,r=Fancy.id(null,"fancy-toggle-group-");i>n;n++){var o=t[n];o.renderTo=e.el.dom,e.allowToggle!==!1&&(o.enableToggle=!0,e.multiToggle!==!0&&(o.toggleGroup=r)),0===n?o.style={"border-right-width":0,"border-top-right-radius":0,"border-bottom-right-radius":0}:n>1?o.style={"border-left-width":0,"border-top-left-radius":0,"border-bottom-left-radius":0}:o.style={"border-top-left-radius":0,"border-bottom-left-radius":0},t.length>2&&0!==n&&n!==i-1&&Fancy.apply(o.style,{"border-top-right-radius":0,"border-bottom-right-radius":0,"border-top-left-radius":0,"border-bottom-left-radius":0}),e.items[n]=new Fancy.Button(o),e.items[n].on("pressedchange",function(t,n){e.fire("toggle",t,n,e.getValues())})}},getValues:function(){for(var e=this,t=[],n=e.items,i=0,r=n.length;r>i;i++)t.push(n[i].pressed);return t},clear:function(e){for(var t=this,n=t.items,i=0,r=n.length;r>i;i++)n[i].setPressed(!1,e)}}),Fancy.define("Fancy.toolbar.Tab",{extend:Fancy.Button,constructor:function(e,t){this.Super("const",arguments)},init:function(){this.Super("init",arguments),Fancy.loadStyle()},cls:Fancy.BUTTON_CLS+" "+Fancy.TAB_TBAR_CLS,render:function(){this.Super("render",arguments)}}),function(){var e=Fancy,t=e.MENU_CLS,n=e.MENU_ITEM_CLS,i=e.MENU_ITEM_IMAGE_CLS,r=e.MENU_ITEM_TEXT_CLS,o=e.MENU_ITEM_SIDE_TEXT_CLS,a=e.MENU_ITEM_ACTIVE_CLS,s=e.MENU_ITEM_RIGHT_IMAGE_CLS,l=e.MENU_ITEM_EXPAND_CLS,d=e.MENU_ITEM_DISABLED_CLS,c=e.MENU_ITEM_SEP_CLS,u=e.MENU_ITEM_NO_IMAGE_CLS;Fancy.define("Fancy.Menu",{extend:Fancy.Widget,constructor:function(e,t){Fancy.applyConfig(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("hide"),e.Super("init",arguments),e.applyDefaults(),e.render(),e.ons()},ons:function(){var e=this,t=e.el;t.on("mousedown",e.onItemMouseDown,e,"."+n),t.on("click",e.onItemClick,e,"."+n),t.on("mouseenter",e.onItemEnter,e,"."+n),t.on("mouseleave",e.onItemLeave,e,"."+n)},widgetCls:t,itemCls:n,itemImageCls:i,cls:"",extraCls:"",width:142,itemHeight:30,rendered:!1,theme:"default",render:function(){var e,t=this,n=Fancy.get(document.createElement("div"));t.fire("beforerender"),"default"!==t.theme&&n.addCls("fancy-theme-"+t.theme),n.addClass(Fancy.cls,t.widgetCls,t.cls,t.extraCls),n.css({width:t.width,height:t.getItemsHeight()}),e=Fancy.get(t.renderTo||document.body),t.el=e.dom.appendChild(n.dom),t.el=Fancy.get(t.el),t.renderItems(),t.fire("afterrender"),t.fire("render"),t.rendered=!0},getItemsHeight:function(){for(var e=this,t=e.items,n=this.itemHeight,i=0,r=0,o=t.length;o>r;r++){var a=t[r];i+="sep"===a.type||"-"===a.type||"-"===a?2:n}return i},renderItems:function(){for(var e,t=this,n=0,a=t.items.length;a>n;n++){e=t.items[n],"-"===e&&(e={type:"sep"});var h=Fancy.get(document.createElement("div"));h.attr("index",n),h.addCls(t.itemCls),"sep"===e.type?h.addCls(c):h.css("height",t.itemHeight),t.el.dom.appendChild(h.dom),e.el=h;var f=e.imageCls||"";if(e.cls&&h.addCls(e.cls),"sep"!==e.type&&"-"!==e.type){var g=[e.image===!1?"":'<div class="'+i+" "+f+'"></div>','<div class="'+r+'"></div>'];e.sideText&&g.push('<div class="'+o+'">'+e.sideText+"</div>"),g.push('<div class="'+s+" "+(e.items?l:"")+'"></div>'),h.update(g.join(""))}switch(e.image===!1&&h.addCls(u),e.disabled===!0&&h.addCls(d),e.type){case"":case"-":case"sep":break;default:h.select("."+r).item(0).update(e.text||"")}void 0!==e.checked&&(t.items[n].checkbox=new Fancy.CheckBox({label:!1,theme:t.theme,padding:"1px 8px 0px",renderTo:h.select("."+i).item(0).dom,value:e.checked}))}},applyDefaults:function(){var e=this,t=0,n=e.items.length;if(e.defaults)for(;n>t;t++)Fancy.applyIf(e.items[t],e.defaults)},onItemClick:function(e){var t=this,n=Fancy.get(e.currentTarget),i=n.attr("index"),r=t.items[i],o=[t,r];r.handler&&!r.disabled&&(r.scope?r.handler.apply(r.scope,o):r.handler(t,r))},onItemEnter:function(e){var t=this,n=Fancy.get(e.currentTarget),i=n.attr("index"),r=t.items[i],o=n.offset();if(t.shownSubMenu&&t.shownSubMenu.hide(),t.deActivateItem(),t.activateItem(i),r.items){if(!r.menu){var a=t.items[i];Fancy.apply(a,{parentItem:r,parentMenu:t,defaults:r.defaults,items:r.items,theme:t.theme}),t.items[i].menu=new Fancy.Menu(a)}r.menu.showAt(o.left+parseInt(n.width()),o.top),t.shownSubMenu=r.menu}},onItemLeave:function(e){},showAt:function(t,n){var i=this;i.css("position","absolute"),i.css("left",t),i.css("top",n),i.css("z-index",1e3+e.zIndex++),i.el.show(),i.parentMenu||Fancy.MenuManager.add(i)},hide:function(){var e=this;e.el.hide(),e.deActivateItem(),e.shownSubMenu&&e.shownSubMenu.hide(),e.fire("hide")},hideAll:function(){var e=this.parentMenu;e&&"none"!==e.el.css("display")&&e.hide(),this.hide()},activateItem:function(e){var t=this,n=t.items[e];"sep"===n.type||"-"===n||n.disabled||(t.activeItem=n,n.el.addCls(a))},deActivateItem:function(){var e=this.activeItem;e&&(e.el.removeClass(a),delete this.activeItem)},onItemMouseDown:function(e){e.preventDefault()},enableItem:function(e){var t=this,n=t.items[e];n.el.removeCls(d),n.disabled=!1},disableItem:function(e){var t=this,n=t.items[e];n.el.addCls(d),n.disabled=!0}}),Fancy.define("Fancy.MenuManager",{singleton:!0,inited:!1,constructor:function(){},init:function(){var e=Fancy.get(document);e.on("click",this.onDocClick,this)},add:function(e){var t=this;t.inited||t.init(),t.activeMenu=e},onDocClick:function(e){var n=this,i=Fancy.get(e.target),r=10,o=i;if(n.activeMenu){for(;r>0&&o.dom;){if(o.hasCls(t))return;o=o.parent(),r--}n.activeMenu.hide(),delete n.activeMenu}}})}(),function(){var e=Fancy,t=e.FOOTER_STATUS_CLS,n=e.STATUS_SOURCE_TEXT_CLS,i=e.STATUS_SOURCE_LINK_CLS,r=e.FOOTER_SOURCE_CLS;Fancy.Mixin("Fancy.panel.mixin.PrepareConfig",{prepareConfigTheme:function(e,t){var n=e.theme||t.theme,i=Fancy.getTheme(n).config;return Fancy.isObject(n)&&(e.theme=n.name),Fancy.applyIf(e,i),e},prepareConfigFooter:function(e){var o=e.footer,a=e.lang;if(o){var s=[];if(Fancy.isString(o.status)&&s.push({type:"text",text:o.status,cls:t}),o.status&&o.source&&s.push("side"),Fancy.isString(o.source))s.push({type:"text",text:o.source,cls:r});else if(Fancy.isObject(o.source)){var l=o.source.text,d=o.source.sourceText||a.sourceText;if(o.source.link){var c=o.source.link;c=c.replace("http://",""),c="http://"+c,l='<span class="'+n+'">'+d+'</span>: <a class="'+i+'" href="'+c+'">'+l+"</a>"}else l="<span>"+d+":</span> "+l;s.push({type:"text",text:l,cls:r})}e.footer=s}return e},prepareConfigLang:function(e,t){var n=t.i18n||e.i18n,i=Fancy.Object.copy(Fancy.i18n[n]);if(e.lang){for(var r in e.lang)Fancy.isObject(e.lang[r])===!1&&(i[r]=e.lang[r]);i.paging={},e.lang.paging&&Fancy.apply(i.paging,e.lang.paging);for(var r in e.lang.paging)"paging"!==r&&(Fancy.isObject(r)||(i[r]=e.lang.paging[r]));i.date={},e.lang.date&&Fancy.apply(i.date,e.lang.date)}return e.lang=i,e}})}(),Fancy.Mixin("Fancy.panel.mixin.methods",{setTitle:function(e){this.panel&&this.panel.setTitle(e)},getTitle:function(){return this.panel?this.panel.getTitle():void 0},setSubTitle:function(e){this.panel&&this.panel.setSubTitle(e)},getSubTitle:function(){return this.panel?this.panel.getSubTitle():void 0}}),Fancy.Mixin("Fancy.panel.mixin.DD",{ddCls:Fancy.PANEL_DRAGGABLE_CLS,initDD:function(){this.addDDCls(),this.addDD()},addDDCls:function(){this.el.addCls(this.ddCls)},addDD:function(){Fancy.DD.add({dragEl:this.el,overEl:this.el.select("."+Fancy.PANEL_HEADER_CLS).item(0)})}}),Fancy.Mixin("Fancy.panel.mixin.Resize",{cornerResizeCls:"fancy-panel-resize-corner",resizeMaskCls:"fancy-panel-resize-mask",initResize:function(){var e=this;e.activeResizeEl=void 0,e.renderResizeEls(),e.onsResizeEls()},renderResizeEls:function(){var e=this,t=e.el,n=Fancy.get(document.createElement("div"));n.addCls(e.cornerResizeCls),e.cornerResizeEl=Fancy.get(t.dom.appendChild(n.dom))},onResize:function(){var e=this;e.tbar&&e._tbar.applyScrollChanges(),e.subTBar&&e._subTBar.applyScrollChanges(),e.bbar&&e._bbar.applyScrollChanges(),e.footer&&e._footer.applyScrollChanges(),e.buttons&&e._buttons.applyScrollChanges()},onsResizeEls:function(e){var t=this;Fancy.isTouch?t.cornerResizeEl.on("touchstart",t.onMouseDownResizeEl,t):t.cornerResizeEl.on("mousedown",t.onMouseDownResizeEl,t),t.on("resize",t.onResize,t)},onMouseDownResizeEl:function(e){var t=this,n=Fancy.get(document);if(e.preventDefault(),Fancy.isTouch){var i=e.originalEvent.changedTouches[0];n.once("touchend",t.onMouseUpResize,t),n.on("touchmove",t.onMouseMoveResize,t),t.renderResizeMask(),t.startClientX=i.clientX,t.startClientY=i.clientY}else n.once("mouseup",t.onMouseUpResize,t),n.on("mousemove",t.onMouseMoveResize,t),t.renderResizeMask(),t.startClientX=e.clientX,t.startClientY=e.clientY},onMouseUpResize:function(){var e=this,t=Fancy.get(document);delete e.activeResizeEl,e.resizeMaskEl.destroy(),delete e.startClientX,delete e.startClientY,t.un("mousemove",e.onMouseMoveResize,e),e.setWidth(e.newResizeWidth),e.setHeight(e.newResizeHeight),e.fire("resize",{width:e.newResizeWidth,height:e.newResizeHeight})},onMouseMoveResize:function(e){var t=this,n=e.clientX,i=e.clientY;if(Fancy.isTouch){var r=e.originalEvent.changedTouches[0];n=r.clientX,i=r.clientY}var o=t.startClientX-n,a=t.startClientY-i,s=t.startResizeWidth-o,l=t.startResizeHeight-a;e.preventDefault(),e.stopPropagation(),s<t.minWidth&&(s=t.minWidth),l<t.minHeight&&(l=t.minHeight),t.newResizeWidth=s,t.newResizeHeight=l,t.resizeMaskEl.css({width:s,height:l})},renderResizeMask:function(){var e=this,t=e.el,n=2,i=Fancy.get(document.createElement("div")),r=parseInt(t.css("top")),o=parseInt(t.css("left")),a=parseInt(t.css("width"))-2*n,s=parseInt(t.css("height"))-2*n,l=parseInt(t.css("z-index"));if(e.startResizeWidth=a,e.startResizeHeight=s,!e.window&&"absolute"!==t.css("position")){var d=t.offset();r=d.top,o=d.left}i.addCls(e.resizeMaskCls),i.css({left:o,top:r,width:a,height:s,"z-index":l}),e.resizeMaskEl=Fancy.get(document.body.appendChild(i.dom))}}),function(){var e=Fancy,t=e.HIDDEN_CLS,n=e.MODAL_CLS,i=e.PANEL_CLS,r=e.PANEL_HEADER_CLS,o=e.PANEL_SUB_HEADER_TEXT_CLS,a=e.PANEL_HEADER_TEXT_CLS,s=e.PANEL_HEADER_TOOLS_CLS,l=e.PANEL_SUB_HEADER_CLS,d=e.PANEL_BODY_CLS,c=e.PANEL_BODY_INNER_CLS,u=e.PANEL_TBAR_CLS,h=e.PANEL_SUB_TBAR_CLS,f=e.PANEL_BUTTONS_CLS,g=e.PANEL_BBAR_CLS,p=e.PANEL_HEADER_IMG_CLS,m=e.PANEL_NOFRAME_CLS,v=e.PANEL_SHADOW_CLS,y=e.PANEL_FOOTER_CLS,C=e.FIELD_PICKER_BUTTON_CLS;e.define("Fancy.Panel",{extend:e.Widget,barScrollEnabled:!0,mixins:["Fancy.panel.mixin.DD","Fancy.panel.mixin.Resize"],constructor:function(t){e.apply(this,t),this.Super("constructor",arguments)},init:function(){var e=this;e.Super("init",arguments),e.addEvents("resize"),e.initTpl(),e.render(),e.draggable&&e.initDD(),e.resizable&&e.initResize(),e.window&&e.setActiveWindowWatcher()},cls:"",fieldCls:i,value:"",width:300,height:200,titleHeight:30,subTitleHeight:30,barHeight:37,title:void 0,frame:!0,shadow:!0,draggable:!1,minWidth:200,minHeight:200,barContainer:!0,theme:"default",tpl:['<div style="height:{titleHeight}px;" class="'+r+" "+t+'">',"{titleImg}",'<div class="'+a+'">{title}</div>','<div class="'+s+'"></div>',"</div>",'<div style="height:{subTitleHeight}px;" class="'+l+" "+t+'">','<div class="'+o+'">{subTitle}</div>',"</div>",'<div class="'+d+'">','<div class="'+u+" "+t+'" style="height:{barHeight}px;"></div>','<div class="'+h+" "+t+'" style="height:{barHeight}px;"></div>','<div class="'+c+'"></div>','<div class="'+g+" "+t+'" style="height:{barHeight}px;"></div>','<div class="'+f+" "+t+'" style="height:{barHeight}px;"></div>','<div class="'+y+" "+t+'" style="height:{barHeight}px;"></div>',"</div>"],render:function(){var i=this,o=e.get(i.renderTo||document.body),a=e.get(document.createElement("div")),s=0,c=i.titleHeight,C=i.subTitleHeight;if(!o.dom)throw new Error("[FancyGrid Error 1] - Could not find renderTo element: "+i.renderTo);i.window===!0&&a.css({display:"none",position:"absolute"}),i.frame===!1&&a.addCls(m),a.addCls(e.cls,i.cls,i.fieldCls),"default"!==i.theme&&a.addCls("fancy-theme-"+i.theme),i.shadow&&a.addCls(v),a.css({width:i.width+"px",height:i.height-s+"px"}),i.style&&a.css(i.style);var w="",b="";e.isObject(i.title)?w=i.title.text:e.isString(i.title)&&(w=i.title),e.isObject(i.subTitle)?b=i.subTitle.text:e.isString(i.subTitle)&&(b=i.subTitle);var x="";e.isObject(i.title)&&i.title.imgCls&&(x='<div class="'+p+" "+i.title.imgCls+'"></div>'),a.update(i.tpl.getHTML({titleImg:x,barHeight:i.barHeight,titleHeight:c,subTitleHeight:C,title:w,subTitle:b})),e.isObject(i.title)&&(i.title.style&&a.select("."+r).css(i.title.style),i.title.cls&&a.select("."+r).addCls(i.title.cls),i.title.tools&&(i.tools=i.title.tools)),e.isObject(i.subTitle)&&(i.subTitle.style&&a.select("."+l).css(i.subTitle.style),i.subTitle.cls&&a.select("."+l).addCls(i.subTitle.cls)),i.title?a.select("."+r).removeCls(t):a.select("."+d).css("border-top-width","0px"),i.subTitle&&(a.select("."+d).css("border-top-width","0px"),a.select("."+l).removeCls(t)),i.tbar&&a.select("."+u).removeCls(t),i.subTBar&&a.select("."+h).removeCls(t),i.bbar&&a.select("."+g).removeCls(t),i.buttons&&a.select("."+f).removeCls(t),i.footer&&a.select("."+y).removeCls(t),i.el=o.dom.appendChild(a.dom),i.el=e.get(i.el),i.modal&&0===e.select(n).length&&e.get(document.body).append('<div class="'+n+'" style="display: none;"></div>'),i.id&&i.el.attr("id",i.id),i.renderTools(),i.renderBars(),i.setHardBordersWidth()},setHardBordersWidth:function(){var e=this.panelBodyBorders;this.el.select("."+d).css({"border-top-width":e[0],"border-right-width":e[1],"border-bottom-width":e[2],"border-left-width":e[3]})},renderTools:function(){var t=this,n=t.tools;void 0!==n&&e.each(n,function(n,i){n.renderTo=t.el.select("."+s).dom,t.tools[i]=new e.Tool(n,t.scope||t)})},renderBars:function(){var t=this,n=!1,i=t.theme,r=this;t.items&&t.items[0]&&("grid"===t.items[0].type&&(n=!0),r=t.items[0]),t.bbar&&(t._bbar=new e.Bar({el:t.el.select("."+g),items:t.bbar,height:t.barHeight,barContainer:t.barContainer,barScrollEnabled:t.barScrollEnabled,scope:r,theme:i}),t.bbar=t._bbar.items),t.buttons&&(t._buttons=new e.Bar({el:t.el.select("."+f),items:t.buttons,height:t.barHeight,barScrollEnabled:t.barScrollEnabled,scope:r,theme:i}),t.buttons=t._buttons.items),t.tbar&&(t._tbar=new e.Bar({el:t.el.select("."+u),items:t.tbar,height:t.barHeight,tabEdit:!t.subTBar&&n,barScrollEnabled:t.barScrollEnabled,scope:r,theme:i}),t.tbar=t._tbar.items),t.subTBar&&(t._subTBar=new e.Bar({el:t.el.select("."+h),items:t.subTBar,height:t.barHeight,tabEdit:n,barScrollEnabled:t.barScrollEnabled,scope:r,theme:i}),t.subTBar=t._subTBar.items),t.footer&&(t._footer=new e.Bar({disableScroll:!0,el:t.el.select("."+y),items:t.footer,height:t.barHeight,barScrollEnabled:t.barScrollEnabled,scope:r,theme:i}),t.footer=t._footer.items)},showAt:function(t,n){this.css({left:t+"px",display:"","z-index":1e3+e.zIndex++}),void 0!==n&&this.css({top:n+"px"})},show:function(){var t=this;if(t.el.show(),t.window===!0){t.buttons&&t._buttons.checkScroll(),t.tbar&&t._tbar.checkScroll(),t.bbar&&t._bbar.checkScroll(),t.subTBar&&t._subTBar.checkScroll();var i=e.getViewSize(),r=t.el.height(),o=t.el.width(),a=[],s=e.getScroll(),l=s[0],d=s[1];a[0]=(i[1]-o)/2,a[1]=(i[0]-r)/2,a[0]<10&&(a[0]=10),a[1]<10&&(a[1]=10),t.css({left:a[0]+d+"px",top:a[1]+l+"px",display:"","z-index":1e3+e.zIndex++}),t.modal&&e.select("."+n).css({display:"","z-index":1e3+e.zIndex-2})}},hide:function(){var t=this;t.css({display:"none"}),t.modal&&e.select("."+n).css("display","none"),e.each(this.items||[],function(e){"combo"===e.type&&e.hideList()})},setTitle:function(e){this.el.select("."+a).update(e)},getTitle:function(){return this.el.select("."+a).dom.innerHTML},setSubTitle:function(e){this.el.select("."+o).update(e)},getSubTitle:function(){return this.el.select("."+o).dom.innerHTML},getHeight:function(){return parseInt(this.css("height"))},setWidth:function(e){this.items[0].setWidth(e)},setHeight:function(e){this.css("height",e),this.items[0].setHeight(e,!1)},setActiveWindowWatcher:function(){var t=this;t.el.on("mousedown",function(n){var i=e.get(n.target);i.hasCls(C)||1e3+e.zIndex-1>parseInt(t.css("z-index"))&&t.css("z-index",1e3+e.zIndex++)})}})}(),function(){var e=Fancy,t=e.BUTTON_CLS;e.define("Fancy.Tool",{extend:e.Widget,constructor:function(e,t){this.scope=t,this.Super("const",arguments)},init:function(){var e=this;e.addEvents("click","mousedown","mouseup","mouseover","mouseout"),e.Super("init",arguments),e.style=e.style||{},e.render(),e.ons()},ons:function(){this.el.on("click",this.onClick,this)},cls:t,text:"",height:28,paddingTextWidth:5,render:function(){var t=this,n=e.get(t.renderTo||document.body).dom,i=document.createElement("div");t.fire("beforerender"),i.className="fancy-tool-button",i.innerHTML=t.text,t.el=e.get(n.appendChild(i)),t.fire("afterrender"),t.fire("render")},onClick:function(){var e=this;e.fire("click"),e.handler&&(e.scope?e.handler.apply(e.scope,[e]):e.handler(e))},setText:function(e){this.el.update(e)}})}(),function(){var e=Fancy,t=e.PANEL_BODY_INNER_CLS,n=e.PANEL_GRID_INSIDE_CLS,i=e.TAB_WRAPPER_CLS,r=e.TAB_ACTIVE_WRAPPER_CLS,o=e.TAB_TBAR_ACTIVE_CLS,a=e.PANEL_TAB_CLS;e.define(["Fancy.panel.Tab","Fancy.Tab","FancyTab"],{extend:e.Panel,constructor:function(e,t){this.prepareConfigTheme(e),this.Super("const",arguments)},init:function(){var e=this;e.prepareTabs(),e.Super("init",arguments),e.setActiveTab(e.activeTab)},activeTab:0,theme:"default",render:function(){var e=this;e.Super("render",arguments),e.panelBodyEl=e.el.select("."+t).item(0),e.setPanelBodySize(),e.renderTabWrappers(),e.wrapped||e.el.addCls(n),e.el.addCls(a),e.rendered=!0},setPanelBodySize:function(){var e=this,t=e.height,n=e.panelBodyBorders;e.title&&(t-=e.titleHeight),e.subTitle&&(t-=e.subTitleHeight,t+=n[2]),e.bbar&&(t-=e.barHeight),e.tbar&&(t-=e.barHeight),e.subTBar&&(t-=e.barHeight),e.buttons&&(t-=e.barHeight),e.footer&&(t-=e.barHeight),t-=n[0]+n[2],e.panelBodyEl.css({height:t}),e.panelBodyHeight=t,e.panelBodyWidth=e.width-n[1]-n[3]},prepareConfigTheme:function(t){var n=this,i=t.theme||n.theme,r=e.getTheme(i).config,o=n.wrapped||t.wrapped;o&&(t.panelBodyBorders=[0,0,0,0],n.panelBodyBorders=[0,0,0,0]),e.applyIf(t,r),e.apply(n,t)},prepareTabs:function(){for(var e=this,t=[],n=0,i=e.items.length;i>n;n++){var r=e.items[n],o={type:"tab"};r.tabTitle?o.text=r.tabTitle:r.title&&(o.text=r.title,delete r.title),o.handler=function(t){return function(){e.setActiveTab(t)}}(n),t.push(o)}e.tbar=t,e.tabs=t},renderTabWrappers:function(){var t=this;e.each(t.items,function(n){var r=e.get(document.createElement("div"));r.addCls(i),n.renderTo=t.panelBodyEl.dom.appendChild(r.dom)})},setActiveTab:function(e){var t=this,n=t.el.select("."+i),a=t.activeTab;if(0!==t.items.length){n.item(t.activeTab).removeCls(r),t.activeTab=e,n.item(t.activeTab).addCls(r);var s=t.items[t.activeTab];if(s.theme=t.theme,s.wrapped=!0,s.width=t.panelBodyWidth,s.height=t.panelBodyHeight,s.rendered)t.setActiveItemWidth(),t.setActiveItemHeight();else switch(s.type){case"form":t.items[t.activeTab]=new FancyForm(s);break;case"grid":t.items[t.activeTab]=new FancyGrid(s);break;case"tab":t.items[t.activeTab]=new FancyTab(s)}t.tabs&&(t.tbar[a].removeCls(o),t.tbar[t.activeTab].addCls(o))}},setWidth:function(e){var t=this;t.width=e,t.css("width",e),t.setPanelBodySize(),t.setActiveItemWidth()},setHeight:function(e){var t=this;t.height=e,t.css("height",e),t.setPanelBodySize(),t.setActiveItemHeight()},setActiveItemWidth:function(){var e=this;e.items[e.activeTab].setWidth(e.panelBodyWidth)},setActiveItemHeight:function(){var e=this;e.items[e.activeTab].setHeight(e.panelBodyHeight,!1)}}),FancyTab.get=function(t){var n=e.get(t).select("."+a).dom.id;return e.getWidget(n)},!e.nojQuery&&e.$&&(e.$.fn.FancyTab=function(e){return e.renderTo=$(this.selector)[0].id,new FancyTab(e)})}(),Fancy.define("Fancy.toolbar.Tab",{extend:Fancy.Button,constructor:function(e,t){this.Super("const",arguments)},init:function(){this.Super("init",arguments),Fancy.loadStyle()},cls:Fancy.BUTTON_CLS+" "+Fancy.TAB_TBAR_CLS,render:function(){this.Super("render",arguments)}}),function(){var e=Fancy,t=e.GRID_CLS,n=e.GRID_CELL_CLS,i=e.BAR_CLS,r=e.BAR_CONTAINER_CLS,o=e.BAR_BUTTON_CLS,a=e.BAR_SEG_BUTTON_CLS,s=e.BAR_LEFT_SCROLLER_CLS,l=e.BAR_RIGHT_SCROLLER_CLS,d=e.FIELD_LABEL_CLS,c=e.FIELD_TEXT_CLS,u=e.FIELD_TEXT_INPUT_CLS,h=e.FIELD_SEARCH_CLS,f=e.FIELD_SEARCH_LIST_CLS,g=e.FIELD_SEARCH_PARAMS_LINK_CLS,p=e.FIELD_SEARCH_PARAMED_CLS,m=e.FIELD_SEARCH_PARAMED_EMPTY_CLS,v=e.PICKER_MONTH_ACTION_BUTTONS_CLS,y=e.CLEARFIX_CLS;e.define("Fancy.Bar",{extend:e.Widget,widgetCls:i,containerCls:r,cls:"",text:"",floating:"left",sideRight:3,scrolled:0,tabOffSet:5,barScrollEnabled:!0,constructor:function(t){e.apply(this,t),this.init()},init:function(){var e=this;e.roles={},e.render(),e.barScrollEnabled&&(e.initScroll(),setTimeout(function(){e.checkScroll()},150))},render:function(){var e=this;e.renderEl(),e.renderItems(),e.initTabEdit()},renderEl:function(){var t=this;if(!t.el){var n=e.get(document.createElement("div"));n.addCls(t.widgetCls,t.cls),n.update(t.text),t.el=e.get(t.renderTo.appendChild(n.dom)),t.style&&t.el.css(t.style)}var i=e.get(document.createElement("div"));i.addCls(t.containerCls),t.containerEl=e.get(t.el.dom.appendChild(i.dom))},renderItems:function(){for(var t=this,n=t.containerEl,i=t.items||[],r=0,o=i.length,a=!1,s=[],l=o-1,d=0;o>r;r++){var c=i[r];switch(a&&(c=i[l],l--),c.toggleGroup&&(c.enableToggle=!0),e.isObject(c)&&(c.type=c.type||"button"),a&&(t.floating="right",c.style=c.style||{},c.style.right=d),c.renderTo=n.dom,c){case"|":var u={"float":t.floating,"margin-right":"5px","margin-top":"6px","padding-left":"0px"};"right"===t.floating&&e.applyIf(u,{right:"1px",position:"absolute"}),s.push(new e.Separator({renderTo:n.dom,style:u}));continue;case"side":a=!0;continue;default:a?s[l]=t.renderItem(c):s.push(t.renderItem(c))}a&&(c.text?d+=7*c.text.length+5+5+5:c.width&&(d+=c.width+5),d+=3)}t.items=s},renderItem:function(n){var i,r=this,s=r.containerEl,l=r.theme;switch(n.style=n.style||{},n.label=!1,n.padding=!1,n.theme=r.theme,e.applyIf(n.style,{"float":r.floating}),"right"===r.floating&&e.applyIf(n.style,{right:r.sideRight,position:"absolute"}),!n.scope&&r.items&&(n.scope=r.items[0]),n.type){case"wrapper":n.cls===v&&(s.destroy(),s=r.el);for(var C,w=s.append('<div class="'+(n.cls||"")+'"></div>').select("div").item(0),b=0,x=n.items.length,S=0;x>b;b++){C=n.items[b],e.isObject(C)&&(C.type=C.type||"button"),C.renderTo=w.dom,i=r.renderItem(C);var E=i.el;b===x-1?E.css("margin-right","0px"):S+=parseInt(E.css("margin-right")),S+=e.nojQuery?parseInt(E.width()):parseInt(E.$dom.outerWidth()),S+=parseInt(E.css("margin-left"))}w.css("width",S);break;case void 0:case"button":n.extraCls=o,n.scope=r.scope,i=new e.Button(n);break;case"segbutton":n.extraCls=a,e.applyIf(n.style,{"margin-right":"6px"}),i=new e.SegButton(n);break;case"tab":i=new e.toolbar.Tab(n);break;case"text":e.applyIf(n.style,{"margin-right":"10px","padding-left":"0px","padding-top":"11px"}),e.apply(n,{renderTo:s.dom,cls:n.cls||""}),i=new e.bar.Text(n);break;case"combo":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:70}),i=new e.Combo(n);break;case"date":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:100}),i=new e.DateField(n);break;case"number":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:35}),i=new e.NumberField(n);break;case"switcher":e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:35}),i=new e.Switcher(n);break;case"string":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:100}),i=new e.StringField(n);break;case"search":n.inputWidth=18,n.events=n.events||[],n.events=n.events.concat([{enter:function(n,i){var r=e.getWidget(n.el.parent().parent().parent().parent().select("."+t).item(0).attr("id"));r.search(i),r.expander&&r.expander.reSet()}},{key:function(n,i){var r=this,o=e.getWidget(n.el.parent().parent().parent().parent().select("."+t).item(0).attr("id"));r.autoEnterTime||(r.autoEnterTime=new Date),r.intervalAutoEnter&&clearInterval(r.intervalAutoEnter),delete r.intervalAutoEnter,r.intervalAutoEnter=setInterval(function(){var e=new Date;e-r.autoEnterTime>500&&(clearInterval(r.intervalAutoEnter),delete r.intervalAutoEnter,i=n.getValue(),o.search(i),o.expander&&o.expander.reSet())},200)}},{render:function(n){var i=this,r=!1;n.el.on("mouseenter",function(){r=!0},null,"."+g),n.el.on("mousedown",function(e){e.preventDefault()},null,"."+g),n.el.on("click",function(o){var a=!1,s=e.getWidget(n.el.parent().parent().parent().parent().select("."+t).attr("id")),d=s.columns||[],c=s.leftColumns||[],u=s.rightColumns||[],h=d.concat(c).concat(u),g=[],p=0,m=h.length,v=1;if(s.searching.items)e.each(s.searching.items,function(e){g.push({inputLabel:" &nbsp;&nbsp;"+e.text,value:!0,name:e.index}),v+=s.fieldHeight});else for(;m>p;p++){var y=h[p],C=y.title;if(void 0===C&&(C=""),y.searchable!==!1){switch(y.type){case"color":case"combo":case"date":case"number":case"string":case"text":case"currency":break;default:continue}v+=s.fieldHeight,g.push({inputLabel:" &nbsp;&nbsp;"+C,value:!0,name:y.index})}}if(i.list){if("none"!==i.list.el.css("display"))return void i.list.el.css("display","none");a=!0}else i.list=new FancyForm({width:150,height:v,theme:l,defaults:{type:"checkbox",label:!1,style:{padding:"8px 16px 0px"}},items:g,cls:f,events:[{set:function(){s.searching.setKeys(i.list.get())}},{init:function(){setTimeout(function(){var t=i.list.el;t.on("mouseenter",function(){r=!0}),t.on("mouseleave",function(){r=!1,setTimeout(function(){r===!1&&i.list&&t.css("display","none")},750)});var a=e.get(o.target),s=a.offset(),l=parseInt(n.el.css("height"));t.css({position:"absolute",top:s.top+l+20,left:s.left}),i.list.el.css("display","block"),t.animate({duration:200,top:s.top+l-1})},50)}}]});var w=e.get(o.target),b=w.offset(),x=parseInt(n.el.css("height"));i.list&&i.list.el&&(i.list.css({position:"absolute",top:b.top+x+20,left:b.left}),a&&i.list.css("display","block"),i.list.el.animate({duration:200,top:b.top+x-1}))},null,"."+g),n.el.on("mouseleave",function(){r=!1,setTimeout(function(){r===!1&&i.list&&i.list.el.css("display","none")},750)},null,"."+g)}}]),e.applyIf(n.style,{"float":r.floating,"padding-left":"0px","margin-right":"8px","margin-top":"4px"});var I=h;n.paramsMenu&&(n.tpl=['<div class="'+d+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+c+'">','<input placeholder="{emptyText}" class="'+u+'" style="{inputWidth}" value="{value}">','<div class="'+g+'" style="">'+(n.paramsText||"&nbsp;")+"</div>","</div>",'<div class="'+y+'"></div>'],I+=" "+p,n.paramsText||(I+=" "+m)),e.applyIf(n,{padding:!1,width:250,cls:I,emptyText:"Search"}),i=new e.StringField(n)}return"right"===r.floating&&(r.sideRight+=i.width,r.sideRight+=7),n.role&&(r.roles[n.role]=i),i},initScroll:function(){var t=this;t.leftScroller=new e.Button({imageCls:!0,renderTo:t.el.dom,cls:s,height:t.height+2,minWidth:20,paddingTextWidth:0,imageWidth:20,width:0,text:!1,id:"my",style:{position:"absolute",left:-1,top:-1,display:"none"},listeners:[{click:t.onPrevScrollClick,scope:t}]}),t.rightScroller=new e.Button({imageCls:!0,renderTo:t.el.dom,cls:l,height:t.height+2,minWidth:20,paddingTextWidth:0,imageWidth:20,width:0,text:!1,style:{position:"absolute",right:-1,top:-1,display:"none"},listeners:[{click:t.onNextScrollClick,scope:t}]})},getBarWidth:function(){return parseInt(this.el.css("width"))},getItemsWidth:function(){var t=0;return e.each(this.items,function(e){t+=e.el.width(),t+=parseInt(e.el.css("margin-left")),t+=parseInt(e.el.css("margin-right")),t+=parseInt(e.el.css("padding-right")),t+=parseInt(e.el.css("padding-left"))}),t},onPrevScrollClick:function(){this.scrolled+=30,this.applyScrollChanges()},onNextScrollClick:function(){this.scrolled-=30,this.applyScrollChanges()},applyScrollChanges:function(){var e=this,t=e.getItemsWidth(),n=e.getBarWidth()-parseInt(e.leftScroller.el.css("width"))-parseInt(e.rightScroller.el.css("width")),i=t-n;return n>t?(e.scrolled=0,e.leftScroller.el.hide(),e.rightScroller.el.hide(),void e.containerEl.css("margin-left","0px")):(e.scrolled>0?(e.scrolled=0,e.leftScroller.disable(),e.rightScroller.enable()):e.scrolled<-i&&(e.scrolled=-i,e.leftScroller.enable(),e.rightScroller.disable()),e.leftScroller.el.show(),e.rightScroller.el.show(),void e.containerEl.css("margin-left",e.scrolled+e.leftScroller.el.width()+e.tabOffSet+"px"))},onDocMouseUp:function(){var e=this;e.scrollInterval&&(clearTimeout(e.scrollInterval),delete e.scrollInterval)},checkScroll:function(){var e=this,t=e.getItemsWidth(),n=e.getBarWidth();e.disableScroll||(t>n?e.enableScroll():e.barScrollEnabled&&(e.leftScroller.el.hide(),e.rightScroller.el.hide()))},enableScroll:function(){var e=this;e.barScrollEnabled&&(e.leftScroller.el.show(),e.rightScroller.el.show(),0===e.scrolled&&(e.leftScroller.disable(),e.containerEl.css("margin-left",e.leftScroller.el.width()+e.tabOffSet+"px")))},initTabEdit:function(){var e=this;if(e.tabEdit)for(var t=e.items.length-1;t>-1;t--){var n=e.items[t];switch(n.type){case"number":case"string":case"date":return void n.on("tab",e.onTabLastInput,e)}}},onTabLastInput:function(i,r){var o=this,a=e.getWidget(o.el.parent().select("."+t).attr("id"));r.preventDefault(),a.leftColumns.length?setTimeout(function(){a.leftBody.el.select("."+n).item(0).dom.click()},100):setTimeout(function(){a.body.el.select("."+n).item(0).dom.click()},100)}})}(),Fancy.define("Fancy.Separator",{cls:Fancy.SEPARATOR_CLS,constructor:function(e){Fancy.apply(this,e),this.init()},init:function(){this.render()},render:function(){var e=this,t=Fancy.get(document.createElement("div"));t.addCls(e.cls),t.update("<div></div>"),e.el=Fancy.get(e.renderTo.appendChild(t.dom)),e.style&&e.el.css(e.style)}}),Fancy.define("Fancy.bar.Text",{extend:Fancy.Widget,widgetCls:Fancy.BAR_TEXT_CLS,cls:"",text:"",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.render()},render:function(){var e=this,t=Fancy.get(document.createElement("div"));t.addCls(e.widgetCls,e.cls),t.update(e.text),e.el=Fancy.get(e.renderTo.appendChild(t.dom)),e.style&&e.el.css(e.style),e.hidden&&e.el.css("display","none")},get:function(){return this.el.dom.innerHTML},getValue:function(){return this.get()}}),function(){var e=Fancy,t=e.MODAL_CLS,n=e.FIELD_NOT_VALID_CLS,i=e.FORM_CLS,r=e.FORM_BODY_CLS,o=e.PANEL_BODY_INNER_CLS,a=e.PANEL_GRID_INSIDE_CLS,s=e.PANEL_SHADOW_CLS,l=e.FIELD_BLANK_ERR_CLS,d=e.FIELD_TAB_CLS,c=e.FIELD_TAB_ACTIVE_CLS,u=e.TAB_TBAR_ACTIVE_CLS,h=e.PANEL_TBAR_CLS,f=e.TAB_TBAR_CLS,g=e.FIELD_TEXT_CLS;e.Mixin("Fancy.form.mixin.Form",{init:function(){var t=this;return t.calcFieldSize(),t.Super("init",arguments),t.addEvents("init","set"),e.fullBuilt!==!0&&e.MODULELOAD!==!1&&e.MODULESLOAD!==!1&&t.fullBuilt!==!0&&t.neededModules!==!0?void t.loadModules():(t.fire("beforerender"),t.applyDefaults(),t.preRender(),t.render(),t.ons(),void t.fire("init"))},cls:"",widgetCls:i,value:"",width:200,height:300,emptyText:"",tpl:['<div class="'+r+'"></div>'],preRender:function(){var e=this;e.initRenderTo(),(e.title||e.tbar||e.bbar||e.buttons)&&e.renderPanel()},renderPanel:function(){var t=this,n={renderTo:t.renderTo,title:t.title,subTitle:t.subTitle,subTitleHeight:t.subTitleHeight,width:t.width,height:t.height,titleHeight:t.titleHeight,barHeight:t.barHeight,theme:t.theme,shadow:t.shadow,style:t.style||{},window:t.window,modal:t.modal,frame:t.frame,items:[t],tabs:t.tabs,draggable:t.draggable,minWidth:t.minWidth,minHeight:t.minHeight,panelBodyBorders:t.panelBodyBorders,resizable:t.resizable};t.cls&&(n.cls=t.cls,delete t.cls),t.tabs&&(n.tbar=t.generateTabs(),t.height-=t.barHeight),t.bbar&&(n.bbar=t.bbar,t.height-=t.barHeight),t.tbar&&(n.tbar=t.tbar,t.height-=t.barHeight),t.buttons&&(n.buttons=t.buttons,t.height-=t.barHeight,n.buttons=t.buttons),t.footer&&(n.footer=t.footer,t.height-=t.barHeight),t.panel=new e.Panel(n),t.bbar=t.panel.bbar,t.tbar=t.panel.tbar,t.buttons=t.panel.buttons,t.wrapped||t.panel.addCls(a),t.extraCls&&t.panel&&t.panel.addCls(t.extraCls),t.title&&(t.height-=t.titleHeight),t.subTitle&&(t.height-=t.subTitleHeight,t.height+=t.panelBodyBorders[2]),t.height-=t.panelBodyBorders[0],t.renderTo=t.panel.el.select("."+o).dom},initRenderTo:function(){var t=this,n=t.renderTo||document.body;e.isString(n)&&(n=document.getElementById(n),n||(n=e.select(n).item(0))),t.renderTo=n},render:function(){var t=this,n=e.get(t.renderTo||document.body),i=e.get(document.createElement("div"));if(!n.dom)throw new Error("[FancyGrid Error 1] - Could not find renderTo element: "+t.renderTo);i.addCls(t.cls,e.cls,t.widgetCls),i.attr("id",t.id),i.css({width:t.width+"px",height:t.height+"px"}),i.update(t.tpl.join(" ")),t.el=e.get(n.dom.appendChild(i.dom)),void 0===t.panel&&(t.shadow&&i.addCls(s),"default"!==t.theme&&i.addCls("fancy-theme-"+t.theme)),t._items=[],t.renderItems(),t.items=t._items,delete t._items,(t.tabs||t.tabbed)&&t.setActiveTab(),t.fire("afterrender"),t.fire("render"),t.rendered=!0},generateTabs:function(){var t=this,n=[];if(t.tabs)for(var i=0,r=t.tabs.length;r>i;i++){var o={type:"tab"};e.isString(t.tabs[i])?o.text=t.tabs[i]:o=t.tabs[i],t.tabs[i]=o,void 0===t.tabs[i].handler&&(t.tabs[i].handler=function(e){return function(){t.setActiveTab(e)}}(i)),n.push(t.tabs[i])}return n},setActiveTab:function(e){var t=this,n=t.el.select("."+d),i=t.el.select("."+c);if(void 0!==e&&(t.activeTab=e),void 0===t.activeTab&&(t.activeTab=0),i.removeCls(c),n.item(t.activeTab).addCls(c),t.tabs){var r=t.panel.el.select("."+h+" ."+f);r.removeCls(u),r.item(t.activeTab).addCls(u)}},renderItems:function(t,n){var i,o=this,a=0;for(n=n||o.items,i=n.length,t=t||o.el.getByClass(r);i>a;a++){var s,l=n[a];switch(l.theme=o.theme,l.type){case"pass":case"password":s=e.form.field.String,l.type="string",l.isPassword=!0;break;case"hidden":s=e.form.field.String,l.hidden=!0;break;case"line":case"row":s=e.form.field.Line,l=o.applyDefaults(l);break;case"set":case"fieldset":l.form=o,s=e.form.field.Set,l=o.applyDefaults(l);break;case"tab":s=e.form.field.Tab,l=o.applyDefaults(l);break;case"string":case void 0:s=e.form.field.String;break;case"number":s=e.form.field.Number;break;case"textarea":s=e.form.field.TextArea;break;case"checkbox":s=e.form.field.CheckBox;break;case"switcher":s=e.form.field.Switcher;break;case"combo":s=e.form.field.Combo;break;case"html":s=e.form.field.HTML;break;case"radio":s=e.form.field.Radio;break;case"date":s=e.form.field.Date;break;case"recaptcha":s=e.form.field.ReCaptcha;break;case"button":s=e.form.field.Button;break;case"segbutton":s=e.form.field.SegButton;break;default:throw new Error("type "+l.type+" is not set")}l.renderTo=l.renderTo||t;var d=new s(l);switch(l.type){case"line":case"row":case"set":case"fieldset":case"tab":o.renderItems(d.el.select("."+g).dom,d.items);break;default:o._items.push(d)}}},applyDefaults:function(t){var n=this;{if(void 0!==t){var i,r;if(t.defaults)for(i=0,r=t.items.length;r>i;i++)e.applyIf(t.items[i],t.defaults);return t}for(var o=n.items,a=0,s=o.length,l=n.defaults||{};s>a;a++)e.applyIf(o[a],l)}},ons:function(){var t=this;e.each(t.items,function(e){switch(e.type){case"line":case"row":break;case"set":case"fieldset":break;case"tab":case"button":case"segbutton":break;default:e.on("change",t.onChange,t)}})},onChange:function(e,t,n){this.fire("set",{name:e.name,value:t,oldValue:n})},get:function(t){var n=this;if(t){var i;return e.each(n.items,function(e){switch(e.type){case"html":case"button":return}return e.name===t?(i=e.get(),!0):void 0}),i}var r={};return e.each(n.items,function(e){switch(e.type){case"html":case"button":return}void 0!==e.name&&(r[e.name]=e.get())}),r},set:function(t,n){var i=this;{if(!e.isObject(t))return t?(e.each(i.items,function(e){e.name===t&&e.set(n)}),n):void 0;for(var r in t)i.set(r,t[r])}},clear:function(t){var i=this;e.each(i.items,function(e){switch(e.type){case"html":case"recaptcha":case"button":return}t!==!1&&e.clear(),i.hasCls(n)&&(i.removeCls(n),i.css("height",parseInt(i.css("height"))-6+"px")),i.hasCls(l)&&(i.removeCls(l),i.css("height",parseInt(i.css("height"))-6+"px")),e.name&&i.params&&i.params[e.name]&&delete i.params[e.name]})},submit:function(t){var n=this,t=t||{},i=n.params||{};if(n.params=n.params||{},e.apply(n,t),t.params&&(e.apply(i,n.params),n.params=i),n.clear(!1),n.valid()!==!1){var r=n.get();return e.apply(n.params,r),"wait"===n.params.recaptcha?void n.submit(t):void(""!==n.params.recaptcha&&(n.params["g-recaptcha-response"]=n.params.recaptcha,delete n.params.recaptcha,e.Ajax(n)))}},valid:function(){var t=!0;return e.each(this.items,function(e){switch(e.type){case"string":case"number":break;default:return}t===!0?t=e.onBlur():e.onBlur()}),!!t},getItem:function(t){var n=!1;return e.each(this.items,function(e){return e.name===t?(n=e,!0):void 0}),n},showAt:function(){var e=this.panel;e&&e.showAt.apply(e,arguments)},show:function(){var e=this,t=e.panel;setTimeout(function(){t?t.show.apply(t,arguments):e.el.show()},30)},hide:function(){var n=this;n.panel?n.panel.css({display:"none"}):n.css({display:"none"});var i=e.select("."+t);i.dom&&i.css("display","none");for(var r=0,o=n.items.length;o>r;r++)"combo"===n.items[r].type&&n.items[r].hideList()},setHeight:function(e){var t=this;t.panel&&(t.panel.css("height",e),t.buttons&&(e-=t.barHeight),t.bbar&&(e-=t.barHeight),(t.tbar||t.tabs)&&(e-=t.barHeight),t.title&&(e-=t.titleHeight),e-=t.panelBodyBorders[0],e-=t.panelBodyBorders[2]),t.css("height",e)},setWidth:function(){},getHeight:function(){var e=this.panel;return e?e.getHeight():parseInt(this.css("height"))},calcFieldSize:function(){var t,n=this,i=n.width,r=n.defaults||{},o=n.maxLabelNumber;r.width=i-2*n.panelBorderWidth,e.each(n.items,function(t){switch(t.type){case"set":case"tab":"tab"===t.type&&(n.tabbed=!0);var r="set"===t.type?62:20;e.each(t.items,function(e){void 0===e.width&&(e.width=i-r),e.label&&e.label.length>o&&(o=e.label.length)}),t.defaults=t.defaults||{},t.defaults.labelWidth=t.defaults.labelWidth||8*(o+1);break;case"line":var a,s=t.items.length,l=!1,d=i;e.each(t.items,function(e){void 0===e.label&&"top"!==e.labelAlign&&(e.label=!1),e.width&&(d-=e.width,s--)}),a=(d-8-8-8)/s,e.each(t.items,function(e){e.width||(e.width=a),(e.labelWidth||e.inputWidth)&&(l=!0)}),l===!1&&e.each(t.items,function(e){"top"===e.labelAlign?e.labelWidth=a:e.labelWidth=100}),t.defaults=t.defaults||{},void 0===t.defaults.labelWidth&&(t.defaults.labelWidth=n.labelWidth);break;default:t.label&&t.label.length>o&&(o=t.label.length)}}),o++,t=6*o,80>t&&(t=80),r.labelWidth=t,n.inputWidth&&(r.inputWidth=n.inputWidth),n.defaults=r},destroy:function(){var e=this;e.el.destroy(),e.panel&&e.panel.el.destroy()},each:function(e,t){var n=this,i=n.items,r=0,o=i.length;if(t)for(;o>r;r++)e.apply(this,[i[r]]);else for(;o>r;r++)e(i[r])},loadModules:function(){var t=this,n=e.modules||{},i={},r=t.items||[];e.modules=n,e.nojQuery&&(i.dom=!0),e.isTouch&&(i.touch=!0);for(var o=0,a=r.length;a>o;o++){var s=r[o];if("date"===s.type&&(i.grid=!0,i.selection=!0,i.date=!0),s.items)for(var l=0,d=s.items.length;d>l;l++){var c=s.items[l];"date"===c.type&&(i.grid=!0,i.selection=!0,i.date=!0)}}t.neededModules={length:0};for(var u in i)void 0===e.modules[u]&&(t.neededModules[u]=!0,t.neededModules.length++);if(0===t.neededModules.length)return t.neededModules=!0,void t.init();var h=function(e){delete t.neededModules[e],t.neededModules.length--,0===t.neededModules.length&&(t.neededModules=!0,t.init())};for(var u in t.neededModules)"length"!==u&&e.loadModule(u,h)},prevTab:function(){var e=this;e.activeTab--,e.activeTab<0&&(e.activeTab=0),e.setActiveTab()},nextTab:function(){var e=this,t=e.el.select("."+d).length;e.activeTab++,e.activeTab>=t&&(e.activeTab=t-1),e.setActiveTab()}})}(),Fancy.Mixin("Fancy.form.mixin.PrepareConfig",{prepareConfig:function(e,t){var n=this;return e=n.prepareConfigTheme(e,t),e=n.prepareConfigLang(e,t),e=n.prepareConfigDefaults(e),e=n.prepareConfigItems(e),e=n.prepareConfigFooter(e)},prepareConfigDefaults:function(e){if(e.defaults)for(var t in e.defaults)Fancy.each(e.items,function(n){void 0===n[t]&&(n[t]=e.defaults[t])});return e},prepareConfigItems:function(e){var t=this,n=function(e){e.theme=t.theme||"",void 0===e.labelWidth&&(e.labelWidth=t.labelWidth),void 0===e.inputWidth&&(e.inputWidth=t.inputWidth),("pass"===e.type||"password"===e.type)&&(e.type="string",e.isPassword=!0),e.items&&Fancy.each(e.items,n)};return Fancy.each(e.items,n),e}}),Fancy.define(["Fancy.Form","FancyForm"],{extend:Fancy.Widget,mixins:["Fancy.form.mixin.Form",Fancy.panel.mixin.PrepareConfig,Fancy.panel.mixin.methods,"Fancy.form.mixin.PrepareConfig"],type:"form",theme:"default",i18n:"en",maxLabelNumber:11,minWidth:200,minHeight:200,barScrollEnabled:!0,constructor:function(e){var t=this,e=e||{},n=function(n){n&&Fancy.apply(e,n),e=t.prepareConfig(e,t),Fancy.applyConfig(t,e),t.Super("const",arguments)},i=function(){var i=e.i18n||t.i18n;Fancy.loadLang(i,n)===!0&&n({})};Fancy.loadStyle(),Fancy.modules.form||Fancy.fullBuilt||Fancy.MODULELOAD===!1||Fancy.MODULESLOAD===!1||t.fullBuilt===!0||t.neededModules===!0?i():Fancy.modules.grid?Fancy.loadModule("form",function(){i()}):t.loadModules(i,e)},loadModules:function(e,t){var n=this,i={form:!0};Fancy.modules=Fancy.modules||{},Fancy.nojQuery&&(i.dom=!0),Fancy.isTouch&&(i.touch=!0),t.url&&(i.ajax=!0);var r=function(e){return e.menu?(i.menu=!0,!0):void 0};Fancy.each(t.tbar,r),Fancy.each(t.bbar,r),Fancy.each(t.buttons,r),Fancy.each(t.subTBar,r);var o=function(e){for(var t,n=0,r=e.length;r>n;n++)t=e[n],"combo"===t.type&&t.data&&t.data.proxy&&(i.ajax=!0),"date"===t.type&&(i.grid=!0,i.date=!0,i.selection=!0),t.items&&o(t.items)};o(t.items||[]),n.neededModules={length:0};for(var a in i)void 0===Fancy.modules[a]&&(n.neededModules[a]=!0,n.neededModules.length++);if(0===n.neededModules.length)return n.neededModules=!0,void e();var s=function(t){delete n.neededModules[t],n.neededModules.length--,0===n.neededModules.length&&(n.neededModules=!0,e())};if(n.neededModules.dom)Fancy.loadModule("dom",function(){delete n.neededModules.dom,n.neededModules.length--;for(var e in n.neededModules)"length"!==e&&Fancy.loadModule(e,s)});else for(var a in n.neededModules)"length"!==a&&Fancy.loadModule(a,s)}}),FancyForm.get=function(e){var t=Fancy.get(e);if(t.dom){var n=t.select(".fancy-form").dom.id;return Fancy.getWidget(n)}},FancyForm.defineTheme=Fancy.defineTheme,FancyForm.defineController=Fancy.defineController,FancyForm.addValid=Fancy.addValid,!Fancy.nojQuery&&Fancy.$&&(Fancy.$.fn.FancyForm=function(e){return e.renderTo=$(this.selector)[0].id,new Fancy.Form(e)}),function(){var e=Fancy,t=e.FIELD_NOT_VALID_CLS,n=e.FIELD_LABEL_ALIGN_TOP_CLS,i=e.FIELD_TEXT_CLS,r=e.FIELD_LABEL_CLS,o=e.FIELD_TEXTAREA_TEXT_CLS,a=e.FIELD_LABEL_ALIGN_RIGHT_CLS,s=e.FIELD_DISABLED_CLS;e.ns("Fancy.form.field"),e.form.field.Mixin=function(){},e.form.field.Mixin.prototype={padding:"8px 8px 0px 8px",inputHeight:29,labelHeight:18,failedValidCls:t,cls:"",checkValidOnTyping:!1,editable:!0,ons:function(){var e=this,t=e.el,n=e.el.getByTag("input");if(e.input=n,n.on("blur",e.onBlur,e),n.on("focus",e.onFocus,e),n.on("input",e.onInput,e),n.on("keydown",e.onKeyDown,e),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.on("key",e.onKey,e),e.tip&&t.on("mousemove",e.onMouseMove,e),e.format&&e.format.inputFn){switch(e.value){case"":case void 0:break;default:e.formatValue(e.value)}e.on("key",e.onKeyInputFn)}e.stopPropagation&&t.on("mousedown",function(e){e.stopPropagation()}),t.on("mousedown",function(t){e.disabled&&(t.preventDefault(),t.stopPropagation())})},onKeyInputFn:function(t,n,i){var r=this,o=i.keyCode,a=e.key;if(!r.disabled){switch(o){case a.ENTER:case a.ESC:case a.LEFT:case a.RIGHT:return}this.formatValue(n)}},formatValue:function(e){e=this.format.inputFn(e),this.input.dom.value=e},onMouseOver:function(e){var t=this;t.disabled||(t.fire("mouseover"),t.tip&&t.renderTip(e))},onMouseOut:function(e){var t=this;t.disabled||(t.fire("mouseout"),t.tip&&t.tooltip&&(t.tooltipToDestroy=!0,t.tooltip.destroy(),delete t.tooltip))},render:function(){var t=this,l=t.renderTo||document.body,d=t.renderAfter,c=t.renderBefore,u=e.get(document.createElement("div"));e.isString(l)&&(l=document.getElementById(l),l||(l=e.select(l).item(0))),t.fire("beforerender"),u.addCls(e.cls,t.cls,t.fieldCls),u.attr("id",t.id);var h="",f="";t.itemsHTML&&(f=t.itemsHTML),"top"===t.labelAlign&&t.label&&t.labelWidth<7*t.label.length&&(t.labelWidth=7*(t.label.length+2)),t.labelWidth&&(h="width:"+t.labelWidth+"px;");var g=t.label;""===t.label?g="&nbsp;":void 0===t.label?g="&nbsp;":"right"!==t.labelAlign&&(g+=":");var p="",m="",v="";if(t.label===!1&&(p="display:none;"),t.inputLabel?v=t.inputLabel:m="display:none;","recaptcha"===t.type?u.update(t.tpl.getHTML({key:t.key})):u.update(t.tpl.getHTML({labelWidth:h,label:g,labelDisplay:p,inputLabelDisplay:m,inputLabel:v,emptyText:t.emptyText,value:t.value,height:t.height,itemsHTML:f,errorTextStyle:"",buttonText:t.buttonText})),t.el=u,t.setStyle(),t.renderId===!0&&u.attr("id",t.id),d?u=d.after(u.dom.outerHTML).next():c?u=c.before(u.dom.outerHTML).prev():l.appendChild(u.dom),t.el=u,"textarea"===t.type?t.input=t.el.getByTag("textarea"):t.input=t.el.getByTag("input"),t.name&&(t.input.name=t.name),t.setSize(),"top"===t.labelAlign)t.el.addCls(n),t.el.select("."+i).css("float","none");else if("right"===t.labelAlign)switch(t.el.addCls(a),t.type){case"radio":e.$(u.dom).find("."+r).insertAfter(e.$(u.dom).find("."+i+":last")),e.$(u.dom).find("."+r).css("float","right");break;case"textarea":e.$(u.dom).find("."+r).insertAfter(e.$(u.dom).find("."+o));break;case"checkbox":e.$(u.dom).find("."+r).css("float","right");break;default:e.$(u.dom).find("."+r).insertAfter(e.$(u.dom).find("."+i))}else"radio"!==t.type;if(t.acceptedValue=t.value,t.fire("afterrender"),t.fire("render"),"recaptcha"!==t.type&&"chat"!==t.type&&setTimeout(function(){t.input&&t.input.dom&&0===t.input.dom.value.length&&void 0===t.prevColor&&(t.prevColor=t.input.css("color"))},1),t.disabled){switch(t.type){case"hidden":break;default:t.addCls(s)}t.input&&t.input.attr("tabIndex",-1)}},onKeyDown:function(t){var n=this,i=t.keyCode,r=e.key;if(!n.disabled){switch(i){case r.BACKSPACE:case r.DELETE:switch(n.type){case"field.number":case"field.string":setTimeout(function(){""===n.getValue()&&n.fire("empty")},1)}break;case r.TAB:n.fire("tab",t);break;case r.ENTER:n.fire("enter",n.getValue()),"textarea"!==n.type&&(t.preventDefault(),t.stopPropagation());break;case r.UP:switch(n.type){case"number":case"field.number":n.spinUp()}n.fire("up",n.getValue()),"textarea"!==n.type&&(t.preventDefault(),t.stopPropagation());break;case r.DOWN:switch(n.type){case"number":case"field.number":n.spinDown()}n.fire("down",n.getValue()),"textarea"!==n.type&&(t.preventDefault(),t.stopPropagation());break;case r.LEFT:break;case r.RIGHT:t.stopPropagation();break;default:setTimeout(function(){n.input&&(0===n.input.dom.value.length?(void 0===n.prevColor&&(n.prevColor=n.input.css("color")),n.input.css("color","grey")):n.prevColor?n.input.css("color",n.prevColor):n.input.css("color"," "))},1)}setTimeout(function(){n.fire("key",n.input.dom.value,t)},1)}},onKey:function(e,t){e.disabled||(!e.isValid()||e.checkValidOnTyping)&&e.validate(t)},onBlur:function(){var e=this;return e.disabled?!0:(e.fire("blur"),e.input?e.validate(e.input.dom.value):!0)},validate:function(t){var n=this,i=n.vtype;if(void 0===i)return!0;var r=e.isValid(i,t);return r!==!0?(n.errorText=new e.Template(r.text).getHTML(r),n.failedValid(),!1):(n.successValid(),!0)},isValid:function(){return!this.hasCls(this.failedValidCls)},onFocus:function(e){var t=this;return t.disabled||t.editable===!1?void this.input.blur():void t.fire("focus")},onInput:function(){var e=this,t=(e.input,e.getValue()),n=e.acceptedValue;e.disabled||(e.acceptedValue=e.get(),e.fire("input",t),e.fire("change",t,n))},get:function(){var t=this;if(t.format)if(e.isString(t.format));else{if(!e.isObject(t.format))return t.value;if(t.format.inputFn&&("number"===t.type||"field.number"===t.type))return isNaN(parseFloat(t.value))?t.value:Number(t.value)}return t.input.dom.value},getValue:function(){return this.get()},set:function(e,t){var n=this;n.value=e,n.format&&n.format.inputFn?n.formatValue(e):n.input.dom.value=e,t!==!1&&n.onInput(),n.validate(e)},setLabel:function(e){var t=this;t.el.select("."+r).update(e)},setValue:function(e,t){this.set(e,t)},clear:function(){this.set(""),this.clearValid()},failedValid:function(){var e=this;e.hasCls(e.failedValidCls)?e.tooltip&&e.errorText&&e.tooltip.update(e.errorText):(!e.tooltip&&e.errorText&&(e.showErrorTip(),e.el.on("mousemove",e.onMouseMove,e),e.input.hover(function(t){e.errorText&&(e.showErrorTip(),e.tooltip.show(t.pageX+15,t.pageY-25))},function(){e.hideErrorTip()})),e.addCls(e.failedValidCls))},clearValid:function(){this.removeCls(this.failedValidCls)},successValid:function(){var e=this;e.removeCls(e.failedValidCls),e.hideErrorTip(),delete e.errorText},showErrorTip:function(){var t=this;t.tooltip||(t.tooltip=new e.ToolTip({text:t.errorText}))},hideErrorTip:function(){var e=this;e.tooltip&&(e.tooltip.destroy(),delete e.tooltip)},setInputSize:function(e){var t=this;e.width&&t.input.css("width",e.width),e.height&&t.input.css("height",e.height)},focus:function(){var e=this;e.input.focus(),setTimeout(function(){e.input.dom.selectionStart=e.input.dom.selectionEnd=1e4},0)},hide:function(){var e=this;e.fire("beforehide"),e.css("display","none"),e.fire("hide")},show:function(){var e=this;e.css("display","block")},setSize:function(e,t){var n=this;switch(n.type){case"set":case"line":return}if(void 0===e&&void 0===t)e=n.width,t=n.height;else if(void 0===t){var i=e;e=i.width?i.width:n.width,t=i.height?i.height:n.height}return n.size?void n.size({width:e,height:t}):(void 0!==e&&n.css("width",e),"top"===n.labelAlign?n.css("height",1.5*t):(n.css("height",t),n.label&&n.el.select("."+r).css("height",n.inputHeight)),void n.setInputSize({width:n.inputWidth,height:n.inputHeight}))},setStyle:function(){var t=this,n=t.style||{},i=t.padding;i?(e.isNumber(i)?i+="px":e.isString(i),void 0===n.padding&&(n.padding=i)):n.padding="0px",t.hidden&&t.css("display","none"),t.css(n)},preRender:function(){var t=this;t.tpl&&e.isObject(t.tpl)===!1&&(t.tpl=new e.Template(t.tpl)),t.calcSize()},calcSize:function(){var t,n,i,r,o,a=this,s=a.inputHeight,l=a.padding;if(e.isString(l))switch(l=l.replace(/px/g,""),l=l.split(" "),l.length){case 1:n=Number(l[0]),l=[n,n,n,n];break;case 2:i=Number(l[0]),r=Number(l[1]),l=[i,r,i,r];break;case 3:i=Number(l[0]),r=Number(l[1]),o=Number(l[2]),l=[i,r,o,i];break;case 4:l=[Number(l[0]),Number(l[1]),Number(l[2]),Number(l[3])]}else e.isNumber(l)?l=[l,l,l,l]:l===!1&&(l=[0,0,0,0]);"top"===a.labelAlign&&(a.height*=1.5),t=a.width,"top"!==a.labelAlign&&a.label&&(t-=a.labelWidth),a.height===a.inputHeight&&a.padding!==!1&&(s-=l[0]+l[2]),"radio"!==a.type||a.column||(a.calcColumns(),1!==a.rows&&(s=(s-l[0]-l[2])*a.rows)),a.inputHeight=s,a.inputWidth=t-l[1]-l[3],a.height=s+l[0]+l[2]},setWidth:function(e){var t=this;t.width=e,t.calcSize(),t.css("width",e),t.setInputSize({width:t.inputWidth})},onMouseMove:function(e){var t=this,n=t.widget;if(!t.disabled){if(delete t.tooltipToDestroy,n){if(n.startResizing&&t.tooltip)return void t.tooltip.destroy();if(n.columndrag&&"dragging"===n.columndrag.status)return void t.tooltip.destroy()}t.tip?t.renderTip(e):t.tooltip&&t.tooltip.show(e.pageX+15,e.pageY-25)}},renderTip:function(t){var n=this,i="",r=new e.Template(n.tip||n.tooltip);n.getValue&&(i=n.getValue());var o=r.getHTML({value:i});n.tooltip?n.tooltip.update(o):n.tooltip=new e.ToolTip({text:o}),n.tooltip.show(t.pageX+15,t.pageY-25)},getInputSelection:function(){var e,t,n,i,r,o=this,a=0,s=0,l=o.input.dom;return"number"==typeof l.selectionStart&&"number"==typeof l.selectionEnd?(a=l.selectionStart,s=l.selectionEnd):(t=document.selection.createRange(),t&&t.parentElement()==l&&(i=l.value.length,e=l.value.replace(/\r\n/g,"\n"),n=l.createTextRange(),n.moveToBookmark(t.getBookmark()),r=l.createTextRange(),r.collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?a=s=i:(a=-n.moveStart("character",-i),a+=e.slice(0,a).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?s=i:(s=-n.moveEnd("character",-i),s+=e.slice(0,s).split("\n").length-1)))),{start:a,end:s}},enable:function(){var e=this;e.disabled=!1,e.removeCls(s),e.button&&e.button.enable(),e.input&&e.input.attr("tabIndex",0)},disable:function(){var e=this;e.disabled=!0,e.addCls(s),e.button&&e.button.disable(),e.input&&e.input.attr("tabIndex",-1)}}}(),Fancy.define(["Fancy.form.field.String","Fancy.StringField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.string",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","enter","up","down","tab","change","key","empty"),e.Super("init",arguments),e.preRender(),e.render(),e.ons(),e.isPassword&&(e.input.attr({type:"password"}),e.showPassTip&&(e.el.select(".fancy-field-text").item(0).append('<div class="fancy-field-pass-tip">abc</div>'),e.passTipEl=e.el.select(".fancy-field-pass-tip").item(0),e.passTipEl.on("mousedown",function(e){e.preventDefault()}),e.passTipEl.on("click",function(){"password"!==e.input.attr("type")?(e.passTipEl.update("abc"),e.input.attr("type","password"),e.passTipEl.css("line-height","22px")):(e.passTipEl.update("***"),e.input.attr("type",""),e.passTipEl.css("line-height","28px"))}))),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:Fancy.FIELD_CLS,value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<input placeholder="{emptyText}" class="fancy-field-text-input" style="{inputWidth}" value="{value}">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']}),function(){var e=Fancy.CLEARFIX_CLS,t=Fancy.FIELD_CLS,n=Fancy.FIELD_LABEL_CLS,i=Fancy.FIELD_ERROR_CLS,r=Fancy.FIELD_TEXT_CLS,o=Fancy.FIELD_TEXT_INPUT_CLS,a=Fancy.FIELD_SPIN_CLS,s=Fancy.FIELD_SPIN_UP_CLS,l=Fancy.FIELD_SPIN_DOWN_CLS;Fancy.define(["Fancy.form.field.Number","Fancy.NumberField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.number",allowBlank:!0,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","enter","up","down","tab","change","key","empty"),e.Super("init",arguments),e.preRender(),e.render(),e.ons(),e.hidden&&e.css("display","none"),e.initSpin()},fieldCls:t,value:"",width:100,emptyText:"",step:1,tpl:['<div class="'+n+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+r+'">','<input placeholder="{emptyText}" class="'+o+'" style="{inputWidth}" value="{value}">','<div class="'+a+'">','<div class="'+s+'"></div>','<div class="'+l+'"></div>',"</div>",'<div class="'+i+'" style="{errorTextStyle}"></div>',"</div>",'<div class="'+e+'"></div>'],onInput:function(){var e=this,t=e.input,n=e.get(),i=e.acceptedValue;if(e.isValid()){for(var r=t.dom.value,o="",a=0,s=r.length;s>a;a++)switch(r[a]){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":case"+":case".":o+=r[a]}isNaN(Number(o))||(e.value=o,n=o)}e.acceptedValue=Number(e.get()),e.fire("input",n),e.fire("change",Number(n),Number(i))},isNumber:function(e){return""===e||"-"===e?!0:Fancy.isNumber(+e)},checkMinMax:function(e){var t=this;return""===e||"-"===e?!0:(e=+e,e>=t.min&&e<=t.max)},setMin:function(e){this.min=e},setMax:function(e){this.max=e},initSpin:function(){var e=this;e.spin===!0&&(e.el.select("."+a).css("display","block"),e.el.select("."+s).on("mousedown",e.onMouseDownSpinUp,e),e.el.select("."+l).on("mousedown",e.onMouseDownSpinDown,e))},onMouseDownSpinUp:function(e){var t=this,n=Fancy.get(document),i=700,r=new Date;t.disabled||(e.preventDefault(),t.mouseDownSpinUp=!0,t.spinUp(),t.spinInterval=setInterval(function(){t.mouseDownSpinUp=!1,new Date-r>i&&(700===i&&(i=150),r=new Date,t.spinUp(),i--,20>i&&(i=20))},20),n.once("mouseup",function(){clearInterval(t.spinInterval)}),t.focus())},onMouseDownSpinDown:function(e){var t=this,n=Fancy.get(document),i=700,r=new Date;t.disabled||(e.preventDefault(),t.mouseDownSpinDown=!0,t.spinDown(),t.spinInterval=setInterval(function(){t.mouseDownSpinDown=!1,new Date-r>i&&(700===i&&(i=150),r=new Date,t.spinDown(),i--,20>i&&(i=20))},20),n.once("mouseup",function(){clearInterval(t.spinInterval)}),t.focus())},spinUp:function(){var e=this,t=+e.get()+e.step;Fancy.Number.isFloat(e.step)&&(t=Fancy.Number.correctFloat(t)),isNaN(t)&&(t=e.min||0),void 0!==e.max&&t>e.max?t=e.max:t<e.min&&(t=e.min),e.set(t)},spinDown:function(){var e=this,t=+e.get()-e.step;Fancy.Number.isFloat(e.step)&&(t=Fancy.Number.correctFloat(t)),isNaN(t)&&(t=e.min||0),void 0!==e.min&&t<e.min?t=e.min:t>e.max&&(t=e.max),e.set(t)}})}(),function(){var e=Fancy,t=e.CLEARFIX_CLS,n=e.FIELD_CLS,i=e.FIELD_LABEL_CLS,r=e.FIELD_TEXT_CLS,o=e.FIELD_ERROR_CLS,a=e.FIELD_TEXT_INPUT_CLS;e.define(["Fancy.form.field.Date","Fancy.DateField"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.date",picker:!0,i18n:"en",theme:"default",fieldCls:n,value:"",width:100,emptyText:"",tpl:['<div class="'+i+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+r+'">','<input placeholder="{emptyText}" class="'+a+'" style="{inputWidth}" value="{value}">','<div class="fancy-field-picker-button"></div>','<div class="'+o+'" style="{errorTextStyle}"></div>',"</div>",'<div class="'+t+'"></div>'],constructor:function(t){e.apply(this,t),this.Super("const",arguments)},init:function(){var t=this;t.addEvents("focus","blur","input","enter","up","down","tab","change","key","showpicker"),t.initFormat(),t.Super("init",arguments),t.preRender(),t.render(),t.ons(),t.hidden&&t.css("display","none"),t.style&&t.css(t.style),e.isDate(t.value)||t.initDate(),t.changeInputValue(),t.initPicker()},initDate:function(t,n){var i=this;if(t){if("date"===e.typeOf(t))return void(i.date=t);var r;if(r=n?e.Date.parse(t,n,i.format.mode):e.Date.parse(t,i.format.read,i.format.mode),"Invalid Date"===r.toString&&(r=e.Date.parse(t,i.format.edit,i.format.mode)),"Invalid Date"===r.toString)return;return void(i.date=r)}switch(e.typeOf(t)){case"date":i.date=i.value;break;case"undefined":case"string":if(!i.value)return void delete i.date;i.date=e.Date.parse(i.value,i.format.read,i.format.mode)}},changeInputValue:function(){var t=this;if("date"!==e.typeOf(t.date)||"Invalid Date"===t.date.toString())return void(t.input.dom.value="");var n=e.Date.format(t.date,t.format.edit,void 0,t.format.mode);t.format&&t.format.inputFn&&(n=t.format.inputFn(n)),void 0===n&&(n=""),t.input.dom.value=n,t.fire("change",n)},initFormat:function(){var t=this;t.format?e.isObject(t.format)&&e.applyIf(t.format,e.i18n[t.i18n].date):t.format=e.i18n[t.i18n].date},formatValue:function(t){var n=this;if(!n.value&&t?n.value=t:!t&&n.value&&(t=n.value),n.value)if("date"===e.typeOf(n.value)){if(n.value=e.Date.format(n.value,n.format.read,void 0,n.format.mode),void 0===t){var i=e.Date.parse(n.value,n.format.edit,n.format.mode);t=e.Date.format(i,n.format.edit,void 0,n.format.mode)}n.acceptedValue=t}else{var r=e.Date.parse(n.value,n.format.read,n.format.mode);n.value=e.Date.format(r,n.format.edit,void 0,n.format.mode)}else;n.format&&n.format.inputFn&&(t=n.format.inputFn(t)),void 0===t&&(t=""),/NaN/.test(t)&&(t=""),n.input.dom.value=t},ons:function(){var e=this,t=e.el.getByTag("input");e.input=t,t.on("blur",e.onBlur,e),t.on("focus",e.onFocus,e),t.on("input",e.onInput,e),t.on("keydown",e.onKeyDown,e),e.on("key",e.onKey,e),e.on("enter",e.onEnter,e),e.on("beforehide",e.onBeforeHide,e),e.format&&e.format.inputFn&&e.on("key",e.onKeyInputFn)},initPicker:function(){var e=this;e.picker!==!1&&(e.dateImage===!1?(e.el.select(".fancy-field-picker-button").css("display","none"),e.input.on("click",e.onInputClick,e)):(e.pickerButton=e.el.select(".fancy-field-picker-button"),e.pickerButton.on("mousedown",e.onPickerButtonMouseDown,e)))},onInputClick:function(e){e.preventDefault(),this.toggleShowPicker()},onPickerButtonMouseDown:function(e){var t=this;t.disabled||(e.preventDefault(),t.toggleShowPicker())},showPicker:function(){var t=this,n=t.el,i=t.input,o=e.get(document),a=!1;t.picker===!0?(a=!0,t.renderPicker()):t.picker.monthPicker&&(t.picker.monthPicker.hide(),t.picker.monthPicker.panel.css("top","-300px"));var s=i.offset(),l=s.left,d=s.top+n.select("."+r).height(),c=t.date||new Date;"Invalid Date"===c.toString()&&(c=new Date),t.picker.setDate(c,a),e.datepicker.Manager.add(t.picker),t.picker.showAt(l,d),t.fire("showpicker"),t.docSpy||(t.docSpy=!0,o.on("click",t.onDocClick,t))},onDocClick:function(t){var n=this,i=n.picker,r=i.monthPicker,o=t.target;"input"===o.tagName.toLocaleLowerCase()||e.get(o).hasCls("fancy-field-picker-button")||i.panel.el.within(o)||r&&r.panel.el.within(o)||n.hidePicker()},hidePicker:function(){var t=this;if(t.picker!==!1&&t.picker.hide&&t.picker.hide(),t.docSpy){var n=e.get(document);t.docSpy=!1,n.un("click",t.onDocClick,t)}},toggleShowPicker:function(){var e=this;return e.picker===!0?void e.showPicker():void("none"===e.picker.panel.el.css("display")?e.showPicker():e.hidePicker())},renderPicker:function(){var t=this;(e.fullBuilt||e.modules.grid||e.MODULELOAD===!1||e.MODULESLOAD===!1)&&(t.picker=new e.DatePicker({window:!0,date:t.date,format:t.format,theme:t.theme,minValue:t.min,maxValue:t.max,events:[{changedate:t.onPickerChangeDate,scope:t}]}))},get:function(){var t=this;return""===t.input.dom.value?(delete t.date,delete t.value,""):t.date?e.Date.format(t.date,t.format.write,void 0,t.format.mode):""},getDate:function(){return this.date||""},onBeforeHide:function(){this.hidePicker()},onPickerChangeDate:function(e,t,n){var i=this;n!==!1&&i.picker.hide(),i.initDate(t),i.changeInputValue()},onInput:function(){var t=this,n=t.input,i=n.dom.value,r=t.acceptedValue;"Invalid Date"!==e.Date.parse(i,t.format.edit,t.format.mode).toString()&&(t.initDate(i,t.format.edit),t.fire("input",i),t.fire("change",i,r))},isValid:function(){var t=this;return"Invalid Date"!==e.Date.parse(t.get(),t.format.edit,t.format.mode).toString()},set:function(e){var t=this;switch(e){case"":case void 0:return delete t.value,delete t.date,void t.changeInputValue()}t.initDate(e),t.changeInputValue()},isEqual:function(t){var n=this,i=e.Date.parse(t,n.format.read,n.format.mode),r=n.input.dom.value;return t=e.Date.format(i,n.format.edit,void 0,n.format.mode),t===r},onEnter:function(){var e=this,t=e.input,n=t.dom.value,i=e.acceptedValue;""===n&&(e.initDate(),e.fire("input",n),e.fire("change",n,i))}})}(),function(){var e=Fancy;e.define(["Fancy.form.field.DateRange","Fancy.DateRangeField"],{extend:e.Widget,type:"field.daterange",picker:!0,format:"m/d/Y",dateImage:!0,theme:"default",constructor:function(t){e.apply(this,t),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("changedatefrom","changedateto","change"),e.preRender(),e.render(),e.initDateFields()},fieldCls:e.cls+" fancy-date-range",width:100,render:function(){var t=this,n=t.renderTo||document.body,i=e.get(document.createElement("div"));i.addCls(t.cls),t.el=e.get(e.get(n).dom.appendChild(i.dom))},preRender:function(){},initDateFields:function(){var t=this,n=t.theme;t.dateField1=new e.DateField({renderTo:t.el.dom,label:!1,dateImage:t.dateImage,width:t.width/2,padding:!1,theme:n,style:{position:"absolute",bottom:"2px",left:"3px"},format:t.format,events:[{showpicker:t.onShowPicker1,scope:t},{change:t.onChangeDate1,scope:t},{focus:t.onFocus1,scope:t},{enter:t.onEnter,scope:t}]}),t.dateField1.setInputSize({width:t.width/2}),t.dateField2=new e.DateField({renderTo:t.el.dom,label:!1,dateImage:t.dateImage,width:t.width/2,padding:!1,theme:n,style:{position:"absolute",bottom:"2px",right:"2px"},format:t.format,events:[{showpicker:t.onShowPicker2,scope:t},{change:t.onChangeDate2,scope:t},{focus:t.onFocus2,scope:t},{keydown:t.onEnter,scope:t}]}),t.dateField2.setInputSize({width:t.width/2})},onFocus1:function(){this.dateField2.hidePicker()},onFocus2:function(){this.dateField1.hidePicker()},onShowPicker1:function(){this.dateField2.hidePicker()},onShowPicker2:function(){this.dateField1.hidePicker()},onChangeDate1:function(t,n){var i=this,n=e.Date.parse(n,t.format.edit,t.format.mode);i.fire("changedatefrom",n),i.fire("change")},onChangeDate2:function(t,n){var n=e.Date.parse(n,t.format.edit,t.format.mode);this.fire("changedateto",n),this.fire("change")},onEnter:function(){this.dateField1.hidePicker(),this.dateField2.hidePicker()}})}(),Fancy.define(["Fancy.form.field.Text","Fancy.TextField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.text",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.preRender(),e.render(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:Fancy.FIELD_CLS+" fancy-field-field-text",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-text-value">{value}</div>','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],set:function(e){this.el.select(".fancy-field-text-value").item(0).update(e)}}),Fancy.define(["Fancy.form.field.Empty","Fancy.EmptyField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.empty",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents(),e.Super("init",arguments),e.preRender(),e.render(),e.style&&e.css(e.style)},ons:function(){},fieldCls:Fancy.FIELD_CLS+" "+Fancy.FIELD_EMPTY_CLS,width:100,tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']}),function(){var e=Fancy,t=e.FIELD_CLS,n=e.FIELD_TEXTAREA_CLS,i=e.FIELD_LABEL_CLS,r=e.FIELD_TEXTAREA_TEXT_CLS,o=e.FIELD_TEXTAREA_TEXT_INPUT_CLS,a=e.FIELD_ERROR_CLS,s=e.CLEARFIX_CLS;e.define(["Fancy.form.field.TextArea","Fancy.TextArea"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.textarea",constructor:function(){this.Super("const",arguments)},init:function(){var e=this;e.addEvents("change","key"),e.Super("init",arguments),e.preRender(),e.render(),e.ons()},fieldCls:t+" "+n,value:"",width:250,height:100,labelWidth:60,inputWidth:180,minHeight:100,maxHeight:210,lineHeight:12.5,emptyText:"",tpl:['<div class="'+i+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+r+'">','<textarea autocomplete="off" placeholder="{emptyText}" type="text" class="'+o+'" style="{inputWidth}height:{inputHeight}px;">{value}</textarea>','<div class="'+a+'" style="{errorTextStyle}"></div>',"</div>",'<div class="'+s+'"></div>'],ons:function(){var e=this,t=e.el.getByTag("textarea");e.input=t,t.on("blur",e.onBlur,e),t.on("focus",e.onFocus,e),t.on("input",e.onInput,e),t.on("keydown",e.onKeyDown,e),e.on("key",e.onKey,e),e.autoHeight&&t.on("input",e.onChange,e),t.on("mousedown",function(t){e.disabled&&t.preventDefault()})},preRender:function(){var t=this;t.tpl&&(t.tpl=new e.Template(t.tpl)),t.initHeight(),t.calcSize()},initHeight:function(){var e,t=this;if(t.height)e=t.height,t.maxHeight<t.height&&(t.maxHeight=t.height,setTimeout(function(){t.input.css({"overflow-y":"scroll"})},1));else if(t.value){var n=t.value.match(/\n/g);n=n?n.length:1,e=n*t.lineHeight}else e=t.height;e<t.minHeight?e=t.minHeight:e>t.maxHeight&&(e=t.maxHeight,setTimeout(function(){t.input.css({"overflow-y":"scroll"})},1)),t.height=e,t.inputHeight=e},calcSize:function(){var t,n,i,r,o,a=this,s=a.padding;if(e.isString(s))switch(s=s.replace(/px/g,""),s=s.split(" "),s.length){case 1:n=Number(s[0]),s=[n,n,n,n];break;case 2:i=Number(s[0]),r=Number(s[1]),s=[i,r,i,r];break;case 3:i=Number(s[0]),r=Number(s[1]),o=Number(s[2]),s=[i,r,o,i];break;case 4:s=[Number(s[0]),Number(s[1]),Number(s[2]),Number(s[3])]}else e.isNumber(s)?s=[s,s,s,s]:s===!1&&(s=[0,0,0,0]);"top"===a.labelAlign&&(a.inputHeight-=40),t=a.width,"top"!==a.labelAlign&&a.label&&(t-=a.labelWidth),a.height===a.inputHeight&&a.padding!==!1&&(a.inputHeight-=s[0]+s[2]),a.inputWidth=t-s[1]-s[3],a.height=a.inputHeight+s[0]+s[2]},onChange:function(){var e=this,t=e.input.dom.value,n=e.el.getByTag("textarea"),i=t.match(/\n/g).length*e.lineHeight;i<e.minHeight?(i=e.minHeight,n.css({"overflow-y":"hidden"})):i>e.maxHeight?(i=e.maxHeight,n.css({"overflow-y":"scroll"})):n.css({"overflow-y":"hidden"}),e.height=i}})}(),function(){var e=Fancy.CLEARFIX_CLS,t=Fancy.FIELD_CLS,n=Fancy.FIELD_LABEL_CLS,i=Fancy.FIELD_TEXT_CLS,r=Fancy.FIELD_CHECKBOX_CLS,o=Fancy.FIELD_CHECKBOX_INPUT_CLS,a=Fancy.FIELD_INPUT_LABEL_CLS,s=Fancy.FIELD_CHECKBOX_ON_CLS;Fancy.define(["Fancy.form.field.CheckBox","Fancy.CheckBox"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.checkbox",disabled:!1,constructor:function(e){Fancy.applyConfig(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","up","down","beforechange","change","key"),e.Super("init",arguments),e.preRender(),e.render({labelWidth:e.labelWidth,labelDispay:e.labelText?"":"none",label:e.label}),e.expander&&e.addCls("fancy-checkbox-expander"),e.acceptedValue=e.value,e.set(e.value,!1),e.ons()},labelText:"",labelWidth:60,value:!1,editable:!0,stopIfCTRL:!1,checkedCls:s,fieldCls:t+" "+r,tpl:['<div class="'+n+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+i+'">','<div class="'+o+'"></div>',"</div>",'<div class="'+a+'" style="{inputLabelDisplay}">',"{inputLabel}","</div>",'<div class="'+e+'"></div>'],ons:function(){var e=this,t=e.el;t.on("click",e.onClick,e),t.on("mousedown",e.onMouseDown,e)},onClick:function(e){var t=this,n=t.el;if(!(t.disabled||(t.fire("beforechange"),e.ctrlKey&&t.stopIfCTRL||t.editable===!1))){if(t.canceledChange===!0)return void(t.canceledChange=!0);n.toggleCls(t.checkedCls);var i=t.value;t.value=n.hasCls(t.checkedCls),t.fire("change",t.value,i)}},onMouseDown:function(e){e.preventDefault()},set:function(e,t){var n=this,i=n.el;if(""===e&&(e=!1),e===!0||1===e)i.addCls(n.checkedCls),e=!0;else if(e===!1||0===e)i.removeClass(n.checkedCls),e=!1;else{if(void 0!==e)throw new Error("not right value for checkbox "+e);e=!1}n.value=e,t!==!1&&n.fire("change",n.value)},setValue:function(e,t){this.set(e,t)},getValue:function(){return this.value},get:function(){return this.getValue()},clear:function(){this.set(!1)},toggle:function(){this.set(!this.value)}})}(),Fancy.define(["Fancy.form.field.Switcher","Fancy.Switcher"],{extend:Fancy.CheckBox,type:"field.switcher",constructor:function(e){Fancy.applyConfig(this,e),this.Super("const",arguments)},init:function(){this.Super("init",arguments)},checkedCls:"fancy-switcher-on",fieldCls:Fancy.FIELD_CLS+" fancy-field-switcher",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">',"</div>",'<div class="fancy-field-input-label" style="{inputLabelDisplay}">',"{inputLabel}","</div>",'<div class="fancy-clearfix"></div>']}),function(){var e=Fancy,t=e.FIELD_CLS,n=e.FIELD_COMBO_CLS,i=e.FIELD_COMBO_SELECTED_ITEM_CLS,r=e.FIELD_COMBO_FOCUSED_ITEM_CLS,o=e.FIELD_LABEL_CLS,a=e.FIELD_TEXT_CLS,s=e.CLEARFIX_CLS,l=e.FIELD_ERROR_CLS,d=e.FIELD_TEXT_INPUT_CLS,c=e.FIELD_DISABLED_CLS,u=e.FIELD_COMBO_DROPDOWN_BUTTON_CLS,h=e.FIELD_COMBO_INPUT_CONTAINER_CLS,f=e.FIELD_COMBO_LEFT_EL_CLS,g=e.FIELD_LABEL_ALIGN_TOP_CLS,p=e.FIELD_LABEL_ALIGN_RIGHT_CLS,m=e.FIELD_CHECKBOX_INPUT_CLS,v=e.FIELD_COMBO_LIST_VALUE_CLS;e.define("Fancy.combo.Manager",{singleton:!0,opened:[],add:function(e){this.hideLists(),this.opened.push(e)},hideLists:function(){e.each(this.opened,function(e){e.hideList(),e.hideAheadList()}),this.opened=[]}}),e.define(["Fancy.form.field.Combo","Fancy.Combo"],{type:"field.combo",mixins:[e.form.field.Mixin],extend:e.Widget,selectedItemCls:i,focusedItemCls:r,fieldCls:t+" "+n,width:250,labelWidth:60,listRowHeight:25,dropButtonWidth:27,leftWidth:20,emptyText:"",editable:!0,typeAhead:!0,readerRootProperty:"data",valueKey:"value",displayKey:"text",multiSelect:!1,itemCheckBox:!1,listCls:"",tpl:['<div class="'+o+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+a+'">','<div class="'+h+'" style="{inputWidth}{inputHeight}">','<div class="'+f+'" style="{inputHeight}cursor:default;">&nbsp;</div>','<input placeholder="{emptyText}" class="'+d+'" style="{inputHeight}cursor:default;" value="{value}">','<div class="'+u+'">&nbsp;</div>',"</div>","</div>",'<div class="'+l+'" style="{errorTextStyle}"></div>','<div class="'+s+'"></div>'],constructor:function(){this.tags=this.tags||[],this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","up","down","change","key","enter","esc","empty","load"),e.Super("init",arguments),e.loadListData()||(e.data=e.configData(e.data)),e.multiSelect&&e.data.length&&e.initMultiSelect(),e.preRender(),e.render(),e.ons(),e.applyStyle(),e.applyTheme(),setTimeout(function(){e.applyTheme()},1)},loadListData:function(){var t=this;if(!e.isObject(t.data))return!1;var n=t.data.proxy,i=t.readerRootProperty;if(!n||!n.url)throw new Error("[FancyGrid Error]: combo data url is not defined");return n.reader&&n.reader.root&&(i=n.reader.root),e.Ajax({url:n.url,params:n.params||{},method:n.method||"GET",getJSON:!0,success:function(e){if(t.data=t.configData(e[i]),t.renderList(),t.onsList(),t.multiSelect)t.initMultiSelect(),t.value&&t.updateInput();else if(t.value){var n=t.getDisplayValue(t.value);n&&(t.input.dom.value=n)}t.fire("load")}}),!0},configData:function(t){if(e.isObject(t)||0===t.length)return t;if(!e.isObject(t[0])){for(var n=[],i=0,r=t.length;r>i;i++)n.push({text:t[i],value:i});return n}return t},applyStyle:function(){var e=this;e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},applyTheme:function(){var e=this;e.theme&&"default"!==e.theme&&(e.addCls("fancy-theme-"+e.theme),e.list.addCls("fancy-theme-"+e.theme),e.aheadList&&e.aheadList.addCls("fancy-theme-"+e.theme))},ons:function(){var e=this,t=e.el.select("."+u);e.input=e.el.getByTag("input"),e.inputContainer=e.el.select("."+h),e.drop=t,e.onsList(),e.input.on("mousedown",e.onInputMouseDown,e),e.input.on("click",e.onInputClick,e),t.on("mousedown",e.onDropMouseDown,e),t.on("click",e.onDropClick,e),e.typeAhead&&e.editable&&e.input.on("keydown",e.onKeyDown,e),e.on("esc",e.onEsc,e),e.on("enter",e.onEnter,e),e.on("up",e.onUp,e),e.on("down",e.onDown,e)},onKeyDown:function(t){var n=this,i=t.keyCode,r=e.key;switch(i){case r.ESC:n.fire("esc",t);break;case r.ENTER:n.fire("enter",t);break;case r.UP:n.fire("up",t);break;case r.DOWN:n.fire("down",t);break;case r.TAB:break;case r.BACKSPACE:setTimeout(function(){if(0===n.input.dom.value.length)n.value=-1,n.valueIndex=-1,n.hideAheadList(),n.multiSelect&&(n.values=[],n.clearListActive()),n.fire("empty");else{if(n.multiSelect&&n.input.dom.value.split(",").length!==n.valuesIndex.length){var e=n.getFromInput();n.set(e)}if(0===n.generateAheadData().length)return void n.hideAheadList();n.renderAheadList(),n.showAheadList()}},100);break;default:setTimeout(function(){return 0===n.generateAheadData().length?void n.hideAheadList():(n.renderAheadList(),void n.showAheadList())},1)}setTimeout(function(){n.fire("key",n.input.dom.value,t)},1)},onInputClick:function(e){var t=this,n=t.list;t.disabled||t.editable!==!0&&("none"===n.css("display")?t.showList():t.hideList())},onDropClick:function(t){var n=this,i=n.list;n.disabled||("none"===i.css("display")?(e.combo.Manager.add(this),n.showList()):n.hideList(),n.editable===!0&&n.input.focus())},showList:function(){var t=this,n=t.list,i=t.input.parent().parent(),r=i.$dom.offset(),o=[r.left,r.top+i.$dom.height()],a=e.get(document),s=t.selectedItemCls,l=t.focusedItemCls;if(t.hideAheadList(),t.list&&0!==t.data.length){n.css({display:"",left:o[0]+"px",top:o[1]+3+"px",opacity:0,width:t.getListWidth(),"z-index":2e3+e.zIndex++}),t.listCls&&n.addCls(t.listCls),n.animate({opacity:1,top:o[1]},e.ANIMATE_DURATION);var d;t.clearFocused();var c=n.select("."+s);0===c.length?t.multiSelect&&t.values.length?t.valuesIndex.each(function(e,t,i){void 0===d&&(d=e),n.select("li").item(e).addCls(s)}):d=0:(t.multiSelect&&c.length!==t.valuesIndex.length&&(n.select("."+s).removeCls(s),t.valuesIndex.each(function(e,t,i){void 0===d&&(d=e),n.select("li").item(e).addCls(s)})),d=c.item(0).index()),-1===d&&(d=0),n.select("li").item(d).addCls(l),t.scrollToListItem(d),t.docSpy||(t.docSpy=!0,a.on("click",t.onDocClick,t))}},showAheadList:function(){var t=this,n=t.aheadList,i=t.input.parent().parent(),r=i.$dom.offset(),o=[r.left,r.top+i.$dom.height()],a=e.get(document);t.hideList(),n&&0!==t.data.length&&(n.css({display:"",left:o[0]+"px",top:o[1]+"px",width:t.getListWidth(),"z-index":2e3+e.zIndex++}),t.docSpy2||(t.docSpy2=!0,a.on("click",t.onDocClick,t)))},onDocClick:function(e){var t=this;if(t.input.parent().parent().within(e.target)===!1){if(t.list.within(e.target)===!0)return;t.hideList(),t.hideAheadList()}},hideList:function(){var t=this;if(t.list&&(t.list.css("display","none"),t.docSpy)){var n=e.get(document);t.docSpy=!1,n.un("click",t.onDocClick,t)}},hideAheadList:function(){var t=this;if(t.aheadList&&(t.aheadList.css("display","none"),t.docSpy)){var n=e.get(document);t.docSpy=!1,n.un("click",t.onDocClick,t)}},onInputMouseDown:function(e){var t=this;return t.disabled?void e.preventDefault():void(t.editable===!1&&e.preventDefault())},onDropMouseDown:function(e){this.disabled&&e.stopPropagation(),e.preventDefault()},onsList:function(){var e=this;e.list.on("click",e.onListItemClick,e,"li"),e.list.on("mouseenter",e.onListItemOver,e,"li"),e.list.on("mouseleave",e.onListItemLeave,e,"li")},onsAheadList:function(){var e=this;e.aheadList.on("click",e.onListItemClick,e,"li")},onListItemOver:function(t){if(!this.disabled){var n=e.get(t.target);"li"===n.prop("tagName").toLocaleLowerCase()&&n.addCls(this.focusedItemCls)}},onListItemLeave:function(){this.disabled||this.clearFocused()},onListItemClick:function(t){var n=this,i=e.get(t.currentTarget),r=i.attr("value"),o=n.selectedItemCls,a=n.focusedItemCls;n.disabled||(e.nojQuery&&0===r&&(r=""),n.multiSelect?(0===n.values.length&&n.clearListActive(),n.clearFocused(),i.toggleCls(o),i.hasCls(o)?(n.addValue(r),i.addCls(a)):(n.removeValue(r),n.clearFocused()),n.updateInput()):(n.set(r),n.hideList()),n.editable?n.input.focus():n.onBlur())},set:function(t,n){var i,r=this,o="";if(r.multiSelect&&!e.isArray(t)&&(t=-1===t?[]:[t]),e.isArray(t)&&r.multiSelect){var a=[];r.valuesIndex.removeAll(),e.each(t,function(e,n){var i=r.getIndex(e);-1!==i&&(r.valuesIndex.add(i,t[n]),a.push(r.data[i][r.displayKey]),o=a.join(", "))}),r.values=t,i=r.getIndex(t[0]),r.value=t[0],r.valueIndex=i}else i=r.getIndex(t),-1!==i?(r.valueIndex=i,o=r.data[i][r.displayKey],r.selectItem(i)):-1!==t&&t&&t.length>0?(o="",r.value=-1,r.valueIndex=-1):o="",r.value=t;r.input.dom.value=o,n!==!1&&r.onInput(),r.left&&r.updateLeft()},addValue:function(e){var t=this,n=t.getIndex(e);-1===n||t.valuesIndex.get(n)||(t.value=e,t.values.push(e),t.valuesIndex.add(n,e))},removeValue:function(t){var n=this,i=-1;e.each(n.values,function(e,n){e===t&&(i=n)}),-1!==i&&(n.values.splice(i,1),n.valuesIndex.remove(n.getIndex(t))),n.values.length?n.value=n.values[n.values.length-1]:(n.value=-1,n.valueIndex=-1)},updateInput:function(e){var t=this,n=[];t.valuesIndex.each(function(e,i,r){n.push(t.data[e][t.displayKey])}),t.input.dom.value=n.join(", "),e!==!1&&t.onInput()},selectItem:function(e){var t=this;if(t.list){t.multiSelect||t.clearListActive(),t.clearFocused();var n=t.list.select("li").item(e);n.addCls(t.focusedItemCls,t.selectedItemCls)}},render:function(){var t=this,n=e.get(t.renderTo||document.body).dom,i=e.get(document.createElement("div")),r=t.value,s=-1;i.attr("id",t.id),void 0===r?r="":t.multiSelect&&e.isArray(t.data)&&t.data.length>0?(r="",t.valuesIndex.each(function(e,n){-1===s&&(s=e,t.valueIndex=e),r+=t.data[e][t.displayKey]+", "}),r=r.replace(/, $/,"")):(s=t.getIndex(r),-1!==s?(t.valueIndex=s,r=t.data[s][t.displayKey]):r=""),t.fire("beforerender"),i.addCls(e.cls,t.cls,t.fieldCls);var l="";t.labelWidth&&(l="width:"+t.labelWidth+"px;");var d=t.label;""===t.label?d="&nbsp;":void 0===t.label?d="&nbsp;":"right"!==t.labelAlign&&(d+=":"),i.update(t.tpl.getHTML({labelWidth:l,labelDisplay:t.label===!1?"display: none;":"",label:d===!1?"":d,emptyText:t.emptyText,inputHeight:"height:"+t.inputHeight+"px;",value:r})),t.el=i,t.setStyle(),t.input=t.el.getByTag("input"),t.inputContainer=t.el.select("."+h),t.drop=t.el.select("."+u),t.leftTpl&&(t.left=t.el.select("."+f),t.left.css({display:"block",width:t.leftWidth})),t.setSize(),n.appendChild(i.dom),"top"===t.labelAlign?t.el.addCls(g):"right"===t.labelAlign&&(t.el.addCls(p),e.$(i.dom).find("."+o).insertAfter(e.$(i.dom).find("."+a))),t.valueIndex&&(t.acceptedValue=t.value),t.editable?t.input.css("cursor","auto"):t.input&&t.input.attr("tabIndex",-1),t.disabled&&(t.addCls(c),t.input&&t.input.attr("tabIndex",-1)),t.renderList(),t.leftTpl&&(setTimeout(function(){t.updateLeft()},1),setTimeout(function(){t.updateLeft()},500),setTimeout(function(){t.updateLeft()},1e3)),t.fire("afterrender"),t.fire("render")},renderList:function(){var t=this,n=e.get(document.createElement("div")),i=['<ul style="position: relative;">'];t.list&&t.list.destroy(),e.each(t.data,function(n,r){var o="",a=n[t.displayKey],s=n[t.valueKey];if(t.value===s&&(o=t.selectedItemCls),""===a||" "===a)a="&nbsp;";else if(t.listItemTpl){var l=new e.Template(t.listItemTpl);a=l.getHTML(n)}t.multiSelect&&t.itemCheckBox?i.push('<li value="'+s+'" class="'+o+'"><div class="'+m+'" style=""></div><span class="'+v+'">'+a+"</span></li>"):i.push('<li value="'+s+'" class="'+o+'"><span class="'+v+'">'+a+"</span></li>")}),i.push("</ul>"),n.addCls("fancy fancy-combo-result-list"),n.update(i.join("")),n.css({display:"none",left:"0px",top:"0px",width:t.getListWidth()}),t.data.length>9&&n.css({height:9*t.listRowHeight+"px",overflow:"auto"}),document.body.appendChild(n.dom),t.list=n,t.applyTheme()},getListWidth:function(){var e,t=this,n=t.inputWidth+14,i=t.minListWidth;return t.input&&(e=t.input.parent().parent(),n=e.width()),i&&i>n&&(n=i),n},generateAheadData:function(){var t=this,n=t.input.dom.value.toLocaleLowerCase(),i=[];if(t.multiSelect){var r=n.split(", "),o=t.getInputSelection(),a=0;e.each(n,function(e,t){return o.start<=t?!0:void(","===n[t]&&a++)}),n=r[a]}return e.each(t.data,function(e){new RegExp("^"+n).test(e[t.displayKey].toLocaleLowerCase())&&i.push(e)}),t.data.length===i.length&&(i=[]),t.aheadData=i,i},renderAheadList:function(){var t,n=this,i=['<ul style="position: relative;">'],r=!1;n.aheadList?(n.aheadList.firstChild().destroy(),t=n.aheadList,r=!0):t=e.get(document.createElement("div")),e.each(n.aheadData,function(t,r){var o="",a=t[n.displayKey],s=t[n.valueKey];if(0===r&&(o=n.selectedItemCls),""===a||" "===a)a="&nbsp;";else if(n.listItemTpl){var l=new e.Template(n.listItemTpl);a=l.getHTML(t)}i.push('<li value="'+s+'" class="'+o+'"><span class="'+v+'">'+a+"</span></li>")}),i.push("</ul>"),t.update(i.join("")),t.css({display:"none",left:"0px",top:"0px",width:n.getListWidth()}),t.css({"max-height":9*n.listRowHeight+"px",overflow:"auto"}),r===!1&&(t.addClass(e.cls,"fancy-combo-result-list"),document.body.appendChild(t.dom),n.aheadList=t,n.onsAheadList()),n.applyTheme()},hide:function(){var e=this;e.css("display","none"),e.hideList(),e.hideAheadList()},clear:function(){var e=this;e.multiSelect?e.set([],!1):e.set(-1,!1)},clearListActive:function(){var e=this,t=e.selectedItemCls,n=e.focusedItemCls;e.list.select("."+n).removeCls(n),e.list.select("."+t).removeCls(t)},clearFocused:function(){var e=this,t=e.focusedItemCls;e.list&&e.list.select("."+t).removeCls(t),e.aheadList&&e.aheadList.select("."+t).removeCls(t)},onInput:function(){var e=this,t=e.getValue(),n=e.acceptedValue;e.acceptedValue=e.get(),e.fire("change",t,n),e.left&&e.updateLeft()},setValue:function(e,t){this.set(e,t)},getDisplayValue:function(e,t){var n=this,i=n.getIndex(e);return t?i:n.data[i]?n.data[i][n.displayKey]:""},getValueKey:function(e,t){for(var n=this,i=0,r=n.data.length;r>i;i++)if(n.data[i][n.displayKey]===e)return t?i:n.data[i][n.valueKey]},get:function(){return this.getValue()},getValue:function(){var e=this;return e.multiSelect?e.values:-1===e.value||void 0===e.value?-1===e.value&&e.input.dom.value?e.input.dom.value:"":void 0!==e.valueKey?e.value:e.value},size:function(e){var t=this,n=e.width,i=e.height,r=t.input,o=t.inputContainer,a=t.drop;"top"!==t.labelAlign&&(t.inputHeight=i),void 0!==i&&(t.height=i),void 0!==n&&(t.width=n),t.calcSize(),"top"===t.labelAlign?t.css({height:1.5*t.height,width:t.width}):t.css({height:t.height,width:t.width});var s=t.inputWidth,l=2;"dark"===t.theme&&(l=0);var d=s-l;t.left&&(d-=t.leftWidth),r.css({width:d,height:t.inputHeight,"margin-left":t.left?t.leftWidth:0}),o.css({width:s,height:t.inputHeight}),a.css("height",t.inputHeight)},onEnter:function(e,t){var n,i=this,r=i.getActiveList(),o=i.focusedItemCls,a=i.selectedItemCls;if(i.multiSelect){if(!r)return;var s=r.select("."+o);if(s&&s.dom||(s=r.select("."+a).last()),s&&s.dom){n=s.attr("value"),i.addValue(n);var l=i.getDisplayValue(n,!0);i.selectItem(l),i.updateInput()}}else if(r){var s=r.select("."+o);s&&s.dom||(s=r.select("."+a)),n=s.attr("value"),i.set(n)}else i.set(i.input.dom.value);i.hideList(),i.hideAheadList()},onEsc:function(e,t){var n=this;n.hideList(),n.hideAheadList()},onUp:function(e,t){var n=this,i=n.getActiveList(),r=n.focusedItemCls;if(i){t.preventDefault();var o=i.select("."+r),a=!1;o.dom||(a=!0,o=i.lastChild());var s=o.index(),l=i.select("li"),d=parseInt(i.css("height"));0===s||a?s=l.length-1:s--;var c=l.item(s),u=c.position().top;u-i.dom.scrollTop>d?i.dom.scrollTop=1e4:u-i.dom.scrollTop<0&&(i.dom.scrollTop=u),n.clearFocused(),c.addClass(r)}},onDown:function(e,t){var n=this,i=n.getActiveList(),r=n.focusedItemCls;if(i){t.preventDefault();var o=i.select("."+r),a=!1;o.dom||(a=!0,o=i.firstChild());var s=parseInt(o.css("height")),l=o.index(),d=i.select("li"),c=parseInt(i.css("height"));l===d.length-1||a?l=0:l++;var u=d.item(l),h=u.position().top,f=parseInt(u.css("height"));h-i.dom.scrollTop<0?i.dom.scrollTop=0:h+f+3-i.dom.scrollTop>c&&(i.dom.scrollTop=h-c+s+f),n.clearFocused(),u.addClass(r)}else n.showList()},scrollToListItem:function(e){var t=this,n=t.getActiveList(),i=n.select("li"),r=i.item(e),o=r.position().top;parseInt(n.css("height"));0===e?n.dom.scrollTop=0:e===i.length-1?n.dom.scrollTop=1e4:n.dom.scrollTop=o},getActiveList:function(){var e=this,t=!1;return e.list&&"none"!==e.list.css("display")?t=e.list:e.aheadList&&"none"!==e.aheadList.css("display")&&(t=e.aheadList),t},initMultiSelect:function(){var t=this,n=t.value;t.values=[],t.valuesIndex=new e.Collection,void 0!==t.value&&null!==n&&""!==n&&(e.isArray(n)?(t.values=n,t.value=n[0]):t.values=[t.value],e.each(t.values,function(e){t.valuesIndex.add(t.getIndex(e),e)}))},getIndex:function(e){for(var t=this,n=t.data,i=0,r=n.length,o=-1;r>i;i++)if(n[i][t.valueKey]==e)return i;return o},getFromInput:function(){var t=this,n=t.input.dom.value,i=n.split(","),r=[];return e.each(i,function(e){var n=e.replace(/ $/,"").replace(/^ /,""),i=t.getValueKey(n);i&&r.push(i)}),r},updateLeft:function(){var t=this,n=t.data[t.getIndex(t.getValue())];t.left.update(new e.Template(t.leftTpl).getHTML(n))},setData:function(e){var t=this;t.data=e,t.renderList(),t.onsList()}})}(),function(){var e=Fancy,t=e.CLEARFIX_CLS,n=e.FIELD_CLS,i=e.FIELD_LABEL_CLS,r=e.FIELD_TEXT_CLS,o=e.FIELD_BUTTON_CLS;e.define(["Fancy.form.field.Button","Fancy.ButtonField"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.button",pressed:!1,constructor:function(t){e.apply(this,t),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("click"),e.Super("init",arguments),e.preRender(),e.render(),e.renderButton(),e.ons(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:n+" "+o,value:"",width:100,emptyText:"",tpl:['<div class="'+i+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+r+'">',"</div>",'<div class="'+t+'"></div>'],renderButton:function(){var t=this;t.button=new e.Button({renderTo:t.el.select("."+r).item(0).dom,text:t.buttonText,disabled:t.disabled,pressed:t.pressed,enableToggle:t.enableToggle,handler:function(){t.disabled||t.handler&&t.handler()}})},ons:function(){var e=this;e.button.on("pressedchange",function(t,n){e.fire("pressedchange",n)})},onClick:function(){var e=this;e.disabled||(e.fire("click"),e.handler&&e.handler())},setPressed:function(e){this.button.setPressed(e)}})}(),Fancy.define(["Fancy.form.field.SegButton","Fancy.SegButtonField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.button",allowToggle:!0,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("click","change"),e.Super("init",arguments),e.preRender(),e.render(),e.renderButton(),e.ons(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:"fancy fancy-field fancy-field-button",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">',"</div>",'<div class="fancy-clearfix"></div>'],renderButton:function(){var e=this;e.button=new Fancy.SegButton({renderTo:e.el.select(".fancy-field-text").item(0).dom,items:e.items,disabled:e.disabled,multiToggle:e.multiToggle,allowToggle:e.allowToggle})},ons:function(){var e=this;e.button.on("toggle",function(){e.disabled||e.fire("toggle")})},onClick:function(){var e=this;e.disabled||(e.fire("click"),e.handler&&e.handler())},get:function(){var e=this,t=[];return Fancy.each(e.items,function(e,n){e.pressed&&(e.value?t.push(e.value):t.push(n))}),t.toString()},clear:function(e){this.allowToggle&&Fancy.each(this.items,function(t){t.setPressed(!1,e)})}}),Fancy.define(["Fancy.form.field.Line","Fancy.FieldLine"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.line",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments);var t,n=0,i=e.items.length;if(e.parentSet)var r=e.width/e.items.length;for(;i>n;n++){var o=e.items[n];void 0===o.width&&(o.width=r),o.style=o.style||{},"top"===o.labelAlign?(t=!0,e.parentSet&&(o.style.padding="0px"),o.label&&(o.labelWidth=o.width-16,100===o.labelWidth&&(o.labelWidth=7*(o.label.length+1+1)),o.width<o.labelWidth&&(o.labelWidth=7*(o.label.length+1+1)))):(o.style["padding-top"]="0px",!o.labelWidth&&o.label&&(o.labelWidth=7*(o.label.length+1+1))),0===n&&(o.style["padding-left"]="0px")}e.preRender(),e.render(),t&&e.css("height","48px")},fieldCls:"fancy fancy-field fancy-field-line",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-text fancy-field-line-items">',"</div>"]}),Fancy.define(["Fancy.form.field.Set","Fancy.SetField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.set",padding:"8px 11px 0px 8px",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("beforecollapse","collapse","expanded"),e.Super("init",arguments),Fancy.each(e.items,function(e,t){"top"===e.labelAlign&&0===t&&(e.style={"padding-left":"0px"}),"line"===e.type&&(e.padding=!1,e.parentSet=!0)}),e.preRender(),e.render(),void 0!==e.checkbox&&e.initCheckBox(),e.on("beforecollapse",e.onBeforeCollapsed,e),e.on("expanded",e.onExpanded,e)},fieldCls:"fancy-field-set",value:"",width:100,emptyText:"",tpl:["<fieldset>","<legend>",'<div class="fancy-field-checkbox-input" style="float:left;margin-top: 4px;display: none;"></div>','<div class="fancy-field-set-label" style="float:left;">{label}</div>','<div class="fancy-clearfix"></div>',"</legend>",'<div class="fancy-field-text fancy-field-set-items">',"</div>","</fieldset>"],initCheckBox:function(){var e=this,t=e.el.select(".fancy-field-checkbox-input");t.css("display",""),e.checkbox===!0&&e.addCls("fancy-checkbox-on");var n=e.el.select(".fancy-field-set-items");setTimeout(function(){e.checkbox===!0||e.fire("collapse")},1),e.checkbox===!0?(n.css("display",""),e.removeCls("fancy-set-collapsed")):(n.css("display","none"),e.addCls("fancy-set-collapsed")),t.on("click",function(){e.toggleCls("fancy-checkbox-on");var t=e.el.hasCls("fancy-checkbox-on"),n=e.el.select(".fancy-field-set-items");t?(e.fire("beforeexpanded"),n.css("display",""),e.removeCls("fancy-set-collapsed"),e.fire("expanded")):(e.fire("beforecollapse"),n.css("display","none"),e.addCls("fancy-set-collapsed"),e.fire("collapse"))})},onBeforeCollapsed:function(){var e=this,t=e.form,n=e.el.select(".fancy-field-set-items"),i=parseInt(n.css("height"));t.setHeight(t.getHeight()-i)},onExpanded:function(){var e=this,t=e.form,n=e.el.select(".fancy-field-set-items"),i=parseInt(n.css("height"));t.setHeight(t.getHeight()+i)}}),Fancy.define(["Fancy.form.field.Tab","Fancy.Tab"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.tab",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("collapsed","expanded"),e.Super("init",arguments);for(var t,n=0,i=e.items.length;i>n;n++){var r=e.items[n];"top"===r.labelAlign&&(t=!0,0===n&&(r.style={"padding-left":"0px"}))}e.preRender(),e.render()},fieldCls:"fancy fancy-field-tab",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-text fancy-field-tab-items">',"</div>"]}),Fancy.define(["Fancy.form.field.HTML","Fancy.HTMLField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.html",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","enter","up","down","change","key"),e.Super("init",arguments),e.preRender(),e.render(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:"fancy-field-html",value:"",width:100,emptyText:"",tpl:['<div class="" style="">',"{value}","</div>"],render:function(){var e=this,t=e.renderTo||document.body,n=document.createElement("div");e.fire("beforerender"),n.innerHTML=e.tpl.getHTML({value:e.value,height:e.height}),e.el=t.appendChild(n),e.el=Fancy.get(e.el),e.el.addCls(e.cls,Fancy.cls,e.fieldCls),e.acceptedValue=e.value,e.fire("afterrender"),e.fire("render")},set:function(e,t){var n=this;n.el.firstChild().update(e),t!==!1&&n.onInput()},get:function(){return this.el.firstChild().dom.innerHTML}}),Fancy.define(["Fancy.form.field.ReCaptcha","Fancy.ReCaptcha"],{type:"field.recaptcha",mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","enter","up","down","change","key"),e.Super("init",arguments),e.tpl=new Fancy.Template(e.tpl),e.render(),e.name="recaptcha",e.hidden&&e.css("display","none"),e.style&&e.css(e.style);var t=document.createElement("script");t.type="text/javascript",t.src="https://www.google.com/recaptcha/api.js",Fancy.get(document.head).append(t)},get:function(){var e=this,t=e.el.select("form");return e.value?e.value:(e.value="wait",t.one("submit",function(t){t.preventDefault(),e.value=Fancy.$(this).serialize().replace("g-recaptcha-response=","")}),t.submit(),e.value)},fieldCls:Fancy.FIELD_CLS,value:"",width:100,tpl:['<form method="POST">','<div class="g-recaptcha" data-sitekey="{key}"></div>',"</form>"]}),function(){var e=Fancy,t=e.CLEARFIX_CLS,n=e.FIELD_CLS,i=e.FIELD_RADIO_CLS,r=e.FIELD_RADIO_COLUMN_CLS,o=e.FIELD_TEXT_CLS,a=e.FIELD_RADIO_ON_CLS,s=e.FIELD_RADIO_INPUT_CLS,l=e.FIELD_LABEL_CLS,d=e.FIELD_ERROR_CLS;e.define(["Fancy.form.field.Radio","Fancy.Radio"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.radio",radioRows:1,constructor:function(){this.Super("const",arguments)},init:function(){var t=this;t.addEvents("focus","blur","input","up","down","change","key"),t.Super("init",arguments);var n="";t.column&&(t.cls+=" "+r,n+='<div style="margin-left: '+t.labelWidth+'px;">'),e.each(t.items,function(e,i){var r="",l=o;t.column||0===i||(r="margin-left:10px;"),e.value===t.value&&(l+=" "+a),n+=['<div class="'+l+'" value='+e.value+">",'<div class="'+s+'" style="float:left;'+r+'"></div>','<div style="float:left;margin:7px 0 0 0;">'+e.text+"</div>","</div>"].join("")}),t.column&&(n+="</div>"),t.itemsHTML=n,t.preRender(),t.render(),t.setColumnsStyle(),t.acceptedValue=t.value,t.set(t.value),t.ons()},labelText:"",labelWidth:60,value:!1,checkedCls:a,fieldCls:n+" "+i,tpl:['<div class="'+l+'" style="{labelWidth}{labelDisplay}">',"{label}",'<div class="'+d+'" style="{errorTextStyle}"></div>',"</div>","{itemsHTML}",'<div class="'+t+'"></div>'],ons:function(){var t=this,n=this.el;n.$dom.delegate("."+o,"click",function(){t.disabled||t.set(e.get(this).attr("value"))}),n.on("mousedown",t.onMouseDown,t)},onClick:function(){var e=this,t=e.checkedCls;e.disabled||(e.addCls(t),e.toggleCls(t),e.value=e.hasCls(t),e.fire("change",e.value))},onMouseDown:function(e){this.disabled&&e.stopPropagation(),e.preventDefault()},set:function(e,t){var n=this,i=n.el,r=n.checkedCls,a=i.select("."+o);a.removeCls(r),i.select("[value="+e+"]").addCls(r),n.value=e,t!==!1&&n.fire("change",n.value)},setValue:function(e,t){this.set(e,t)},getValue:function(){return this.value},get:function(){return this.getValue()},clear:function(){this.set(!1)},calcColumns:function(){var t=this,n=0,i=t.width;"top"!==t.labelAlign&&t.label&&(i-=t.labelWidth,i-=20),e.Array.each(t.items,function(e){e.text.length>n&&(n=e.text.length)});var r=Math.floor(i/(7*n+30));t.columns&&t.columns<=r?r=t.columns:t.columns=r,t.columnWidth=Math.ceil(i/r),t.rows=Math.ceil(t.items.length/r)},setColumnsStyle:function(){var e=this;if(e.columns&&1!==e.rows){var t=e.el.select("."+o),n=e.el.select("."+o+" ."+s);t.each(function(t,i){i%e.columns===0&&n.item(i).css("margin-left","0px"),t.css("width",e.columnWidth)})}}})}(),function(){Fancy.vtypes={},Fancy.addValid=function(e,t){Fancy.vtypes[e]=t},Fancy.isValid=function(e,t){var n;if(Fancy.isString(e)?n=Fancy.vtypes[e]:Fancy.isObject(e)&&(e.type?(n=Fancy.vtypes[e.type],Fancy.applyIf(e,n)):n=e),n.before){var i=n.before,r=[e];Fancy.isString(i)?r.push(i):Fancy.isArray(i)&&(r=r.concat(i)),r.reverse();for(var o=0,a=r.length;a>o;o++)if(n=Fancy.isObject(r[o])?r[o]:Fancy.vtypes[r[o]],n.re){if(n.re.test(t)===!1)return n}else if(n.fn&&n.fn.apply(n,[t])===!1)return n}else if(n.re){if(n.re.test(t)===!1)return n}else if(n.fn.apply(n,[t])===!1)return n;return!0}}(),Fancy.addValid("notempty",{text:"Must be present",fn:function(e){return null===e||void 0===e?!1:0!==String(e).length}}),Fancy.addValid("notnan",{text:"Must be numeric",fn:function(e){return!isNaN(e)}}),Fancy.addValid("min",{before:["notempty","notnan"],text:"Must be must be at least {param}",fn:function(e){return e>=this.param}}),Fancy.addValid("max",{before:["notempty","notnan"],text:"Must be no more than {param}",fn:function(e){return e<=this.param}}),Fancy.addValid("range",{before:["notempty","notnan"],text:"Must be between {min} and {max}",fn:function(e){return e>=this.min&&e<=this.max}}),Fancy.addValid("email",{before:"notempty",re:/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+\/=?\^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,text:"Is not a valid email address"}),Fancy.Mixin("Fancy.grid.mixin.PrepareConfig",{prepareConfig:function(e,t){var n=this;return e._plugins=e._plugins||[],e=n.generateColumnsFromData(e,t),e=n.copyColumns(e,t),e=n.prepareConfigScroll(e,t),e=n.prepareConfigData(e,t),e=n.prepareConfigTheme(e,t),e=n.prepareConfigLang(e,t),e=n.prepareConfigSpark(e,t),e=n.prepareConfigPaging(e,t),e=n.prepareConfigTBar(e),e=n.prepareConfigExpander(e),e=n.prepareConfigColumnMinMaxWidth(e),e=n.prepareConfigGrouping(e),e=n.prepareConfigGroupHeader(e),e=n.prepareConfigSorting(e),e=n.prepareConfigEdit(e),e=n.prepareConfigSelection(e),e=n.prepareConfigLoadMask(e,t),e=n.prepareConfigDefaults(e),e=n.prepareConfigFilter(e,t),e=n.prepareConfigSearch(e),e=n.prepareConfigSummary(e),e=n.prepareConfigState(e,t),e=n.prepareConfigContextMenu(e),e=n.prepareConfigExporter(e),e=n.prepareConfigSmartIndex(e),e=n.prepareConfigActionColumn(e),e=n.prepareConfigWidgetColumn(e),e=n.prepareConfigChart(e,t),e=n.prepareConfigCellTip(e),e=n.prepareConfigColumnsWidth(e),e=n.prepareConfigSize(e,t),e=n.prepareConfigColumns(e),e=n.prepareConfigColumnsResizer(e),e=n.prepareConfigFooter(e),e=n.prepareConfigDD(e)},copyColumns:function(e,t){return e.columns&&(e.columns=Fancy.Array.copy(e.columns,!0)),t.columns&&(t.columns=Fancy.Array.copy(t.columns)),e},generateColumnsFromData:function(e,t){if(!e.columns&&e.data&&e.data.length&&Fancy.isArray(e.data[0])){var n=e.data[0]||e.data[0],i=[],r=[];Fancy.each(n,function(e,t){i.push({index:"autoIndex"+t}),r.push("autoIndex"+t)}),e.columns=i,e.data={items:e.data,fields:r},t.data=e.data}return e},prepareConfigScroll:function(e,t){return Fancy.isIE&&t.nativeScroller!==!1&&(e.nativeScroller=!0),e},prepareConfigSpark:function(e,t){var n=this;return Fancy.each(e.columns,function(t){var i=t.sparkConfig;if(i&&i.legend)switch(i.legend.type){case"tbar":case"bbar":case"buttons":var r=i.legend.type,o=t.index;e[r]=e[r]||[],e[r]=e[r].concat(n._generateLegendBar(i.title,o,i.legend.style,t))}}),e},_generateLegendBar:function(e,t,n,i){for(var r=0,o=e.length,a=[],s=this,l={length:0},d=function(t){var n,i=s;Fancy.each(s.columns,function(e,t){e.index===s.columns[t].index&&(n=t)}),(t.hasCls("fancy-legend-item-disabled")||e.length-1!==l.length)&&(t.toggleCls("fancy-legend-item-disabled"),t.hasCls("fancy-legend-item-disabled")?(l[t.index]=!0,i.disableLegend(n,t.index),l.length++):(i.enableLegend(n,t.index),delete l[t.index],l.length--))};o>r;r++){var c=t[r];Fancy.isString(i.index)&&(c=i.index+"."+r);var u={handler:d,index:c,imageColor:Fancy.COLORS[r],text:e[r]};0===r&&n&&(u.style=n),a.push(u)}return a},prepareConfigData:function(e,t){if(Fancy.isArray(e.data)&&0===e.data.length&&e.columns){var n=[];Fancy.each(e.columns,function(e){e.index&&n.push(e.index||e.key)}),e.data={fields:n,items:[]}}return e},prepareConfigLoadMask:function(e){return e._plugins.push({type:"grid.loadmask"}),e},reConfigStore:function(e){var t=this,n=t.store,i=t.getFieldsFromData(e),r="Fancy.model."+Fancy.id();Fancy.define(r,{extend:Fancy.Model,fields:i}),t.model=r,n.model=r,t.fields=i,n.fields=i,n.setModel()},prepareConfigDefaults:function(e){return e.defaults=e.defaults||{},void 0===e.defaults.type&&(e.defaults.type="string"),Fancy.each(e.defaults,function(t,n){Fancy.each(e.columns,function(t){switch(t.type){case"select":case"order":case"expand":case"rowdrag":return}void 0===t[n]&&(t[n]=e.defaults[n])})}),e},prepareConfigColumnMinMaxWidth:function(e){return Fancy.each(e.columns,function(e){void 0===e.width&&!e.flex&&e.minWidth&&(e.width=e.minWidth)}),e},prepareConfigCellTip:function(e){return Fancy.each(e.columns,function(t){return t.cellTip?(e._plugins.push({type:"grid.celltip"}),!0):void 0}),e},prepareConfigDD:function(e){if(e.gridToGrid){var t={type:"grid.dragdrop"};Fancy.apply(t,e.gridToGrid),e._plugins.push(t)}if(e.rowDragDrop){var t={type:"grid.rowdragdrop"};Fancy.apply(t,e.rowDragDrop),e._plugins.push(t)}return e},prepareConfigColumns:function(e){for(var t=e.columns,n=[],i=[],r=0,o=t.length,a=!1,s=!1;o>r;r++){var l=t[r];switch(l.draggable&&(a=!0),"tree"===l.type&&(s=!0),"rowdrag"!==l.type||e.rowDragDrop||(e.rowDragDrop=!0),l.headerCheckBox&&(l.sortable=!1),l.type){case"select":this.checkboxRowSelection=!0,this.multiSelect=!0,t[r].index="$selected",t[r].editable=!0;break;case"order":t[r].editable=!1,t[r].sortable=!1,t[r].cellAlign="right";break;case"rowdrag":t[r].editable=!1,t[r].sortable=!1,t[r].resizable=!1,t[r].width=30;break;case"checkbox":void 0===l.cellAlign&&(l.cellAlign="center");break;case"currency":void 0===l.format&&(l.format="number");break;case"string":case"number":case"text":case"date":case"combo":l.ellipsis!==!1&&(l.ellipsis=!0)}l.locked?(n.push(l),t.splice(r,1),r--,o--):l.rightLocked&&(i.push(l),t.splice(r,1),r--,o--)}if(a&&e._plugins.push({type:"grid.columndrag"}),s){var d={type:"grid.tree"};e.singleExpand&&(d.singleExpand=e.singleExpand),e._plugins.push(d),e.isTreeData=!0}return e.leftColumns=n,e.rightColumns=i,e},prepareConfigColumnsWidth:function(e){var t,n=e.columns,i=e.width,r=[],o=[],a=100,s=50,l=a,d=0,c=!1,u=!1,h=!1,f=Fancy.get(e.renderTo||document.body);if((e.width<1||void 0===e.width)&&"body"!==f.prop("tagName").toLocaleLowerCase()&&(h=f.closest(".tab-pane"),h&&h.css({display:"block",visibility:"hidden"})),(void 0===i||"fit"===i)&&(i=Fancy.get(e.renderTo||document.body).width()),i-=2*e.panelBorderWidth,e.flexScrollSensitive!==!1)i-=e.bottomScrollHeight;else{var g=this.theme;Fancy.isString(e.theme)?g=e.theme:Fancy.isObject(e.theme)&&e.theme.name&&(g=e.theme.name),"bootstrap-no-borders"!==g&&(i-=1)}Fancy.each(n,function(t,n){switch(t.flex&&(e.hasFlexColumns=!0),t.type){case"select":void 0===t.width&&(t.width=35);break;case"order":void 0===t.width&&(t.width=40);break;case"rowdrag":void 0===t.width&&(t.width=30);break;case"expand":void 0===t.width&&(t.width=38)}t.locked&&(c=!0),t.rightLocked&&(u=!0),void 0===t.width?(t.flex&&(d+=t.flex,o.push(n)),r.push(n)):Fancy.isNumber(t.width)&&(i-=t.width)}),e.hasFlexColumns&&e._plugins.push({type:"grid.columnresizer"}),c&&u&&(i-=2);var p=parseInt(i/r.length);s>p&&(p=s),p>a&&(l=a),s>p&&(l=s);var m=!1,v=i;if(Fancy.each(r,function(e){t=n[e],void 0===t.flex&&(v-=l)}),d){var y=parseInt(v/d);Fancy.each(o,function(e){v-=y*n[e].flex})}return 0>v&&(m=!0),Fancy.each(r,function(e){t=n[e],void 0===t.flex&&(t.width=l,i-=l)}),d&&(Fancy.each(o,function(e){t=n[e],lastColumn=t,m?t.width=l*t.flex:t.width=i/d*t.flex,t.width=parseInt(t.width),t.minWidth&&t.width<t.minWidth&&(t.width=t.minWidth)}),v>=1&&Fancy.each(o,function(e){return 1>v?!0:(t=n[e],t.width+=1,void(v-=1))})),h&&h.css({display:"",visibility:""}),e},prepareConfigActionRender:function(e){return function(t){return Fancy.each(e.items,function(e){var n=e.text||"",i=Fancy.styleToString(e.style),r=e.cls||"";t.value+=['<div class="fancy-grid-column-action-item '+r+'" style="'+i+'">',n,"</div>"].join(" "),e.render&&(t=e.render(t))}),t}},prepareConfigSmartIndex:function(e){return Fancy.each(e.columns,function(e){if(/\+|\-|\/|\*|\[|\./.test(e.index)){var t=e.index;switch(t){case"xAxis.categories":case"yAxis.categories":case"zAxis.categories":return}t=t.replace(/(\w+)/g,function(e,t,n,i){return"."===i[n-1]?t:isNaN(Number(t))?"data."+t:t}),t="return "+t+";",e.smartIndexFn=new Function("data",t)}}),e},prepareConfigActionColumn:function(e){for(var t=this,n=e.columns,i=0,r=n.length;r>i;i++){var o=n[i];if("action"===o.type){o.sortable=!1,o.editable=!1,o.render=t.prepareConfigActionRender(o);var a=o.items;if(void 0!==a&&0!==a.length)for(var s,l=0,d=a.length;d>l;l++)switch(s=a[l],s.action){case"remove":void 0===s.handler&&(s.handler=function(e,t){e.remove(t)});break;case"dialog":!function(e){if(void 0===e.handler){for(var i=[],r=0,o=n.length,a=87;o>r;r++){var s=n[r];switch(s.type){case"action":continue}i.push({label:s.title||"",type:s.type,name:s.index}),a+=38}e.handler=function(n,r){e.dialog?(e.dialog.show(),e.dialog.set(r.data)):e.dialog=new FancyForm({window:!0,draggable:!0,modal:!0,title:{text:"Edit",tools:[{text:"Close",handler:function(){this.hide()}}]},width:300,height:a,items:i,buttons:["side",{text:"Clear",handler:function(){this.clear()}},{text:"Save",handler:function(){var e=this.get();e.id&&(t.getById(e.id).set(e),t.update())}}],events:[{init:function(){this.show(),this.set(r.data)}}]})}}}(s)}}}return e},prepareConfigWidgetColumn:function(e){for(var t=e.columns,n=0,i=t.length;i>n;n++){var r=t[n];r.widget&&(r.render=function(e){var t,n=e.cell.select("."+Fancy.FIELD_CLS),i=e.cell.dom,r=e.column,o={vtype:r.vtype,style:{padding:"0px","margin-top":"-10px","margin-left":"-1px"},label:!1,renderTo:i,value:e.value,emptyText:r.emptyText};if(n.length)t=Fancy.getWidget(n.dom.id),t.get()!=e.value&&t.set(e.value);else{var a=e.column.width,r=e.column,s=r.index;switch(e.column.type){case"number":case"currency":Fancy.apply(o,{spin:r.spin,min:r.min,max:r.max,events:[{change:function(t,n){grid.set(e.rowIndex,s,n),grid.updater.updateRow()}}]}),t=new Fancy.NumberField(o);break;case"string":case"image":Fancy.apply(o,{events:[{change:function(t,n){grid.set(e.rowIndex,s,n),grid.updater.updateRow()}}]}),t=new Fancy.StringField(o);break;case"combo":Fancy.apply(o,{displayKey:e.column.displayKey,valueKey:e.column.displayKey,padding:!1,checkValidOnTyping:!0,data:e.column.data,events:[{change:function(t,n){grid.set(e.rowIndex,s,n),grid.updater.updateRow()}}]}),t=new Fancy.Combo(o)}switch(e.column.type){case"number":case"string":case"currency":case"image":t.setInputSize({width:a+1,height:33});break;case"combo":t.size({width:a+1,height:33})}}return e})}return e},prepareConfigSorting:function(e){var t=e.defaults||{};return t.sortable?(e._plugins.push({type:"grid.sorter"}),e):(Fancy.each(e.columns,function(t){t.sortable&&e._plugins.push({type:"grid.sorter"})}),e)},prepareConfigSelection:function(e){var t=!1,n={type:"grid.selection"},i=!1;if((e.trackOver||e.columnTrackOver||e.cellTrackOver)&&(t=!0),e.selModel){t=!0;var r=!1,o=!1,a=!0,s=!1,l=!0,d=!1,c=!0;if(Fancy.isObject(e.selModel)){if(r=!!e.selModel.checkOnly,!e.selModel.type)throw new Error("FancyGrid Error 5: Type for selection is not set");void 0!==e.selModel.mouseMoveSelection&&(c=e.selModel.mouseMoveSelection),void 0!==e.selModel.memoryPerfomance&&(a=e.selModel.memoryPerfomance),o=e.selModel.memory===!0,e.selModel.disabled&&(i=!0),e.selModel.selectLeafsOnly&&(s=!0),void 0!==e.selModel.allowDeselect&&(d=!0),void 0!==e.selModel.keyNavigation&&(l=e.selModel.keyNavigation),e.selModel=e.selModel.type;}"rows"===e.selModel&&(e.multiSelect=!0),e.selection=e.selection||{},e.selection.selModel=e.selModel,e.selection[e.selModel]=!0,e.selection.checkOnly=r,e.selection.memory=o,e.selection.memoryPerformance=a,e.selection.disabled=i,e.selection.selectLeafsOnly=s,e.selection.keyNavigation=l,e.selection.allowDeselect=d,e.selection.mouseMoveSelection=c}return e.selection&&(t=!0,Fancy.isObject(e.selection)&&Fancy.apply(n,e.selection)),t===!0&&e._plugins.push(n),e},prepareConfigEdit:function(e){var t=e.defaults||{},n={type:"grid.edit"},i=!1,r=t.editable;return void 0!==e.clicksToEdit&&(n.clicksToEdit=e.clicksToEdit),r&&(i||e._plugins.push(n),e._plugins.push({type:"grid.celledit"}),i=!0),e.rowEdit&&e._plugins.push({type:"grid.rowedit"}),Fancy.each(e.columns,function(t){switch(void 0===t.index&&void 0===t.key&&(t.editable=!1),t.type){case"image":t.sortable=!1;break;case"sparklineline":case"sparklinebar":case"sparklinetristate":case"sparklinediscrete":case"sparklinebullet":case"sparklinepie":case"sparklinebox":t.editable=!1,t.sortable=!1}t.editable&&i===!1&&(e._plugins.push(n),e._plugins.push({type:"grid.celledit"}))}),e},prepareConfigExpander:function(e){if(e.expander){var t=e.expander;Fancy.apply(t,{type:"grid.expander"}),e.expanded={},e.grouping&&(t.expanded=!1),e._plugins.push(t)}return e},prepareConfigGrouping:function(e){if(e.grouping){var t=e.grouping;Fancy.apply(t,{type:"grid.grouping"}),e.expanded={},e._plugins.push(t)}return e},prepareConfigSummary:function(e){if(e.summary){var t=e.summary;t===!0&&(t={}),Fancy.apply(t,{type:"grid.summary"}),e._plugins.push(t)}return e},prepareConfigContextMenu:function(e){if(e.contextmenu){var t=e.contextmenu;t===!0&&(t={}),Fancy.isArray(t)&&(t={items:t}),Fancy.apply(t,{type:"grid.contextmenu"}),e._plugins.push(t)}return e},prepareConfigExporter:function(e){if(e.exporter){var t=e.exporter;t===!0&&(t={}),Fancy.apply(t,{type:"grid.exporter"}),e._plugins.push(t)}return e},prepareConfigFilter:function(e,t){var n=e.columns,i=!1,r=!1,o=!1,a={type:"grid.filter"};return e.filter&&(e.filter===!0&&(i=!0,e.filter={}),Fancy.apply(a,e.filter)),Fancy.each(n,function(e){e.filter&&(i=!0,e.filter.header&&(r=!0,e.grouping&&(o=!0)))}),a.header=r,a.groupHeader=o,i&&e._plugins.push(a),e},prepareConfigSearch:function(e){var t={type:"grid.search"},n=!1;return e.searching&&(n=!0,Fancy.apply(t,e.searching)),n&&e._plugins.push(t),e},prepareConfigGroupHeader:function(e){var t=e.columns,n=0,i=t.length,r=[],o=!1,a=[];if(Fancy.each(t,function(e){e.columns&&(o=!0,r.push(e))}),o){for(n=0;i>n;n++){var s=t[n];if(s.columns){for(var l=0,d=s.columns.length,c=s.text||s.title||"  ";d>l;l++)s.locked&&(s.columns[l].locked=!0),s.rightLocked&&(s.columns[l].rightLocked=!0),s.columns[l].grouping=c,s.defaults&&Fancy.applyIf(s.columns[l],s.defaults);a=a.concat(s.columns),o=!0,r.push(s)}else a=a.concat(t.slice(n,n+1))}e.columns=a,e._plugins.push({type:"grid.groupheader",groups:r}),e.isGroupedHeader=!0}return e},prepareConfigPaging:function(e,t){var n=this,i=e.lang,r=e.paging,o="bbar";if(!r)return e;if(void 0!==r.barType)switch(r.barType){case"bbar":case"tbar":case"both":o=r.barType;break;case!1:case"none":o="none";break;default:throw new Error("[FancyGrid Error]: - not supported bar type for paging")}return e._plugins.push({i18n:t.i18n,type:"grid.paging",barType:o}),"both"===o?(e.tbar=n.generatePagingBar(r,i),e.bbar=n.generatePagingBar(r,i)):"none"===o||(e[o]=n.generatePagingBar(r,i)),e},generatePagingBar:function(e,t){var n=this,i=[],r="fancy-bar-button-disabled",o={"float":"left","margin-right":"5px","margin-top":"3px"};if(i.push({imageCls:"fancy-paging-first",disabledCls:r,role:"first",handler:function(e){n.paging.firstPage()},style:{"float":"left","margin-left":"5px","margin-right":"5px","margin-top":"3px"}}),i.push({imageCls:"fancy-paging-prev",disabledCls:r,role:"prev",handler:function(){n.paging.prevPage()},style:o}),i.push("|"),i.push({type:"text",text:t.paging.page}),i.push({type:"number",label:!1,padding:!1,style:{"float":"left","margin-left":"-1px","margin-right":"8px","margin-top":"4px"},role:"pagenumber",min:1,width:30,listeners:[{enter:function(e){0===parseInt(e.getValue())&&e.set(1);var t=parseInt(e.getValue())-1,i=n.paging.setPage(t);t!==i&&e.set(i)}},{up:function(e,t){var i=n.store.pages;Number(t)>i&&e.set(i)}}]}),i.push({type:"text",text:"",role:"ofText"}),i.push("|"),i.push({imageCls:"fancy-paging-next",disabledCls:r,role:"next",style:o,handler:function(){n.paging.nextPage()}}),i.push({imageCls:"fancy-paging-last",disabledCls:r,role:"last",style:o,handler:function(){n.paging.lastPage()}}),Fancy.isObject(e)&&e.refreshButton===!0&&(i.push("|"),i.push({imageCls:"fancy-paging-refresh",disabledCls:r,role:"refresh",style:o,handler:function(){n.paging.refresh()}})),e&&Fancy.isArray(e.pageSizeData)){for(var a=e.pageSizeData,s=[],l=0,d=a.length,c=0;d>l;l++)s.push({index:l,value:a[l]}),e.pageSize===a[l]&&(c=l);var u=Fancy.Object.copy(o);u["margin-top"]="4px",i.push({editable:!1,width:50,type:"combo",role:"size",style:u,data:s,displayKey:"value",valueKey:"index",value:c,events:[{change:function(e,t){n.scroll(0,0),n.paging.setPageSize(a[t])}},{render:function(e){n.store.on("changepages",function(){if(n.store.pageSize!==Number(e.input.dom.value)){var t;Fancy.each(e.data,function(e){return e.value===n.store.pageSize?(t=e.index,!0):void 0}),void 0!==t&&e.setValue(t,!1)}})}}]})}return i.push("side"),i.push({type:"text",role:"info",text:""}),i},prepareConfigState:function(e){if(e.stateful){e._plugins.push({type:"grid.state",stateful:!0,startState:e.state});var t=localStorage.getItem(this.getStateName());if(t){t=JSON.parse(t);var n=t.columns;n&&(n=JSON.parse(n),Fancy.each(n,function(t,n){Fancy.each(t,function(t,i){e.columns[n][i]=t})}))}}else e.state&&e._plugins.push({type:"grid.state",startState:e.state});return e},prepareConfigColumnsResizer:function(e){var t=e.defaults||{};if(t.resizable)return e._plugins.push({type:"grid.columnresizer"}),e;var n=[].concat(e.columns).concat(e.leftColumns).concat(e.rightColumns);return Fancy.each(n,function(t){t.resizable&&e._plugins.push({type:"grid.columnresizer"})}),e},prepareConfigTBar:function(e){var t=this,n=e.tbar;if(n)for(var i=0,r=n.length;r>i;i++)switch("search"===n[i].type&&(e.searching=e.searching||{},e.filter=e.filter||!0),n[i].action){case"add":void 0===n[i].handler&&(n[i].handler=function(){t.insert(0,{}),t.scroll(0)});break;case"undo":void 0===n[i].handler&&(n[i].handler=function(){t.undo()});break;case"undoall":void 0===n[i].handler&&(n[i].handler=function(){t.undoAll()});break;case"redo":void 0===n[i].handler&&(n[i].handler=function(){t.redo()});break;case"remove":void 0===n[i].handler&&(n[i].disabled=!0,n[i].handler=function(){Fancy.each(t.getSelection(),function(e){t.remove(e)}),t.selection.clearSelection()},n[i].events=[{render:function(){var e=this;setTimeout(function(){var t=Fancy.getWidget(e.el.parent().parent().parent().select("."+Fancy.GRID_CLS).dom.id);t.on("select",function(){var n=t.getSelection();0===n.length?e.disable():e.enable()}),t.on("clearselect",function(){e.disable()})},10)}}])}return e},prepareConfigChart:function(e){var t=e.data,n=t.chart;return Fancy.isObject(n)&&(n=[n]),t&&t.chart&&(e._plugins.push({type:"grid.chartintegration",chart:n,toChart:t.items?!0:t.proxy?!0:!1}),Fancy.each(n,function(t){var n=t.type;switch(n){case"highchart":case"highcharts":e._plugins.push({type:"grid.highchart"});break;case void 0:throw new Error("[FancyGrid Error] - type of chart is undefined");default:throw new Error("[FancyGrid Error] - type of chart "+n+" does not exist")}})),e},prepareConfigSize:function(e,t){var n,i=e.renderTo,r=!!(e.title||e.subTitle||e.tbar||e.bbar||e.buttons||e.panel),o=e.panelBodyBorders,a=e.gridWithoutPanelBorders,s=e.gridBorders;if(void 0===e.width){if(i&&(e.responsive=!0,n=Fancy.get(i),e.width=parseInt(n.width()),e.width<1&&"body"!==n.prop("tagName").toLocaleLowerCase())){var l=n.closest(".tab-pane");l?(l.css({display:"block",visibility:"hidden"}),e.width=parseInt(n.width()),l.css({display:"",visibility:""})):e.width=n.parent().width()}}else if("fit"===e.width){var d=0,c=!1;Fancy.each(e.columns,function(e){e.hidden||(d+=e.width),e.locked&&(c=!0)}),d+=e.title||e.subTitle?o[1]+o[3]+s[1]+s[3]:a[1]+a[3]+s[1]+s[3],c&&d--,e.width=d}if(void 0===e.height)i&&(e.responsiveHeight=!0,e.height=parseInt(n.height()));else if("fit"===e.height){var u=0,h=1;Fancy.each(e.columns,function(e){e.grouping&&(2>h&&(h=2),e.filter&&e.filter.header&&3>h&&(h=3)),e.filter&&e.filter.header&&2>h&&(h=2)}),Fancy.isArray(e.data)?u=e.data.length:e.data&&Fancy.isArray(e.data.items)&&(u=e.data.items.length);var f=u*e.cellHeight;e.title&&(f+=e.titleHeight),(e.tbar||e.tabs)&&(f+=e.barHeight),e.bbar&&(f+=e.barHeight),e.buttons&&(f+=e.barHeight),e.subTBar&&(f+=e.barHeight),e.footer&&(f+=e.barHeight),e.header!==!1&&(f+=e.cellHeaderHeight*h),f+=r?o[0]+o[2]+s[0]+s[2]:a[0]+a[2]+s[0]+s[2],e.minHeight&&f<e.minHeight&&(f=e.minHeight),e.heightFit=!0,e.height=f}return e}}),Fancy.Mixin("Fancy.grid.mixin.ActionColumn",{initActionColumnHandler:function(){var e=this;e.on("cellclick",e.onCellClickColumnAction,e)},onCellClickColumnAction:function(e,t){var n,i,r=this,o=t.column,a=o.items;"action"===o.type&&(n=r.getActiveActionColumnItem(t),a&&void 0!==n&&(i=a[n],i.handler&&i.handler(r,t)))},getActiveActionColumnItem:function(e){for(var t=Fancy.get(e.cell),n=e.e.target,i=t.select("."+Fancy.GRID_COLUMN_ACTION_ITEM_CLS),r=0,o=i.length;o>r;r++)if(i.item(r).within(n))return r}}),Fancy.Mixin("Fancy.grid.mixin.Edit",{remove:function(e,t){var n=this,i=n.store,r="remove";if(!n.store)return void setTimeout(function(){n.remove(e,t)},100);if(t&&(r="removeAt"),Fancy.isArray(e))for(var o=0,a=e.length;a>o;o++)i[r](e[o]);else i[r](e);n.setSidesHeight()},removeAt:function(e){this.remove(e,!0)},removeRow:function(e){this.remove(e,!0)},removeRowById:function(e){this.remove(e)},removeRowByID:function(e){this.remove(e)},removeAll:function(){var e=this;e.store.removeAll(),e.update(),e.scroller.update(),e.paging&&e.paging.updateBar(),e.grouping&&e.grouping.reGroup()},add:function(e){var t=this;if(!t.store)return void setTimeout(function(){t.add(e)},100);if(Fancy.isArray(e))for(var n=0,i=e.length;i>n;n++)t.add(e[n]);else t.store.add(e),t.setSidesHeight()},insert:function(e,t){var n=this,i=n.store;if(!n.store)return void setTimeout(function(){n.insert(e,t)},100);if(Fancy.isArray(t)){for(var r=t.length-1;-1!==r;r--)n.insert(t[r],e);return void n.setSidesHeight()}if(Fancy.isArray(e)){for(var r=e.length-1;-1!==r;r--)n.insert(e[r],0);return void n.setSidesHeight()}if(Fancy.isObject(e)&&void 0===t)t=e,e=0;else if(Fancy.isObject(e)&&Fancy.isNumber(t)){var o=t;t=e,e=o}n.paging&&"server"!==i.proxyType&&(e+=i.showPage*i.pageSize),i.insert(e,t),n.setSidesHeight()},set:function(e,t,n){var i=this,r=i.store;return i.store?void(Fancy.isObject(t)&&void 0===n?r.setItemData(e,t,n):r.set(e,t,n)):void setTimeout(function(){i.set(e,t,n)},100)},setById:function(e,t,n){var i=this,r=i.store,o=r.getRow(e);if(void 0===o){var a=r.getById(e);if(void 0===a)return!1;o=-1}if(!i.store)return setTimeout(function(){-1===o?i.setById(o,t,n):i.set(o,t,n)},100),o;if(Fancy.isObject(t)&&void 0===n)for(var s in t){var l=i.getColumnByIndex(s);if(l&&"date"===l.type){var d=l.format,c=Fancy.Date.parse(t[s],d.read,d.mode),u=Fancy.Date.parse(r.getById(e).get(s),d.edit,d.mode);+c===+u&&delete t[s]}r.setItemData(o,t,n,e),-1===o&&r.getById(e).set(t)}else r.set(o,t,n,e),-1===o&&r.getById(e).set(t,n);return o},undo:function(){var e=this,t=e.store,n=t.undoActions.splice(t.undoActions.length-1,1)[0];switch(n.type){case"edit":e.setById(n.id,n.key,n.oldValue);var i=n.value;n.value=n.oldValue,n.oldValue=i,t.redoActions.push(n),e.fire("undo");break;case"insert":t.undoStoppped=!0,e.remove(n.id),t.undoStoppped=!1,t.redoActions.push(n);break;case"remove":t.undoStoppped=!0,e.insert(n.rowIndex,n.data),t.undoStoppped=!1,t.redoActions.push(n)}},redo:function(){var e=this,t=e.store,n=t.redoActions.splice(t.redoActions.length-1,1)[0];switch(t.redoing=!0,n.type){case"edit":e.setById(n.id,n.key,n.oldValue);break;case"insert":e.insert(n.rowIndex,n.data);break;case"remove":e.remove(n.id)}delete t.redoing},undoAll:function(){for(var e=this,t=e.store,n=0,i=t.undoActions.length;i>n;n++)e.undo()}}),function(){var e,t=Fancy,n=t.TOUCH_CLS,i=t.HIDDEN_CLS,r=t.GRID_CENTER_CLS,o=t.GRID_LEFT_CLS,a=t.GRID_RIGHT_CLS,s=t.GRID_HEADER_CLS,l=t.GRID_BODY_CLS,d=t.PANEL_BODY_INNER_CLS,c=t.GRID_UNSELECTABLE_CLS,u=t.GRID_LEFT_EMPTY_CLS,h=t.GRID_RIGHT_EMPTY_CLS,f=t.GRID_COLUMN_SORT_ASC,g=t.GRID_COLUMN_SORT_DESC;t.Mixin("Fancy.grid.mixin.Grid",{tpl:['<div class="'+o+" "+u+'"></div>','<div class="'+r+'"></div>','<div class="'+a+" "+h+'"></div>','<div class="fancy-grid-editors"></div>'],initStore:function(){var e,n,i,r=this,o=r.getFieldsFromData(r.data),a="Fancy.model."+t.id(),s=r.data,l=!1,d=r.state;r.data.items&&(s=r.data.items),e=r.data.remoteSort,n=r.data.remoteFilter,i=r.data.remotePage,i&&(i="server"),t.define(a,{extend:t.Model,fields:o}),r.grouping&&void 0!==r.grouping.collapsed&&(l=r.grouping.collapsed);var c={widget:r,model:a,data:s,paging:r.paging,remoteSort:e,remoteFilter:n,pageType:i,collapsed:l,multiSort:r.multiSort};r.multiSortLimit&&(c.multiSortLimit=r.multiSortLimit),d&&d.filters&&(c.filters=d.filters),s.pageSize&&(c.pageSize=s.pageSize),r.store=new t.Store(c),r.model=a,r.fields=o,r.store.filters&&setTimeout(function(){r.filter.filters=r.store.filters,r.filter.updateStoreFilters()},1)},initTouch:function(){var e=this;t.isTouch&&window.FastClick&&(e.panel?(FastClick.attach(e.panel.el.dom),e.panel.addCls(n)):(FastClick.attach(e.el.dom),e.addCls(n)))},initElements:function(){var e=this;e.header!==!1&&(e.leftHeader=new t.grid.Header({widget:e,side:"left"}),e.header=new t.grid.Header({widget:e,side:"center"}),e.rightHeader=new t.grid.Header({widget:e,side:"right"})),e.leftBody=new t.grid.Body({widget:e,side:"left"}),e.body=new t.grid.Body({widget:e,side:"center"}),e.rightBody=new t.grid.Body({widget:e,side:"right"}),e.leftEl=e.el.select("."+o),e.centerEl=e.el.select("."+r),e.rightEl=e.el.select("."+a)},getFieldsFromData:function(e){var t=this,n=e.items||e;if(e.fields)return t.isTreeData&&(e.fields.push("$deep"),e.fields.push("leaf"),e.fields.push("parentId"),e.fields.push("expanded"),e.fields.push("child"),e.fields.push("filteredChild")),e.fields;if(!n)throw new Error("FancyGrid Error 4: Data is empty and not set fields of data to build model");var i=n[0],r=[];for(var o in i)r.push(o);return t.isTreeData&&(r.push("$deep"),r.push("leaf"),r.push("parentId"),r.push("expanded"),r.push("child")),r},render:function(){var e=this,n=Fancy.get(e.renderTo||document.body),i=t.get(document.createElement("div")),r=e.panelBodyBorders;if(!n.dom)throw new Error("[FancyGrid Error 1] - Could not find renderTo element: "+e.renderTo);i.addCls(t.cls,e.widgetCls,e.cls),i.attr("id",e.id),void 0===e.panel&&e.shadow&&i.addCls("fancy-panel-shadow"),e.columnLines===!1&&i.addCls("fancy-grid-disable-column-lines"),e.rowLines===!1&&i.addCls("fancy-grid-disable-row-lines"),"default"===e.theme||e.panel||i.addCls("fancy-theme-"+e.theme);var o=0,a=0;e.panel&&(o=r[1]+r[3]),i.css({width:e.width-o+"px",height:e.height-a+"px"}),e.initTpl(),i.update(e.tpl.getHTML({})),e.el=t.get(n.dom.appendChild(i.dom)),e.setHardBordersWidth(),e.rendered=!0},setHardBordersWidth:function(){var e=this,t=e.panel?e.gridBorders:e.gridWithoutPanelBorders;e.wrapped&&(t=e.gridBorders),e.css({"border-top-width":t[0],"border-right-width":t[1],"border-bottom-width":t[2],"border-left-width":t[3]})},update:function(){var e=this,t=e.store;t.loading||(e.expander&&e.expander.reSet(),e.updater.update(),e.fire("update"),e.heightFit&&e.fitHeight(),e.setBodysHeight(),e.paging&&e.paging.update())},getColumnsWidth:function(e){var t=this;switch(e){case"center":return t.getCenterFullWidth();case"left":return t.getLeftFullWidth();case"right":return t.getRightFullWidth()}},setSides:function(){var e=this,t=e.leftColumns,n=e.rightColumns,i=e.getLeftFullWidth(),d=e.getCenterFullWidth(),c=e.getRightFullWidth(),f=e.gridBorders,g=e.panelBodyBorders,p=e.gridWithoutPanelBorders;t.length>0&&e.leftEl.removeCls(u),n.length>0&&e.rightEl.removeCls(h),d=e.wrapped?e.width-f[1]-f[3]:e.panel?e.width-f[1]-f[3]-g[1]-g[3]:e.width-p[1]-p[3],0===i&&0===c||(d-=0===c?i:0===i?c:e.width>i+d+c?i:i+c),e.leftEl.css({width:i+"px"}),e.centerEl.css({left:i+"px",width:d+"px"}),e.header&&(e.el.select("."+o+" ."+s).css({width:i+"px"}),e.el.select("."+r+" ."+s).css({width:d+"px"})),e.el.select("."+r+" ."+l).css({width:d+"px"}),e.width>i+d+c?e.rightEl.css({right:"0px"}):e.rightEl.css({left:"",right:"0px"}),e.rightEl.css({width:c}),e.header&&e.el.select("."+a+" ."+s).css({width:c+"px"}),e.startWidths={center:d,left:i,right:c}},setColumnsPosition:function(){var e=this;e.body.setColumnsPosition(),e.leftBody.setColumnsPosition(),e.rightBody.setColumnsPosition()},setSidesHeight:function(){var e=this,t=e.store,n=1,i=e.cellHeaderHeight;e.header!==!1&&(n+=i,e.filter&&e.filter.header&&(e.groupheader?e.filter.groupHeader&&(n+=i):n+=i),e.groupheader&&(n+=e.filter&&e.filter.header?i:i)),e.grouping&&(n+=e.grouping.groups.length*e.groupRowHeight),e.expander&&(n+=e.expander.plusHeight),e.summary&&(n+=e.summary.topOffSet),n+=t.getLength()*e.cellHeight-1,e.paging&&e.summary&&"bottom"===e.summary.position&&(n=e.height),e.leftEl.css({height:n+"px"}),e.centerEl.css({height:n+"px"}),e.rightEl.css({height:n+"px"})},setBodysHeight:function(){var e=this;e.body.setHeight(),e.leftBody.setHeight(),e.rightBody.setHeight()},preRender:function(){var e=this;(e.title||e.subTitle||e.tbar||e.bbar||e.buttons||e.panel)&&e.renderPanel()},renderPanel:function(){var e=this,n={renderTo:e.renderTo,title:e.title,subTitle:e.subTitle,width:e.width,height:e.height,titleHeight:e.titleHeight,subTitleHeight:e.subTitleHeight,barHeight:e.barHeight,theme:e.theme,shadow:e.shadow,style:e.style||{},window:e.window,modal:e.modal,frame:e.frame,items:[e],draggable:e.draggable,resizable:e.resizable,minWidth:e.minWidth,minHeight:e.minHeight,panelBodyBorders:e.panelBodyBorders,barContainer:e.barContainer,barScrollEnabled:e.barScrollEnabled},i=e.panelBodyBorders;e.bbar&&(n.bbar=e.bbar,e.height-=e.barHeight),e.tbar&&(n.tbar=e.tbar,e.height-=e.barHeight),e.subTBar&&(n.subTBar=e.subTBar,e.height-=e.barHeight),e.buttons&&(n.buttons=e.buttons,e.height-=e.barHeight),e.footer&&(n.footer=e.footer,e.height-=e.barHeight),e.panel=new t.Panel(n),e.bbar=e.panel.bbar,e.tbar=e.panel.tbar,e.subTBar=e.panel.subTBar,e.buttons=e.panel.buttons,e.wrapped||e.panel.addCls("fancy-panel-grid-inside"),e.title&&(e.height-=e.titleHeight),e.subTitle&&(e.height-=e.subTitleHeight,e.height+=i[2]),e.height-=i[0]+i[2],e.renderTo=e.panel.el.select("."+d).dom},getBodyHeight:function(){var e=this,t=e.height,n=1,i=e.gridBorders,r=e.gridWithoutPanelBorders;return e.groupheader&&(n=2),e.filter&&e.filter.header&&(e.groupheader?e.filter.groupHeader&&n++:n++),e.header!==!1&&(t-=e.cellHeaderHeight*n),t-=e.panel?i[0]+i[2]:r[0]+r[2],e.summary&&(t-=e.summary.topOffSet,t-=e.summary.bottomOffSet),t},ons:function(){var e=this,n=e.store,i=t.get(document);n.on("change",e.onChangeStore,e),n.on("set",e.onSetStore,e),n.on("insert",e.onInsertStore,e),n.on("remove",e.onRemoveStore,e),n.on("beforesort",e.onBeforeSortStore,e),n.on("sort",e.onSortStore,e),n.on("beforeload",e.onBeforeLoadStore,e),n.on("load",e.onLoadStore,e),i.on("mouseup",e.onDocMouseUp,e),i.on("click",e.onDocClick,e),i.on("mousemove",e.onDocMove,e),n.on("servererror",e.onServerError,e),n.on("serversuccess",e.onServerSuccess,e),e.responsive&&t.$(window).bind("resize",function(){e.onWindowResize(),e.intWindowResize&&clearInterval(e.intWindowResize),e.intWindowResize=setTimeout(function(){e.onWindowResize(),delete e.intWindowResize,setTimeout(function(){e.onWindowResize()},300)},30)}),e.on("activate",e.onActivate,e),e.on("deactivate",e.onDeActivate,e)},onServerError:function(e,t,n,i){this.fire("servererror",t,n,i)},onServerSuccess:function(e,t,n){this.fire("serversuccess",t,n)},onChangeStore:function(){this.update()},onBeforeLoadStore:function(e){this.fire("beforeload")},onRemoveStore:function(e,t,n){var i=this;i.fire("remove",t,n)},onInsertStore:function(e,t){var n=this;n.fire("insert",t)},onLoadStore:function(e){var t=this;setTimeout(function(){t.fire("load")},1)},onSetStore:function(e,t){var n=this;n.fire("set",t)},onBeforeSortStore:function(e,t){this.fire("beforesort",t)},onSortStore:function(e,t){this.fire("sort",t)},getCellsViewHeight:function(){var e=this,t=e.store,n=0,r=0;return e.grouping&&(n+=e.grouping.plusScroll),e.expander&&(n+=e.expander.plusScroll),!e.scroller.scrollBottomEl||e.scroller.scrollBottomEl.hasCls(i)||(r=e.scroller.cornerSize),e.cellHeight*t.dataView.length+r+n},onDocMouseUp:function(e){this.fire("docmouseup")},onDocClick:function(e){this.fire("docclick",e)},onDocMove:function(e){this.fire("docmove",e)},getCenterViewWidth:function(){var e=this,t=e.centerEl.width();if(0===t){for(var n=0,i=e.columns,r=0,o=i.length;o>r;r++){var a=i[r];a.hidden||(n+=a.width)}return n}return t},getCenterFullWidth:function(){for(var e=this,t=0,n=e.columns,i=0,r=n.length;r>i;i++){var o=n[i];o.hidden||(t+=o.width)}return t},getLeftFullWidth:function(){for(var e=this,t=0,n=e.leftColumns,i=0,r=n.length;r>i;i++){var o=n[i];o.hidden||(t+=o.width)}return t},getRightFullWidth:function(){for(var e=this,t=0,n=e.rightColumns,i=0,r=n.length;r>i;i++){var o=n[i];o.hidden||(t+=o.width)}return t},getColumns:function(e){var t,n=this;switch(e){case"left":t=n.leftColumns;break;case"center":t=n.columns;break;case"right":t=n.rightColumns}return t},setColumns:function(e,t){var n=this;switch(t){case"left":n.leftColumns=e;break;case"center":case void 0:n.columns=e;break;case"right":n.rightColumns=e}},getBody:function(e){var t,n=this;switch(e){case"left":t=n.leftBody;break;case"center":t=n.body;break;case"right":t=n.rightBody}return t},getHeader:function(e){var t,n=this;switch(e){case"left":t=n.leftHeader;break;case"center":t=n.header;break;case"right":t=n.rightHeader}return t},getDomRow:function(e){for(var t=this,n=t.leftBody,i=t.body,r=t.rightBody,o=t.leftColumns,a=t.columns,s=t.rightColumns,l=0,d=o.length,c=[];d>l;l++)c.push(n.getDomCell(e,l));for(l=0,d=a.length;d>l;l++)c.push(i.getDomCell(e,l));for(l=0,d=s.length;d>l;l++)c.push(r.getDomCell(e,l));return c},initTextSelection:function(){var e=this,n=e.body,i=e.leftBody,r=e.rightBody;if(e.textSelection===!1){e.addCls(c);var o=function(e){var n=t.get(e.target);n.hasCls("fancy-field-text-input")||n.hasCls("fancy-textarea-text-input")||e.preventDefault()};n.el.on("mousedown",o),i.el.on("mousedown",o),r.el.on("mousedown",o)}},setTrackOver:function(e,t){var n=this;switch(e){case"cell":n.cellTrackOver=t;break;case"column":n.columnTrackOver=t;break;case"row":n.trackOver=t}},setSelModel:function(e){var t=this,n=t.selection;n.cell=!1,n.cells=!1,n.row=!1,n.rows=!1,n.column=!1,n.columns=!1,n[e]=!0,n.selModel=e,"rows"===e?t.multiSelect=!0:t.multiSelect=!1,n.clearSelection()},getSelection:function(e){var t=this;return t.selection.getSelection(e)},clearSelection:function(){var e=this,t=e.selection;t.clearSelection()},destroy:function(){var e=this,n=t.get(document);n.un("mouseup",e.onDocMouseUp,e),n.un("click",e.onDocClick,e),n.un("mousemove",e.onDocMove,e),e.body.destroy(),e.leftBody.destroy(),e.rightBody.destroy(),e.header.destroy(),e.leftHeader.destroy(),e.rightHeader.destroy(),e.scroller.destroy(),e.el.destroy(),e.panel&&e.panel.el.destroy()},showAt:function(){var e=this;e.panel&&e.panel.showAt.apply(e.panel,arguments)},show:function(){var e=this;setTimeout(function(){e.panel?e.panel.show.apply(e.panel,arguments):e.el.show()},30)},hide:function(){var e=this;e.panel?e.panel.hide.apply(e.panel,arguments):e.el.hide()},initDateColumn:function(){var e=this,n=function(n){for(var i=0,r=n.length;r>i;i++){var o=n[i];if("date"===o.type){o.format=o.format||{};var a={type:"date"};t.applyIf(a,e.lang.date),t.applyIf(o.format,a)}}return n};e.columns=n(e.columns),e.leftColumns=n(e.leftColumns),e.rightColumns=n(e.rightColumns)},stopEditor:function(){var e=this;e.edit.stopEditor()},getById:function(e){var t=this;return t.store.getById(e)},get:function(e,t){var n=this,i=n.store;return void 0!==t?i.get(e,t):void 0===e?i.get():i.getItem(e)},getRowById:function(e){return this.store.getRow(e)},getTotal:function(){return this.store.getTotal()},getViewTotal:function(){return this.store.getLength()},getDataView:function(){return this.store.getDataView()},getData:function(){return this.store.getData()},selectRow:function(e,t,n){this.selection.selectRow(e,t,n),this.activated=!0},deSelectRow:function(e){this.selection.selectRow(e,!1,!0),this.activated=!0},selectById:function(e,t,n){this.selection.selectById(e,t,n)},selectColumn:function(e){var t,n,i=this,r=i.leftColumns||[],o=i.columns||[],a=i.rightColumns||[],s=function(t){for(var i=0,r=t.length;r>i;i++){var o=t[i];if(o.index===e||o.key===e)return n=i,!0}return!1};s(r)?t="left":s(o)?t="center":s(a)&&(t="right"),t&&i.selection.selectColumn(n,t)},getColumnByIndex:function(e){for(var t=this,n=t.leftColumns||[],i=t.columns||[],r=t.rightColumns||[],o=n.concat(i).concat(r),a=0,s=o.length;s>a;a++){var l=o[a];if(l.index===e||l.key===e)return l}},getColumnOrderByKey:function(e){var n,i=this,r=i.leftColumns||[],o=i.columns||[],a=i.rightColumns||[],s="";return t.each(o,function(t,i){t.index===e&&(s="center",n=i)}),s||(t.each(r,function(t,i){t.index===e&&(s="left",n=i)}),s||t.each(a,function(t,i){t.index===e&&(s="right",n=i)})),{side:s,order:n}},load:function(){var e=this;e.store.loadData()},save:function(){var e=this;e.store.save()},onWindowResize:function(){var e,n=this,i=n.renderTo;n.panel&&(i=n.panel.renderTo,e=t.get(i),n.setWidth(parseInt(e.width())),n.responsiveHeight&&n.setHeight(parseInt(e.height()))),n.setBodysHeight(),n.updateColumnsWidth(),n.scroller.scrollDelta(0),n.scroller.update()},updateColumnsWidth:function(){var e=this,t=function(t,n,i){Fancy.each(t,function(t,r){if(!t.hidden&&t.flex){var o=n.getCell(r);e.fire("columnresize",{cell:o.dom,width:t.width,column:t,side:i})}})};t(e.columns,e.header,"center"),t(e.leftColumns,e.leftHeader,"left"),t(e.rightColumns,e.rightHeader,"right")},setWidth:function(e){var t,n=this,i=n.el,o=n.gridBorders,a=n.gridWithoutPanelBorders,s=n.panelBodyBorders,l=n.body,d=n.header,c=function(e){for(var t=0,n=e.length,i=0;n>t;t++){var r=e[t];r.hidden||(i+=e[t].width)}return i},u=c(n.leftColumns),h=c(n.rightColumns),f=e-u-h-s[1]-s[3];n.wrapped?(t=e,f=e-u-h,f-=o[1]+o[3],n.css({width:t})):n.panel?(f=e-u-h-s[1]-s[3],n.panel.el.width(e),f-=o[1]+o[3],t=e-s[1]-s[3],n.css({width:t})):(f=e-u-h-a[1]-a[3],i.css("width",e)),100>f&&(f=100),i.select("."+r).css("width",f),d.css("width",f),l.css("width",f),n.hasFlexColumns&&(n.reCalcColumnsWidth(),n.columnresizer.updateColumnsWidth()),n.scroller.setScrollBars()},getWidth:function(){var e,t=this;return e=t.panel?parseInt(t.panel.css("width")):parseInt(t.css("width"))},getHeight:function(){var e,t=this;return e=t.panel?parseInt(t.panel.css("height")):parseInt(t.css("height"))},setHeight:function(e,t){var n=this,i=n.gridBorders,r=n.panelBodyBorders;n.panel&&t!==!1&&n.panel.setHeight(e),n.title&&(e-=n.titleHeight),n.subTitle&&(e-=n.subTitleHeight),n.footer&&(e-=n.barHeight),n.bbar&&(e-=n.barHeight),n.tbar&&(e-=n.barHeight),n.subTBar&&(e-=n.barHeight),n.buttons&&(e-=n.barHeight);var o=e;n.header&&(o-=n.cellHeaderHeight,n.groupheader&&(o-=n.cellHeaderHeight)),n.panel&&(o-=r[0]+r[2]),o-=i[0]+i[2],n.body&&n.body.css("height",o),n.leftBody&&n.leftBody.css("height",o),n.rightBody&&n.rightBody.css("height",o),n.el.css("height",e),n.height=e,n.scroller.update()},find:function(e,t,n){return this.store.find(e,t,n)},findItem:function(e,t){return this.store.findItem(e,t)},each:function(e,t){this.store.each(e,t)},onActivate:function(){var n=this,i=t.get(document);e&&e.id!==n.id&&e.fire("deactivate"),setTimeout(function(){i.on("click",n.onDeactivateClick,n)},100),e=n},onDeActivate:function(){var e=this,n=t.get(document);e.activated=!1,n.un("click",e.onDeactivateClick,e)},onDeactivateClick:function(e){for(var n=this,i=0,r=20,o=t.get(e.target);r>i;i++){if(!o.dom)return;if(!o.dom.tagName||"body"===o.dom.tagName.toLocaleLowerCase())return void n.fire("deactivate");if(void 0===o.hasCls)return void n.fire("deactivate");if(o.hasCls(n.widgetCls))return;o=o.parent()}},search:function(e,t){var n=this;n.searching.search(e,t)},stopSelection:function(){var e=this;e.selection&&e.selection.stopSelection()},enableSelection:function(e){var t=this;t.selection&&t.selection.enableSelection(e)},hideColumn:function(e,n){void 0===n&&(n=e,e="center");var i,r,o=this,a=o.getBody(e),s=o.getHeader(e),l=o.getColumns(e),d=0,c=l.length,u=o.centerEl,h=o.leftEl,f=o.leftHeader,g=o.rightEl,p=o.rightHeader;if(t.isNumber(n)){if(r=l[n],r.hidden)return;i=n,r.hidden=!0}else for(;c>d;d++)if(r=l[d],r.index===n){if(r.hidden)return;i=d,r.hidden=!0;break}switch(s.hideCell(i),a.hideColumn(i),o.rowedit&&o.rowedit.hideField(i,e),e){case"left":h.css("width",parseInt(h.css("width"))-r.width),f.css("width",parseInt(f.css("width"))-r.width),u.css("left",parseInt(u.css("left"))-r.width),u.css("width",parseInt(u.css("width"))+r.width),o.body.css("width",parseInt(o.body.css("width"))+r.width),o.header.css("width",parseInt(o.header.css("width"))+r.width);break;case"right":g.css("width",parseInt(g.css("width"))-r.width),p.css("width",parseInt(p.css("width"))-r.width),u.css("width",parseInt(u.css("width"))+r.width),o.body.css("width",parseInt(o.body.css("width"))+r.width),o.header.css("width",parseInt(o.header.css("width"))+r.width)}o.grouping&&o.grouping.updateGroupRows(),o.onWindowResize(),o.fire("columnhide")},showColumn:function(e,n){void 0===n&&(n=e,e="center");var i,r,o=this,a=o.getBody(e),s=o.getHeader(e),l=o.getColumns(e),d=0,c=l.length,u=o.centerEl,h=o.leftEl,f=o.leftHeader,g=o.rightEl,p=o.rightHeader;if(t.isNumber(n)){if(r=l[n],!r.hidden)return;i=n,r.hidden=!1}else for(;c>d;d++)if(r=l[d],r.index===n){if(!r.hidden)return;i=d,r.hidden=!1;break}switch(s.showCell(i),a.showColumn(i),o.rowedit&&o.rowedit.showField(i,e),e){case"left":h.css("width",parseInt(h.css("width"))+r.width),f.css("width",parseInt(f.css("width"))+r.width),u.css("left",parseInt(u.css("left"))+r.width),u.css("width",parseInt(u.css("width"))-r.width),o.body.css("width",parseInt(o.body.css("width"))-r.width),o.header.css("width",parseInt(o.header.css("width"))-r.width);break;case"right":g.css("width",parseInt(g.css("width"))+r.width),p.css("width",parseInt(p.css("width"))+r.width),u.css("width",parseInt(u.css("width"))-r.width),o.body.css("width",parseInt(o.body.css("width"))-r.width),o.header.css("width",parseInt(o.header.css("width"))-r.width)}o.grouping&&o.grouping.updateGroupRows(),o.onWindowResize(),o.fire("columnhide")},removeColumn:function(e,n){var i,r=this,o=r.leftEl,a=r.leftHeader,s=r.leftBody,l=r.centerEl,d=r.body,c=r.header,u=r.rightEl,h=r.rightBody,f=r.rightHeader;if(void 0===n&&(n="center"),t.isString(e)){var g=r.getColumns(n);if(t.each(g,function(t,n){return t.index===e?(e=n,!0):void 0}),t.isString(e)&&"center"===n&&(g=r.getColumns("left"),t.each(g,function(t,i){return t.index===e?(e=i,n="left",!0):void 0}),t.isString(e)&&(g=r.getColumns("right"),t.each(g,function(t,i){return t.index===e?(e=i,n="right",!0):void 0}),t.isString(e))))throw new Error("FancyGrid Error 7: Column was not found for method removeColumn")}switch(n){case"left":i=r.leftColumns[e],r.leftColumns.splice(e,1),a.removeCell(e),a.reSetIndexes(),s.removeColumn(e),o.css("width",parseInt(o.css("width"))-i.width),l.css("left",parseInt(l.css("left"))-i.width),l.css("width",parseInt(l.css("width"))+i.width),d.css("width",parseInt(d.css("width"))+i.width),c.css("width",parseInt(c.css("width"))+i.width);break;case"center":i=r.columns[e],r.columns.splice(e,1),c.removeCell(e),c.reSetIndexes(),d.removeColumn(e);break;case"right":i=r.rightColumns[e],r.rightColumns.splice(e,1),f.removeCell(e),f.reSetIndexes(),h.removeColumn(e),u.css("right",parseInt(u.css("right"))-i.width),l.css("width",parseInt(l.css("width"))+i.width),c.css("width",parseInt(c.css("width"))+i.width),d.css("width",parseInt(d.css("width"))+i.width)}return i.grouping&&delete i.grouping,r.summary&&r.summary.removeColumn(e,n),i},insertColumn:function(e,t,n,i){var r=this,o=r.leftEl,a=r.leftBody,s=r.leftHeader,l=r.centerEl,d=r.body,c=r.header,u=r.rightEl,h=r.rightBody,f=r.rightHeader;switch(n=n||"center"){case"center":delete e.rightLocked,delete e.locked,r.columns.splice(t,0,e),c.insertCell(t,e),c.reSetIndexes(),d.insertColumn(t,e);break;case"left":e.locked=!0,r.leftColumns.splice(t,0,e),s.insertCell(t,e),s.reSetIndexes(),a.insertColumn(t,e),o.css("width",parseInt(o.css("width"))+e.width),l.css("width",parseInt(l.css("width"))-e.width),l.css("left",parseInt(l.css("left"))+e.width),d.el.css("width",parseInt(d.el.css("width"))-e.width),c.el.css("width",parseInt(c.el.css("width"))-e.width);break;case"right":e.rightLocked=!0,r.rightColumns.splice(t,0,e),f.insertCell(t,e),f.reSetIndexes(),h.insertColumn(t,e),u.css("width",parseInt(u.css("width"))+e.width),l.css("width",parseInt(l.css("width"))-e.width),d.css("width",parseInt(d.css("width"))-e.width),c.css("width",parseInt(c.css("width"))-e.width)}e.menu&&(e.menu=!0),r.grouping&&(r.grouping.updateGroupRows(),r.grouping.setCellsPosition(t,n)),e.rowEditor&&("left"===n&&t--,r.rowedit.moveEditor(e,t,n,i)),r.summary&&r.summary.insertColumn(t,n),r.header.destroyMenus(),r.leftHeader.destroyMenus(),r.rightHeader.destroyMenus(),r.sorter&&r.sorter.updateSortedHeader()},addColumn:function(e,t,n){var i=this,t=t||"center";if(e.type||(e.type="string"),e.width||(e.width=i.defaultColumnWidth),void 0===n){var r=i.getColumns(t);n=r.length}i.insertColumn(e,n,t),i.scroller.update()},disableLegend:function(e,t){var n=this;n.columns[e].disabled=n.columns[e].disabled||{},n.columns[e].disabled[t]=!0,n.body.updateRows(void 0,e)},enableLegend:function(e,t){var n=this;n.columns[e].disabled=n.columns[e].disabled||{},delete n.columns[e].disabled[t],n.body.updateRows(void 0,e)},fitHeight:function(){var e=this,t=e.store,n=e.panelBodyBorders,i=e.gridBorders,r=t.getLength()*e.cellHeight,o=1,a=e.columns.concat(e.leftColumns||[]).concat(e.rightColumns||[]);Fancy.each(a,function(e){e.grouping&&(2>o&&(o=2),e.filter&&e.filter.header&&3>o&&(o=3)),e.filter&&e.filter.header&&2>o&&(o=2)}),e.getCenterFullWidth()>e.getCenterViewWidth()&&!e.nativeScroller&&!Fancy.isIE&&(r+=e.bottomScrollHeight),e.title&&(r+=e.titleHeight),e.tbar&&(r+=e.barHeight),e.summary&&(r+=e.cellHeight),e.bbar&&(r+=e.barHeight),e.buttons&&(r+=e.barHeight),e.subTBar&&(r+=e.barHeight),e.footer&&(r+=e.barHeight),e.header!==!1&&(r+=e.cellHeaderHeight*o),e.grouping&&(r+=e.grouping.groups.length*e.groupRowHeight),r+=e.panel?n[0]+n[2]+i[0]+i[2]:i[0]+i[2],e.setHeight(r)},addFilter:function(e,n,i){var r=this,o=r.filter.filters[e],i=i||"";if(void 0===o&&(o={}),t.isDate(n)){var a=this.getColumnByIndex(e).format;o.type="date",o.format=a,n=Number(n)}""===n?delete o[i]:o[i]=n,r.filter.filters[e]=o,r.filter.updateStoreFilters(),r.filter.addValuesInColumnFields(e,n,i)},clearFilter:function(e,t){var n=this,i=n.store;void 0===e?(n.filter.filters={},i.filters={}):void 0===t?i.filters&&i.filters[e]&&(n.filter.filters[e]={},i.filters[e]={}):n.filter&&n.filter.filters&&n.filter.filters[e]&&n.filter.filters[e][t]&&(delete n.filter.filters[e][t],delete i.filters[e][t]),i.changeDataView(),n.update(),n.filter&&n.filter.clearColumnsFields(e,t)},showLoadMask:function(e){this.loadmask.showLoadMask(e)},hideLoadMask:function(){this.loadmask.hideLoadMask()},prevPage:function(){this.paging.prevPage()},nextPage:function(){this.paging.nextPage()},setPage:function(e){e--,0>e&&(e=0),this.paging.setPage(e)},firstPage:function(){this.paging.firstPage()},lastPage:function(){this.paging.lastPage()},setPageSize:function(e){this.paging.setPageSize(e)},getPage:function(){return this.store.showPage+1},getPages:function(){return this.store.pages},getPageSize:function(){return this.store.pageSize},refresh:function(){this.paging.refresh()},scroll:function(e,t){var n=this,i=n.scroller;i.scroll(e,t),i.scrollBottomKnob(),i.scrollRightKnob()},getDataFiltered:function(){return this.store.filteredData},reCalcColumnsWidth:function(){var e=this;if(e.hasFlexColumns){var t,n=e.scroller,i=e.getCenterViewWidth(),r=e.columns,o=0,a=0,s=r.length,l=i;for(e.flexScrollSensitive!==!1&&n.isRightScrollable()&&!n.nativeScroller&&(l-=e.bottomScrollHeight);s>a;a++){var d=r[a];d.hidden||(d.flex?o+=d.flex:l-=d.width)}if(0!==o)for(t=l/o,a=0;s>a;a++){var d=r[a];d.hidden||d.flex&&(d.width=Math.floor(d.flex*t),d.minWidth&&d.width<d.minWidth&&(d.width=d.minWidth),d.minWidth&&d.width<d.minWidth?d.width=d.minWidth:d.width<e.minColumnWidth&&(d.width=e.minColumnWidth))}}},getDisplayedData:function(){for(var e=this,n=e.getViewTotal(),i=[],r=0,o=e.leftColumns,a=e.columns,s=e.rightColumns;n>r;r++){var l=[];t.each(o,function(t){void 0!==t.index&&"$selected"!==t.index&&l.push(e.get(r,t.index))}),t.each(a,function(t){void 0!==t.index&&"$selected"!==t.index&&l.push(e.get(r,t.index))}),t.each(s,function(t){void 0!==t.index&&"$selected"!==t.index&&l.push(e.get(r,t.index))}),i.push(l)}return i},setData:function(e){var t=this,n=t.store;n.setData(e),n.isTree&&n.initTreeData()},exportToExcel:function(){var e=this;e.exporter&&e.exporter.exportToExcel()},enableSelection:function(){this.selection.enableSelection()},disableSelection:function(){this.selection.disableSelection()},setParams:function(e){var n=this,i=n.store;i.proxy&&i.proxy.params&&t.apply(i.proxy.params,e)},getSideByCell:function(e){var t,n=this;return n.centerEl.within(e)?t="center":n.leftEl.within(e)?t="left":n.rightEl.within(e)&&(t="right"),t},addChild:function(e,n){var i=this,r=i.store;if(void 0===n)e.$deep=1,void 0===e.child&&(e.child=[]),i.add(e);else{t.isNumber(e)&&(e=i.getById(e));var o=!1;e.get("leaf")===!0&&(e.set("leaf",!1),e.set("expanded",!0),e.set("child",[]),o=!0);var a=e.get("$deep"),s=e.get("child"),l=i.getRowById(e.id)+s.length+1;if(n.$deep=a+1,n.parentId=e.id,o){var d=e.get("parentId");if(d){var c=i.getById(d);t.each(c.data.child,function(t){return t.id===e.id?(t.leaf=!1,t.expanded=!0,t.child=[n],!0):void 0})}}s.push(new r.model(n)),e.set("child",s),e.get("expanded")===!0&&i.insert(l,n)}},expand:function(e){var n,i=this;switch(t.typeOf(e)){case"number":case"string":n=i.getById(e)}n.get("expanded")!==!0&&i.tree.expandRow(n)},collapse:function(e){var n,i=this;switch(t.typeOf(e)){case"number":case"string":n=i.getById(e)}n.get("expanded")!==!1&&i.tree.collapseRow(n)},collapseAll:function(){var e=this,n=e.findItem("$deep",1);t.each(n,function(t){e.collapse(t.id)})},expandAll:function(){var e=this,n=e.findItem("expanded",!1);t.each(n,function(t){e.expand(t.id)}),n=e.findItem("expanded",!1),n.length&&e.expandAll()},copy:function(e){var t=this;t.selection&&t.selection.copy(e)},sort:function(e,t){var n,i,r=this,o=r.getColumnByIndex(e),a=r.getColumnOrderByKey(e);if(a.side)if(n=r.getHeader(a.side),i=n.getCell(a.order),t){switch(t=t||"ASC",i=n.getCell(a.order),t=t.toLocaleLowerCase()){case"asc":i.removeCls(g),i.addCls(f);break;case"desc":i.removeCls(f),i.addCls(g);break;case"drop":i.removeCls(f),i.removeCls(g);break;default:throw new Error("[FancyGrid Error]: sorting type is not right - "+t)}r.sorter.sort(t,e,a.side,o,i)}else i.dom.click()},flashRow:function(e){var n=this,i=n.getDomRow(e);t.each(i,function(e){e=t.get(e),e.addCls("fancy-grid-cell-flash")}),setTimeout(function(){t.each(i,function(e){e=t.get(e),e.addCls("fancy-grid-cell-animation")})},200),setTimeout(function(){t.each(i,function(e){e=t.get(e),e.removeCls("fancy-grid-cell-flash"),e.removeCls("fancy-grid-cell-animation")})},700)},flashCell:function(e,t,n){var i=this,n=n?n:"center",r=i.getBody(n),o=Fancy.isObject(e)?e:r.getCell(e,t);o.addCls("fancy-grid-cell-flash"),setTimeout(function(){o.addCls("fancy-grid-cell-animation")},200),setTimeout(function(){o.removeCls("fancy-grid-cell-flash"),o.removeCls("fancy-grid-cell-animation")},700)},scrollToRow:function(e){var t=this,n=t.body.getCell(e,0);t.scroller.scrollToCell(n.dom,!1,!0),t.scroller.update(),t.flashRow(e)},getStateSorters:function(){var e=this,n={},i=JSON.parse(localStorage.getItem(e.getStateName()));if(i){if(!i.sorters)return{};var r=JSON.parse(i.sorters);return t.each(r,function(e){n[e.key]=e}),n}},getStateName:function(){var e=this,t=(e.widget,e.id),n=location.host+"-"+location.pathname;return t+n}})}(),Fancy.define(["Fancy.Grid","FancyGrid"],{extend:Fancy.Widget,mixins:["Fancy.grid.mixin.Grid",Fancy.panel.mixin.PrepareConfig,Fancy.panel.mixin.methods,"Fancy.grid.mixin.PrepareConfig","Fancy.grid.mixin.ActionColumn",Fancy.grid.mixin.Edit],plugins:[{type:"grid.updater"},{type:"grid.scroller"},{type:"grid.licence"}],type:"grid",theme:"default",i18n:"en",emptyText:"",prefix:"fancy-grid-",cls:"",widgetCls:Fancy.GRID_CLS,header:!0,shadow:!0,striped:!0,columnLines:!0,rowLines:!0,textSelection:!1,width:200,height:200,minWidth:200,minHeight:200,minColumnWidth:30,defaultColumnWidth:100,emptyValue:"&nbsp;",frame:!0,draggable:!1,activated:!1,multiSort:!1,tabEdit:!0,dirtyEnabled:!0,barScrollEnabled:!0,constructor:function(e){var t=this,e=e||{},n=function(n){n&&Fancy.apply(e,n),e.id&&(t.id=e.id),t.initId(),e=t.prepareConfig(e,t),Fancy.applyConfig(t,e),t.Super("const",arguments)},i=function(){var i=e.i18n||t.i18n;Fancy.loadLang(i,n)===!0&&n({})};Fancy.modules.grid||Fancy.fullBuilt||Fancy.MODULELOAD===!1||Fancy.MODULESLOAD===!1?i():Fancy.nojQuery?Fancy.loadModule("dom",function(){Fancy.loadModule("grid",function(){i()})}):Fancy.loadModule("grid",function(){i()})},init:function(){var e=this;return e.addEvents("beforerender","afterrender","render","show","hide","destroy"),e.addEvents("headercellclick","headercellmousemove","headercellmousedown","docmouseup","docclick","docmove","beforeinit","init","columnresize","columnclick","columndblclick","columnenter","columnleave","columnmousedown","cellclick","celldblclick","cellenter","cellleave","cellmousedown","beforecellmousedown","rowclick","rowdblclick","rowenter","rowleave","rowtrackenter","rowtrackleave","columndrag","columnhide","columnshow","scroll","nativescroll","remove","insert","set","update","beforesort","sort","beforeload","load","servererror","serversuccess","select","selectrow","deselectrow","clearselect","activate","deactivate","beforeedit","startedit","changepage","dropitems","collapse","expand","lockcolumn","rightlockcolumn","unlockcolumn","filter","contextmenu"),Fancy.loadStyle(),Fancy.fullBuilt!==!0&&Fancy.MODULELOAD!==!1&&Fancy.MODULESLOAD!==!1&&e.fullBuilt!==!0&&e.neededModules!==!0&&"datepicker"!==e.wtype&&"monthpicker"!==e.wtype?void e.loadModules():(e.initStore(),e.initPlugins(),e.ons(),e.initDateColumn(),e.fire("beforerender"),e.preRender(),e.render(),e.initElements(),e.initActionColumnHandler(),e.fire("render"),e.fire("afterrender"),e.setSides(),e.setSidesHeight(),e.setColumnsPosition(),e.update(),e.initTextSelection(),e.initTouch(),e.fire("beforeinit"),void setTimeout(function(){e.inited=!0,e.fire("init"),e.setBodysHeight()},1))},loadModules:function(){var e=this,t={},n=e.columns||[],i=e.leftColumns||[],r=e.rightColumns||[];Fancy.modules=Fancy.modules||{},Fancy.nojQuery&&(t.dom=!0),Fancy.isTouch&&(t.touch=!0),e.summary&&(t.summary=!0),e.exporter&&(t.exporter=!0,t.excel=!0),e.paging&&(t.paging=!0),(e.filter||e.searching)&&(t.filter=!0),e.data&&e.data.proxy&&(t.edit=!0),e.clicksToEdit&&(t.edit=!0),(e.stateful||e.state)&&(t.state=!0),Fancy.isObject(e.data)&&(e.data.proxy&&(t["server-data"]=!0,Fancy.nojQuery&&(t.ajax=!0)),e.data.chart&&(t["chart-integration"]=!0)),e.expander&&(t.expander=!0),e.isGroupedHeader&&(t["grouped-header"]=!0),e.grouping&&(t.grouping=!0),e.summary&&(t.summary=!0),e.exporter&&(t.exporter=!0,t.excel=!0),(e.trackOver||e.columnTrackOver||e.cellTrackOver||e.selection)&&(t.selection=!0),e.contextmenu&&(t.menu=!0);var o=function(e){return e.menu?(t.menu=!0,!0):void 0};Fancy.each(e.events,function(e){for(var n in e)"contextmenu"===n&&(t.menu=!0)}),Fancy.each(e.controls,function(e){"contextmenu"===e.event&&(t.menu=!0)}),Fancy.each(e.tbar,o),Fancy.each(e.bbar,o),Fancy.each(e.buttons,o),Fancy.each(e.subTBar,o);var a=n.concat(i).concat(r);Fancy.each(a,function(n){switch(n.draggable===!0&&(t["column-drag"]=!0),n.sortable===!0&&(t.sort=!0),n.editable===!0&&(t.edit=!0),n.menu===!0&&(t.menu=!0),n.filter&&(t.filter=!0),n.type){case"select":e.checkboxRowSelection=!0,t.selection=!0;break;case"combo":n.data&&n.data.proxy&&(t.ajax=!0);break;case"progressbar":case"progressdonut":case"grossloss":case"hbar":t.spark=!0;break;case"tree":t.tree=!0;break;case"date":t.date=!0,t.selection=!0}}),Fancy.isArray(e.tbar)&&Fancy.each(e.tbar,function(e){switch(e.action){case"add":case"remove":t.edit=!0}}),e.gridToGrid&&(t.dd=!0),e.rowDragDrop&&(t.dd=!0),e.neededModules={length:0};for(var s in t)void 0===Fancy.modules[s]&&(e.neededModules[s]=!0,e.neededModules.length++);if(0===e.neededModules.length)return e.neededModules=!0,void e.init();var l=function(t){delete e.neededModules[t],e.neededModules.length--,0===e.neededModules.length&&(e.neededModules=!0,e.init())};if(e.neededModules.dom)Fancy.loadModule("dom",function(t){if(delete e.neededModules[t],e.neededModules.length--,0===e.neededModules.length)e.neededModules=!0,e.init();else for(var n in e.neededModules)"length"!==n&&Fancy.loadModule(n,l)});else for(var s in e.neededModules)"length"!==s&&Fancy.loadModule(s,l)},lockColumn:function(e,t){var n=this;if(1===n.columns.length)return!1;var i=n.removeColumn(e,t);n.insertColumn(i,n.leftColumns.length,"left"),n.fire("lockcolumn")},rightLockColumn:function(e,t){var n=this;if(1===n.columns.length)return!1;var i=n.removeColumn(e,t);n.insertColumn(i,0,"right"),n.fire("rightlockcolumn")},unLockColumn:function(e,t){var n,i=this;switch(t){case"left":n=i.removeColumn(e,t),i.insertColumn(n,0,"center","left");break;case"right":n=i.removeColumn(e,t),i.insertColumn(n,i.columns.length,"center","right")}"left"===t&&i.grouping&&0===i.leftColumns.length&&i.grouping.insertGroupEls(),i.fire("unlockcolumn")},moveColumn:function(e,t,n,i,r){var o,a=this;if(r){for(var s=0,l=r.end-r.start+1,d=r.cell.attr("index"),c=a.getHeader(t),u=r.cell.dom.outerHTML;l>s;s++)a.moveColumn(e,t,r.end-s,i);var h=a.getColumns(t),f=c.el.select("."+Fancy.GRID_HEADER_CELL_CLS);for(s=i,l=s+(r.end-r.start+1);l>s;s++){var g=h[s],p=f.item(s);g.grouping=d,p.attr("group-index",d)}return c.el.append(u),void c.fixGroupHeaderSizing()}if("center"===e)switch(o=a.removeColumn(n,"center"),t){case"left":a.insertColumn(o,i,"left","center");break;case"right":a.insertColumn(o,i,"right","center")}else if("left"===e)switch(o=a.removeColumn(n,"left"),t){case"center":a.insertColumn(o,i,"center","left");break;case"right":a.insertColumn(o,i,"right","left")}else if("right"===e)switch(o=a.removeColumn(n,"right"),t){case"center":a.insertColumn(o,i,"center","right");break;case"left":a.insertColumn(o,i,"left","right")}a.groupheader&&(a.header.fixGroupHeaderSizing(),a.leftColumns&&a.leftHeader.fixGroupHeaderSizing(),a.rightColumns&&a.rightHeader.fixGroupHeaderSizing()),a.getHeader(e).reSetCheckBoxes(),a.getHeader(t).reSetCheckBoxes()},updateColumnsVisibilty:function(){var e=this;e.columns&&(e.header&&e.header.updateCellsVisibility(),e.body.updateColumnsVisibility()),e.leftColumns&&(e.leftHeader&&e.leftHeader.updateCellsVisibility(),e.leftBody.updateColumnsVisibility()),e.rightColumns&&(e.rightHeader&&e.rightHeader.updateCellsVisibility(),e.rightBody.updateColumnsVisibility())}}),FancyGrid.get=function(e){var t=Fancy.get(e);if(t.dom){var n=t.select("."+Fancy.GRID_CLS).item(0);if(n.dom){var i=n.dom.id;return Fancy.getWidget(i)}}},FancyGrid.defineTheme=Fancy.defineTheme,FancyGrid.defineController=Fancy.defineController,FancyGrid.addValid=Fancy.addValid,!Fancy.nojQuery&&Fancy.$&&(Fancy.$.fn.FancyGrid=function(e){return this.selector?e.renderTo=$(this.selector)[0].id:e.renderTo=this.attr("id"),new Fancy.Grid(e)}),Fancy.define("Fancy.grid.plugin.Updater",{extend:Fancy.Plugin,ptype:"grid.updater",inWidgetName:"updater",constructor:function(e){Fancy.applyConfig(this,e),this.Super("const",arguments)},init:function(){},update:function(){var e=this.widget;e.leftBody.update(),e.body.update(),e.rightBody.update()},updateRow:function(e){var t=this.widget;t.leftBody.updateRows(e),t.body.updateRows(e),t.rightBody.updateRows(e)}}),function(){var e=Fancy,t="fancy-scroll-right",n="fancy-scroll-bottom",i="fancy-scroll-right-inner",r="fancy-scroll-bottom-inner",o="fancy-grid-native-scroller",a="fancy-scroll-right-hover",s="fancy-scroll-bottom-hover",l="fancy-scroll-right-active",d="fancy-scroll-bottom-active",c=e.HIDDEN_CLS,u=e.GRID_COLUMN_CLS,h=e.GRID_CENTER_CLS;e.define("Fancy.grid.plugin.Scroller",{extend:e.Plugin,ptype:"grid.scroller",inWidgetName:"scroller",rightKnobDown:!1,bottomKnobDown:!1,minRightKnobHeight:35,minBottomKnobWidth:35,cornerSize:12,scrollLeft:0,constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var t=this,n=t.widget,i=e.getMouseWheelEventName();n.once("render",function(){t.render(),n.leftBody.el.on(i,t.onMouseWheel,t),n.nativeScroller&&(n.leftBody.el.on(i,t.onMouseWheelLeft,t),n.rightBody.el.on(i,t.onMouseWheelRight,t)),n.body.el.on(i,t.onMouseWheel,t),n.rightBody.el.on(i,t.onMouseWheel,t),n.once("init",t.onGridInit,t),n.nativeScroller?(n.body.el.on("scroll",t.onNativeScrollBody,t),n.leftBody.el.on("scroll",t.onNativeScrollLeftBody,t),n.rightBody.el.on("scroll",t.onNativeScrollRightBody,t)):(n.panel&&n.panel.on("resize",t.onPanelResize,t),n.body.el.on("scroll",t.onScrollBodyBugFix,t))}),t.on("render",t.onRender,t),n.store.on("change",t.onChangeStore,t)},destroy:function(){var t=this,n=t.widget,i=n.leftBody,r=n.body,o=n.rightBody,a=e.get(document),s=e.getMouseWheelEventName();a.un("mouseup",t.onMouseUpDoc,t),a.un("mousemove",t.onMouseMoveDoc,t),i.el.un(s,t.onMouseWheel,t),r.el.un(s,t.onMouseWheel,t),o.el.un(s,t.onMouseWheel,t),t.scrollBottomEl.un("mousedown",t.onMouseDownBottomSpin,t),t.scrollRightEl.un("mousedown",t.onMouseDownRightSpin,t),e.isTouch&&(i.el.un("touchstart",t.onBodyTouchStart,t),i.el.un("touchmove",t.onBodyTouchMove,t),r.el.un("touchstart",t.onBodyTouchStart,t),r.el.un("touchmove",t.onBodyTouchMove,t),o.el.un("touchstart",t.onBodyTouchStart,t),o.el.un("touchmove",t.onBodyTouchMove,t),a.un("touchend",t.onMouseUpDoc,t))},onGridInit:function(){var t=this,n=t.widget,i=n.store,r=e.get(document);t.setScrollBars(),r.on("mouseup",t.onMouseUpDoc,t),r.on("mousemove",t.onMouseMoveDoc,t),n.on("columnresize",t.onColumnResize,t),n.on("lockcolumn",t.onLockColumn,t),n.on("rightlockcolumn",t.onRightLockColumn,t),n.on("unlockcolumn",t.onUnLockColumn,t),i.on("changepages",t.onChangePages,t),setTimeout(function(){t.update()},1)},render:function(){var a=this,s=a.widget,l=s.body,d=e.get(document.createElement("div")),u=e.get(document.createElement("div"));s.nativeScroller?s.el.addCls(o):(d.addCls(t),u.addCls(n,c),d.update(['<div class="'+i+'"></div>'].join(" ")),d.select("."+i).css("margin-top",s.knobOffSet),u.update(['<div class="'+r+'"></div>'].join(" ")),e.get(l.el.append(d.dom)),a.scrollRightEl=l.el.select(".fancy-scroll-right"),e.get(l.el.append(u.dom)),a.scrollBottomEl=l.el.select(".fancy-scroll-bottom")),a.fire("render")},onMouseWheel:function(t){var n=this,i=n.widget,r=e.getWheelDelta(t.originalEvent||t);0!=n.isRightScrollable()&&(i.stopProp&&t.stopPropagation(),i.nativeScroller||(n.scrollDelta(r)&&t.preventDefault(),n.scrollRightKnob()))},onRender:function(){var t=this,n=t.widget;n.nativeScroller!==!0&&(t.scrollRightEl.hover(function(){t.bottomKnobDown!==!0&&t.scrollRightEl.addCls(a)},function(){t.scrollRightEl.removeCls(a)}),t.scrollBottomEl.hover(function(){t.rightKnobDown!==!0&&t.scrollBottomEl.addCls(s)},function(){t.scrollBottomEl.removeCls(s)}),t.initRightScroll(),t.initBottomScroll()),e.isTouch&&t.initTouch()},initTouch:function(){var t=this,n=t.widget,i=n.leftBody,r=n.body,o=n.rightBody,a=e.get(document);i.el.on("touchstart",t.onBodyTouchStart,t),i.el.on("touchmove",t.onBodyTouchMove,t),r.el.on("touchstart",t.onBodyTouchStart,t),r.el.on("touchmove",t.onBodyTouchMove,t),o.el.on("touchstart",t.onBodyTouchStart,t),o.el.on("touchmove",t.onBodyTouchMove,t),a.on("touchend",t.onMouseUpDoc,t)},onBodyTouchStart:function(e){var t=this,n=t.widget,e=e.originalEvent||e,i=e.changedTouches[0];n.nativeScroller||(t.rightKnobDown=!0,t.bottomKnobDown=!0,t.mouseDownXY={x:i.pageX,y:i.pageY},t.rightKnobTop=parseInt(t.rightKnob.css("margin-top")),t.scrollRightEl.addCls(l),t.bottomKnobLeft=parseInt(t.bottomKnob.css("margin-left")),t.scrollBottomEl.addCls(d))},onBodyTouchEnd:function(){this.onMouseUpDoc()},onBodyTouchMove:function(e){var t=this,e=e.originalEvent,n=e.changedTouches[0],i=!0;if(t.nativeScroller)t.onMouseMoveDoc({pageX:n.pageX,pageY:n.pageY});else{var r=t.scrollLeft,o=t.scrollTop;t.onMouseMoveDoc({pageX:n.pageX,pageY:n.pageY}),i=r!==t.scrollLeft||o!==t.scrollTop}t.rightKnobDown===!0&&i&&e.preventDefault(),t.bottomKnobDown===!0&&i&&e.preventDefault()},initRightScroll:function(){var e=this;e.rightKnob=e.scrollRightEl.select("."+i),e.scrollRightEl.on("mousedown",e.onMouseDownRightSpin,e)},initBottomScroll:function(){var e=this;e.bottomKnob=e.scrollBottomEl.select("."+r),e.scrollBottomEl.on("mousedown",e.onMouseDownBottomSpin,e)},onMouseDownRightSpin:function(t){var n=this;e.isTouch||(t.preventDefault(),n.rightKnobDown=!0,n.mouseDownXY={x:t.pageX,y:t.pageY},n.rightKnobTop=parseInt(n.rightKnob.css("margin-top")),n.scrollRightEl.addCls(l))},onMouseDownBottomSpin:function(e){var t=this;e.preventDefault(),t.bottomKnobDown=!0,t.mouseDownXY={x:e.pageX,y:e.pageY},t.bottomKnobLeft=parseInt(t.bottomKnob.css("margin-left")),t.scrollBottomEl.addCls(d)},onMouseUpDoc:function(){var e=this;(e.rightKnobDown!==!1||e.bottomKnobDown!==!1)&&(e.scrollRightEl.removeCls(l),e.scrollBottomEl.removeCls(d),e.rightKnobDown=!1,e.bottomKnobDown=!1)},onMouseMoveDoc:function(t){var n,i,r,o,a=this,s=a.widget,l=!1,d=!1,c=s.knobOffSet,u=t.pageX,h=t.pageY;a.rightKnobDown&&(e.isTouch?(i=a.mouseDownXY.y-h,r=i+a.rightKnobTop):(i=h-a.mouseDownXY.y,r=i+a.rightKnobTop),r<a.knobOffSet&&(r=a.knobOffSet),a.bodyViewHeight<r+a.rightKnobHeight&&(r=a.bodyViewHeight-a.rightKnobHeight),r<a.rightScrollScale&&(r=0),a.rightKnob.css("margin-top",r+c+"px"),l=a.rightScrollScale*r,a.scroll(l)),a.bottomKnobDown&&(e.isTouch?(n=a.mouseDownXY.x-u,i=a.mouseDownXY.y-h,o=n+a.bottomKnobLeft):(n=u-a.mouseDownXY.x,i=h-a.mouseDownXY.y,o=n+a.bottomKnobLeft),1>o&&(o=1),a.bodyViewWidth-2<o+a.bottomKnobWidth&&(o=a.bodyViewWidth-a.bottomKnobWidth-2),a.bottomScrollScale<0&&0>o&&(o=0,a.bottomScrollScale=0),a.bottomKnob.css("margin-left",o+"px"),d=Math.ceil(a.bottomScrollScale*(o-1)),a.scroll(!1,d))},setScrollBars:function(){var e=this,t=e.widget;setTimeout(function(){e.checkRightScroll()},1),e.checkBottomScroll()||e.scrollTop&&t.scroll(!1,0),t.nativeScroller||(e.checkCorner(),e.setRightKnobSize(),e.setBottomKnobSize())},checkRightScroll:function(){var e=this,t=e.widget,n=t.body,i=t.gridBorders,r=t.getBodyHeight(),o=t.getCellsViewHeight()-i[0]-i[2];t.nativeScroller?r>=o?n.el.css("overflow-y","hidden"):n.el.css("overflow-y","scroll"):r>=o?e.scrollRightEl.addCls(c):e.scrollRightEl.removeCls(c)},isRightScrollable:function(){var e=this.widget;return e.nativeScroller?"scroll"===e.body.el.css("overflow-y"):!this.scrollRightEl.hasCls(c)},setRightKnobSize:function(){var t=this,n=t.widget;if(!n.nativeScroller){var i=n.getBodyHeight()-(t.corner?t.cornerSize:0)-2,r=n.getCellsViewHeight()-(t.corner?t.cornerSize:0),o=r-i,a=100-o/(i/100),s=i*(a/100),l=n.knobOffSet;s<t.minRightKnobHeight&&(s=t.minRightKnobHeight),t.corner===!1&&(i-=l),t.rightKnob.stop(),t.rightKnob.animate({height:s},e.ANIMATE_DURATION),t.rightKnobHeight=s,t.bodyViewHeight=i,t.rightScrollScale=(r-i)/(i-s)}},checkBottomScroll:function(){var e,t=this,n=t.widget,i=n.body,r=n.getCenterViewWidth(),o=n.getCenterFullWidth()-2;return n.nativeScroller?r>o?(e=!1,i.el.css("overflow-x","hidden")):(e=!0,i.el.css("overflow-x","scroll")):r>o?(e=!1,t.scrollBottomEl.addCls(c)):(e=!0,t.scrollBottomEl.removeCls(c)),e},checkCorner:function(){var e=this,t=e.widget;t.nativeScroller||(e.corner=!e.scrollRightEl.hasCls(c)&&!e.scrollBottomEl.hasCls(c))},setBottomKnobSize:function(){var t=this,n=t.widget;if(!n.nativeScroller){var i=n.getCenterViewWidth()-(t.corner?t.cornerSize:0),r=n.getCenterFullWidth()-(t.corner?t.cornerSize:0),o=r-i,a=100-o/(r/100),s=i*(a/100)-2;s<t.minBottomKnobWidth&&(s=t.minBottomKnobWidth),t.bottomKnob.stop(),t.bottomKnob.animate({width:s},e.ANIMATE_DURATION),t.bottomKnobWidth=s,t.bodyViewWidth=i,t.bottomScrollScale=(i-r)/(i-s-2-1)}},scroll:function(e,t){var n,i=this,r=i.widget;return t>0&&(t=0),r.nativeScroller?(null!==e&&void 0!==e&&(r.body.el.dom.scrollTop=e),null!==t&&void 0!==t&&(r.body.el.dom.scrollLeft=Math.abs(t),r.header&&r.header.scroll(t)),void r.fire("scroll")):(r.leftBody.scroll(e),n=r.body.scroll(e,t),r.rightBody.scroll(e),void 0!==n.scrollTop&&(i.scrollTop=Math.abs(n.scrollTop)),void 0!==n.scrollLeft&&(i.scrollLeft=Math.abs(n.scrollLeft)),void r.fire("scroll"))},scrollDelta:function(e){var t,n=this,i=n.widget;return i.leftBody.wheelScroll(e),t=i.body.wheelScroll(e),i.rightBody.wheelScroll(e),void 0!==t?(n.scrollTop=Math.abs(t.newScroll),i.fire("scroll"),t.scrolled):void 0},scrollRightKnob:function(){var e=this,t=e.widget,n=e.getScroll(),i=n/e.rightScrollScale+t.knobOffSet;e.rightKnob&&e.rightKnob.css("margin-top",i+"px")},scrollBottomKnob:function(){var e=this,t=e.widget,n=e.getBottomScroll(),i=n/e.bottomScrollScale+t.knobOffSet;0===n&&(i=-1),e.bottomKnob&&e.bottomKnob.css("margin-left",-i+"px")},getScroll:function(){var e=this,t=e.widget;return t.nativeScroller?t.body.el.dom.scrollTop:Math.abs(parseInt(t.body.el.select("."+u).item(0).css("top")))},getBottomScroll:function(){var e=this,t=e.widget;return t.nativeScroller?t.body.el.dom.scrollLeft:Math.abs(parseInt(t.body.el.select("."+u).item(0).css("left")))},update:function(){var e=this;e.setScrollBars(),e.checkScroll(),e.scrollRightKnob(),e.scrollBottomKnob()},onChangeStore:function(){this.update()},onColumnResize:function(){var e=this;e.setScrollBars(),setTimeout(function(){e.setScrollBars()},Fancy.ANIMATE_DURATION+20)},checkScroll:function(){var e=this,t=e.widget,n=e.getScroll(),i=t.getBodyHeight()-(e.corner?e.cornerSize:0),r=t.getCellsViewHeight()-(e.corner?e.cornerSize:0);n&&i>r&&(e.scroll(0),t.nativeScroller||e.scrollRightKnob())},scrollToCell:function(t,n,i){var r=this,o=r.widget,a=o.cellHeight,s=e.get(t),l=s.parent(),d=Number(s.attr("index")),c=Number(l.attr("index")),u=r.getScroll(),f=a*(d+1),g=o.getBodyHeight(),p=r.getBottomScroll(),m=o.getSideByCell(t),v=o.getColumnsWidth(m),y=parseInt(o.body.el.css("width")),C=0,w=l.parent().parent().hasCls(h);if(!o.nativeScroller||n){if(0===d&&0===c)return r.scroll(0,0),r.scrollBottomKnob(),void r.scrollRightKnob();if(o.grouping&&(f+=o.grouping.getSpecialRowsAbove(d)*o.groupRowHeight),o.expander&&(f+=o.expander.getBeforeHeight(d)),i){var b=o.getCellsViewHeight();u=f-a,g>b-u&&(u-=Math.abs(b-u-g)),r.scroll(u)}else f-u>g?(u=f-g+5,r.scroll(u)):f-u<o.cellHeight&&(u-=a,0>u&&(u=0),r.scroll(u));if(w){for(var x=o.columns,S=0;c>=S;S++)C+=x[S].width;C-p>y?x[S]?r.scroll(u,-(p+(C-p)-y)):r.scroll(u,-(v-y)):C-p<x[c].width?(p=-(C-x[c].width),p>0&&(p=0),r.scroll(u,p)):0!==p&&0===c&&r.scroll(u,0),r.scrollBottomKnob()}r.scrollRightKnob()}},onNativeScrollBody:function(){var e=this,t=e.widget,n=t.body.el.dom.scrollTop,i=t.body.el.dom.scrollLeft;t.header&&t.header.scroll(-i),t.leftBody&&(t.leftBody.el.dom.scrollTop=n),t.rightBody&&(t.rightBody.el.dom.scrollTop=n),t.leftColumns.length&&t.leftBody.el.dom.scrollTop!==t.body.el.dom.scrollTop?t.body.el.dom.scrollTop=t.leftBody.el.dom.scrollTop:t.rightColumns.length&&t.rightBody.el.dom.scrollTop!==t.body.el.dom.scrollTop&&(t.body.el.dom.scrollTop=t.rightBody.el.dom.scrollTop),t.fire("nativescroll")},onNativeScrollLeftBody:function(){var e=this.widget;e.leftBody.el.dom.scrollTop!==e.body.el.dom.scrollTop&&this.onNativeScrollBody()},onNativeScrollRightBody:function(){var e=this.widget;e.rightBody.el.dom.scrollTop!==e.body.el.dom.scrollTop&&this.onNativeScrollBody()},onMouseWheelLeft:function(t){var n=this.widget,i=e.getWheelDelta(t.originalEvent||t),r=i*n.cellHeight;n.leftBody.el.dom.scrollTop-=r,n.body.el.dom.scrollTop-=r,n.rightBody.el.dom.scrollTop-=r},onMouseWheelRight:function(t){var n=this.widget,i=e.getWheelDelta(t.originalEvent||t),r=i*n.cellHeight;n.leftBody.el.dom.scrollTop-=r,n.body.el.dom.scrollTop-=r,n.rightBody.el.dom.scrollTop-=r},onLockColumn:function(){this.update(),this.widget.setColumnsPosition()},onRightLockColumn:function(){this.update(),this.widget.setColumnsPosition()},onUnLockColumn:function(){this.update(),this.widget.setColumnsPosition()},onPanelResize:function(){var e=this,t=e.widget;t.scroll(0,0)},onChangePages:function(){var e=this,t=e.widget;!t.nativeScroller&&e.scrollTop&&setTimeout(function(){e.scrollDelta(0)},1)},onScrollBodyBugFix:function(){var e=this,t=e.widget,n=t.body,i=n.el.dom.scrollLeft;n.el.dom.scrollLeft=e.scrollLeft,t.scroll(e.scrollTop,-e.scrollLeft-i)}})}(),function(){var e=Fancy,t=e.GRID_COLUMN_SORT_ASC,n=e.GRID_COLUMN_SORT_DESC,i=e.GRID_COLUMN_RESIZER_CLS,r=e.FIELD_CLS,o=e.GRID_CENTER_CLS,a=e.GRID_LEFT_CLS,s=e.GRID_RIGHT_CLS;e.define("Fancy.grid.plugin.Sorter",{extend:e.Plugin,ptype:"grid.sorter",inWidgetName:"sorter",constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.once("render",function(){e.onsHeaders()})},onsHeaders:function(){var e=this,t=e.widget;t.on("headercellclick",e.onHeaderCellClick,e)},onHeaderCellClick:function(o,a){var s,l,d,c,u=this,h=u.widget,f=h.columndrag,g=e.get(a.cell),p=a.side,m=a.index,v=a.e,y=v.target;if((!f||"dragging"!==f.status)&&"input"!==y.tagName.toLocaleLowerCase()){var C=g.select("."+r);C.length>0&&C.item(0).within(y)===!0||g.hasCls(i)||h.startResizing||(l=h.getColumns(p),s=g.hasCls(t)?"desc":g.hasCls(n)?h.multiSort?"asc":"drop":"asc",d=l[m],c=d.index||d.key,u.sort(s,c,p,d,g))}},sort:function(i,r,o,a,s){var l,d=this,c=d.widget,u=c.store,h=c.getColumns(o),f=0,g=h.length,p=c.getHeader(o);if(!a||!s)for(;g>f;f++)if(h[f].index===r){a=h[f],s=p.getCell(f);break}if(a.sortable===!0){switch(c.multiSort?d.clearHeaderMultiSortCls(i,s):d.clearHeaderSortCls(),i){case"asc":s.addCls(t);break;case"desc":s.addCls(n)}l=a.type;var m,v;if(a.format)if(e.isString(a.format))switch(a.format){case"date":m=c.lang.date.read,a.format.mode&&(v=a.format.mode)}else switch(a.type){case"date":m=a.format.read,a.format.mode&&(v=a.format.mode)}c.grouping&&u.remoteSort&&u.once("load",function(){c.grouping.reGroup()}),u.sort(i,l,r,{smartIndexFn:a.smartIndexFn,format:m,mode:v})}},clearHeaderMultiSortCls:function(e,i){var r,l,d=this,c=d.widget,u=c.store;switch(e.toLocaleUpperCase()){case"ASC":i.removeCls(n);break;case"DESC":i.removeCls(t)}if(r=c.el.select("."+t),l=c.el.select("."+n),!(r.length+l.length<u.multiSortLimit)){for(var h,f=0,g=r.length;g>f;f++){var p,m,v,y=r.item(f),C=y.parent().parent(),w=y.attr("index");C.hasCls(o)?p="center":C.hasCls(a)?p="left":C.hasCls(s)&&(p="right"),m=c.getColumns(p),v=m[w].index;var b=u.sorters[0];b.key===v&&(h=y)}for(var f=0,g=l.length;g>f;f++){var p,m,v,y=l.item(f),C=y.parent().parent(),w=y.attr("index");C.hasCls(o)?p="center":C.hasCls(a)?p="left":C.hasCls(s)&&(p="right"),m=c.getColumns(p),v=m[w].index;var b=u.sorters[0];b.key===v&&(h=y)}h.removeCls(t),h.removeCls(n)}},clearHeaderSortCls:function(){var e=this.widget.el;e.select("."+t).removeCls(t),e.select("."+n).removeCls(n)},updateSortedHeader:function(){var i,r=this,o=r.widget,a=o.store;r.clearHeaderSortCls(),e.each(a.sorters,function(e,r){var a=o.getColumnOrderByKey(e.key),s="ASC"===e.dir?t:n;if(a.side){i=o.getHeader(a.side);var l=i.getCell(a.order);l&&l.addCls(s)}})}})}(),Fancy.define("Fancy.grid.plugin.Paging",{extend:Fancy.Plugin,ptype:"grid.paging",inWidgetName:"paging",barType:"bbar",constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget,n=t.store;n.on("change",e.onChangeStore,e),n.on("remove",e.onChangeStore,e),n.on("filter",e.onChangeStore,e),t.on("render",e.onRenderGrid,e),t.on("docmove",e.onDocMouseMove,e)},setPageSize:function(e){this.widget.store.setPageSize(e)},nextPage:function(){this.widget.store.nextPage()},lastPage:function(){this.widget.store.lastPage()},prevPage:function(){this.widget.store.prevPage()},firstPage:function(){this.widget.store.firstPage()},onChangeStore:function(e){var t,n=this,i=n.widget,r=i.store,o=i.panel;switch(n.barType){case"both":t=o._bbar.roles.pagenumber,t.setValue(r.showPage+1),t=o._tbar.roles.pagenumber,t.setValue(r.showPage+1),n.updateBar("tbar"),n.updateBar("bbar");break;case"none":case!1:break;default:t=o["_"+n.barType].roles.pagenumber,t.setValue(r.showPage+1),n.updateBar()}i.setSidesHeight(),i.fire("changepage",e.showPage)},setPage:function(e){var t=this,n=t.widget,i=n.store;return 0>e?e=0:e>i.pages&&(e=i.pages),i.setPage(e),e},refresh:function(){var e=this,t=e.widget,n=t.store;t.showLoadMask(),setTimeout(function(){n.refresh(),"server"!==n.pageType&&t.hideLoadMask()},200)},updateBar:function(e){var t=this,n=t.widget,i=n.store,r=i.showPage,o=i.pageSize,a=i.pages,s=n.panel,e=e||t.barType,l=s["_"+e].roles,d=l.pagenumber,c=l.ofText,u=l.info,h=l.first,f=l.prev,g=l.next,p=l.last,m=r*o+1,v=m+o,y=i.getTotal()||0,C=n.lang;v>y&&(v=y),0===v&&(m=0),d.setValue(i.showPage+1),c.el.update(Fancy.String.format(C.paging.of,[a||1])),u.el.update(Fancy.String.format(C.paging.info,[m,v,y])),0===r?(h.disable(),f.disable()):(h.enable(),f.enable()),a-1===r||0===a?(p.disable(),g.disable()):(p.enable(),g.enable())},onRenderGrid:function(){var e=this;switch(e.barType){case"both":e.updateBar("tbar"),e.updateBar("bbar");break;case"none":case!1:break;default:e.updateBar()}},onDocMouseMove:function(){var e=this,t=e.widget;"none"===t.el.css("display")||t.panel&&t.panel.el&&"none"===t.panel.el.css("display")?e.wasHidden||(Fancy.combo.Manager.hideLists(),e.wasHidden=!0):e.wasHidden=!1},update:function(){var e=this,t=e.widget,n=t.store;n.calcPages(),e.onChangeStore(n)}}),Fancy.define("Fancy.grid.plugin.LoadMask",{extend:Fancy.Plugin,ptype:"grid.loadmask",inWidgetName:"loadmask",cls:"fancy-loadmask",innerCls:"fancy-loadmask-inner",imageCls:"fancy-loadmask-image",textCls:"fancy-loadmask-text",constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget,n=t.store;t.once("render",function(){e.render(),n.loading&&e.onBeforeLoad(),t.on("beforeload",e.onBeforeLoad,e),t.on("load",e.onLoad,e)})},render:function(){var e,t,n=this,i=n.widget,r=i.el,o=r,a=Fancy.get(document.createElement("div")),s=i.lang;i.panel&&(o=i.panel.el),e=o.width(),t=o.height(),a.addCls(n.cls),"default"!==i.theme&&a.addCls("fancy-theme-"+i.theme),a.css({width:e,height:t,opacity:0}),a.update(['<div class="'+n.innerCls+'"><div class="'+n.imageCls+'"></div><div class="'+n.textCls+'">'+s.loadingText+"</div></div>"].join(" ")),n.el=Fancy.get(o.dom.appendChild(a.dom)),n.innerEl=n.el.select("."+n.innerCls),n.textEl=n.el.select("."+n.textCls);var l=n.innerEl.width(),d=n.innerEl.height();n.innerEl.css({left:e/2-l/2,top:t/2-d/2}),i.store.loading!==!0?a.css("display","none"):(a.css("display","block"),n.showLoadMask()),a.css("opacity",1)},onBeforeLoad:function(){this.showLoadMask()},onLoad:function(){this.hideLoadMask()},showLoadMask:function(e){var t=this,n=t.widget,i=n.lang,r=n.getWidth(),o=n.getHeight();t.el.css("display","block"),t.el.css({height:o,width:r});var a=Math.abs(t.innerEl.width()),s=Math.abs(t.innerEl.height()),l=r/2-a/2,d=o/2-s/2;return t.innerEl.css({left:l,top:d}),e?(t.textEl.update(e),void t.el.css("display","block")):(t.loaded=!1,void setTimeout(function(){t.loaded!==!0&&(t.textEl.update(i.loadingText),t.el.css("display","block"))},50))},hideLoadMask:function(){this.loaded=!0,this.el.css("display","none")}}),function(){var e=Fancy,t=e.get,n=e.FIELD_CLS,i=e.GRID_RESIZER_LEFT_CLS,r=e.GRID_RESIZER_RIGHT_CLS,o=e.GRID_HEADER_CELL_TRIGGER_CLS,a=e.GRID_HEADER_CELL_TRIGGER_IMAGE_CLS,s=e.GRID_HEADER_CELL_CLS,l=e.GRID_COLUMN_RESIZER_CLS,d=e.GRID_COLUMN_CLS,c=e.GRID_HEADER_CELL_GROUP_LEVEL_2_CLS,u=e.GRID_STATE_RESIZE_COLUMN_CLS,h=e.ANIMATE_DURATION;e.define("Fancy.grid.plugin.ColumnResizer",{extend:e.Plugin,ptype:"grid.columnresizer",inWidgetName:"columnresizer",constructor:function(e){this.Super("const",arguments)},init:function(){var e=this,t=e.widget;e.Super("init",arguments),t.header&&t.on("render",function(){e.render(),e.ons()})},ons:function(){var e=this,t=e.widget;t.on("headercellmousemove",e.onCellMouseMove,e),t.on("headercellmousedown",e.onHeaderCellMouseDown,e),t.on("docclick",e.onDocClick,e),t.on("docmove",e.onDocMove,e),t.on("docmouseup",e.onDocMouseUp,e)},onCellMouseMove:function(e,i){var r=this,s=r.widget,l=i.e,d=t(i.cell),c=l.offsetX,u=d.width(),h=t(l.target),f=h.hasCls(o),g=h.hasCls(a),p=d.select("."+o).item(0),m=d.select("."+a).item(0),v=t(l.target).closest("."+n).hasCls(n),y=parseInt(p.css("width")),C=parseInt(m.css("width")),w=u,b=7;if(f&&(w=y),g&&(w=C),!s.startResizing){if(g)return void r.removeCellResizeCls(i.cell);if("left"===i.side&&i.index===s.leftColumns.length-1&&b+2>w-c&&(b+=2),!f&&!g&&"right"===i.side&&0===i.index&&b>c)r.isColumnResizable(i)&&(v||r.addCellResizeCls(i.cell));else if(!f&&!g&&b>c&&"center"===i.side&&0===i.index&&s.leftColumns.length)i.side="left",i.index=s.leftColumns.length-1,r.isColumnResizable(i)&&(v||r.addCellResizeCls(i.cell));else if(f||g||!(b>w-c||b>c)||0===i.index)b>w-c?g?C-c>2?r.removeCellResizeCls(i.cell):r.addCellResizeCls(i.cell):r.isColumnResizable(i)&&r.addCellResizeCls(i.cell):r.removeCellResizeCls(i.cell);else{var x=b>c;r.isColumnResizable(i,x)&&(v||r.addCellResizeCls(i.cell))}}},addCellResizeCls:function(e){var n=this,i=n.widget,r=i.columndrag;r&&"dragging"===r.status||(t(e).addCls(l),t(e).select("."+o).addCls(l))},removeCellResizeCls:function(e){t(e).removeClass(l),t(e).select("."+o).item(0).removeClass(l)},onHeaderCellMouseDown:function(i,r){var s=this,l=s.widget,i=r.e,d=t(i.target),c=t(r.cell),u=i.offsetX,h=c.width(),f=c.select("."+n),g=d.hasCls(o),p=d.hasCls(a),m=c.select("."+o).item(0),v=c.select("."+a).item(0),y=parseInt(m.css("width")),C=parseInt(v.css("width")),w=h,b=7;return g&&(w=y),p?void(w=C):void(f.length>0&&f.item(0).within(d.dom)||("left"===r.side&&r.index===l.leftColumns.length-1&&b+2>w-u&&(b+=2),!g&&!p&&"right"===r.side&&0===r.index&&b>u?(l.startResizing=!0,e.apply(s,{cell:r.cell,activeSide:r.side,clientX:i.clientX,columnIndex:r.index,moveLeftResizer:!0})):7>u&&"center"===r.side&&0===r.index&&l.leftColumns.length?(l.startResizing=!0,r.side="left",r.index=l.leftColumns.length-1,e.apply(s,{cell:s.getCell(r),activeSide:r.side,clientX:i.clientX,columnIndex:r.index})):!g&&!p&&b>u&&0!==r.index?(l.startResizing=!0,e.apply(s,{cell:s.getPrevCell(r),activeSide:r.side,clientX:i.clientX,columnIndex:r.index-1})):b>w-u&&(l.startResizing=!0,e.apply(s,{cell:r.cell,activeSide:r.side,clientX:i.clientX,columnIndex:r.index})),l.startResizing&&s.isColumnResizable()))},isColumnResizable:function(e,t){var n,i,r,o=this,a=o.widget;if(e){if(n=a.getColumns(e.side),r=e.index,t&&r--,isNaN(r))return;return i=n[r],i.resizable===!0}n=a.getColumns(o.activeSide),n[o.columnIndex].resizable!==!0&&(a.startResizing=!1,delete o.cell,delete o.activeSide,delete o.clientX,delete o.columnIndex)},getMinColumnWidth:function(){var e,t,n=this,i=n.widget,r=i.minCellWidth;return void 0===n.columnIndex?r:(e=i.getColumns(n.activeSide),t=e[n.columnIndex],t.minWidth?t.minWidth:r)},getMaxColumnWidth:function(){var e,t,n=this,i=n.widget;return void 0===n.columnIndex?!1:(e=i.getColumns(n.activeSide),t=e[n.columnIndex],t.maxWidth?t.maxWidth:!1)},onDocClick:function(){this.widget.startResizing=!1},onDocMove:function(e,t){this.widget.startResizing&&this.moveResizeEls(t)},render:function(){var e=this,n=e.widget,o=t(document.createElement("div")),a=t(document.createElement("div"));o.addCls(i),a.addCls(r),e.leftEl=t(n.el.dom.appendChild(o.dom)),e.rightEl=t(n.el.dom.appendChild(a.dom))},moveResizeEls:function(n){var i=this,r=i.widget,o=t(i.cell),a=parseInt(o.css("left")),s=i.getMinColumnWidth(),l=i.getMaxColumnWidth();switch(r.header.hideMenu&&r.header.hideMenu(),r.el.addCls(u),e.get(document.body).addCls(u),i.activeSide){case"left":break;case"center":a+=parseInt(r.leftEl.css("width"));break;case"right":a+=parseInt(r.leftEl.css("width")),a+=parseInt(r.centerEl.css("width"))}var d=n.clientX,c=d-i.clientX,h=o.width()+c;s>h&&(h=s),l&&h>l&&(h=l),i.deltaWidth=o.width()-h,i.moveLeftResizer?(c=d-i.clientX,h=o.width()-c,s>h&&(h=s),i.deltaWidth=o.width()-h,i.leftEl.css({display:"block",left:a+c+"px"}),i.rightEl.css({display:"block",left:a+o.width()-1+"px"})):(i.leftEl.css({display:"block",left:a+"px"}),i.rightEl.css({display:"block",left:a+h+"px"})),i.cellWidth=h},onDocMouseUp:function(){var t=this,n=t.widget;n.startResizing!==!1&&(n.el.removeCls(u),e.get(document.body).removeCls(u),t.leftEl.css({display:"none"}),t.rightEl.css({display:"none"}),t.fixSidesWidth(),n.startResizing=!1,t.moveLeftResizer=!1,delete t.cellWidth)},fixSidesWidth:function(){var n,i,r,o,a=this,l=a.widget,u=a.cellWidth,f=a.columnIndex,g=a.deltaWidth,p=l.leftEl,m=l.centerEl,v=l.rightEl,y=l.leftHeader.el,C=l.header.el,w=l.rightHeader.el,b=l.body.el,x={},S={},E=a.minCenterWidth;if(void 0!==u){var I=1;switch(e.nojQuery&&(I=0),a.activeSide){case"left":if(o=parseInt(m.css("width"))+g+I,E>o)return;r=l.leftColumns[f],l.leftColumns[a.columnIndex].width=u,n=l.leftBody.el.select("."+d),i=l.leftHeader.el.select("."+s);var T=n.item(f);T.animate({width:u},h),T.css("overflow","");for(var L=a.columnIndex+1,F=i.length,_=0,D=L;D>_;_++){var k=i.item(_),R=k.attr("group-index");R&&(S[R]=!0)}for(;F>L;L++){var M=n.item(L),k=i.item(L);M.animate({left:parseInt(M.css("left"))-g-I},h),k.hasCls(c)&&S[k.attr("index")]||k.animate({left:parseInt(k.css("left"))-g-I},h)}p.animate({width:parseInt(p.css("width"))-g-I},h),y.animate({width:parseInt(y.css("width"))-g-I+"px"},h),l.columns.length&&(m.animate({left:parseInt(m.css("left"))-g-I,width:o},h),C.animate({width:parseInt(C.css("width"))+g+I},h),b.animate({width:parseInt(b.css("width"))+g+I},h));break;case"center":r=l.columns[f],l.columns[a.columnIndex].width=u,n=l.body.el.select("."+d),i=l.header.el.select("."+s);var T=n.item(f);T.animate({width:u},h),T.css("overflow","");for(var L=a.columnIndex+1,F=i.length,_=0,D=L;D>_;_++){var k=i.item(_),R=k.attr("group-index");R&&(S[R]=!0)}for(;F>L;L++){var M=n.item(L),k=i.item(L),B=parseInt(M.css("left"))-g-I,A=parseInt(k.css("left"))-g-I;k.attr("group-index")&&(x[k.attr("group-index")]={}),M.animate({left:B},h),k.hasCls(c)&&S[k.attr("index")]||k.animate({left:A},h)}break;case"right":if(o=parseInt(m.css("width"))+g+I,E>o)return;r=l.rightColumns[f],l.rightColumns[a.columnIndex].width=u,n=l.rightBody.el.select("."+d),i=l.rightHeader.el.select("."+s);var T=n.item(f);T.animate({width:u+"px"},h),T.css("overflow","");for(var L=a.columnIndex+1,F=i.length,_=0,D=L;D>_;_++){var k=i.item(_),R=k.attr("group-index");R&&(S[R]=!0)}for(;F>L;L++){var M=n.item(L),k=i.item(L);M.animate({left:parseInt(M.css("left"))-g-I},h),k.hasCls(c)&&S[k.attr("index")]||k.animate({left:parseInt(k.css("left"))-g-I},h)}v.animate({width:parseInt(v.css("width"))-g-I},h),w.animate({width:parseInt(w.css("width"))-g-I+"px"},h),l.columns.length&&(m.animate({width:o},h),C.animate({width:parseInt(C.css("width"))+g+I},h),b.animate({width:parseInt(b.css("width"))+g+I},h))}var N,O=t(a.cell),H=O.attr("group-index");if(O.animate({width:u+"px"},h),H)N=l.el.select("[index='"+H+"']"),N.animate({width:parseInt(N.css("width"))-g-I},h);else for(var P in x)N=l.el.select("[index='"+P+"']"),N.css("left",parseInt(N.css("left"))-(x[P].delta||0)-I);if(l.fire("columnresize",{cell:O.dom,width:u,column:r,side:a.activeSide}),/sparkline/.test(r.type))switch(a.activeSide){case"left":l.leftBody.updateRows(void 0,f);break;case"center":l.body.updateRows(void 0,f);break;case"right":l.rightBody.updateRows(void 0,f)}}},getPrevCell:function(e){var t,n=this,i=n.widget;switch(e.side){case"left":t=i.leftHeader;break;case"center":t=i.header;break;case"right":t=i.rightHeader}return t.el.select("."+s).item(e.index-1).dom},getCell:function(e){var t,n=this,i=n.widget;switch(e.side){case"left":t=i.leftHeader;break;case"center":t=i.header;break;case"right":t=i.rightHeader}return t.el.select("."+s).item(e.index).dom},updateColumnsWidth:function(e){for(var t=this,n=t.widget,e=e||"center",i=n.getHeader(e),r=n.getColumns(e),o=0,a=r.length;a>o;o++){var s=r[o];s.hidden||t.setColumnWidth(o,s.width,e)}i.setCellsPosition()},setColumnWidth:function(e,n,i){var r,o,a=this,s=a.widget,l=s.getColumns(i),d=s.getHeader(i),c=s.getBody(i),u=t(c.getDomColumn(e)),h=d.getCell(e),f=parseInt(u.css("left"));u.css("width",n),h.css("width",n),l[e+1]&&(f+=n,o=t(c.getDomColumn(e+1)),o.css("left",f),r=d.getCell(e+1),r.css("left",f))}})}(),function(){var e=Fancy,t=e.get(document),n=e.HIDDEN_CLS,i=e.GRID_HEADER_CELL_CLS,r=e.GRID_HEADER_CELL_TEXT_CLS,o=e.GRID_HEADER_CELL_TRIGGER_CLS,a=e.GRID_HEADER_CELL_TRIGGER_IMAGE_CLS,s=e.GRID_HEADER_CELL_GROUP_LEVEL_1_CLS,l=e.GRID_HEADER_CELL_GROUP_LEVEL_2_CLS,d=e.GRID_STATE_DRAG_COLUMN_CLS,c=e.FIELD_TEXT_INPUT_CLS,u=e.FIELD_CHECKBOX_INPUT_CLS;e.define("Fancy.grid.plugin.ColumnDrag",{extend:e.Plugin,ptype:"grid.columndrag",inWidgetName:"columndrag",activeSide:void 0,activeCell:void 0,activeIndex:void 0,activeColumn:void 0,inCell:void 0,inIndex:void 0,inSide:void 0,ok:!1,status:"none",constructor:function(e){this.Super("const",arguments)},init:function(){var e=this,t=e.widget;e.Super("init",arguments),t.on("render",function(){e.ons(),e.initHint()})},ons:function(){var e=this,t=e.widget;t.el.on("mousedown",e.onMouseDownCell,e,"div."+i)},onMouseDownCell:function(n){var r=this,d=r.widget,h=Fancy.get(n.currentTarget),f=Number(h.attr("index")),g=d.getSideByCell(h),p=d.getColumns(g),m=p[f],v=e.get(n.target);v.hasCls(o)||v.hasCls(a)||v.hasCls(c)||v.hasCls(u)||(h.hasCls(l)&&(r.activeCellTopGroup=r.getGroupStartEnd(h,g),r.activeCellTopGroup.cell=h),d.startResizing||(r.activeCellTopGroup||m.draggable!==!1)&&(h.hasCls(s)&&(r.activeUnderGroup=!0),r.activeSide=g,r.inSide=g,r.activeCell=h,r.inCell=h,r.activeIndex=Number(h.attr("index")),r.inIndex=r.activeIndex,r.activeColumn=p[r.activeIndex],r.mouseDownX=n.pageX,r.mouseDownY=n.pageY,t.once("mouseup",r.onMouseUp,r),t.on("mousemove",r.onMouseMove,r),d.el.on("mouseleave",r.onMouseLeave,r),d.el.on("mouseenter",r.onMouseEnterCell,r,"div."+i),d.el.on("mousemove",r.onMouseMoveCell,r,"div."+i)))},onMouseLeave:function(){this.hideHint()},onMouseUp:function(){var n=this,r=n.widget,o=!1;if(t.un("mousemove",n.onMouseMove,n),r.el.un("mouseleave",n.onMouseLeave,n),r.el.un("mouseenter",n.onMouseEnterCell,n,"div."+i),r.el.un("mousemove",n.onMouseMoveCell,n,"div."+i),n.ok){if(n.inSide===n.activeSide)n.dragColumn(n.inSide);else if("center"===n.activeSide){var a=n.inIndex;"right"===n.okPosition&&a++,r.moveColumn(n.activeSide,n.inSide,n.activeIndex,a,n.activeCellTopGroup)}else{var a=n.inIndex;"right"===n.okPosition&&a++,r.moveColumn(n.activeSide,n.inSide,n.activeIndex,a,n.activeCellTopGroup)}o=!0}delete n.inUpGroupCell,delete n.inUnderGroup,delete n.activeCellTopGroup,delete n.activeUnderGroup,delete n.activeSide,delete n.activeCell,delete n.activeIndex,delete n.activeIndex,delete n.activeColumn,delete n.mouseDownX,delete n.mouseDownY,n.ok=!1,delete n.okPosition,e.tip.hide(),setTimeout(function(){n.status="none"},1),n.removeDragState(),"dragging"===n.status&&setTimeout(function(){n.status="none",o&&(r.fire("columndrag"),r.scroller.update(),r.sorter&&r.sorter.updateSortedHeader())},10),n.hideHint(),setTimeout(function(){r.updateColumnsVisibilty()},100)},onMouseMove:function(t){var n=this,i=n.widget,s=i.header,l=i.leftHeader,d=i.rightHeader,c=t.pageX,u=t.pageY,h=i.getColumns(n.activeSide),f=e.get(t.target);if(!f.hasCls(o)&&!f.hasCls(a)&&(Math.abs(c-n.mouseDownX)>10||Math.abs(u-n.mouseDownY))){if(n.activeCellTopGroup?(e.tip.update(n.activeCellTopGroup.cell.select("."+r).item(0).dom.innerHTML||"&nbsp;"),n.status="dragging",n.addDragState()):(e.tip.update(n.activeColumn.title||"&nbsp;"),n.status="dragging",n.addDragState()),1===h.length&&"center"===n.activeSide)return e.tip.hide(),setTimeout(function(){n.status="none"},1),void n.removeDragState();e.tip.show(t.pageX+15,t.pageY+15),s.hideMenu&&(s.hideMenu(),i.leftColumns&&l.hideMenu()&&l.hideMenu(),i.rightColumns&&d.hideMenu()&&d.hideMenu())}},addDragState:function(){var e=this,t=e.widget;t.el.addClass(d)},removeDragState:function(){var e=this,t=e.widget;t.el.removeClass(d)},onMouseEnterCell:function(e){var t=this,n=t.widget,i=Fancy.get(e.currentTarget),r=n.getSideByCell(i);t.hideHint(),i.hasCls(s)?t.inUnderGroup=!0:delete t.inUnderGroup,i.hasCls(l)?t.inUpGroupCell=i:delete t.inUpGroupCell,t.inSide=r,t.inCell=i,t.inIndex=Number(i.attr("index"))},onMouseMoveCell:function(e){var t=this,n=t.widget,i=t.inCell,r=parseInt(i.css("width")),a=i.select("."+o),s=Fancy.get(e.target),l=a.within(s)||s.hasClass(o),d=t.activeUnderGroup!==t.inUnderGroup&&t.inUnderGroup===!0,c=t.activeUnderGroup!==t.inUnderGroup&&t.activeUnderGroup===!0,u=n.getColumns(t.activeSide);if(1===u.length&&"center"===t.activeSide)return t.ok=!1,void t.hideHint();if(t.activeCellTopGroup)if(t.inUpGroupCell);else{var h=t.activeCellTopGroup.start,f=t.activeCellTopGroup.end;t.activeSide!==t.inSide?(t.ok=!0,e.offsetX>r/2||l?t.showHint("right"):t.showHint("left")):isNaN(t.inIndex)?t.hideHint():t.inIndex<h?e.offsetX>r/2?t.inIndex+1===h?t.hideHint():(t.ok=!0,t.showHint("right")):(t.ok=!0,t.showHint("left")):t.inIndex>f?e.offsetX<r/2?t.inIndex===f+1?t.hideHint():(t.ok=!0,t.showHint("left")):(t.ok=!0,t.showHint("right")):t.hideHint()}else if(t.inUpGroupCell){var g=t.getGroupStartEnd(),h=g.start,f=g.end;t.activeSide!==t.inSide?(t.ok=!0,e.offsetX>r/2||l?t.showHint("right"):t.showHint("left")):e.offsetX>r/2?t.activeIndex>f&&t.activeIndex-1===f?t.hideHint():(t.ok=!0,t.showHint("right")):t.activeIndex<h&&t.activeIndex+1===h?t.hideHint():(t.ok=!0,t.showHint("left"))}else t.activeSide!==t.inSide?(t.ok=!0,e.offsetX>r/2||l?t.showHint("right"):t.showHint("left")):t.activeIndex===t.inIndex?t.ok=!1:t.activeIndex<t.inIndex?e.offsetX>r/2||l?(t.ok=!0,t.showHint("right")):e.offsetX<r/2&&t.activeIndex+1!==t.inIndex?(t.ok=!0,t.showHint("left")):t.activeIndex+1===t.inIndex&&(d||c)?(t.ok=!0,t.showHint("left")):(t.ok=!1,t.hideHint()):t.activeIndex>t.inIndex&&(e.offsetX<r/2?l?d||c?(t.ok=!0,t.showHint("right")):t.activeIndex-1===t.inIndex||t.inUpGroupCell?(t.ok=!1,t.hideHint()):(t.ok=!0,t.showHint("right")):(t.ok=!0,t.showHint("left")):e.offsetX>r/2?t.activeIndex-1===t.inIndex&&(d||c)?(t.ok=!0,t.showHint("right")):t.activeIndex-1!==t.inIndex||t.activeUnderGroup?(t.ok=!0,t.showHint("right")):(t.ok=!1,t.hideHint()):(t.ok=!1,t.hideHint()))},showHint:function(t){var i=this,r=i.widget,o=r.cellHeaderHeight,a=i.inCell,s=i.topEl,l=i.bottomEl,d=a.offset(),c=parseInt(a.css("width")),u=parseInt(a.css("height"));i.okPosition=t,s.removeCls(n),l.removeCls(n);var h=0;"right"===t&&(h+=c),s.css({left:d.left+h-Math.ceil(parseInt(s.css("width"))/2),top:d.top-parseInt(s.css("height"))});var f=d.top+u;if(i.inUpGroupCell){var g=r.header.calcRows();f=d.top+g*o}if(l.css({left:d.left+h-Math.ceil(parseInt(l.css("width"))/2),top:f}),r.window){var p=1e3+e.zIndex++;s.css("z-index",p),l.css("z-index",p)}},hideHint:function(){var e=this;e.topEl.addCls(n),e.bottomEl.addCls(n)},initHint:function(){var t=this,i=t.widget,r="fancy-theme-"+i.theme,o=e.get(document.body).dom,a=e.get(document.createElement("div")),s=e.get(document.createElement("div"));a.addCls("fancy-drag-hint-top",n,r),s.addCls("fancy-drag-hint-bottom",n,r),t.topEl=e.get(o.appendChild(a.dom)),t.bottomEl=e.get(o.appendChild(s.dom))},dragColumn:function(e){var t=this,n=t.widget,i=n.getHeader(e),r=n.getBody(e),o=t.activeIndex,a=t.inIndex,s=t.okPosition,l=n.getColumns(e),d=l[o],c=i.calcRows();if(t.activeCellTopGroup){var u=t.activeCellTopGroup.start,h=t.activeCellTopGroup.end,f=l.splice(u,h-u+1),a=t.inIndex;"right"===s&&a++,l=t.inIndex<u?Fancy.Array.insert(l,a,f):Fancy.Array.insert(l,a-f.length,f),n.setColumns(l,e)}else if(t.inUpGroupCell){var g=t.getGroupStartEnd();a=g.start,"right"===s&&(a=g.end+1)}else if("right"===s)if(t.inUnderGroup){var p=l[a].grouping,m=l[a+1];m&&m.grouping===p&&a++}else a++;if(n.groupheader&&!t.activeCellTopGroup){var v=l[a];v&&v.grouping&&t.inUnderGroup?(d.grouping=v.grouping,d.filter&&d.filter.header&&3>c&&delete d.filter):delete d.grouping}t.activeCellTopGroup||(l.splice(o,1),a>o&&a--,l.splice(a,0,d)),r.clearColumnsStyles(),i.updateTitles(),i.updateCellsSizes(),i.reSetCheckBoxes(),n.groupheader&&(n.header.fixGroupHeaderSizing(),n.leftColumns&&n.leftHeader.fixGroupHeaderSizing(),n.rightColumns&&n.rightHeader.fixGroupHeaderSizing(),i.reSetGroupIndexes()),setTimeout(function(){i.reSetColumnsAlign(),i.reSetColumnsCls(),r.reSetColumnsAlign(),r.reSetColumnsCls(),r.updateColumnsSizes()},100),n.update()},getGroupStartEnd:function(t,n){var i=this,r=i.widget,o=r.getHeader(n||i.inSide),a=(t||i.inUpGroupCell).attr("index"),s=o.el.select('[group-index="'+a+'"]'),l=[];return s.each(function(e){l.push(Number(e.attr("index")))}),{start:e.Array.min(l),end:e.Array.max(l)}}})}(),Fancy.define("Fancy.grid.plugin.ChartIntegration",{extend:Fancy.Plugin,ptype:"grid.chartintegration",inWidgetName:"chartintegration",constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.initKeys(),e.initBind(),e.ons()},initKeys:function(){for(var e=this,t=e.chart,n=0,i=t.length;i>n;n++){var r,o=t[n],a=o.fields,s=0,l={};if(Fancy.isString(a))l=a;else for(r=a.length;r>s;s++)l[a[s]]=!0;t[n].keys=l}},ons:function(){var e=this,t=e.widget,n=t.store;t.once("render",function(){e.toChart?e.renderToChart():e.readDataFromChart(),n.on("set",e.onSet,e),n.on("sort",e.onSort,e)})},renderToChart:function(){for(var e=this,t=e.widget,n=e.chart,i=0,r=n.length;r>i;i++){var o=n[i],a=o.type;switch(a){case"highchart":case"highcharts":t.highchart.setData(o)}}},onSet:function(e,t){for(var n=this,i=n.widget,r=n.chart,o=0,a=r.length,s=t.key;a>o;o++){var l=r[o],d=l.type;if(l.keys[s]===!0)switch(d){case"highchart":case"highcharts":i.highchart.set(l,t)}}},onSort:function(e,t){for(var n=this,i=n.widget,r=n.chart,o=0,a=r.length;a>o;o++){var s=r[o],l=s.type;switch(l){case"highchart":case"highcharts":if(s.sortBind!==!1){var d=i.highchart.sort(s,t);r[o].categories=d.original}}}},readDataFromChart:function(){var e,t=this,n=t.widget,i=n.store,r=t.chart,o=r[0],a=o.type;switch(a){case"highchart":case"highcharts":e=n.highchart.getData(o)}n.reConfigStore(e),i.setData(e)},initBind:function(){for(var e,t=this,n=t.chart,i=0,r=n.length;r>i;i++)e=n[i],e.bind&&t.chartBind(e)},chartBind:function(e){var t=this,n=t.widget,i=e.bind;n.on(i.event,t.onBindEvent,{chart:e})},onBindEvent:function(e,t){var n=this,i=e,r=n.chart,o=r.bind,a=o.series,s=t.data,l=r.id;switch(o.action){case"add":var d=i.highchart.doesSeriesExist(l,s[a.name]),c=i.highchart.getNumberSeries(l);if(d!==!1&&1!==c)return void i.highchart.removeSeries(l,d);r.maxToShow&&r.maxToShow<=c&&i.highchart.removeLastSeries(l),i.highchart.isTreeMap(l)?i.highchart.setSeriesData(l,{data:s[a.data]}):i.highchart.addSeries(l,{name:s[a.name],data:s[a.data]})}}}),Fancy.define("Fancy.grid.plugin.HighChart",{extend:Fancy.Plugin,ptype:"grid.highchart",inWidgetName:"highchart",constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){},setData:function(e){var t=this,n=t.widget,i=n.store,r=i.getDataView(),o=e.fields,a=0,s=r.length,l=0,d=o.length,c=t.getChart(e.id),u=c.series,h=e.read;if(h&&void 0!==h.rowIndex&&(r=[r[h.rowIndex]],d=1),Fancy.isString(o))for(;d>l;l++){var f=r[l][o],g=u[l],p=[],a=0,s=f.length;if(e.names)for(;s>a;a++){var m={name:e.names[a],value:f[a]};p.push(m)}else for(;s>a;a++)p.push(f[a]);if(!g)break;g.setData(p),e.name&&g.update({name:r[l][e.name]})}else for(;d>l;l++){var v=o[l],g=u[l],p=[];for(a=0;s>a;a++)p.push(r[a][v]);g.setData(p)}},setSeriesData:function(e,t){var n=this.getChart(chartConfig.id),i=n.series[0];i.setData(t.data)},set:function(e,t){var n,i=this.getFieldsMap(e),r=this.getChart(e.id),o=r.series;n=o[i[t.key]],n.data[t.rowIndex].update(Number(t.value))},sort:function(e){var t=this,n=t.widget,i=n.store,r=t.getChart(e.id),o=e.categories?e.categories:r.xAxis[0].categories,a=i.order,s=[],l=0,d=a?a.length:o.length;if(a)for(;d>l;l++)s.push(o[a[l]]);else for(;d>l;l++)s.push(o[l]);return r.xAxis[0].update({categories:s},!0),t.update(e),{original:o,newCategories:s}},update:function(e){for(var t,n=this,i=n.widget,r=i.store,o=r.getDataView(),a=e.fields,s=0,l=o.length,d=0,c=n.getChart(e.id),u=c.series,h=[],f=0,g=a.length;g>f;f++){var p=a[f];s=0;for(var m=[];l>s;s++)m.push(o[s][p]);h.push(m)}for(t=u.length;t>d;d++){var v=u[d];v.setData(h[d],!1)}c.redraw()},getData:function(e){for(var t=this,n=t.getChart(e.id),i=i=e.fields,r=0,o=i.length,a=n.series,s=a[0].data.length,l=[];o>r;r++)for(var d=i[r],c=0,u=a[r];s>c;c++)void 0===l[c]&&(l[c]={}),l[c][d]=u.data[c].y;var h=t.getColumnsChartIndexes();for(r=0,o=h.length;o>r;r++){var f=h[r],g=f.split("."),p=n[g[0]][0][g[1]];for(c=0,s=p.length;s>c;c++)l[c][f]=p[c]}return l},getColumnsChartIndexes:function(){for(var e=this.widget,t=[],n=e.columns,i=0,r=n.length;r>i;i++){var o=n[i].index;/xAxis\../.test(o)&&t.push(o)}return t},getFieldsMap:function(e){for(var t={},n=e.fields,i=0,r=n.length;r>i;i++)t[n[i]]=i;return t},addSeries:function(e,t){var n=this.getChart(e);n.addSeries(t)},getNumberSeries:function(e){var t=this.getChart(e);return t.series.length},removeLastSeries:function(e){var t=this.getChart(e);t.series[t.series.length-1].remove()},removeSeries:function(e,t){var n=this.getChart(e);n.series[t].remove()},doesSeriesExist:function(e,t){for(var n=this,i=n.getChart(e),r=0,o=i.series.length;o>r;r++)if(i.series[r].name===t)return r;return!1},isTreeMap:function(e){var t=this.getChart(e);return void 0===t.series[0]?!1:"treemap"===t.series[0].type},getChart:function(e){var t,n=Highcharts.charts;return n.forEach(function(n,i){n.renderTo.id===e&&(t=n)}),t}}),Fancy.define("Fancy.grid.plugin.Edit",{extend:Fancy.Plugin,ptype:"grid.edit",inWidgetName:"edit",clicksToEdit:2,tabColumnsSupport:{date:!0,combo:!0,image:!0,number:!0,string:!0,text:!0},constructor:function(e){this.Super("const",arguments)},init:function(){var e=this,t=e.widget,n=t.store;e.addEvents("tab"),e.Super("init",arguments),t.once("render",function(){e.ons(),n.on("beforeupdate",e.onStoreCRUDBeforeUpdate,e),n.on("update",e.onStoreCRUDUpdate,e),n.on("beforedestroy",e.onStoreCRUDBeforeDestroy,e),n.on("destroy",e.onStoreCRUDDestroy,e),n.on("create",e.onCreate,e)})},ons:function(){var e=this,t=e.widget,n=t.store,i="cell"+e.getClickEventName();t.on("cellclick",e.onClickCell,e),n.on("set",e.onStoreSet,e),e.on("tab",e.onTab,e),t.once("init",function(){"cell"!==i&&t.on(i,e.onClickCellToEdit,e)}),t.on("activate",e.onGridActivate,e),t.on("deactivate",e.onGridDeActivate,e)},onGridActivate:function(){Fancy.get(document).on("keydown",this.onKeyDown,this)},onGridDeActivate:function(){Fancy.get(document).un("keydown",this.onKeyDown,this)},onKeyDown:function(e){var t=e.keyCode,n=Fancy.key;switch(t){case n.TAB:this.fire("tab",e)}},onTab:function(e,t){var e=this,n=e.widget,i=e.activeCellEditParams;if(i){t.preventDefault();var r=e.getNextCellEditParam();n.celledit&&(n.celledit.hideEditor(),n.tabEdit!==!1&&setTimeout(function(){n.celledit.edit(r)},100))}},getNextCellEditParam:function(){for(var e,t,n,i,r=this,o=r.widget,a=o.store,s=r.activeCellEditParams,l=o.leftColumns,d=s.columnIndex,c=s.rowIndex,u=s.side,h=o.getColumns(u),f=h[d+1],g=0,p=20;p>g;g++){var m=r.getNextCellInfo({side:u,columnIndex:d,rowIndex:c});if(u=m.side,d=m.columnIndex,c=m.rowIndex,h=o.getColumns(u),f=h[m.columnIndex],r.tabColumnsSupport[f.type]&&f.editable===!0)break}return e=o.getBody(u),t=e.getCell(c,d).dom,t||(u="center",l.length&&(u="left"),c=0,d=0,e=o.getBody(u),t=e.getCell(c,d).dom),n=f.index||f.key,i=a.getId(c),{id:a.getId(c),side:u,column:f,cell:t,columnIndex:d,rowIndex:c,value:a.get(c,n),data:a.get(c),item:a.getById(i)}},getNextCellInfo:function(e){var t=this,n=t.widget,i=e.side,r=n.getColumns(i),o=e.columnIndex,a=e.rowIndex,s=r[o+1],l=n.rightColumns,d=n.leftColumns;if(s)o++;else switch(i){case"left":i="center",o=0;break;case"center":l.length?(i="right",o=0):d.length?(i="left",o=0,a++):(o=0,a++);break;case"right":d.length?(i="left",o=0,a++):(i="center",o=0,a++)}return{side:i,rowIndex:a,columnIndex:o}},getClickEventName:function(){switch(this.clicksToEdit){case 1:return"click";case 2:return"dblclick";case!1:return""}},stopEditor:function(){this.stopped=!0},onClickCell:function(e,t){var n=this.widget,i=t.column;i.editable&&("checkbox"===i.type||"switcher"===i.type)&&n.celledit&&n.celledit.onCheckBoxChange(t)},onClickCellToEdit:function(e,t){var n=this,i=n.widget,r=t.column;return i.rowedit||i.celledit&&i.celledit.hideEditor(),n.fire("beforedit"),n.stopped===!0?void(n.stopped=!1):void(i.rowedit?i.rowedit.edit(t):r.editable&&"checkbox"!==r.type&&"switcher"!==r.type&&i.celledit&&i.celledit.edit(t))},onStoreSet:function(e,t){this.widget.updater.updateRow(t.rowIndex)},onStoreCRUDBeforeUpdate:function(){var e=this,t=e.widget,n=e.activeCellEditParams;n&&t.updater.updateRow(n.rowIndex)},onStoreCRUDUpdate:function(e,t,n,i){delete e.changed[t],this.clearDirty()},onStoreCRUDBeforeDestroy:function(){},onStoreCRUDDestroy:function(){this.widget.store.loadData(),this.clearDirty()},clearDirty:function(){var e=this.widget;setTimeout(function(){e.leftBody.clearDirty(),e.body.clearDirty(),e.rightBody.clearDirty()},500)},onCreate:function(e,t){var n=this,i=n.widget;i.updater.update(),i.fire("insert",t),n.clearDirty()}}),function(){var e=Fancy,t=e.GRID_CELL_CLS;e.define("Fancy.grid.plugin.CellEdit",{extend:e.Plugin,ptype:"grid.celledit",inWidgetName:"celledit",editorsCls:"fancy-grid-editors",constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.once("render",function(){e.initEditorContainer(),e.checkAutoInitEditors(),t.on("scroll",e.onScroll,e),t.on("nativescroll",e.onNativeScroll,e),t.on("docclick",e.onDocClick,e),t.on("headercellmousedown",e.onHeaderCellMouseDown,e)})},onDocClick:function(n,i){var r=this,o=r.activeCellEditParams,a=r.activeEditor,s=!0,l=i.target,d=e.get(l);if(void 0!==a&&"date"!==o.column.type){if("combo"!==o.column.type){var c=d.closest("."+t);return void(c.dom||a.el.within(l)||a.hide())}a.el.within(l)===!1&&a.list.within(l)===!1&&r.comboClick!==!0&&(s=!1),s===!1&&a.hide(),r.comboClick=!1}},initEditorContainer:function(){var e=this,t=e.widget;e.editorsContainer=t.el.select("."+e.editorsCls)},edit:function(e){var t=this,n=t.widget,i=e.column;"$selected"!==i.index&&(t.activeCellEditParams=e,n.edit.activeCellEditParams=e,i.editor=t.generateEditor(i),n.scroller.scrollToCell(e.cell),t.showEditor(e))},generateEditor:function(t){var n,i,r=this,o=r.widget,a={position:"absolute",left:"0px",top:"0px",display:"none",padding:"0px"},s=t.type,l=t.vtype,d=o.theme;if(t.editor)return t.editor;i=r.editorsContainer.dom;var c={renderTo:i,label:!1,style:a,checkValidOnTyping:!0};switch(s){case"combo":var u="text",h="text",f=t.data,g=[{change:r.onComboChange,scope:r}];if(t.editorEvents)for(var p=0,m=t.editorEvents.length;m>p;p++)g.push(t.editorEvents[p]);void 0!==t.displayKey&&(u=t.displayKey,h=u),"default"===d&&(d=void 0),t.minListWidth&&(c.minListWidth=t.minListWidth),Fancy.apply(c,{theme:d,data:f,displayKey:u,valueKey:h,value:0,padding:!1,vtype:l,events:g}),t.emptyText&&(c.emptyText=t.emptyText),t.displayTpl&&(c.displayTpl=t.displayTpl),t.listItemTpl&&(c.listItemTpl=t.listItemTpl),t.leftTpl&&(c.leftTpl=t.leftTpl),t.leftWidth&&(c.leftWidth=t.leftWidth),n=new e.Combo(c);break;case"text":n=new e.TextArea({renderTo:i,label:!1,style:a,vtype:l,checkValidOnTyping:!0,events:[{enter:r.onEditorEnter,scope:r},{beforehide:r.onEditorBeforeHide,scope:r},{blur:r.onBlur,scope:r}]});break;case"image":case"string":case"tree":case"color":n=new e.StringField({renderTo:i,label:!1,style:a,vtype:l,format:t.format,checkValidOnTyping:!0,events:[{enter:r.onEditorEnter,scope:r},{beforehide:r.onEditorBeforeHide,scope:r},{blur:r.onBlur,scope:r}]});break;case"number":case"currency":e.apply(c,{vtype:l,format:t.format,events:[{enter:r.onEditorEnter,scope:r},{beforehide:r.onEditorBeforeHide,scope:r},{blur:r.onBlur,scope:r}]}),void 0!==t.spin&&(c.spin=t.spin),void 0!==t.step&&(c.step=t.step),void 0!==t.min&&(c.min=t.min),void 0!==t.max&&(c.max=t.max),n=new e.NumberField(c);break;case"date":n=new e.DateField({renderTo:i,label:!1,style:a,format:t.format,lang:o.lang,vtype:l,theme:d,checkValidOnTyping:!0,events:[{enter:r.onEditorEnter,scope:r},{beforehide:r.onEditorBeforeHide,scope:r},{blur:r.onBlur,scope:r}]});break;default:throw new Error("[FancyGrid error] - type "+s+" editor does not exit")}return n},showEditor:function(e){var t=this,n=t.widget,i=e.column,r=i.type,o=i.editor,a=e.cell,s=t.getCellPosition(a),l=t.getCellSize(a);"combo"===r&&(t.comboClick=!0),t.activeEditor=o,t.setEditorValue(e),0===e.rowIndex&&l.height++,i.minEditorWidth&&l.width<i.minEditorWidth&&(l.width=i.minEditorWidth),t.setEditorSize(l),o.show(),o.el.css(s),o.focus(),"combo"===r&&void 0!==e.value&&o.set(e.value,!1),n.fire("startedit",e)},setEditorSize:function(e){var t=this;"field.combo"===t.activeEditor.wtype?t.activeEditor.size(e):t.activeEditor.setInputSize({width:e.width,height:e.height})},hideEditor:function(){var e,t,n,i=this,r=i.widget,o=r.store,a=i.activeCellEditParams,s=i.activeEditor;s&&(n=a.column,t=s.get(),"server"===o.proxyType&&"combo"!==n.type&&(e=i.getActiveColumnKey(),t=i.prepareValue(t),o.set(a.rowIndex,e,t)),s.hide(),s.hideErrorTip()),delete i.activeEditor,r.el.dom.scrollTop&&(r.el.dom.scrollTop=0)},getCellPosition:function(t){var n=this,i=n.widget,r=i.gridBorders,o=e.get(t),a=o.offset(),s=i.el.offset(),l={left:parseInt(a.left)-parseInt(s.left)-2+"px",top:parseInt(a.top)-parseInt(s.top)-(r[0]+r[2])+"px"};return l},getCellSize:function(t){var n=this,i=n.widget,r=e.get(t),o=r.width(),a=r.height(),s=2;return e.nojQuery&&2===i.panelBorderWidth&&(s=1),o+=parseInt(r.css("border-right-width"))*s,a+=parseInt(r.css("border-bottom-width"))*s,{width:o,height:a}},setEditorValue:function(t){var n=this,i=n.activeEditor;switch(t.column.type){case"combo":-1!==i.valueIndex&&i.set(i.getValueKey(t.value),!1);break;case"date":var r=t.column.format,o=e.Date.parse(t.value,r.read,r.mode);i.set(o);break;default:i.set(t.value)}},onEditorEnter:function(e,t){this.hideEditor()},onHeaderCellMouseDown:function(){this.hideEditor()},onKey:function(e,t){},setValue:function(e){var t,n=this,i=n.widget,r=i.store,o=n.activeCellEditParams,a=n.activeEditor;void 0!==a&&a.isValid()!==!1&&"server"!==r.proxyType&&(t=n.getActiveColumnKey(),e=n.prepareValue(e),"field.date"===a.type&&a.isEqual(r.get(o.rowIndex,t))||r.set(o.rowIndex,t,e))},onEditorBeforeHide:function(e){e.isValid()&&this.setValue(e.getValue())},onScroll:function(){this.hideEditor()},onNativeScroll:function(){this.hideEditor()},onBlur:function(e){var t=this;if(!t.activeEditor||e.id===t.activeEditor.id){if(e.mouseDownSpinUp===!0||e.mouseDownSpinDown)return;t.hideEditor()}},prepareValue:function(t){var n=this,i=n.getActiveColumnType(),r=n.activeCellEditParams,o=r.column,a=o.format;switch(i){case"number":case"currency":if(a&&a.inputFn){var s="",l=0,d=t.length;if(e.isNumber(t))return t;for(;d>l;l++)isNaN(Number(t[l]))||(s+=t[l]);t=s}else""!==t&&(t=Number(t));break;case"date":if(o.format&&o.format.read){var c=o.editor.getDate();t=e.Date.format(c,o.format.read,void 0,o.format.mode)}}return t},getActiveColumnType:function(){var e=this.activeCellEditParams,t=e.column;return t.type},getActiveColumnKey:function(){var e=this.activeCellEditParams,t=e.column,n=t.key||t.index;return n},onCheckBoxChange:function(e){var t=this,n=t.widget,i=e.column,r=i.key||i.index,o=n.store,a=t.checkBoxChangedValue;t.activeEditor&&t.hideEditor(),void 0!==t.checkBoxChangedValue&&(delete t.checkBoxChangedValue,t.activeCellEditParams=e,n.edit.activeCellEditParams=e,o.set(e.rowIndex,r,a))},onComboChange:function(e,t){var n=this,i=n.widget,r=i.store,o=n.activeCellEditParams,a=n.getActiveColumnKey(),s=e.getDisplayValue(t);r.set(o.rowIndex,a,s),n.hideEditor()},checkAutoInitEditors:function(){var t=this,n=t.widget;e.each(n.columns,function(e){e.editorAutoInit&&(e.editor=t.generateEditor(e))})}})}(),function(){var e=Fancy,t=e.each,n=e.GRID_CELL_CLS,i=e.FIELD_CLS,r=e.GRID_ROW_EDIT_CLS,o=e.GRID_ROW_EDIT_BUTTONS_CLS,a=e.GRID_ROW_EDIT_BUTTON_UPDATE_CLS,s=e.GRID_ROW_EDIT_BUTTON_CANCEL_CLS,l=e.ANIMATE_DURATION;e.define("Fancy.grid.plugin.RowEdit",{extend:e.Plugin,ptype:"grid.rowedit",inWidgetName:"rowedit",rendered:!1,constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.on("scroll",e.onScroll,e),t.on("columnresize",e.onColumnResize,e),t.on("columndrag",e.onColumnDrag,e),t.grouping&&(t.on("collapse",e.onCollapse,e),t.on("expand",e.onExpand,e))},onCollapse:function(){this.hide()},onExpand:function(){this.hide()},edit:function(e){var t=this,n=t.widget,i=e.column;i&&"$selected"===i.index||(n.scroller.scrollToCell(e.cell),t.showEditor(e))},showEditor:function(t){var n=this;if(n.changed={},n.rendered){var i="none"===n.el.css("display");n.show(),n.changePosition(t.rowIndex,!i),i?n.setValues(t):setTimeout(function(){n.setValues(t)},e.ANIMATE_DURATION)}else n.render(),n.changePosition(t.rowIndex,!1),n.setValues(t);n.setSizes()},render:function(){var e=this,t=e.widget;t.leftColumns&&(e.leftEl=e.renderTo(t.leftBody.el,t.leftColumns)),t.columns&&(e.el=e.renderTo(t.body.el,t.columns)),t.rightColumns&&(e.rightEl=e.renderTo(t.rightBody.el,t.rightColumns)),e.renderButtons(),e.rendered=!0},renderTo:function(t,n,o,a,s){var l,d,c,u,h=this,f=h.widget,g=e.get(document.createElement("div")),p=0,m=n.length,v=f.theme,y={"float":"left",margin:"0px",padding:"0px"};if(a){var C=t.select("."+i);switch(p=o,m=o+1,a){case"right":u=C.item(o);break;case"left":c=C.item(o);break;case"center":switch(s){case"left":u=C.item(0);break;case"right":c=C.item(C.length-1)}}}else g.addCls(r),l=e.get(t.dom.appendChild(g.dom));for(;m>p;p++){d=n[p];var w=d.width,b={index:d.index,label:!1,style:y,width:w,vtype:d.vtype,format:d.format,stopPropagation:!0,theme:v,checkValidOnTyping:!0,events:[{change:h.onFieldChange,delay:100,scope:h},{enter:h.onFieldEnter,scope:h}]};switch(a){case"left":b.renderAfter=c;break;case"right":b.renderBefore=u;break;case"center":switch(s){case"left":b.renderBefore=C.item(0);break;case"right":b.renderAfter=C.item(C.length-1)}break;default:b.renderTo=l.dom}var x;if(d.editable===!1)switch(d.type){case"string":case"number":x=new e.TextField(b);break;default:x=new e.EmptyField(b)}else switch(d.type){case"date":d.format&&(b.format=d.format),x=new e.DateField(b);break;case"image":case"string":case"color":x=new e.StringField(b);break;case"number":case"currency":d.spin&&(b.spin=d.spin),d.step&&(b.step=d.step),d.min&&(b.min=d.min),d.max&&(b.max=d.max),x=new e.NumberField(b);break;case"combo":e.apply(b,{data:d.data,value:-1,padding:!1}),d.displayKey?(b.displayKey=d.displayKey,b.valueKey=d.displayKey):(b.displayKey="text",b.valueKey="text"),d.minListWidth&&(b.minListWidth=d.minListWidth),x=new e.Combo(b);break;case"checkbox":var S;switch(d.cellAlign){case"left":S=7;break;case"center":S=(d.width-20-2)/2;break;case"right":S=(d.width-20)/2+11}e.apply(b,{renderId:!0,value:!1,style:{padding:"0px",display:"inline-block","padding-left":S,"float":"left",margin:"0px"}}),x=new e.CheckBox(b);break;case"switcher":var S;switch(d.cellAlign){case"left":case void 0:S=7;break;case"center":S=(d.width-20-2)/2;break;case"right":S=(d.width-20)/2+11}e.apply(b,{renderId:!0,value:!1,style:{padding:"0px",display:"inline-block","padding-left":S,"float":"left",margin:"0px"}}),x=new e.Switcher(b);break;default:x=new e.EmptyField(b)}d.rowEditor=x}return l},renderButtons:function(){var t,n=this,i=n.widget,r=e.get(document.createElement("div"));r.addCls(o),t=e.get(i.body.el.dom.appendChild(r.dom)),n.buttonsEl=t,n.buttonUpdate=new e.Button({cls:a,renderTo:t.dom,text:"Update",events:[{click:n.onClickUpdate,scope:n}]}),n.buttonCancel=new e.Button({cls:s,renderTo:t.dom,text:"Cancel",events:[{click:n.onClickCancel,scope:n}]})},setSizes:function(){var e=this,t=e.widget;t.leftColumns&&e._setSizes(t.leftBody.el.select("."+n+'[index="0"]'),t.leftColumns,"left"),t.columns&&e._setSizes(t.body.el.select("."+n+'[index="0"]'),t.columns),t.rightColumns&&e._setSizes(t.rightBody.el.select("."+n+'[index="0"]'),t.rightColumns,"right"),e.setElSize()},setElSize:function(){var e=this.widget,t=e.getCenterViewWidth(),n=e.getCenterFullWidth();n>t&&this.el.css("width",n)},_setSizes:function(t,n,i){for(var r,o,a,s,l,d=this,c=0,u=n.length,h=1,f=2;u>c;c++)r=n[c],a=t.item(c).dom,s=e.get(a),o=d.getCellSize(a),l=r.rowEditor,l&&("left"!==i&&"right"!==i||c!==u-1||o.width--,"left"===i&&"select"===r.type&&o.width--,o.height-=2,c===u-1?l.el.css("width",o.width-2):l.el.css("width",o.width-1),l.el.css("height",o.height),o.width-=2*h,o.width-=2*f,o.height-=2*f,d.setEditorSize(l,o))},getCellSize:function(t){var n=this.widget,i=e.get(t),r=i.width(),o=i.height(),a=2;return e.nojQuery&&2===n.panelBorderWidth&&(a=1),r+=parseInt(i.css("border-right-width"))*a,o+=parseInt(i.css("border-bottom-width"))*a,{width:r,height:o}},setEditorSize:function(e,t){"field.combo"===e.wtype?(e.size(t),e.el.css("width",t.width+5)):e.setInputSize({width:t.width,height:t.height})},changePosition:function(e,t){var n=this,i=n.widget,r=i.scroller.getScroll(),o=i.scroller.getBottomScroll(),a=i.cellHeight*e-1-r,s=0;i.grouping&&(s+=i.grouping.getOffsetForRow(e),a+=s),n.leftEl&&(t!==!1?n.leftEl.animate({top:a},l):n.leftEl.css("top",a)),n.el&&(t!==!1?n.el.animate({top:a},l):n.el.css("top",a)),n.rightEl&&(t!==!1?n.rightEl.animate({top:a},l):n.rightEl.css("top",a));var d=i.getViewTotal()-3<e,c=a;3>e&&(d=!1),d?i.grouping?i.getViewTotal()-3<e-i.grouping.getSpecialRowsUnder(e)?c=a-parseInt(n.buttonsEl.css("height"))+1:(c=a+i.cellHeight,d=!1):c=a-parseInt(n.buttonsEl.css("height"))+1:c=a+i.cellHeight,t!==!1?n.buttonsEl.animate({top:c},l):n.buttonsEl.css("top",c),n.el.css("left",-o),n.changeButtonsLeftPos(),n.activeRowIndex=e},changeButtonsLeftPos:function(){var e=this,t=e.widget,n=t.getCenterViewWidth(),i=parseInt(e.buttonsEl.css("width"));e.buttonsEl.css("left",(n-i)/2)},setValues:function(e){var t=this,n=t.widget;n.leftColumns&&t._setValues(e.data,n.leftColumns),n.columns&&t._setValues(e.data,n.columns),n.rightColumns&&t._setValues(e.data,n.rightColumns),t.activeId=e.id,t.activeRowIndex=e.rowIndex},_setValues:function(e,n){t(n,function(t){var n=t.rowEditor;if(n)switch(t.type){case"action":case"button":case"order":case"select":case"expand":break;default:n.set(e[t.index],!1)}})},onScroll:function(){var e=this;e.rendered!==!1&&void 0!==e.activeRowIndex&&e.changePosition(e.activeRowIndex,!1)},onColumnResize:function(){var e=this;e.rendered!==!1&&setTimeout(function(){e.setSizes()},l)},onClickUpdate:function(){var e=this,t=e.widget,n=t.store,i=e.prepareChanged(),r=n.getRow(e.activeId);n.setItemData(r,i),t.update(),e.hide()},prepareChanged:function(){var t=this,n=t.widget,i=t.changed;for(var r in i){var o=n.getColumnByIndex(r);switch(o.type){case"date":var a=e.Date.parse(i[r],o.format.edit,o.format.mode),s=e.Date.format(a,o.format.read,o.format.mode);i[r]=s}}return i},onClickCancel:function(){this.hide()},hide:function(){var e=this;e.el&&(e.leftEl&&e.leftEl.hide(),e.el.hide(),e.rightEl&&e.rightEl.hide(),e.buttonsEl.hide())},show:function(){var e=this;e.leftEl&&("none"===e.leftEl.css("display")&&e.leftEl.css("opacity",0),e.leftEl.show(),e.leftEl.animate({opacity:1},l)),"none"===e.el.css("display")&&e.el.css("opacity",0),e.el.show(),e.el.animate({opacity:1},l),e.rightEl&&("none"===e.rightEl.css("display")&&e.rightEl.css("opacity",0),e.rightEl.show(),e.rightEl.animate({opacity:1},l)),"none"===e.buttonsEl.css("display")&&e.buttonsEl.css("opacity",0),e.buttonsEl.show(),e.buttonsEl.animate({opacity:1},l)},onFieldChange:function(e,t,n){var i=this;e.isValid()?i.changed[e.index]=t:delete i.changed[e.index]},onFieldEnter:function(){var e=this,t=e.widget,n=t.store,i=n.getRow(e.activeId);n.setItemData(i,e.changed),t.update(),e.hide()},hideField:function(e,t){var n=this.widget,i=n.getColumns(t),r=i[e];r.rowEditor&&r.rowEditor.hide()},showField:function(e,t){var n=this.widget,i=n.getColumns(t),r=i[e];r.rowEditor&&r.rowEditor.show()},moveEditor:function(e,t,n,i){var o,a=this,s=a.widget,l=s.store,d=s.getColumns(n),c=e.rowEditor,u=s.getBody(n),h=u.el.select("."+r),f=l.getById(a.activeId),g=f.get(e.index);void 0===a.activeId&&(g=l.get(a.activeRowIndex)[e.index]),c.destroy(),a.renderTo(h,d,t,n,i),o=a.getField(t,n),e.rowEditor=o,o.set(g),a.setSizes(),a.changeButtonsLeftPos(),a.reSetColumnsEditorsLinks()},getField:function(t,n){var r,o=this.widget,a=o.getBody(n);switch(n){case"left":t++}return r=e.getWidget(a.el.select("."+i).item(t).attr("id"))},reSetColumnsEditorsLinks:function(){var n=me.widget,r=n.body.el.select("."+i);t(n.columns,function(t,n){t.rowEditor=e.getWidget(r.item(n).attr("id"))}),r=n.leftBody.el.select("."+i),t(n.leftColumns,function(t,n){t.rowEditor=e.getWidget(r.item(n).attr("id"))}),r=n.rightBody.el.select("."+i),t(n.rightColumns,function(t,n){t.rowEditor=e.getWidget(r.item(n).attr("id"))})},onColumnDrag:function(){var e=this;e.destroyEls(),e.hide()},destroyEls:function(){var t=this,n=t.widget;t.rendered&&(t.rendered=!1,n.leftColumns&&(t.leftEl.destroy(),e.each(n.leftColumns,function(e){e.rowEditor.destroy()})),n.columns&&(t.el.destroy(),e.each(n.columns,function(e){e.rowEditor.destroy()})),n.rightColumns&&(t.rightEl.destroy(),e.each(n.rightColumns,function(e){e.rowEditor.destroy()})))}})}(),function(){var e=Fancy,t=e.FIELD_CHECKBOX_CLS,n=e.GRID_CELL_CLS,i=e.GRID_CELL_OVER_CLS,r=e.GRID_CELL_SELECTED_CLS,o=e.GRID_CELL_ACTIVE_CLS,a=e.GRID_COLUMN_CLS,s=e.GRID_COLUMN_OVER_CLS,l=e.GRID_COLUMN_SELECT_CLS,d=e.GRID_COLUMN_SELECTED_CLS,c=e.GRID_ROW_OVER_CLS,u=e.GRID_HEADER_CELL_SELECT_CLS,h=e.GRID_HEADER_CELL_TEXT_CLS;e.define("Fancy.grid.plugin.Selection",{extend:e.Plugin,ptype:"grid.selection",inWidgetName:"selection",mixins:["Fancy.grid.selection.mixin.Navigation"],enabled:!0,checkboxRow:!1,checkOnly:!1,memory:!1,memoryPerformance:!0,disabled:!1,selectLeafsOnly:!1,keyNavigation:!0,allowDeselect:!1,constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.memory&&e.initMemory(),e.ons()},ons:function(){var t=this,n=t.widget;n.once("render",function(){t.initTrackOver(),t.initColumnTrackOver(),t.initCellTrackOver(),t.initCellSelection(),t.initRowSelection(),t.initColumnSelection(),t.keyNavigation&&t.initNavigation(),t.initCopyKeys(),n.on("changepage",t.onChangePage,t),n.on("load",t.onLoad,t),e.nojQuery&&t.initFixTrackOver(),t.initCopyEl()}),n.on("sort",t.onSort,t),n.on("columndrag",t.onColumnDrag,t),n.on("lockcolumn",t.onColumnLock,t),n.on("rightlockcolumn",t.onColumnRightLock,t),n.on("unlockcolumn",t.onUnColumnLock,t),n.on("filter",t.onFilter,t),n.on("expand",t.onExpand,t),n.on("collapse",t.onCollapse,t)},initMemory:function(){var t=this,n=t.widget;t.memory={all:!1,except:{},selected:{},setAll:function(){var i=n.store.filteredDataMap;if(i){for(var r in i)t.memory.selected[r]=!0;t.except={},t.all=!1}else if(t.memoryPerformance===!1){var o=n.getData();Fancy.each(o,function(e){t.memory.selected[e.id]=!0}),t.except={},t.all=!1}else e.apply(t.memory,{all:!0,except:{},selected:{}})},clearAll:function(){e.apply(t.memory,{all:!1,except:{},selected:{}})}}},initTrackOver:function(){var e=this,t=e.widget;t.on("rowenter",e.onRowEnter,e),t.on("rowleave",e.onRowLeave,e)},initCellTrackOver:function(){var e=this,t=e.widget;t.on("cellenter",e.onCellEnter,e),t.on("cellleave",e.onCellLeave,e)},initColumnTrackOver:function(){var e=this,t=e.widget;t.on("columnenter",e.onColumnEnter,e),t.on("columnleave",e.onColumnLeave,e)},onCellEnter:function(t,n){var r=this.widget;!r.cellTrackOver||r.startResizing||e.isTouch||e.get(n.cell).addCls(i)},onCellLeave:function(t,n){var r=this.widget;r.cellTrackOver&&!r.startResizing&&e.get(n.cell).removeCls(i)},onColumnEnter:function(t,n){var i=this,r=i.widget,o=r.columndrag,a=r.scroller;o&&"dragging"===o.status||e.isTouch||r.startResizing||!r.columnTrackOver||a.bottomKnobDown||a.rightKnobDown||n.column.trackOver===!1||i.keyNavigating||e.get(n.columnDom).addCls(s)},onColumnLeave:function(t,n){var i=this.widget;i.startResizing||i.columnTrackOver&&e.get(n.columnDom).removeCls(s)},onRowEnter:function(t,n){var i=this,r=i.widget,o=r.columndrag,a=r.scroller;if((!o||"dragging"!==o.status)&&!e.isTouch&&!r.startResizing&&this.enabled!==!1&&r.trackOver&&!a.bottomKnobDown&&!a.rightKnobDown&&!i.keyNavigating){var s=r.getDomRow(n.rowIndex);e.each(s,function(t){e.get(t).addCls(c)}),r.fire("rowtrackenter",n)}},onRowLeave:function(t,n){var i=this.widget;if(!i.startResizing&&this.enabled!==!1&&i.trackOver){var r=i.getDomRow(n.rowIndex);e.each(r,function(t){e.get(t).removeCls(c)}),i.fire("rowtrackleave",n)}},onChangePage:function(){this.memory||this.clearSelection()},onLoad:function(){var e=this;e.memory||e.clearSelection()},initCellSelection:function(){var e=this,t=e.widget;t.on("cellclick",e.onCellClick,e),t.on("cellmousedown",e.onCellMouseDownCells,e),t.on("cellenter",e.onCellEnterSelection,e)},initRowSelection:function(){var e=this,t=e.widget;t.checkboxRowSelection&&(e.checkboxRow=!0,setTimeout(function(){"rows"===e.selModel&&e.renderHeaderCheckBox()},1)),t.on("rowclick",e.onRowClick,e),t.on("cellmousedown",e.onCellMouseDownRows,e),t.on("cellclick",e.onCellClickRows,e),t.on("rowenter",e.onRowEnterSelection,e),t.on("columndrag",e.onColumnDrag,e)},onCellMouseDownRows:function(n,i){var a=this,s=a.widget;if((!a.checkOnly||e.get(i.e.target).hasClass("fancy-field-checkbox-input"))&&!a.disabled&&a.rows&&a.enabled&&(!a.checkOnly||"$selected"===i.column.index)&&(!a.selectLeafsOnly||i.data.leaf)){var l=i.e,d=l.target,c=l.ctrlKey,u=i.rowIndex,h=s.getDomRow(u);if((c||a.allowDeselect)&&s.multiSelect)e.get(h[0]).hasCls(r)?(a.domDeSelectRow(u),a.checkboxRow&&a.deSelectCheckBox(u)):(a.domSelectRow(u),a.checkboxRow&&a.selectCheckBox(u));else if("$selected"===i.column.index){var f=e.getWidget(e.get(i.cell).select("."+t).attr("id"));f.el.within(d)?(a.domSelectRow(u),f.get()===!0?a.domDeSelectRow(u):a.domSelectRow(u)):(a.clearSelection(),a.domSelectRow(u),a.checkboxRow&&a.selectCheckBox(u))}else a.clearSelection(),a.domSelectRow(u),a.checkboxRow&&a.selectCheckBox(u);a.isMouseDown=!0,a.startRowSelection=u,e.$(document).one("mouseup",function(){delete a.isMouseDown,delete a.startCellSelection}),a.clearActiveCell(),e.get(i.cell).addCls(o),s.fire("select",a.getSelection())}},selectCheckBox:function(i){var r=this,o=r.widget,a=o.el.select("."+l+" ."+n+'[index="'+i+'"] .'+t);a.each(function(t){e.getWidget(t.attr("id")).set(!0)}),"rows"===o.selModel&&r.clearHeaderCheckBox()},deSelectCheckBox:function(i){var r=this,o=r.widget,a=o.store,s=o.el.select("."+l+" ."+n+'[index="'+i+'"] .'+t),d=a.get(i,"id");d&&(r.memory&&(r.memory.except[d]=!0,delete r.memory.selected[d]),s.each(function(t){e.getWidget(t.attr("id")).set(!1)}),r.clearHeaderCheckBox())},domSelectRow:function(t){var n=this,i=n.widget,o=i.store,a=i.getDomRow(t),s=o.get(t,"id"),l=!1;i.startResizing||(n.memory&&(delete n.memory.except[s],n.memory.selected[s]=!0),e.each(a,function(t){t=e.get(t),t.hasClass(r)?l=!0:t.addCls(r)}),l===!1&&i.fire("selectrow",t,i.get(t)))},domDeSelectRow:function(t){var n=this.widget,i=n.getDomRow(t),o=!0;e.each(i,function(t){t=e.get(t),t.hasClass(r)?t.removeCls(r):o=!1}),o&&n.fire("deselectrow",t,n.get(t))},onColumnEnterSelection:function(t,n){var i=this,r=i.widget;if(i.columns&&i.isMouseDown===!0){var a={columnIndex:i.startColumnColumnIndex,side:i.startColumnSide},s={columnIndex:n.columnIndex,side:n.side};if(a.side===s.side){switch(a.side){case"center":i.clearSelection("right"),i.clearSelection("left");break;case"left":i.clearSelection("center"),i.clearSelection("right");break;case"right":i.clearSelection("center"),i.clearSelection("left")}i.selectColumns(a.columnIndex,s.columnIndex,a.side)}else"center"===a.side&&"right"===s.side?(i.selectColumns(a.columnIndex,r.columns.length,"center"),i.selectColumns(0,s.columnIndex,"right")):"center"===a.side&&"left"===s.side?(i.selectColumns(0,a.columnIndex,"center"),i.selectColumns(s.columnIndex,r.leftColumns.length,"left")):"left"===a.side&&"center"===s.side?(i.clearSelection("right"),i.selectColumns(a.columnIndex,r.leftColumns.length,"left"),i.selectColumns(0,s.columnIndex,"center")):"left"===a.side&&"right"===s.side?(i.selectColumns(a.columnIndex,r.leftColumns.length,"left"),i.selectColumns(0,r.columns.length,"center"),i.selectColumns(0,s.columnIndex,"right")):"right"===a.side&&"center"===s.side?(i.clearSelection("left"),i.selectColumns(0,a.columnIndex,"right"),i.selectColumns(s.columnIndex,r.columns.length,"center")):"right"===a.side&&"left"===s.side&&(i.selectColumns(0,a.columnIndex,"right"),i.selectColumns(0,r.columns.length,"center"),i.selectColumns(s.columnIndex,r.leftColumns.length,"left"));i.clearActiveCell(),e.get(n.cell).addCls(o)}},onRowEnterSelection:function(t,n){var i=this,r=i.widget;if(!r.startResizing&&i.enabled!==!1&&i.rows&&i.isMouseDown===!0&&i.mouseMoveSelection){var a=i.startRowSelection,s=n.rowIndex,l={};a>s&&(a=n.rowIndex,s=i.startRowSelection);for(var d=a,c=s+1;c>d;d++)l[d]=!0;var u=i.getSelectedRowByColumn(n.columnIndex,n.side),h={},f={};for(var g in l)u[g]!==!0&&(h[g]=!0);for(var g in u)l[g]!==!0&&(f[g]=!0);for(var g in h)i.domSelectRow(g),i.checkboxRow&&i.selectCheckBox(g);for(var g in f)i.domDeSelectRow(g),i.checkboxRow&&i.deSelectCheckBox(g);i.clearActiveCell(),e.get(n.cell).addCls(o),r.fire("select",i.getSelection())}},getSelectedRowByColumn:function(e,t){var n,i=this.widget;switch(t){case"left":n=i.leftBody;break;case"center":n=i.body;break;case"right":n=i.rightBody}var o=n.el.select("."+a+'[index="'+e+'"][grid="'+i.id+'"]'),s=o.select("."+r),l={};return s.each(function(e){l[Number(e.attr("index"))]=!0}),l},getSelectedRow:function(){var e=this.widget,t=e.body,n=t.el.select("."+r);return 0===n.length?-1:Number(n.item(0).attr("index"))},getSelectedRows:function(){var e=this.widget,t=e.body,n=t.el.select("."+a+'[index="0"][grid="'+e.id+'"]'),i=n.select("."+r),o=[];return i.each(function(e){o.push(Number(e.attr("index")))}),o},initColumnSelection:function(){var e=this,t=e.widget;e.selectedColumns=[],t.on("columnclick",e.onColumnClick,e),t.on("columnmousedown",e.onColumnMouseDown,e),t.on("columnenter",e.onColumnEnterSelection,e)},onColumnClick:function(t,n){var i=this;if(i.column&&n.column.selectable!==!1){var r=e.get(n.columnDom);i.column&&(i.selectedColumns[0]=n),i.clearSelection(),r.addCls(d),e.get(n.cell).addCls(o)}},onRowClick:function(n,i){var a=this,s=a.widget,l=i.rowIndex;if(!a.disabled&&a.row&&i!==!1&&(!a.checkOnly||"$selected"===i.column.index)&&(!a.selectLeafsOnly||i.data.leaf)){var d=i.column,c=!0;"action"===d.type&&d.items&&e.each(d.items,function(e){"remove"===e.action&&(c=!1)});var u=e.get(i.cell).hasClass(r);a.clearSelection(),e.get(i.cell).addCls(o);s.getDomRow(l);if("$selected"===i.column.index){var h=e.getWidget(e.get(i.cell).select("."+t).attr("id"));h.get()===!0?(a.selectCheckBox(l),a.domSelectRow(l)):a.deSelectCheckBox(l),s.fire("select",a.getSelection())}else c&&(a.allowDeselect&&u||(a.domSelectRow(l),a.selectCheckBox(l)),s.fire("select",a.getSelection()))}},onCellClickRows:function(n,i){var r=this,o=r.widget;if(!r.disabled&&r.rows&&r.enabled&&(!r.checkOnly||"$selected"===i.column.index)){var a=i.e,s=a.ctrlKey,l=i.rowIndex;if((s||r.allowDeselect)&&o.multiSelect);else if("$selected"===i.column.index){var d=e.getWidget(e.get(i.cell).select("."+t).attr("id"));d.get()===!0?r.selectCheckBox(l):r.deSelectCheckBox(l)}}},selectRow:function(i,r,o){var s=this,l=s.widget,d=l.store,c=l.leftBody,u=l.body,h=l.rightBody;if(void 0===r&&(r=!0),o=o||!1,!l.startResizing){if(!s.row&&!s.rows)throw new Error("[FancyGrid Error] - row selection was not enabled");o||s.clearSelection();l.getDomRow(i),l.get(i);if(r?s.domSelectRow(i):s.domDeSelectRow(i),e.each(l.columns,function(e,o){if("select"===e.type){var s=u.el.select("."+a+'[index="'+o+'"] .'+n+'[index="'+i+'"] .'+t),l=Fancy.getWidget(s.attr("id"));l&&l.set(r)}}),e.each(l.leftColumns,function(e,o){if("select"===e.type){var s=c.el.select("."+a+'[index="'+o+'"] .'+n+'[index="'+i+'"] .'+t),l=Fancy.getWidget(s.attr("id"));l&&l.set(r)}}),e.each(l.rightColumns,function(e,o){if("select"===e.type){var s=h.el.select("."+a+'[index="'+o+'"] .'+n+'[index="'+i+'"] .'+t),l=Fancy.getWidget(s.attr("id"));l&&l.set(r)}}),s.memory){var f=d.get(i,"id");f&&(r===!0||void 0===r?(delete s.memory.except[f],s.memory.selected[f]=!0):(s.memory.except[f]=!0,delete s.memory.selected[f]))}l.fire("select",s.getSelection())}},selectById:function(e,t,n){var i=this,r=i.widget,o=r.find("id",String(e))[0];void 0!==o?i.selectRow(o,t,n):(o=r.find("id",Number(e))[0],void 0!==o?i.selectRow(o,t,n):i.memory&&(t===!0||void 0===t?(delete i.memory.except[e],i.memory.selected[e]=!0):(i.memory.except[e]=!0,delete i.memory.selected[e])))},onCellClick:function(t,n){var i=this,a=i.widget;i.cell&&(i.clearSelection(),e.get(n.cell).addCls(r,o),a.fire("select",i.getSelection()))},clearSelection:function(e){var t=this,n=t.widget;if(t.checkboxRow){var o=n.body.el.select("."+a+'[index="0"] .'+r);o.each(function(e){var n=e.attr("index");t.deSelectCheckBox(n)}),t.memory&&t.memory.clearAll()}if(e)switch(e){case"left":n.leftBody.el.select("."+r).removeCls(r),n.leftBody.el.select("."+d).removeCls(d),n.leftBody.el.select("."+i).removeCls(i);break;case"center":n.body.el.select("."+r).removeCls(r),n.body.el.select("."+d).removeCls(d),n.body.el.select("."+i).removeCls(i);break;case"right":n.rightBody.el.select("."+r).removeCls(r),n.rightBody.el.select("."+d).removeCls(d),n.rightBody.el.select("."+i).removeCls(i)}else n.el.select("."+r).removeCls(r),n.el.select("."+d).removeCls(d),n.el.select("."+i).removeCls(i);t.clearActiveCell(),n.fire("clearselect"),n.fire("select",n.getSelection())},onSort:function(){this.memory||this.clearSelection()},onCellEnterSelection:function(t,n){var i=this,r=i.widget,a=r.columndrag,s=0;if((!a||"dragging"!==a.status)&&i.cells&&i.isMouseDown===!0){i.prevCellsSelection=n.cell,i.prevCellRowIndex=n.rowIndex,i.prevCellColumnIndex=n.columnIndex,i.prevCellSide=n.side;var l={rowIndex:i.startCellRowIndex,columnIndex:i.startCellColumnIndex,side:i.startCellSide},d={rowIndex:n.rowIndex,columnIndex:n.columnIndex,side:n.side};n.rowIndex<i.startCellRowIndex&&(l.rowIndex=n.rowIndex,d.rowIndex=i.startCellRowIndex),i.startCellSide===n.side?(n.columnIndex<i.startCellColumnIndex&&(l.columnIndex=n.columnIndex,d.columnIndex=i.startCellColumnIndex),s=i.selectCells(l,d,l.side),"left"===i.startCellSide?(i.clearSelection("center"),i.clearSelection("right")):"center"===i.startCellSide?(i.clearSelection("left"),i.clearSelection("right")):"right"===i.startCellSide&&(i.clearSelection("left"),i.clearSelection("center"))):"left"===i.startCellSide?(s=i.selectCells(l,{rowIndex:n.rowIndex,columnIndex:r.leftColumns.length-1},"left"),"center"===n.side?(s+=i.selectCells({columnIndex:0,rowIndex:l.rowIndex},d,"center"),i.clearSelection("right")):"right"===n.side&&(s+=i.selectCells({columnIndex:0,rowIndex:l.rowIndex},{columnIndex:r.columns.length-1,rowIndex:d.rowIndex},"center"),s+=i.selectCells({columnIndex:0,rowIndex:l.rowIndex},d,"right"))):"center"===i.startCellSide?"left"===n.side?(s+=i.selectCells({columnIndex:0,rowIndex:l.rowIndex},{rowIndex:d.rowIndex,columnIndex:l.columnIndex},"center"),s+=i.selectCells({columnIndex:d.columnIndex,rowIndex:l.rowIndex},{rowIndex:d.rowIndex,columnIndex:r.leftColumns.length-1},"left")):"right"===n.side&&(s+=i.selectCells({columnIndex:l.columnIndex,rowIndex:l.rowIndex},{columnIndex:r.columns.length-1,rowIndex:d.rowIndex},"center"),s+=i.selectCells({columnIndex:0,rowIndex:l.rowIndex},{columnIndex:d.columnIndex,rowIndex:d.rowIndex},"right")):"right"===i.startCellSide&&(s+=i.selectCells({columnIndex:0,rowIndex:l.rowIndex},{columnIndex:l.columnIndex,rowIndex:d.rowIndex},"right"),"center"===n.side?(s+=i.selectCells({columnIndex:d.columnIndex,rowIndex:l.rowIndex},{columnIndex:r.columns.length-1,rowIndex:d.rowIndex},"center"),i.clearSelection("left")):"left"===n.side&&(s+=i.selectCells({columnIndex:0,rowIndex:l.rowIndex},{columnIndex:r.columns.length-1,rowIndex:d.rowIndex},"center"),s+=i.selectCells({columnIndex:d.columnIndex,rowIndex:l.rowIndex},{columnIndex:r.leftColumns.length-1,rowIndex:d.rowIndex},"left"))),i.endCellRowIndex=d.rowIndex,i.clearActiveCell(),e.get(n.cell).addCls(o),r.fire("select",i.getSelection())}},onColumnMouseDown:function(t,n){var i=this,r=i.widget;if(i.columns&&n.column.selectable!==!1&&i.enabled){var a=e.get(n.columnDom);i.isMouseDown=!0,i.startColumnColumnIndex=n.columnIndex,i.startColumnSide=n.side,i.clearSelection(),a.addCls(d),e.$(document).one("mouseup",function(){delete i.isMouseDown}),e.get(n.cell).addCls(o),r.fire("select",i.getSelection())}},onCellMouseDownCells:function(t,n){var i=this,a=i.widget;if(a.celledit&&a.celledit.hideEditor(),i.cells&&i.enabled){var s=e.get(n.cell);i.clearSelection(),a.el.select("."+o).removeCls(o),s.addCls(r,o),i.isMouseDown=!0,i.startCellSelection=n.cell,i.startCellRowIndex=n.rowIndex,i.startCellColumnIndex=n.columnIndex,i.startCellSide=n.side,e.$(document).one("mouseup",function(){delete i.isMouseDown,delete i.startCellSelection}),a.fire("select",i.getSelection())}},selectCells:function(e,t,n){var i,o,a,s=this,l=s.widget,d=l.body,c=l.leftBody,u=l.rightBody,h=e.rowIndex,f=t.rowIndex+1,g=s.getSelectedCells(n||"center"),p={},m={},v={};for(h=e.rowIndex,f=t.rowIndex+1;f>h;h++)for(p[h]=p[h]||{},o=e.columnIndex,a=t.columnIndex+1;a>o;o++)p[h][o]=!0;for(var y in p)if(void 0===g[y])m[y]=p[y];else for(var C in p[y])g[y][C]!==!0&&(m[y]=m[y]||{},m[y][C]=!0);for(var y in g)if(void 0===p[y])v[y]=g[y];else for(var C in g[y])p[y][C]!==!0&&(v[y]=v[y]||{},v[y][C]=!0);switch(n){case"left":i=c;break;case"center":i=d;break;case"right":i=u;break;default:i=d}for(var y in m)for(var C in m[y]){var w=i.getCell(y,C);w.addCls(r)}for(var y in v)for(var C in v[y]){var w=i.getCell(y,C);w.removeCls(r)}},getSelectedCells:function(e){for(var t=this,n=t.widget,i=n.getBody(e||"center"),o=i.el.select("."+r),a={},s=0,l=o.length;l>s;s++){var d=o.item(s),c=Number(d.parent().attr("index")),u=Number(d.attr("index"));a[u]=a[u]||{},a[u][c]=!0}return a},getNumberSelectedCells:function(){return this.widget.el.select("."+r).length},getSelectedColumns:function(e){for(var t=this.widget,n=t.getBody(e),i={},r=n.el.select("."+d),o=0,a=r.length;a>o;o++)i[r.item(o).attr("index")]=!0;return i},selectColumns:function(e,t,n){var i=this,r=i.getSelectedColumns(n||"center"),o={},a={},s={},l=e,d=t;for(l>d&&(l=t,d=e),d++;d>l;l++)o[l]=!0;for(var c in o)r[c]!==!0&&(a[c]=!0);for(var c in r)o[c]!==!0&&(s[c]=!0);for(var c in a)i.selectColumn(c,n);for(var c in s)i.deselectColumn(c,n)},selectColumn:function(t,n){var i=this.widget,r=i.getBody(n||"center"),o=e.get(r.getDomColumn(t));o.addCls(d)},deselectColumn:function(t,n){var i=this.widget,r=i.getBody(n||"center"),o=e.get(r.getDomColumn(t));o.removeCls(d)},getSelection:function(t){var n,i=this,r=i.widget,o=r.store,a={};switch(i.selModel){case"row":a.row=i.getSelectedRow(),-1!==a.row?(a.items=[o.get(a.row)],a.rows=[a.row]):(a.items=[],a.rows=[]);break;case"rows":if(a.rows=i.getSelectedRows(),i.memory&&i.memory.all)n=i.memory.except,o.filteredDataMap?a.items=Fancy.Array.copy(o.filteredData):a.items=Fancy.Array.copy(o.data);else if(a.items=[],i.memory&&!Fancy.Object.isEmpty(i.memory.selected)){var s=i.memory.selected;if(o.filteredDataMap)for(var l in s)o.filteredDataMap[l]&&a.items.push(o.getById(l));else for(var l in s)a.items.push(o.getById(l))}else for(var d=0,c=a.rows.length;c>d;d++)a.items.push(o.get(a.rows[d]));break;case"cells":break;case"cell":break;case"column":break;case"columns":}if(n){var u=[];e.each(a.items,function(t,i){e.isObject(t.data)&&(a.items[i]=t.data);var r=a.items[i].id;n[r]||u.push(a.items[i])}),a.items=u}else e.each(a.items,function(t,n){e.isObject(t.data)&&(a.items[n]=t.data)});return t?a:a.items||[]},renderHeaderCheckBox:function(){var e=this,t=this.widget;t.header&&(e._renderHeaderCheckBox(t.leftHeader,t.leftColumns),e._renderHeaderCheckBox(t.header,t.columns),e._renderHeaderCheckBox(t.rightHeader,t.rightColumns))},_renderHeaderCheckBox:function(n,i){var r=this,o=r.widget,a=r.memory,s=o.getSelection();e.each(i,function(i,l){if("$selected"===i.index&&i.headerCheckBox!==!1){var d=n.getCell(l);d.addCls(u);var c=d.firstChild(),f=!r.disabled,g=d.select("."+h);if(g.update(""),c.select("."+t).length){var p=e.getWidget(c.select("."+t).item(0).attr("id"));p.destroy()}var m=!1;r.memory?a.all&&(m=!0):s.length===o.getViewTotal()&&0!==s.length&&(m=!0),i.headerCheckBox=new e.CheckBox({renderTo:c.dom,renderId:!0,value:m,label:!1,editable:f,disabled:r.disabled,style:{padding:"0px",display:"inline-block"},events:[{change:function(e,t){t?(r.selectAll(),a&&a.setAll()):(r.deSelectAll(),a&&a.clearAll())}}]})}})},selectAll:function(){for(var i=this,r=i.widget,o=r.el.select("."+u+" ."+t),a=0,s=r.getViewTotal();s>a;a++){for(var d=r.el.select("."+l+" ."+n+'[index="'+a+'"] .'+t),c=0,h=d.length;h>c;c++){var f=e.getWidget(d.item(c).attr("id"));f.setValue(!0)}i.domSelectRow(a)}o.each(function(t){var n=e.getWidget(t.attr("id"));n.setValue(!0,!1)}),r.fire("select",r.getSelection())},deSelectAll:function(){for(var i=this,r=i.widget,o=0,a=r.getViewTotal();a>o;o++){var s=r.el.select("."+l+" ."+n+'[index="'+o+'"] .'+t);s.each(function(t){var n=e.getWidget(t.attr("id"));n.setValue(!1)}),i.domDeSelectRow(o)}i.clearHeaderCheckBox(),r.fire("clearselect"),r.fire("select",r.getSelection())},clearHeaderCheckBox:function(){var n=this,i=n.widget,r=i.el.select("."+u+" ."+t);r.each(function(t){var n=e.getWidget(t.attr("id"));n.setValue(!1,!1)})},stopSelection:function(){this.enabled=!1},enableSelection:function(e){var t=this;return t.disabled===!0&&t.enableHeaderCheckBoxes(),t.disabled=!1,t.disabled=!1,void 0!==e?void(this.enabled=e):void(this.enabled=!0)},initFixTrackOver:function(){var e=this,t=e.widget;t.columns&&(t.body.el.on("mouseleave",e.onBodyMouseLeave,e),t.body.el.on("mouseenter",e.onBodyMouseEnter,e)),t.leftColumns&&(t.leftBody.el.on("mouseleave",e.onLeftBodyMouseLeave,e),t.leftBody.el.on("mouseenter",e.onLeftBodyMouseEnter,e)),t.rightColumns&&(t.rightBody.el.on("mouseleave",e.onRightBodyMouseLeave,e),t.rightBody.el.on("mouseenter",e.onRightBodyMouseEnter,e))},onBodyMouseLeave:function(){var e=this,t=e.widget;e.clearBodyTrackCls(t.body)},onBodyMouseEnter:function(){var e=this;e.rowTrackFixInBody=!0,setTimeout(function(){e.rowTrackFixInBody=!1},30)},onLeftBodyMouseLeave:function(){var e=this,t=e.widget;e.clearBodyTrackCls(t.leftBody)},onLeftBodyMouseEnter:function(){var e=this;e.rowTrackFixInBody=!0,setTimeout(function(){e.rowTrackFixInBody=!1},30)},onRightBodyMouseLeave:function(){var e=this,t=e.widget;e.clearBodyTrackCls(t.rightBody)},onRightBodyMouseEnter:function(){var e=this;e.rowTrackFixInBody=!0,setTimeout(function(){e.rowTrackFixInBody=!1},30)},clearBodyTrackCls:function(e){var t=this,n=t.widget;n.cellTrackOver&&e.el.select("."+i).removeCls(i),n.trackOver&&(delete e.prevCellOver,t.rowTrackFixInterval&&(clearInterval(t.rowTrackFixInterval),delete t.rowTrackFixInterval),t.rowTrackFixInterval=setTimeout(function(){t.rowTrackFixInBody||n.el.select("."+c).removeCls(c)},20))},onColumnDrag:function(){var t,n=this,i=n.widget;return n.cells||n.cell||n.column||n.columns?void n.clearSelection():(t=n.getSelection(!0),void e.each(t,function(e){i.selectRow(e)}))},onColumnLock:function(){var t,n=this,i=n.widget;return n.cells||n.cell||n.column||n.columns?void n.clearSelection():(t=n.getSelection(!0),void e.each(t,function(e){i.selectRow(e)}))},onColumnRightLock:function(){var t,n=this,i=n.widget;return n.cells||n.cell||n.column||n.columns?void n.clearSelection():(t=n.getSelection(!0),void e.each(t,function(e){i.selectRow(e)}))},onUnColumnLock:function(){var t,n=this,i=n.widget;return n.cells||n.cell||n.column||n.columns?void n.clearSelection():(t=n.getSelection(!0),void e.each(t,function(e){i.selectRow(e)}))},disableSelection:function(){var e=this;e.disabled=!0,e.enableHeaderCheckBoxes(!1)},enableHeaderCheckBoxes:function(n){var i=this,r=i.widget,o=r.body,s=r.leftBody,l=r.rightBody,d="enable";n===!1&&(d="disable"),e.each(r.columns,function(n,i){"select"===n.type&&n.headerCheckBox&&(n.headerCheckBox[d](),o.el.select("."+a+'[index="'+i+'"] .'+t).each(function(t){e.getWidget(t.attr("id"))[d]()}))}),e.each(r.leftColumns,function(n,i){"select"===n.type&&n.headerCheckBox&&(n.headerCheckBox[d](),s.el.select("."+a+'[index="'+i+'"] .'+t).each(function(t){e.getWidget(t.attr("id"))[d]()}))}),e.each(r.rightColumns,function(n,i){"select"===n.type&&n.headerCheckBox&&(n.headerCheckBox[d](),l.el.select("."+a+'[index="'+i+'"] .'+t).each(function(t){e.getWidget(t.attr("id"))[d]()}))})},onFilter:function(){var t=this,n=t.widget;t.memory||t.clearSelection(),"rows"===t.selModel&&(e.each(n.leftColumns,function(t,i){if("select"===t.type){var r=n.leftHeader.getCell(i),o=e.getWidget(r.select(".fancy-field-checkbox").attr("id"));o&&o.set(!1,!1)}}),e.each(n.columns,function(t,i){if("select"===t.type){var r=n.header.getCell(i),o=e.getWidget(r.select(".fancy-field-checkbox").attr("id"));o&&o.set(!1,!1)}}),e.each(n.rightColumns,function(t,i){if("select"===t.type){var r=n.rightHeader.getCell(i),o=e.getWidget(r.select(".fancy-field-checkbox").attr("id"));o&&o.set(!1,!1)}}))},onExpand:function(){var e=this;e.memory||e.clearSelection()},onCollapse:function(){var e=this;e.memory||e.clearSelection()},getActiveCell:function(){var e=this,t=e.widget,n=t.el.select("."+o);return n.dom||(n=t.body.getCell(0,0)),n},getActiveCellInfo:function(){var e=this,t=e.widget,n=e.getActiveCell(),i=t.getSideByCell(n),r=Number(n.attr("index")),o=Number(n.parent().attr("index"));return{side:i,rowIndex:r,columnIndex:o}},clearActiveCell:function(){var e=this,t=e.widget,n=t.el.select("."+o);n.removeCls(o)},initCopyEl:function(){var t=this,n=t.widget,i=e.get(document.createElement("textarea"));i.addCls("fancy-grid-copy-textarea"),t.copyEl=e.get(n.el.dom.appendChild(i.dom))},copy:function(t){var n,i=this,r=i.widget,o=i.copyEl;switch(i.selModel){case"cells":case"cell":var a=[],s=function(e){var n=r.getColumns(e),o=i.getSelectedCells(e),s=0,l=!1;for(var d in o){var c=r.get(d),u=o[d];if(!l&&t){a.push([]);for(var h in u){var f=n[h];""===f.index,a[0].push(f.title||"")}s++,l=!0}for(var h in u){var f=n[h];a[s]||(a[s]=[]),f.index&&a[s].push(c.get(f.index))}s++}};s("left"),s("center"),s("right");var l="";e.each(a,function(e){l+=e.join("	")+"\n"}),o.dom.value=l;break;case"rows":case"row":n=i.getSelection();var d=[].concat(r.leftColumns).concat(r.columns).concat(r.rightColumns),l="";if(t){var c=[];e.each(d,function(e){"$selected"!==e.index&&c.push(e.index||"")}),l+=c.join("	")+"\n"}e.each(n,function(t){var n=[];e.each(d,function(e){"$selected"!==e.index&&e.index&&n.push(t[e.index])}),l+=n.join("	")+"\n"}),o.dom.value=l;break;case"columns":case"column":var a=[],u=r.getDataView(),h=function(n){var o=r.getColumns(n),s=i.getSelectedColumns(n);for(var l in s){var d=o[l];t&&(a.push([]),a[0].push(d.title||"")),d.index&&e.each(u,function(e,n){t&&n++,void 0===a[n]&&(a[n]=[]),a[n].push(e[d.index])})}};r.leftColumns&&h("left"),r.columns&&h("center"),r.rightColumns&&h("right");var l="";e.each(a,function(e){l+=e.join("	")+"\n"}),o.dom.value=l}o.dom.select(),o.dom.focus(),document.execCommand("copy")},initCopyKeys:function(){var e=this,t=Fancy.get(document);t.on("keydown",e.onKeyDownCopy,e)},onKeyDownCopy:function(e){var t=this,n=t.widget,i=e.keyCode,r=Fancy.key;if(n.activated!==!1&&e.ctrlKey)switch(i){case r.C:if(n.celledit&&n.celledit.activeEditor)return;if(n.textSelection)return;t.copy();break;case r.V:}},onColumnDrag:function(){var e=this;setTimeout(function(){e.renderHeaderCheckBox()},100)},disableSelectionMove:function(){var e=this;e.mouseMoveSelection=!1}})}(),function(){var e=Fancy,t=e.GRID_CELL_ACTIVE_CLS,n=e.GRID_CELL_SELECTED_CLS;e.Mixin("Fancy.grid.selection.mixin.Navigation",{initNavigation:function(){this.addEvents("up","down","left","right"),this.onsNav()},onsNav:function(){var e=this,t=Fancy.get(document);t.on("keydown",e.onKeyDown,e)},onKeyDown:function(t){var n=this,i=n.widget,r=t.keyCode,o=Fancy.key;if(i.activated!==!1){if(!n.keyNavigating){var a=e.get(document);a.once("keyup",function(){delete n.keyNavigating})}switch(r){case o.TAB:break;case o.UP:n.keyNavigating=!0,t.preventDefault(),n.moveUp();break;case o.DOWN:n.keyNavigating=!0,t.preventDefault(),n.moveDown();break;case o.LEFT:n.keyNavigating=!0,t.preventDefault(),n.moveLeft();break;case o.RIGHT:n.keyNavigating=!0,t.preventDefault(),n.moveRight()}}},moveRight:function(){var e,i=this,r=i.widget,o=i.getActiveCellInfo(),a=r.getBody(o.side);if(o.columnIndex++,e=a.getCell(o.rowIndex,o.columnIndex),!e.dom)switch(o.side){case"left":r.columns&&(o.columnIndex=0,a=r.getBody("center"),o.side="center",e=a.getCell(o.rowIndex,o.columnIndex));break;case"center":r.rightColumns&&r.rightColumns.length&&(o.columnIndex=0,a=r.getBody("right"),o.side="right",e=a.getCell(o.rowIndex,o.columnIndex));break;case"right":return}if(e.dom){switch(o.side){case"left":var s=r.leftColumns[o.columnIndex];if(s.hidden){for(var l=o.columnIndex,d=r.leftColumns.length,c=!1;d>l;l++)if(s=r.leftColumns[l],!s.hidden){c=!0,o.columnIndex=l;break}if(!c){o.columnIndex--;for(var l=o.columnIndex,d=r.columns.length,c=!1;d>l;l++)if(s=r.columns[l],!s.hidden){c=!0,o.columnIndex=l;break}c&&(o.side="center",a=r.getBody(o.side))}e=a.getCell(o.rowIndex,o.columnIndex)}break;case"center":var s=r.columns[o.columnIndex];if(s.hidden){for(var l=o.columnIndex,d=r.columns.length,c=!1;d>l;l++)if(s=r.columns[l],!s.hidden){c=!0,o.columnIndex=l;break}c||o.columnIndex--,e=a.getCell(o.rowIndex,o.columnIndex)}break;case"right":var s=r.rightColumns[o.columnIndex];if(s.hidden){for(var l=o.columnIndex,d=r.rightColumns.length,c=!1;d>l;l++)if(s=r.rightColumns[l],!s.hidden){c=!0,o.columnIndex=l;break}c||o.columnIndex--,e=a.getCell(o.rowIndex,o.columnIndex)}}switch(i.selModel){case"cell":case"cells":i.clearSelection(),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0);break;case"column":case"columns":i.clearSelection(),i.selectColumn(o.columnIndex,o.side),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0)}}},moveLeft:function(){var e,i=this,r=i.widget,o=i.getActiveCellInfo(),a=r.getBody(o.side);if(o.columnIndex--,o.columnIndex<0)switch(o.side){case"left":return;case"center":if(!r.leftColumns||!r.leftColumns.length)return;o.columnIndex=r.leftColumns.length-1,a=r.getBody("left"),o.side="left",e=a.getCell(o.rowIndex,o.columnIndex);var s=r.leftColumns[o.columnIndex];if(s.hidden)for(var l=o.columnIndex-1,d=!1;l>=0;l--)if(s=r.leftColumns[l],!s.hidden){d=!0,o.columnIndex=l;break}e=a.getCell(o.rowIndex,o.columnIndex);break;case"right":r.columns&&r.columns.length&&(o.columnIndex=r.columns.length-1,a=r.getBody("center"),o.side="center",e=a.getCell(o.rowIndex,o.columnIndex))}else{switch(o.side){case"left":var s=r.leftColumns[o.columnIndex];if(s.hidden){for(var l=o.columnIndex-1,d=!1;l>=0;l--)if(s=r.leftColumns[l],!s.hidden){d=!0,o.columnIndex=l;break}d||o.columnIndex++}break;case"center":var s=r.columns[o.columnIndex];if(s.hidden){for(var l=o.columnIndex-1,d=!1;l>=0;l--)if(s=r.columns[l],!s.hidden){d=!0,o.columnIndex=l;break}if(!d&&(o.columnIndex++,r.leftColumns)){for(var l=r.leftColumns.length-1,d=!1;l>=0;l--)if(s=r.leftColumns[l],!s.hidden){d=!0,o.columnIndex=l;break}d&&(side="left",a=r.getBody(side))}}break;case"right":var s=r.rightColumns[o.columnIndex];if(s.hidden){for(var l=o.columnIndex-1,d=!1;l>=0;l--)if(s=r.rightColumns[l],!s.hidden){d=!0,o.columnIndex=l;break}if(!d){o.columnIndex++;var l=r.columns.length-1,d=!1;for(side="center",a=r.getBody(side);l>=0;l--)if(s=r.columns[l],!s.hidden){d=!0,o.columnIndex=l;break}}}}e=a.getCell(o.rowIndex,o.columnIndex)}if(e.dom)switch(i.selModel){case"cell":case"cells":i.clearSelection(),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0);break;case"column":case"columns":i.clearSelection(),i.selectColumn(o.columnIndex,o.side),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0)}},moveUp:function(){var e,i=this,r=i.widget,o=i.getActiveCellInfo(),a=r.getBody(o.side);if(o.rowIndex--,!(o.rowIndex<0)&&(e=a.getCell(o.rowIndex,o.columnIndex),e.dom))switch(i.selModel){case"cell":case"cells":i.clearSelection(),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0);break;case"row":case"rows":i.clearSelection(),i.selectRow(o.rowIndex),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0)}},moveDown:function(){var e,i=this,r=i.widget,o=i.getActiveCellInfo(),a=r.getBody(o.side);if(o.rowIndex++,e=a.getCell(o.rowIndex,o.columnIndex),e.dom)switch(i.selModel){case"cell":case"cells":i.clearSelection(),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0);break;case"row":case"rows":i.clearSelection(),i.selectRow(o.rowIndex),e.addCls(t,n),r.scroller.scrollToCell(e.dom,!0)}}})}(),function(){var e=Fancy,t=e.get,n=e.GRID_CELL_CLS,i=e.GRID_COLUMN_CLS,r=e.GRID_ROW_EXPAND_CLS,o=e.GRID_ROW_EXPAND_OVER_CLS,a=e.GRID_ROW_EXPAND_SELECTED_CLS,s=e.GRID_ROW_OVER_CLS;e.define("Fancy.grid.plugin.Expander",{extend:e.Plugin,ptype:"grid.expander",inWidgetName:"expander",plusScroll:0,enabledCollapse:!0,constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e._expanded={},e._expandedIds={},e.expandedGroups={},e.initTpl(),e.ons()},ons:function(){var e=this,t=e.widget,n=t.store;t.on("scroll",e.onScroll,e),t.on("beforesort",e.onBeforeSort,e),t.on("changepage",e.onChangePage,e),t.on("filter",e.onFilter,e),t.on("columnresize",e.onColumnReSize,e),t.on("rowdblclick",e.onRowDBlClick,e),t.on("rowtrackenter",e.onRowTrackOver,e),t.on("rowtrackleave",e.onRowTrackLeave,e),t.on("collapse",e.onGroupCollapse,e),t.on("expand",e.onGroupExpand,e),t.on("remove",e.onRemove,e),t.on("render",function(){t.el.on("mouseenter",e.onExpandRowMouseEnter,e,"div."+r),t.el.on("mouseleave",e.onExpandRowMouseLeave,e,"div."+r)}),t.on("select",e.onSelect,e),t.on("clearselect",e.onClearSelect,e),n.on("beforeinsert",e.onBeforeInsert,e),t.on("columndrag",e.onColumnDrag,e),t.on("lockcolumn",e.onLockColumn,e),t.on("rightlockcolumn",e.onRightLockColumn,e),t.on("unlockcolumn",e.onUnLockColumn,e),e.expanded&&(n.proxyType?t.once("load",function(){e.expandAll()}):t.on("init",function(){e.expandAll()}))},expand:function(t){var r=this,o=r.widget,a=o.get(t).id;void 0===r._expandedIds[a]?(r._expandedIds[a]={},r.expandRow(Number(t),a),r.addMargin(Number(t)+1,a)):r.showRow(Number(t),a),delete r._expandedIds[a].hidden,r.reSetTop(),r.reSetPlusScroll();for(var s=o.el.select("."+i+'[grid="'+o.id+'"] .'+n+'[index="'+t+'"] .fancy-checkbox-expander'),l=0,d=s.length;d>l;l++){var c=e.getWidget(s.item(l).attr("id"));c.get()===!1&&c.set(!0,!1)}r.changeSidesSize(),r.onSelect()},collapse:function(e){var t=this,n=t.widget,i=n.scroller,r=n.get(e).id;t.collapseRow(Number(e),r),t.clearMargin(Number(e)+1,r),delete t._expandedIds[r],t.reSetTop(),t.reSetPlusScroll(),t.changeSidesSize(),i.scrollDelta(1),i.scrollRightKnob()},collapseRow:function(t,r){var o=this,a=o.widget,s=o._expandedIds[r];s.el.hide(),s.hidden=!0,a.leftColumns&&s.leftEl.hide(),a.rightColumns&&s.rightEl.hide();for(var l=a.el.select("."+i+'[grid="'+a.id+'"] .'+n+'[index="'+t+'"] .fancy-checkbox-expander'),d=0,c=l.length;c>d;d++){var u=e.getWidget(l.item(d).attr("id"));u.get()===!0&&(u.set(!1,!1),u.collapsedTime=new Date)}},_hideAllSideExpandedRow:function(){var e=this,t=e.widget;for(var n in e._expandedIds){var i=e._expandedIds[n];i.el.hide(),i.hidden=!0,t.leftColumns&&i.leftEl.hide(),t.rightColumns&&i.rightEl.hide()}},expandAll:function(){for(var e=this.widget,t=e.getViewTotal(),n=0;t>n;n++)this.expand(n)},expandRow:function(e,n){var i,o,a=this,s=a.widget,l=t(document.createElement("div")),d=s.getById(n),c=a.prepareData(d),u=-s.scroller.scrollLeft||0,h=s.getCenterFullWidth();if(a.tpl&&(i=a.tpl.getHTML(c),l.update(i)),l.addCls(r),l.css({left:u,width:h}),l.attr("index",e),s.body.el.dom.appendChild(l.dom),a.render&&a.render(l.dom,c,s.getCenterFullWidth()),o=parseInt(l.css("height")),a._expandedIds[n].rowIndex=e,a._expandedIds[n].el=l,a._expandedIds[n].height=o,a._expandedIds[n].width=h,s.leftColumns){var f=t(document.createElement("div"));f.css("left","0px"),f.css("height",o),f.css("width",s.getLeftFullWidth()),f.attr("index",e),f.addCls(r),s.leftBody.el.dom.appendChild(f.dom),a._expandedIds[n].leftEl=f}if(s.rightColumns){var g=t(document.createElement("div"));g.css("left","0px"),g.css("height",o),g.css("width",s.getRightFullWidth()),g.attr("index",e),g.addCls(r),s.rightBody.el.dom.appendChild(g.dom),a._expandedIds[n].rightEl=g}setTimeout(function(){s.scroller.update()},100)},addMargin:function(e,t){var r=this,o=r.widget,a=r._expandedIds[t].height,s=o.el.select("."+i+'[grid="'+o.id+'"] .'+n+'[index="'+e+'"]');s.css("margin-top",a)},clearMargin:function(e){var t=this.widget;t.el.select("."+i+'[grid="'+t.id+'"] .'+n+'[index="'+e+'"]').css("margin-top","0")},onBeforeSort:function(){this.reSet()},onChangePage:function(){this.reSet()},onFilter:function(){this.reSet()},onRemove:function(){this.reSet()},reSet:function(){var e=this,t=e.widget;if(e.enabledCollapse!==!1){for(var n in e._expandedIds){var i=e._expandedIds[n];i.el.destroy(),e.clearMargin(Number(i.rowIndex)+1,n)}e._hideAllSideExpandedRow(),e._expandedIds={},e.reSetTop(),e.reSetPlusScroll(),e.changeSidesSize(),t.scroller.scrollDelta(1),t.setSidesHeight(),setTimeout(function(){t.setSidesHeight()},100)}},showRow:function(e,t){var n=this,i=n.widget,r=n._expandedIds[t];r.el.show(),i.leftColumns&&r.leftEl.show(),i.rightColumns&&r.rightEl.show(),n.addMargin(e+1,t)},getBeforeHeight:function(e){var t=0;for(var n in this._expandedIds){var i=this._expandedIds[n];i.rowIndex<e&&!i.hidden&&"none"!==i.el.css("display")&&(t+=i.height)}return t},reSetTop:function(e){var t=this,n=t.widget,i=n.cellHeight,r=-n.scroller.scrollTop||0,o=-n.scroller.scrollLeft||0;if(n.grouping){t.expandedGroups={};var a=n.grouping.expanded;for(var s in a)t.expandedGroups[s]=t.expandedGroups[s]||{}}for(var s in t._expandedIds){var l=t._expandedIds[s];if("none"!==l.el.css("display")){var d=t.getBeforeHeight(l.rowIndex),c=t.getDisplayedRowsBefore(l,s),u=r+c*i+d;if(n.grouping){var h=s,f=n.grouping.getGroupById(h),g=n.grouping.getGroupOrderIndex(f);"none"!==l.el.css("display")&&(t.expandedGroups[f]=t.expandedGroups[f]||{},t.expandedGroups[f][s]=l,u+=(g+1)*n.groupRowHeight)}l.el.css({top:u,left:o}),n.leftColumns&&l.leftEl.css("top",u),n.rightColumns&&l.rightEl.css("top",u)}}n.grouping&&e!==!1&&(n.grouping.setPositions(),n.grouping.setExpanderCellsPosition())},getDisplayedRowsBefore:function(e,t){var n=this.widget;if(n.grouping){var i=0;return"none"!==e.el.css("display")&&(i=n.store.getRow(t)),i+1}return e.rowIndex+1},onScroll:function(){this.reSetTop()},reSetPlusScroll:function(){var e=this,t=e.widget;e.plusScroll=e.getPlusHeight(),t.scroller.setRightKnobSize(),setTimeout(function(){t.scroller.isRightScrollable()===!1&&t.scroller.scroll(0)},1)},getPlusHeight:function(){var e=this,t=0;for(var n in e._expandedIds){var i=e._expandedIds[n];i.hidden||"none"===i.el.css("display")||(t+=i.height)}return e.plusHeight=t,e.plusHeight},onColumnReSize:function(){var e=this,t=e.widget;for(var n in e._expandedIds){var i=e._expandedIds[n],r=t.getCenterFullWidth();i.el.css("width",r)}},prepareData:function(e){var t=this,n=t.widget,i=e.data;return t.dataFn&&(i=t.dataFn(n,i)),i},changeSidesSize:function(){var e=this.widget;e.setSidesHeight(),e.scroller.checkRightScroll()},onRowDBlClick:function(e,t){var n=this,i=n.widget,r=Number(t.rowIndex),o=t.id,a=n._expandedIds[o];return i.edit?void i.un("rowdblclick",n.onRowDBlClick,n):void(void 0===a?n.expand(r):a.hidden===!0&&"none"===a.el.css("display")?n.expand(r):n.collapse(r))},onRowTrackOver:function(e,t){var n=this,i=n.widget,r=n._expandedIds[t.id];r&&(r.el.addCls(o),i.leftColumns&&r.leftEl.addCls(o),i.rightColumns&&r.rightEl.addCls(o))},onRowTrackLeave:function(e,t){var n=this,i=n.widget,r=n._expandedIds[t.id];r&&(r.el.removeCls(o),i.leftColumns&&r.leftEl.removeCls(o),i.rightColumns&&r.rightEl.removeCls(o))},onExpandRowMouseEnter:function(e){var a=this,l=a.widget,d=l.scroller,c=t(e.currentTarget),u=c.attr("index");l.el.select("."+r+'[index="'+u+'"]').addCls(o),!l.trackOver||d.bottomKnobDown||d.rightKnobDown||l.el.select("."+i+'[grid="'+l.id+'"] .'+n+'[index="'+u+'"]').addCls(s)},onExpandRowMouseLeave:function(e){var a=this,l=a.widget,d=l.scroller,c=t(e.currentTarget),u=c.attr("index");l.el.select("."+r+'[index="'+u+'"]').removeCls(o),!l.trackOver||d.bottomKnobDown||d.rightKnobDown||l.el.select("."+i+'[grid="'+l.id+'"] .'+n+'[index="'+u+'"]').removeCls(s)},onSelect:function(){var e=this,t=e.widget,n=t.selection;if(n&&(n.row||n.rows)){e.onClearSelect(),n=t.getSelection(!0);for(var i=n.rows,o=0,s=i.length;s>o;o++){var l=i[o];t.el.select("."+r+'[index="'+l+'"]').addCls(a)}}},onClearSelect:function(){var e=this,t=e.widget,n=t.selection;if(n.row||n.rows){n=t.getSelection(!0);for(var i={},o=n.rows,s=0,l=o.length;l>s;s++)i[o[s]]=!0;for(var d=t.el.select("."+a),s=0,l=d.length;l>s;s++){var c=d.item(s).attr("index");i[c]||t.el.select("."+r+'[index="'+c+'"]').removeCls(a)}}},onGroupCollapse:function(e,t,n){var i=this,r=i.widget,o=i.expandedGroups;if(o[n]){var a=o[n];for(var s in a){var l=a[s];i._expandedIds[s]&&delete i._expandedIds[s],l.el.hide(),l.leftEl.dom&&l.leftEl.hide(),l.rightEl.dom&&l.rightEl.hide()}}i.reSetTop(!1),i.reSetIndexes(),setTimeout(function(){r.grouping.setExpanderCellsPosition()},1)},onGroupExpand:function(e,t,n){var i=this,r=i.widget;i.reSetTop(!1),i.reSetIndexes(),setTimeout(function(){r.grouping.setExpanderCellsPosition()},1)},reSetIndexes:function(){var e=this,t=e.widget,n=t.store;for(var i in e._expandedIds)e._expandedIds[i].rowIndex=n.getRow(i)},onAdd:function(){this.reSet()},onBeforeInsert:function(){this.reSet()},onColumnDrag:function(){this.reSet(),this.clearExpandedCheckBoxes()},onLockColumn:function(){this.reSet(),this.clearExpandedCheckBoxes()},onRightLockColumn:function(){this.reSet(),this.clearExpandedCheckBoxes()},onUnLockColumn:function(){this.reSet(),this.clearExpandedCheckBoxes()},clearExpandedCheckBoxes:function(){var e=this,t=e.widget;t.el.select(".fancy-checkbox-expander.fancy-checkbox-on").each(function(e){var t=e.attr("id"),n=Fancy.getWidget(t);n.setValue(!1,!1)})}})}(),Fancy.define("Fancy.grid.plugin.GroupHeader",{extend:Fancy.Plugin,ptype:"grid.groupheader",inWidgetName:"groupheader",constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){}}),function(){var e=Fancy,t=Fancy.each,n=e.GRID_ROW_GROUP_INNER_CLS,r=e.GRID_ROW_GROUP_CLS,o=e.GRID_ROW_GROUP_COLLAPSED_CLS,a=e.GRID_CELL_CLS;e.define("Fancy.grid.plugin.Grouping",{extend:e.Plugin,ptype:"grid.grouping",inWidgetName:"grouping",tpl:"{text}:{number}",_renderFirstTime:!0,constructor:function(e){this.Super("const",arguments)},init:function(){var e=this,t=e.widget;e.Super("init",arguments),e._expanded={},e.initTpl(),e.initGroups(),e.initOrder(),e.calcPlusScroll(),e.configParams(),e.ons(),!e.collapsed&&t.store.data&&setTimeout(function(){t.store.changeDataView({doNotFired:!0}),t.update()},100)},ons:function(){var e=this,t=e.widget,n=t.store;t.once("render",function(){e.renderGroupedRows(),e.update(),t.el.on("click",e.onClick,e,"div."+r),t.el.on("mousedown",e.onMouseDown,e,"div."+r),t.on("scroll",e.onScroll,e),t.on("columnresize",e.onColumnResize,e),n.on("insert",e.onInsert,e),n.on("remove",e.onRemove,e),t.on("columndrag",e.onColumnDrag,e)})},onInsert:function(){this.reGroup()},onRemove:function(){var e=this,n=e.widget,i=n.store,r=e.groups;if(e.initGroups(),e.update(),e.updateGroupRowsText(),r.length>e.groups.length){var o;t(r,function(t,n){return t!==e.groups[n]?(o=t,!0):void 0}),delete i.expanded[o],delete e.expanded[o],delete e._expanded[o]}},initGroups:function(e){var t=this,n=t.widget,i=n.store,r=i.initGroups(e);t.groups=r.groups,t.groupsCounts=r._groups},getGroupById:function(e){var t=this.widget,n=t.store;return n.groupMap[e]},getGroupOrderIndex:function(e){for(var t=this.groups,n=0,i=t.length;i>n;n++)if(t[n]===e)return n},initOrder:function(){var n,i,r=this,o=r.widget,a=o.store,s=[],l={},d=[];if(r.order&&0!==r.order.length)switch(e.typeOf(r.order)){case"string":break;case"array":}else for(s=r.groups,n=0,i=s.length,t(s,function(e){var t=e.toLocaleUpperCase();l[t]=e,d.push(t)}),d=d.sort();i>n;n++)s[n]=l[d[n]];r.groups=s,a.changeOrderByGroups(s,r.by)},calcPlusScroll:function(){var e=this.widget;this.plusScroll=this.groups.length*e.groupRowHeight},configParams:function(){var e=this,n=e.widget,i=n.store;e.expanded=e.expanded||{},i.expanded=i.expanded||{},e.collapsed?i.collapsed=!0:t(e.groups,function(t){void 0===e.expanded[t]&&(i.expanded[t]=!0,e.expanded[t]=!0,e._expanded[t]=!0)})},renderGroupedRows:function(){var e,n=this,i=n.widget,r=i.body,o=i.leftBody,a=i.rightBody,s=i.getCenterFullWidth(),l=i.getLeftFullWidth(),d=i.getRightFullWidth(),c=0;t(n.groups,function(t){var u=n.groupsCounts[t];l?(e=n.generateGroupRow(t,u,!0,c),e.css("width",l),o.el.dom.appendChild(e.dom),e=n.generateGroupRow(t,u,!1,c),e.css("width",s),r.el.dom.appendChild(e.dom)):(e=n.generateGroupRow(t,u,!0,c),e.css("width",s),r.el.dom.appendChild(e.dom)),d&&(e=n.generateGroupRow(t,u,!1,c),e.css("width",d),a.el.dom.appendChild(e.dom)),n.collapsed&&(c+=i.groupRowHeight)})},removeGroupRows:function(){var e=this,t=e.widget,n=t.columns,i=t.leftColumns,o=t.rightColumns,a=t.body,s=t.leftBody,l=t.rightBody;n.length&&a.el.select("."+r).remove(),i.length&&s.el.select("."+r).remove(),o.length&&l.el.select("."+r).remove()},removeLastGroupRow:function(){var e=this,t=e.widget,n=t.columns,i=e.groups,o=i.length,a=t.leftColumns,s=t.rightColumns,l=t.body,d=t.leftBody,c=t.rightBody;if(n.length){var u=l.el.select("."+r).item(o);u.remove()}a.length&&d.el.select("."+r).item(o).remove(),s.length&&c.el.select("."+r).item(o).remove()},removeCells:function(){var e=this,t=e.widget,n=t.columns,i=t.leftColumns,r=t.rightColumns,o=t.body,s=t.leftBody,l=t.rightBody;n.length&&o.el.select("."+a).remove(),i.length&&s.el.select("."+a).remove(),r.length&&l.el.select("."+a).remove()},generateGroupRow:function(t,i,a,s){var l=this,d=e.get(document.createElement("div"));if(d.addCls(r),d.attr("group",t),a){var c=l.tpl.getHTML({text:t,number:i});d.update('<div class="'+n+'"> '+c+"</div>")}return l.collapsed?(d.css("top",s+"px"),d.addCls(o)):d.css("top","0px"),d},insertGroupEls:function(){var e=this,t=e.widget,o=t.leftBody,a=t.body;t.leftColumns.length?o.el.select("."+r).each(function(t){var r=e.groups[i];t.update('<div class="'+n+'">'+r+"</div>")}):a.el.select("."+r).each(function(t,i){var r=e.groups[i],o=e.groupsCounts[r],a=e.tpl.getHTML({text:r,number:o});t.update('<div class="'+n+'">'+a+"</div>")})},onClick:function(t){var n,i=this,a=i.widget,s=e.get(t.currentTarget),l=s.attr("group");a.el.select("."+r+'[group="'+l+'"]').toggleCls(o),n=s.hasCls(o),n?i.collapse(i.by,l):i.expand(i.by,l),i.update()},fastCollapse:function(){},onMouseDown:function(e){e.preventDefault()},onScroll:function(){this.setPositions()},collapse:function(e,t){var n=this,i=n.widget,r=i.store;r.collapse(e,t),delete n._expanded[t],delete n.expanded[t],i.fire("collapse",e,t)},expand:function(e,t){var n=this,i=n.widget,r=i.store;r.expand(e,t),n._expanded[t]=!0,n.expanded[t]=!0,i.fire("expand",e,t)},setPositions:function(){var e=this,n=e.widget,i=-n.scroller.scrollTop||0,o=n.leftBody.el.select("."+r),a=n.body.el.select("."+r),s=n.rightBody.el.select("."+r);t(e.groups,function(t,r){if(o.length&&o.item(r).css("top",i+"px"),a.length&&a.item(r).css("top",i+"px"),s.length&&s.item(r).css("top",i+"px"),n.expander){var l=n.expander.expandedGroups[t];for(var d in l){var c=l[d];i+=parseInt(c.el.css("height"))}}i+=n.groupRowHeight,e._expanded[t]===!0&&(i+=e.groupsCounts[t]*n.cellHeight)})},setCellsPosition:function(e,n){for(var i,r,o=this,a=o.widget,s=0,l=o.groups.length,d=0,c=a.body,u=a.leftBody,h=a.rightBody,f=0,g=a.groupRowHeight,p=[],m={},v={},y=o.by;l>s;s++){var C=o.groups[s];if(o._expanded[C]===!0){if(p.push(f),m[f]=!0,void 0===n||"center"===n)if(d=0,i=a.columns.length,void 0!==e&&(d=e,i=e+1),a.expander){var w=a.get(f),b=w.get(y),x=a.expander.expandedGroups,S=o.getGroupOrderIndex(C),E=0;for(var I in x){var T=o.getGroupOrderIndex(I);if(!(T>=S)){var L=x[I];for(var F in L){var _=L[F];if("none"!==_.el.css("display")&&!v[F]){var D=f-1;0>f&&(f=0),D=a.get(D);var k=D.get(y);b!==k?D.id===F&&(v[F]=!0,E+=parseInt(_.el.css("height"))):(v[F]=!0,E+=parseInt(_.el.css("height")))}}}}for(g+=E,r=c.getCell(f,d);i>d;d++)r=c.getCell(f,d),r.css("margin-top",g+"px")}else for(;i>d;d++)r=c.getCell(f,d),r.css("margin-top",g+"px");if(void 0===n||"left"===n)for(d=0,i=a.leftColumns.length,void 0!==e&&(d=e,i=e+1);i>d;d++)r=u.getCell(f,d),r.css("margin-top",g+"px");if(void 0===n||"right"===n)for(d=0,i=a.rightColumns.length,void 0!==e&&(d=e,i=e+1);i>d;d++)r=h.getCell(f,d),r.css("margin-top",g+"px");f+=o.groupsCounts[C],g=a.groupRowHeight}else g+=a.groupRowHeight}if(o._renderFirstTime)o._renderFirstTime=!1;else{var R=[];t(o.prevRows,function(e){m[e]!==!0&&R.push(e)}),o.clearMargins(R)}o.prevRows=p},setExpanderCellsPosition:function(){var e,n,i=this,r=i.widget,o=r.store,a=o.dataView,s=r.body,l=r.leftBody,d=r.rightBody,c=r.expander.expandedGroups,u=i.groupsCounts,h=r.groupRowHeight,f=0,g=0;t(i.groups,function(o){if(i._expanded[o]===!0){for(var p=f+u[o];p>f;f++)if(n=a[f]){var m=n.id,v=c[o][m];g&&(h+=g,g=0),v&&(g=parseInt(v.el.css("height"))),t(r.columns,function(t,n){e=s.getCell(f,n),e.css("margin-top",h+"px")}),t(r.leftColumns,function(t,n){e=l.getCell(f,n),e.css("margin-top",h+"px")}),t(r.rightColumns,function(t,n){e=d.getCell(f,n),e.css("margin-top",h+"px")}),h=0}h=r.groupRowHeight}else h+=r.groupRowHeight})},clearMargins:function(e){var n=this,e=e||n.prevRows;if(void 0!==e){var i,r=n.widget,o=r.body,a=r.leftBody,s=r.rightBody;t(e,function(e){t(r.columns,function(t,n){return i=o.getCell(e,n),void 0===i.dom?!0:void i.css("margin-top","0px")}),t(r.leftColumns,function(t,n){return i=a.getCell(e,n),void 0===i.dom?!0:void i.css("margin-top","0px")}),t(r.rightColumns,function(t,n){return i=s.getCell(e,n),void 0===i.dom?!0:void i.css("margin-top","0px")})})}},onColumnResize:function(){this.updateGroupRows()},updateGroupRows:function(){var e=this,t=e.widget,n=t.leftColumns,i=t.rightColumns,o=t.body,a=t.leftBody,s=t.rightBody,l=0;l+=t.getCenterFullWidth(),o.el.select("."+r).css("width",l+"px"),l+=t.getLeftFullWidth(),n.length&&a.el.select("."+r).css("width",l+"px"),l+=t.getRightFullWidth(),i.length&&s.el.select("."+r).css("width",l+"px")},update:function(e){var t=this,n=t.widget,i=n.store;e||i.loading!==!0&&i.autoLoad!==!1||i.data.length?e&&i.data.length&&i.loadedTimes>1?t.reGroup():(t.setPositions(),n.update(),n.scroller.update(),t.setCellsPosition(),n.setSidesHeight()):i.on("load",function(){t.initGroups(),t.initOrder(),t.calcPlusScroll(),t.configParams(),i.changeDataView({doNotFired:!0}),t.renderGroupedRows(),t.update(!0)},t)},getOffsetForRow:function(e){var n=this,i=n.widget,r=0,o=0;return t(n.groups,function(t){return r+=i.groupRowHeight,n._expanded[t]===!0&&(o+=n.groupsCounts[t]),o>e?!0:void 0}),r},getSpecialRowsUnder:function(e){var n=this,i=n.widget,r=0,o=0,a=0;return t(n.groups,function(t){o>e&&a++,r+=i.groupRowHeight,n._expanded[t]===!0&&(o+=n.groupsCounts[t])}),a},getSpecialRowsAbove:function(e){var t=this,n=t.widget,i=n.get(e),r=t.getGroupById(i.id),o=0;return Fancy.each(t.groups,function(e){return o++,r===e?!0:void 0}),o},reGroup:function(){var e=this,t=e.widget,n=t.store,i="data";e.expanded={},e._expanded={},t.store.expanded={},t.store.dataView=[],e.collapsed=!0,t.store.filteredData&&(i="filteredData"),e.removeGroupRows(),e.removeCells(),e.initGroups(i),n.remoteFilter&&e.initOrder(),e.calcPlusScroll(),e.configParams(),e.renderGroupedRows(),t.setSidesHeight()},scrollLeft:function(e){this.widget.body.el.select("."+r).css("left",e)},updateGroupRowsText:function(){var e=this,i=e.widget,a=e.groups,s=i.leftBody,l=i.body,d=i.rightBody,c=s.el.select("."+n),u=l.el.select("."+n),h=s.el.select("."+r),f=l.el.select("."+r),g=d.el.select("."+r);t(a,function(t,n){var r,a=e.groupsCounts[t],s=e.tpl.getHTML({text:t,number:a});i.leftColumns.length?(c.item(n).update(s),r=h.item(n),r.attr("group",t),e.expanded[t]?r.removeClass(o):r.addClass(o)):(u.item(n).update(s),r=f.item(n),e.expanded[t]?r.removeClass(o):r.addClass(o)),f.item(n).attr("group",t),i.rightColumns.length&&g.item(n).attr("group",t)}),a.length<l.el.select("."+r).length&&setTimeout(function(){e.removeLastGroupRow()},10)},onColumnDrag:function(){var e=this,t=e.widget,n=t.el.select("."+r),i=t.el.select("."+r+":not(."+o+")"),a={};if(i.each(function(e){a[e.attr("group")]=!0}),!t.leftColumns.length&&n.length){n.destroy(),e.renderGroupedRows(),e.update();for(var s in a){var l=t.el.select("."+r+'[group="'+s+'"]');l.removeCls(o)}}}})}(),function(){var e=Fancy,t=e.get(document),n=e.HIDDEN_CLS,i=e.GRID_HEADER_CELL_CLS,r=e.GRID_HEADER_CELL_TEXT_CLS,o=e.GRID_HEADER_CELL_TRIGGER_CLS,a=e.GRID_HEADER_CELL_TRIGGER_IMAGE_CLS,s=e.GRID_HEADER_CELL_GROUP_LEVEL_1_CLS,l=e.GRID_HEADER_CELL_GROUP_LEVEL_2_CLS,d=e.GRID_STATE_DRAG_COLUMN_CLS,c=e.FIELD_TEXT_INPUT_CLS,u=e.FIELD_CHECKBOX_INPUT_CLS;e.define("Fancy.grid.plugin.ColumnDrag",{extend:e.Plugin,ptype:"grid.columndrag",inWidgetName:"columndrag",activeSide:void 0,activeCell:void 0,activeIndex:void 0,activeColumn:void 0,inCell:void 0,inIndex:void 0,inSide:void 0,ok:!1,status:"none",constructor:function(e){this.Super("const",arguments)},init:function(){var e=this,t=e.widget;e.Super("init",arguments),t.on("render",function(){e.ons(),e.initHint()})},ons:function(){var e=this,t=e.widget;t.el.on("mousedown",e.onMouseDownCell,e,"div."+i)},onMouseDownCell:function(n){var r=this,d=r.widget,h=Fancy.get(n.currentTarget),f=Number(h.attr("index")),g=d.getSideByCell(h),p=d.getColumns(g),m=p[f],v=e.get(n.target);v.hasCls(o)||v.hasCls(a)||v.hasCls(c)||v.hasCls(u)||(h.hasCls(l)&&(r.activeCellTopGroup=r.getGroupStartEnd(h,g),r.activeCellTopGroup.cell=h),d.startResizing||(r.activeCellTopGroup||m.draggable!==!1)&&(h.hasCls(s)&&(r.activeUnderGroup=!0),r.activeSide=g,r.inSide=g,r.activeCell=h,r.inCell=h,r.activeIndex=Number(h.attr("index")),r.inIndex=r.activeIndex,r.activeColumn=p[r.activeIndex],r.mouseDownX=n.pageX,r.mouseDownY=n.pageY,t.once("mouseup",r.onMouseUp,r),t.on("mousemove",r.onMouseMove,r),d.el.on("mouseleave",r.onMouseLeave,r),d.el.on("mouseenter",r.onMouseEnterCell,r,"div."+i),d.el.on("mousemove",r.onMouseMoveCell,r,"div."+i)))},onMouseLeave:function(){this.hideHint()},onMouseUp:function(){var n=this,r=n.widget,o=!1;if(t.un("mousemove",n.onMouseMove,n),r.el.un("mouseleave",n.onMouseLeave,n),r.el.un("mouseenter",n.onMouseEnterCell,n,"div."+i),r.el.un("mousemove",n.onMouseMoveCell,n,"div."+i),n.ok){if(n.inSide===n.activeSide)n.dragColumn(n.inSide);else if("center"===n.activeSide){var a=n.inIndex;"right"===n.okPosition&&a++,r.moveColumn(n.activeSide,n.inSide,n.activeIndex,a,n.activeCellTopGroup)}else{var a=n.inIndex;"right"===n.okPosition&&a++,r.moveColumn(n.activeSide,n.inSide,n.activeIndex,a,n.activeCellTopGroup)}o=!0}delete n.inUpGroupCell,delete n.inUnderGroup,delete n.activeCellTopGroup,delete n.activeUnderGroup,delete n.activeSide,delete n.activeCell,delete n.activeIndex,delete n.activeIndex,delete n.activeColumn,delete n.mouseDownX,delete n.mouseDownY,n.ok=!1,delete n.okPosition,e.tip.hide(),setTimeout(function(){n.status="none"},1),n.removeDragState(),"dragging"===n.status&&setTimeout(function(){n.status="none",o&&(r.fire("columndrag"),r.scroller.update(),r.sorter&&r.sorter.updateSortedHeader())},10),n.hideHint(),setTimeout(function(){r.updateColumnsVisibilty()},100)},onMouseMove:function(t){var n=this,i=n.widget,s=i.header,l=i.leftHeader,d=i.rightHeader,c=t.pageX,u=t.pageY,h=i.getColumns(n.activeSide),f=e.get(t.target);if(!f.hasCls(o)&&!f.hasCls(a)&&(Math.abs(c-n.mouseDownX)>10||Math.abs(u-n.mouseDownY))){if(n.activeCellTopGroup?(e.tip.update(n.activeCellTopGroup.cell.select("."+r).item(0).dom.innerHTML||"&nbsp;"),n.status="dragging",n.addDragState()):(e.tip.update(n.activeColumn.title||"&nbsp;"),n.status="dragging",n.addDragState()),1===h.length&&"center"===n.activeSide)return e.tip.hide(),setTimeout(function(){n.status="none"},1),void n.removeDragState();e.tip.show(t.pageX+15,t.pageY+15),s.hideMenu&&(s.hideMenu(),i.leftColumns&&l.hideMenu()&&l.hideMenu(),i.rightColumns&&d.hideMenu()&&d.hideMenu())}},addDragState:function(){var e=this,t=e.widget;t.el.addClass(d)},removeDragState:function(){var e=this,t=e.widget;t.el.removeClass(d)},onMouseEnterCell:function(e){var t=this,n=t.widget,i=Fancy.get(e.currentTarget),r=n.getSideByCell(i);t.hideHint(),i.hasCls(s)?t.inUnderGroup=!0:delete t.inUnderGroup,i.hasCls(l)?t.inUpGroupCell=i:delete t.inUpGroupCell,t.inSide=r,t.inCell=i,t.inIndex=Number(i.attr("index"))},onMouseMoveCell:function(e){var t=this,n=t.widget,i=t.inCell,r=parseInt(i.css("width")),a=i.select("."+o),s=Fancy.get(e.target),l=a.within(s)||s.hasClass(o),d=t.activeUnderGroup!==t.inUnderGroup&&t.inUnderGroup===!0,c=t.activeUnderGroup!==t.inUnderGroup&&t.activeUnderGroup===!0,u=n.getColumns(t.activeSide);if(1===u.length&&"center"===t.activeSide)return t.ok=!1,void t.hideHint();if(t.activeCellTopGroup)if(t.inUpGroupCell);else{var h=t.activeCellTopGroup.start,f=t.activeCellTopGroup.end;t.activeSide!==t.inSide?(t.ok=!0,e.offsetX>r/2||l?t.showHint("right"):t.showHint("left")):isNaN(t.inIndex)?t.hideHint():t.inIndex<h?e.offsetX>r/2?t.inIndex+1===h?t.hideHint():(t.ok=!0,t.showHint("right")):(t.ok=!0,t.showHint("left")):t.inIndex>f?e.offsetX<r/2?t.inIndex===f+1?t.hideHint():(t.ok=!0,t.showHint("left")):(t.ok=!0,t.showHint("right")):t.hideHint()}else if(t.inUpGroupCell){var g=t.getGroupStartEnd(),h=g.start,f=g.end;t.activeSide!==t.inSide?(t.ok=!0,e.offsetX>r/2||l?t.showHint("right"):t.showHint("left")):e.offsetX>r/2?t.activeIndex>f&&t.activeIndex-1===f?t.hideHint():(t.ok=!0,t.showHint("right")):t.activeIndex<h&&t.activeIndex+1===h?t.hideHint():(t.ok=!0,t.showHint("left"))}else t.activeSide!==t.inSide?(t.ok=!0,e.offsetX>r/2||l?t.showHint("right"):t.showHint("left")):t.activeIndex===t.inIndex?t.ok=!1:t.activeIndex<t.inIndex?e.offsetX>r/2||l?(t.ok=!0,t.showHint("right")):e.offsetX<r/2&&t.activeIndex+1!==t.inIndex?(t.ok=!0,t.showHint("left")):t.activeIndex+1===t.inIndex&&(d||c)?(t.ok=!0,t.showHint("left")):(t.ok=!1,t.hideHint()):t.activeIndex>t.inIndex&&(e.offsetX<r/2?l?d||c?(t.ok=!0,t.showHint("right")):t.activeIndex-1===t.inIndex||t.inUpGroupCell?(t.ok=!1,t.hideHint()):(t.ok=!0,t.showHint("right")):(t.ok=!0,t.showHint("left")):e.offsetX>r/2?t.activeIndex-1===t.inIndex&&(d||c)?(t.ok=!0,t.showHint("right")):t.activeIndex-1!==t.inIndex||t.activeUnderGroup?(t.ok=!0,t.showHint("right")):(t.ok=!1,t.hideHint()):(t.ok=!1,t.hideHint()))},showHint:function(t){var i=this,r=i.widget,o=r.cellHeaderHeight,a=i.inCell,s=i.topEl,l=i.bottomEl,d=a.offset(),c=parseInt(a.css("width")),u=parseInt(a.css("height"));i.okPosition=t,s.removeCls(n),l.removeCls(n);var h=0;"right"===t&&(h+=c),s.css({left:d.left+h-Math.ceil(parseInt(s.css("width"))/2),top:d.top-parseInt(s.css("height"))});var f=d.top+u;if(i.inUpGroupCell){var g=r.header.calcRows();f=d.top+g*o}if(l.css({left:d.left+h-Math.ceil(parseInt(l.css("width"))/2),top:f}),r.window){var p=1e3+e.zIndex++;s.css("z-index",p),l.css("z-index",p)}},hideHint:function(){var e=this;e.topEl.addCls(n),e.bottomEl.addCls(n)},initHint:function(){var t=this,i=t.widget,r="fancy-theme-"+i.theme,o=e.get(document.body).dom,a=e.get(document.createElement("div")),s=e.get(document.createElement("div"));a.addCls("fancy-drag-hint-top",n,r),s.addCls("fancy-drag-hint-bottom",n,r),t.topEl=e.get(o.appendChild(a.dom)),t.bottomEl=e.get(o.appendChild(s.dom))},dragColumn:function(e){var t=this,n=t.widget,i=n.getHeader(e),r=n.getBody(e),o=t.activeIndex,a=t.inIndex,s=t.okPosition,l=n.getColumns(e),d=l[o],c=i.calcRows();if(t.activeCellTopGroup){var u=t.activeCellTopGroup.start,h=t.activeCellTopGroup.end,f=l.splice(u,h-u+1),a=t.inIndex;"right"===s&&a++,l=t.inIndex<u?Fancy.Array.insert(l,a,f):Fancy.Array.insert(l,a-f.length,f),n.setColumns(l,e)}else if(t.inUpGroupCell){var g=t.getGroupStartEnd();a=g.start,"right"===s&&(a=g.end+1)}else if("right"===s)if(t.inUnderGroup){var p=l[a].grouping,m=l[a+1];m&&m.grouping===p&&a++}else a++;if(n.groupheader&&!t.activeCellTopGroup){var v=l[a];v&&v.grouping&&t.inUnderGroup?(d.grouping=v.grouping,d.filter&&d.filter.header&&3>c&&delete d.filter):delete d.grouping}t.activeCellTopGroup||(l.splice(o,1),a>o&&a--,l.splice(a,0,d)),r.clearColumnsStyles(),i.updateTitles(),i.updateCellsSizes(),i.reSetCheckBoxes(),n.groupheader&&(n.header.fixGroupHeaderSizing(),n.leftColumns&&n.leftHeader.fixGroupHeaderSizing(),n.rightColumns&&n.rightHeader.fixGroupHeaderSizing(),i.reSetGroupIndexes()),setTimeout(function(){i.reSetColumnsAlign(),i.reSetColumnsCls(),r.reSetColumnsAlign(),r.reSetColumnsCls(),r.updateColumnsSizes()},100),n.update()},getGroupStartEnd:function(t,n){var i=this,r=i.widget,o=r.getHeader(n||i.inSide),a=(t||i.inUpGroupCell).attr("index"),s=o.el.select('[group-index="'+a+'"]'),l=[];return s.each(function(e){l.push(Number(e.attr("index")))}),{start:e.Array.min(l),end:e.Array.max(l)}}})}(),function(){var e=Fancy,t=e.GRID_CELL_CLS,n=e.GRID_CELL_INNER_CLS,i=e.GRID_CELL_EVEN_CLS,r=e.GRID_ROW_SUMMARY_CLS,o=e.GRID_ROW_SUMMARY_CONTAINER_CLS,a=e.GRID_ROW_SUMMARY_BOTTOM_CLS,s=e.GRID_COLUMN_SPARKLINE_CLS,l=e.GRID_COLUMN_SPARKLINE_BULLET_CLS,d=e.GRID_COLUMN_SPARK_PROGRESS_DONUT_CLS,c=e.GRID_COLUMN_GROSSLOSS_CLS,u=e.ANIMATE_DURATION;e.define("Fancy.grid.plugin.Summary",{extend:e.Plugin,ptype:"grid.summary",inWidgetName:"summary",position:"top",sumDisplayed:!0,topOffSet:0,bottomOffSet:0,striped:!1,constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.once("render",function(){e.calcOffSets()}),t.once("init",function(){e.render(),e.update(),t.on("update",function(){e.update()}),t.on("set",function(){e.update()})}),t.on("columnresize",e.onColumnResize,e),e.sumDisplayed&&t.on("changepage",e.onChangePage,e),t.on("columndrag",e.onColumnDrag,e)},render:function(){var e,t=this,n=t.widget,i=n.body,r=n.leftBody,o=n.rightBody,a=n.getCenterFullWidth(),s=n.getLeftFullWidth(),l=n.getRightFullWidth(),d="top"===t.position?"before":"after";e=t.generateRow("center"),e.css("width",n.startWidths.center),e.firstChild().css("width",a),e.css("height",n.cellHeight),e.firstChild().css("height",n.cellHeight),t.el=e,i.el[d](e.dom),s&&(e=t.generateRow("left"),e.css("width",s-2),e.firstChild().css("width",s),e.css("height",n.cellHeight),t.leftEl=e,r.el[d](e.dom)),l&&(e=t.generateRow("right"),e.css("width",l-1),e.firstChild().css("width",l),e.css("height",n.cellHeight),t.rightEl=e,o.el[d](e.dom))},generateRow:function(i){var s=this,l=s.widget,d=l.cellHeight,c=l.getColumnsWidth(i),u=e.get(document.createElement("div")),h="";e.each(l.getColumns(i),function(e){h+=['<div style="width:'+e.width+"px;height:"+d+"px;"+(e.cellAlign?"text-align:"+e.cellAlign+";":"")+'" class="'+t+'">','<div class="'+n+'"></div>',"</div>"].join("")});var f=['<div style="position: relative;" class="'+r+'">',h,"</div>"].join("");return u.update(f),u.css("width",c+"columnsWidth"),u.addCls(o),"bottom"===s.position&&u.addCls(a),u},calcPlusScroll:function(){var e=this,t=e.widget;e.plusScroll=e.groups.length*t.groupRowHeight},scrollLeft:function(e){this.el.firstChild().css("left",e)},update:function(){var e=this,n=e.widget;if(e.updateSide("center"),n.leftColumns.length&&e.updateSide("left"),n.rightColumns.length&&e.updateSide("right"),e.striped&&"bottom"===e.position){var r=n.el.select("."+a+" ."+t);n.getViewTotal()%2===1?r.addCls(i):r.removeCls(i)}},getEl:function(e){var t=this;switch(e){case"center":return t.el;case"left":return t.leftEl;case"right":return t.rightEl;default:return t.el}},updateSide:function(t){var i=this,r=i.widget,o=r.body,a=r.store,u=i.getEl(t).select("."+n),h="data";i.sumDisplayed&&(h="dataView"),e.each(r.getColumns(t),function(t,n){if(t.summary){var i=t.index,f=a.getColumnOriginalValues(i,{smartIndexFn:t.smartIndexFn,dataProperty:h}),g="",p=u.item(n).parent();switch(e.typeOf(t.summary)){case"string":g=e.Array[t.summary](f);break;case"object":g=e.Array[t.summary.type](f),t.summary.fn&&(g=t.summary.fn(g));break;case"function":g=t.summary(f)}switch(t.type){case"sparklineline":case"sparklinebar":case"sparklinetristate":case"sparklinebullet":case"sparklinebox":case"sparklinepie":case"sparklinediscrete":p.addCls(s);var m,v=t.width,y=r.cellHeight-1,C=v-20,w=t.type.replace("sparkline","");switch(w){case"line":case"pie":case"box":m="width";break;case"bullet":m="width",y-=11,p.addCls(l);break;case"discrete":m="width",C=v,y-=2;break;case"bar":case"tristate":m="barWidth"}var b=t.sparkConfig||{},x={type:w,fillColor:"transparent",height:y};e.apply(x,b),("bar"===w||"tristate"===w)&&(C=v-20,C/=g.length),x[m]=C,u.item(n).$dom.sparkline(g,x);break;case"progressdonut":p.addCls(d);var x=t.sparkConfig||{};e.apply(x,{renderTo:u.item(n).dom,value:g}),x.size||x.height||x.width||(x.size=r.cellHeaderHeight-6),e.get(x.renderTo).update(""),new e.spark.ProgressDonut(x);break;case"grossloss":p.addCls(c);var x=t.sparkConfig||{};x.showOnMax&&(x.maxValue=Math.max.apply(Math,f)),g>50&&(g=50),e.apply(x,{renderTo:u.item(n).dom,value:g,column:t}),new e.spark.GrossLoss(x);break;default:t.format&&(g=o.format(g,t.format)),u.item(n).update(g)}}})},onColumnResize:function(){var e=this,t=e.widget;e.updateSizes("center"),t.leftColumns.length&&e.updateSizes("left"),t.rightColumns.length&&e.updateSizes("right")},updateSizes:function(n){var i=this,r=i.widget,o=i.getEl(n),a=o.select("."+t),s=0;switch(e.each(r.getColumns(n),function(e,t){s+=e.width,a.item(t).animate({width:e.width},u)}),o.firstChild().animate({width:s},u),n){case"center":i.el.animate({width:parseInt(r.centerEl.css("width"))},u);break;case"left":i.leftEl.animate({width:parseInt(r.leftEl.css("width"))-2},u);break;case"right":i.rightEl.animate({width:parseInt(r.rightEl.css("width"))-1},u)}},calcOffSets:function(){var e=this,t=e.widget;switch(e.position){case"top":e.topOffSet=t.cellHeight;break;case"bottom":e.bottomOffSet=t.cellHeight;break;case"both":e.topOffSet=t.cellHeight,e.bottomOffSet=t.cellHeight}},removeColumn:function(e,n){var i=this.getEl(n),r=i.select("."+t),o=r.item(e);o.destroy(),this.updateSizes(n)},insertColumn:function(i,r){var o=this,a=o.widget,s=a.getColumns(r),l=s[i],d=o.getEl(r),c=d.select("."+t),u=c.item(i-1),h=e.get(document.createElement("div"));0===i&&(u=c.item(0)),h.css({width:l.width,height:a.cellHeight}),h.addCls(t),h.update('<div class="'+n+'"></div>'),0===i?u.before(h.dom):u.after(h.dom),o.updateSizes(r),o.updateSide(r)},onChangePage:function(){var e=this;setTimeout(function(){e.update()},100)},onColumnDrag:function(){var e=this,t=e.widget;e.updateSizes("center"),t.leftColumns.length&&e.updateSizes("left"),t.rightColumns.length&&e.updateSizes("right")}})}(),function(){var e=function(t,n){n=n||0;var i=this,r=i.widget;return Fancy.each(t,function(t){n++;var o=t.data?t.data:t;r.store.filteredData?o.id&&r.store.map[o.id]&&(o=r.store.map[o.id].data):o=r.getById(o.id).data;var a=o.child;a&&o.expanded&&(n+=e.apply(i,[a]))}),n};Fancy.define("Fancy.grid.plugin.Tree",{extend:Fancy.Plugin,ptype:"grid.tree",inWidgetName:"tree",singleExpand:!1,constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.expandMap={},e.Super("init",arguments),e.ons()},ons:function(){var e=this,t=e.widget;t.once("init",function(){t.on("rowdblclick",e.onRowDBLClick,e),t.on("cellclick",e.onTreeExpanderClick,e),t.on("beforesort",e.onBeforeSort,e)})},onRowDBLClick:function(e,t){var n=this,i=n.widget,r=t.item;if(!(r.get("leaf")||i.edit&&2===i.edit.clicksToEdit)){var o=r.get("expanded");o?n.collapseRow(t.item):n.expandRow(t.item)}},onTreeExpanderClick:function(e,t){var n=this,i=t.item,r=Fancy.get(t.e.target);if(r.hasClass("fancy-grid-tree-expander")&&!i.get("leaf")){var o=i.get("expanded");o?n.collapseRow(t.item):n.expandRow(t.item)}},collapseRow:function(t){var n=this,i=n.widget,r=i.store,o=t.get("child"),a=(t.get("filteredChild"),t.get("id"));n.expandMap[a]=!1,t.set("expanded",!1);var s=r.getRow(t.get("id")),l=0,d=e.apply(this,[o]);if(r.filteredData){var c,u=t.get("id"),h={};h[u]=!0;for(var f,l=0,d=r.data.length;d>l&&(t=r.data[l],!(f&&f>=t.data.$deep));l++){if(h[t.data.parentId]){f||(f=t.data.$deep-1),c||(c=l);var g=r.data.splice(c,1)[0];g.data.child&&(h[g.data.id]=!0),delete r.map[g.id],l--,d--}t.data.child&&f&&(h[t.data.id]=!0)}r.order&&(delete r.order,delete r.filterOrder,r.reSort()),r.changeDataView()}else{for(i.store.treeCollapsing=!0;d>l;l++)i.removeAt(s+1);delete i.store.treeCollapsing}i.update()},expandRow:function(e){var t=this,n=t.widget,i=n.store,r=e.get("child"),o=(e.get("filteredChild"),e.get("id")),a=e.get("parentId");if(t.singleExpand)if(a){var s=n.getById(a),l=s.get("child");Fancy.each(l,function(e){var i=e.get("expanded");void 0!==t.expandMap[e.id]&&(i=t.expandMap[e.id]),i===!0&&t.collapseRow(n.getById(e.id))})}else{var l=n.findItem("parentId","");Fancy.each(l,function(e){var n=e.get("expanded");void 0!==t.expandMap[e.id]&&(n=t.expandMap[e.id]),n===!0&&t.collapseRow(e)})}t.expandMap[o]=!0,e.set("expanded",!0);var d=i.getRow(e.get("id")),c=e.get("$deep")+1,u=!1;if(i.filteredData){var h=e.get("id");Fancy.each(i.data,function(e,t){return e.id===h?(d=t,!0):void 0})}var f=function(e,i,r,a){return a=a||o,Fancy.each(e,function(e,o){var s=e.data;e.data||(u=!0,s=e),s.$deep=r,s.parentId=a;var l=s.expanded;if(void 0!==t.expandMap[s.id]&&(l=t.expandMap[s.id],s.expanded=l),i++,n.insert(i,s),l===!0){var d=s.child;s.filteredChild,i=f(d,i,r+1,s.id)}}),i};n.store.treeExpanding=!0,f(r,d,c),delete n.store.treeExpanding,u&&Fancy.each(e.data.child,function(t,n){var r=i.getById(t.id);void 0!==r&&(e.data.child[n]=r)}),n.update(),i.sorters&&i.order&&(delete i.order,delete i.filterOrder,i.reSort())},onBeforeSort:function(e,t){var n=this;"drop"===t.action&&n.onDropSort()},onDropSort:function(){var e=this,t=e.widget,n=t.store;n.treeReBuildData()}})}(),function(){var e=Fancy,t=500,n=e.TOOLTIP_CLS,i=e.TOOLTIP_INNER_CLS;e.define("Fancy.grid.plugin.CellTip",{extend:e.Plugin,ptype:"grid.celltip",inWidgetName:"celltip",cellTip:"{value}",stopped:!0,constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var t=this,n=t.widget,i=e.get(document);n.on("cellenter",t.onCellEnter,t),n.on("cellleave",t.onCellLeave,t),i.on("touchend",t.onTouchEnd,t),i.on("mousemove",t.onDocMove,t)},onCellEnter:function(t,n){var i=this,r=n.column,o=i.cellTip,a=n.e;if(r.cellTip){if(e.isString(r.cellTip))o=r.cellTip;else if(e.isFunction(r.cellTip)&&(o=r.cellTip(n),o===!1))return;var s=new e.Template(o),l={title:r.title,value:n.value,columnIndex:0,rowIndex:0};i.stopped=!1,e.apply(l,n.data),e.tip.update(s.getHTML(l)),e.tip.show(a.pageX+15,a.pageY-25)}},onCellLeave:function(n,i){this.stopped=!0,e.tip.hide(t)},onTouchEnd:function(n,i){this.stopped=!0,e.tip.hide(t)},onDocMove:function(r){if(this.stopped!==!0){var o=this,a=o.widget;if("none"===a.el.css("display")||a.panel&&a.panel.el&&"none"===a.panel.el.css("display"))return o.stopped=!0,void e.tip.hide(t);var s=e.get(r.target);return"body"===s.prop("tagName").toLocaleLowerCase()?(o.stopped=!0,void e.tip.hide(t)):s.hasClass(n)||s.hasClass(i)||a.el.within(s)!==!1?void e.tip.show(r.pageX+15,r.pageY-25):(o.stopped=!0,void e.tip.hide(t))}}})}(),function(){var e=Fancy;e.define("Fancy.grid.plugin.ContextMenu",{extend:e.Plugin,ptype:"grid.contextmenu",inWidgetName:"contextmenu",defaultItems:["copy","copy+","-","delete","edit","-","export"],width:200,constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var t=this,n=t.widget;e.get(document);n.on("contextmenu",t.onContextMenu,t)},onContextMenu:function(e,t){var n=this,i=t.e;i.preventDefault(),n.menu||n.initMenu(),setTimeout(function(){n.showMenu(i,!0)},50)},initMenu:function(){var t=this,n=t.widget,i=[],r=t.items||e.Array.copy(t.defaultItems);e.each(r,function(e,r){switch(e){case"copy":i.push({text:"Copy",imageCls:"fancy-menu-item-img-copy",handler:function(){n.copy()}});break;case"copyWidthHeader":case"copy+":i.push({text:"Copy with Headers",imageCls:"fancy-menu-item-img-copy",handler:function(){n.copy(!0)}});break;case"delete":i.push({text:"Delete",imageCls:"fancy-menu-item-img-delete",handler:function(){switch(n.selection.selModel){case"rows":case"row":var e=n.getSelection();n.remove(e),n.clearSelection()}}});break;case"edit":t.editItemIndex=r,i.push({text:"Edit",imageCls:"fancy-menu-item-img-edit",disabled:!0,handler:function(){if(n.rowEdit){var e=n.selection.getActiveCell(),t=n.getSideByCell(e),i=n.getBody(t),r=i.getEventParams({currentTarget:e.dom});n.rowedit.edit(r)}}});break;case"export":i.push({text:"Export",items:[{text:"Excel Export",handler:function(){n.exportToExcel()}}]});break;default:i.push(e)}}),t.menu=new Fancy.Menu({width:t.width,theme:n.theme,items:i})},showMenu:function(e,t){var n=this,i=n.widget,r=i.selection,o=n.menu.el,a=Fancy.get(e.target),s=a.offset(),l=s.top+40,d=s.left;if(t&&(l=e.pageY+40,d=e.pageX),o.css({position:"absolute",top:l,left:d}),n.menu.show(),o.animate({duration:200,top:l-20}),r)switch(r.selModel){case"rows":case"row":var c=i.getSelection();0===c.length||c.length>1?n.menu.disableItem(n.editItemIndex):n.menu.enableItem(n.editItemIndex)}setTimeout(function(){Fancy.get(document).once("click",function(e){n.hideMenu()})},50)},hideMenu:function(){var e=this;setTimeout(function(){e.menu.hide()},50)}})}(),function(){var e=Fancy,t=e.FIELD_CLS,n=e.GRID_HEADER_CELL_DOUBLE_CLS,i=e.GRID_HEADER_CELL_TRIPLE_CLS,r=e.GRID_HEADER_CELL_FILTER_CLS,o=e.GRID_HEADER_CELL_FILTER_FULL_CLS,a=e.GRID_HEADER_CELL_FILTER_SMALL_CLS;e.define("Fancy.grid.plugin.Filter",{extend:e.Plugin,ptype:"grid.filter",inWidgetName:"filter",autoEnterDelay:500,caseSensitive:!0,successRepeat:1,constructor:function(e){this.filters={},this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.once("render",function(){e.render()}),t.on("columnresize",e.onColumnResize,e),t.on("filter",e.onFilter,e),t.on("lockcolumn",e.onLockColumn,e),t.on("rightlockcolumn",e.onRightLockColumn,e),t.on("unlockcolumn",e.onUnLockColumn,e),t.on("columndrag",e.onColumnDrag,e)},render:function(){var e=this,t=e.widget;t.header&&(e._renderSideFields(t.header,t.columns),e._renderSideFields(t.leftHeader,t.leftColumns),e._renderSideFields(t.rightHeader,t.rightColumns))},_renderSideFields:function(e,t){for(var o,a,s=this,l=0,d=t.length;d>l;l++)a=t[l],o=e.getCell(l),a.filter&&a.filter.header?(s.renderFilter(a.type,a,o),s.groupHeader&&!a.grouping&&o.addCls(i),o.addCls(r)):s.header&&(s.groupHeader&&!a.grouping?o.addCls(i):a.grouping&&s.groupHeader?o.addCls(n):a.grouping||o.addCls(n))},_clearColumnsFields:function(n,i,r,o){for(var a,s=0,l=n.length;l>s;s++)if(a=n[s],a.filter&&a.filter.header){if(r&&a.index!==r)continue;switch(a.type){case"date":var d=i.getCell(s).select("."+t),c=e.getWidget(d.item(0).attr("id")),u=e.getWidget(d.item(1).attr("id"));c.clear(),u.clear();break;default:var h=i.getCell(s).select("."+t).attr("id"),f=e.getWidget(h);if(o){var g=f.get().split(",");if(g.length<2&&!o)f.clear();else{for(var p=0,m=g.length,v="";m>p;p++){var y=g[p];new RegExp(o).test(y)||(v+=y)}f.set(v)}}else f.clear()}}},clearColumnsFields:function(e,t){var n=this,i=n.widget;n._clearColumnsFields(i.columns,i.header,e,t),n._clearColumnsFields(i.leftColumns,i.leftHeader,e,t),n._clearColumnsFields(i.rightColumns,i.rightHeader,e,t)},_addValuesInColumnFields:function(n,i,r,o,a){for(var s,l=0,d=n.length;d>l;l++)if(s=n[l],s.index===r&&s.filter&&s.filter.header)switch(s.type){case"date":var c=i.getCell(l).select("."+t),u=e.getWidget(c.item(0).attr("id")),h=e.getWidget(c.item(1).attr("id"));u.clear(),h.clear();break;default:var f=i.getCell(l).select("."+t).attr("id"),g=e.getWidget(f),p=g.get(),m=g.get().split(",");if(1===m.length&&""===m[0])g.set((a||"")+o);else if(1===m.length)new RegExp(a).test(p)?g.set((a||"")+o):g.set(p+","+(a||"")+o);else{for(var v=0,y=m.length,C="";y>v;v++){var w=m[v];new RegExp(a).test(w)?(0!==C.length&&(C+=","),C+=(a||"")+o):(0!==C.length&&(C+=","),C+=w)}g.set(C)}}},addValuesInColumnFields:function(e,t,n){var i=this,r=i.widget;void 0!==t&&0!==t.length&&(i._addValuesInColumnFields(r.columns,r.header,e,t,n),i._addValuesInColumnFields(r.leftColumns,r.leftHeader,e,t,n),i._addValuesInColumnFields(r.rightColumns,r.rightHeader,e,t,n))},renderFilter:function(t,n,i){var r,o=this,a=o.widget,s={position:"absolute",bottom:"3px"},l=n.filter,d=a.theme,c=l.tip;switch(t){case"date":var u=[];u.push({change:o.onDateChange,scope:o});var h;if(e.isString(n.format))switch(n.format){case"date":h=n.format}r=new e.DateRangeField({renderTo:i.dom,value:new Date,format:n.format,label:!1,padding:!1,style:s,events:u,width:n.width-8,emptyText:l.emptyText,dateImage:!1,theme:d});break;case"string":var u=[{enter:o.onEnter,scope:o}];o.autoEnterDelay!==!1&&u.push({key:o.onKey,scope:o}),r=new e.StringField({renderTo:i.dom,label:!1,padding:!1,style:s,events:u,emptyText:l.emptyText,tip:c,widget:a});break;case"number":case"grossloss":case"progressbar":case"progressdonut":var u=[{enter:o.onEnter,scope:o}];o.autoEnterDelay!==!1&&u.push({key:o.onKey,scope:o}),r=new e.NumberField({renderTo:i.dom,label:!1,padding:!1,style:s,emptyText:l.emptyText,events:u,widget:a,tip:c});break;case"combo":var f,g="text",p="text";void 0!==n.displayKey&&(g=n.displayKey,p=g),f=e.isObject(n.data)||e.isObject(n.data[0])?n.data:o.configComboData(n.data),r=new e.Combo({renderTo:i.dom,label:!1,padding:!1,style:s,width:n.width-8,displayKey:g,valueKey:p,value:"",height:28,emptyText:l.emptyText,theme:d,widget:a,tip:c,multiSelect:n.multiSelect,itemCheckBox:n.itemCheckBox,minListWidth:n.minListWidth,events:[{change:o.onEnter,scope:o},{empty:function(){this.set(-1)}}],data:f});break;case"select":a.selection&&/row/.test(a.selection.selModel)&&(r=new e.Combo({renderTo:i.dom,label:!1,padding:!1,style:s,displayKey:"text",valueKey:"value",width:n.width-8,emptyText:l.emptyText,value:"",editable:!1,events:[{change:o.onEnterSelect,scope:o}],data:[{value:"",text:""},{value:"false",text:a.lang.no},{value:"true",text:a.lang.yes}]}));break;case"checkbox":r=new e.Combo({renderTo:i.dom,label:!1,padding:!1,style:s,displayKey:"text",valueKey:"value",width:n.width-8,emptyText:l.emptyText,value:"",editable:!1,events:[{change:o.onEnter,scope:o}],data:[{value:"",text:""},{value:"false",text:a.lang.no},{value:"true",text:a.lang.yes}]});break;default:var u=[{enter:o.onEnter,scope:o}];o.autoEnterDelay!==!1&&u.push({key:o.onKey,scope:o}),r=new e.StringField({renderTo:i.dom,label:!1,style:s,padding:!1,emptyText:l.emptyText,events:u})}switch(r.filterIndex=n.index,r.column=n,"date"!==t&&(r.el.css("padding-left","4px"),r.el.css("padding-top","0px")),t){case"checkbox":case"combo":case"date":break;default:r.setInputSize({width:n.width-8})}n.filterField=r},onEnter:function(t,n,i){var r=this,o=r.widget,a=o.store,s=t.filterIndex;if(i=i||{},r.intervalAutoEnter&&(clearInterval(r.intervalAutoEnter),r.intervalAutoEnter=!1),delete r.intervalAutoEnter,0===n.length)return r.filters[t.filterIndex]={},r.clearFilter(t.filterIndex,void 0,!1),r.updateStoreFilters(),void(o.grouping&&o.grouping.reGroup());var l=r.processFilterValue(n,t.column.type),d=0,c=l.length;for(r.filters[s]={};c>d;d++){var u=l[d];""===u.operator&&t.column.filter&&t.column.filter.operator&&(u.operator=t.column.filter.operator),r.filters[s][u.operator]=u.value,"|"!==u.operator,"date"===t.column.type&&e.apply(r.filters[s],i)}a.remoteFilter?(a.filters=r.filters,a.serverFilter()):r.updateStoreFilters(),o.grouping&&(a.remoteSort?a.once("load",function(){o.grouping.reGroup(),o.fire("filter",r.filters)}):o.grouping.reGroup()),o.setSidesHeight()},onEnterSelect:function(e,t,n){var i=this,r=i.widget,o=(r.store,r.getSelection()),a=[];Fancy.each(o,function(e){a.push(e.id)}),t===String(!0)?a.length?r.addFilter("id",a,"="):(r.clearFilter("id","="),r.clearFilter("id","!=")):t===String(!1)?(r.clearFilter("id","="),r.addFilter("id",a,"!=")):r.clearFilter("id")},processFilterValue:function(t,n){var i,r,o,a,s,l={"<":!0,">":!0,"!":!0,"=":!0,"|":!0},d=0,c=3,u=[];if(e.isArray(t))return r={},e.Array.each(t,function(e,t){r[String(e).toLocaleLowerCase()]=!0}),u.push({operator:"|",value:r}),u;for(o=t.split(","),a=0,s=o.length;s>a;a++){for(d=0,i="",r=o[a];c>d;d++)l[r[d]]&&(i+=r[d]);if(r=r.replace(new RegExp("^"+i),""),!(r.length<1)){switch(n){case"number":r=Number(r);break;case"combo":i="="}u.push({operator:i,value:r})}}return u},updateStoreFilters:function(){var e=this,t=e.widget,n=t.store,i=!1;n.filters=e.filters;for(var r in n.filters){var o=n.filters[r];if(o){i=!0;break}}i||delete n.filteredData,n.changeDataView(),t.update(),t.fire("filter",e.filters),t.setSidesHeight(),i||delete n.filteredData},onColumnResize:function(n,i){var r,o=e.get(i.cell),a=i.width,s=o.select("."+t);0===s.length||(2===s.length?(r=e.getWidget(s.item(0).dom.id),r.setWidth((a-8)/2),r=e.getWidget(s.item(1).dom.id),r.setWidth((a-8)/2)):(r=e.getWidget(s.dom.id),"field.combo"===r.wtype?(r.size({width:a-8}),r.el.css("width",a-8+5)):r.setInputSize({width:a-8})))},onKey:function(t,n,i){var r=this;i.keyCode!==e.key.ENTER&&(r.autoEnterTime=+new Date,r.intervalAutoEnter||(r.intervalAutoEnter=setInterval(function(){var e=new Date;r.intervalAutoEnter&&e-r.autoEnterTime>r.autoEnterDelay&&(clearInterval(r.intervalAutoEnter),delete r.intervalAutoEnter,n=t.getValue(),r.onEnter(t,n))},200)))},onDateChange:function(t,n){var i,r,o,a=this,s=a.widget,l=t.format,d=s.store,c=t.dateField1.getDate(),u=t.dateField2.getDate(),h="Invalid Date"!==c.toString()&&e.isDate(c),f="Invalid Date"!==u.toString()&&e.isDate(u),g=d.remoteFilter;h&&(c=new Date(c.getFullYear(),c.getMonth(),c.getDate())),f&&(u=new Date(u.getFullYear(),u.getMonth(),u.getDate())),h&&f?(g!==!0?(r=Number(c),o=Number(u)):(r=e.Date.format(c,l.edit,l.mode),o=e.Date.format(u,l.edit,l.mode)),i=">="+r+",<="+o):h?(i=g!==!0?">="+Number(c):">="+e.Date.format(c,l.edit,l.mode),a.clearFilter(t.filterIndex,"<=",!1)):f?(i=g!==!0?"<="+Number(u):"<="+e.Date.format(c,l.edit,l.mode),a.clearFilter(t.filterIndex,">=",!1)):a.clearFilter(t.filterIndex),i&&a.onEnter(t,i,{type:"date",format:t.format})},clearFilter:function(e,t,n){var i=this;void 0===t?delete i.filters[e]:i.filters[e]&&delete i.filters[e][t],n!==!1&&i.updateStoreFilters()},onFilter:function(){this.widget.scroll(0)},configComboData:function(t){var n=0,i=t.length,r=[];if(e.isObject(t))return t;for(;i>n;n++)r.push({value:n,text:t[n]});return r},destroyFields:function(){var t=this,s=t.widget;e.each(s.columns,function(e){e.filterField&&(e.filterField.destroy(),delete e.filterField)}),e.each(s.leftColumns,function(e){e.filterField&&(e.filterField.destroy(),delete e.filterField)}),e.each(s.rightColumns,function(e){e.filterField&&(e.filterField.destroy(),delete e.filterField)}),s.el.select("."+r).removeCls(r),s.el.select("."+o).removeCls(o),s.el.select("."+a).removeCls(a),s.el.select("."+n).removeCls(n),s.el.select("."+i).removeCls(i)},onLockColumn:function(){this.render()},onUnLockColumn:function(){this.render()},onRightLockColumn:function(){this.render()},onColumnDrag:function(){var e=this;e.destroyFields(),e.render()}})}(),Fancy.define("Fancy.grid.plugin.Search",{extend:Fancy.Plugin,ptype:"grid.search",inWidgetName:"searching",autoEnterDelay:500,constructor:function(e){this.searches={},this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.once("init",function(){e.generateKeys()})},search:function(e,t){var n=this,i=n.widget,r=i.store;return n.searches={},e||t?(Fancy.isArray(e)!==!1||t||(n.searches=e),n.setFilters(),r.remoteSort?r.serverFilter():(n.updateStoreSearches(),setTimeout(function(){i.fire("filter",r.filters)},1)),void(i.grouping&&(r.remoteSort?r.once("load",function(){i.grouping.reGroup()}):i.grouping.reGroup()))):(n.clear(),n.updateStoreSearches(),void(i.grouping&&i.grouping.reGroup()))},updateStoreSearches:function(){var e=this.widget,t=e.store;t.changeDataView(),e.update()},setKeys:function(e){var t=this;t.keys=e,t.setFilters(),t.updateStoreSearches()},generateKeys:function(){var e=this,t=e.widget;if(e.items)e.keys={},Fancy.each(e.items,function(t){e.keys[t.index]=!0});else if(!e.keys){e.keys={};var n=[];t.columns&&(n=n.concat(t.columns)),t.leftColumns&&(n=n.concat(t.leftColumns)),t.rightColumns&&(n=n.concat(t.rightColumns));var i=[];Fancy.each(n,function(e){var t=e.index||e.key;if(e.searchable!==!1){switch(e.type){case"color":case"combo":case"date":case"number":case"string":case"text":case"currency":break;default:return}t&&i.push(t)}}),Fancy.each(i,function(t){"$selected"!==t&&(e.keys[t]=!0)})}return e.keys},setFilters:function(){var e=this,t=e.widget,n=t.store,i=n.filters||{};if(void 0===e.searches||Fancy.isObject(e.searches))return void e.clear();for(var r in e.keys)e.keys[r]!==!1?(i[r]=i[r]||{},i[r]["*"]=e.searches):i[r]&&delete i[r]["*"];e.filters=i,n.filters=i},clear:function(){var e=this,t=e.widget,n=t.store,i=n.filters||{};for(var r in e.keys)void 0!==i[r]&&delete i[r]["*"];e.filters=i,n.filters=i,delete e.searches}}),function(){var e=Fancy,t=e.GRID_BODY_CLS,n=e.GRID_CLS,i=e.GRID_CELL_CLS;e.define("Fancy.grid.plugin.GridToGrid",{extend:e.Plugin,ptype:"grid.dragdrop",inWidgetName:"dragdrop",dropOK:!1,cellMaskCls:"fancy-drop-cell-mask",dropZoneCls:"fancy-drop-zone-active",dropOkCls:"fancy-drop-ok",dropNotOkCls:"fancy-drop-not-ok",dropHeaderMaskCls:"fancy-drop-header-mask",droppable:!0,dropZoneOverClass:t,constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.addEvents("drop"),e.Super("init",arguments),e.initDropCls(),e.initEnterLeave(),e.ons()},initDropCls:function(){var e=this,t="."+e.dropGroup;t+=" ."+e.dropZoneOverClass,e.dropCls=t},addDragDropCls:function(){this.widget.el.addCls(this.dragGroup)},ons:function(){var e=this,t=e.widget;t.on("render",function(){e.addDragDropCls()}),e.dropGroup&&(t.on("beforecellmousedown",e.onBeforeCellMouseDown,e),t.on("cellmousedown",e.onCellMouseDown,e),t.on("cellleave",e.onCellLeave,e),t.on("cellenter",e.onCellEnter,e)),e.on("drop",e.onDropItems,e)},onDropItems:function(e,t){var n=this,i=n.widget,r=n.dropGrid,o=void 0===r.activeRowEnterIndex?r.getViewTotal():r.activeRowEnterIndex;i.fire("dropitems",t,o),n.onDrop&&n.onDrop.apply(i,[t,o])},onBeforeCellMouseDown:function(t,n){var i=this,r=i.widget,o=r.lang,a=e.get(document),s=r.getSelection(),l=n.e,d=l.ctrlKey;if((!d||r.multiSelect!==!0)&&s.length>1){var c=!1;if(e.each(s,function(e){return e.id===n.id?(c=!0,!0):void 0}),c===!1)return;r.stopSelection(),a.once("mouseup",i.onDocMouseUp,i),a.on("mousemove",i.onDocMouseMove,i),a.once("mouseup",function(){r.enableSelection()},i),s=r.getSelection();var u=e.String.format(o.dragText,[s.length,s.length>1?"s":""]);i.initTip(u),i.dragItems=r.getSelection(),i.cellMouseDown=!0}},onCellMouseDown:function(t,n){var i=this,r=i.widget,o=e.get(document);if(r.selection.enabled!==!1){var a=n.e,s=a.ctrlKey;s&&r.multiSelect===!0||("$selected"===n.column.index||r.clearSelection(),o.once("mouseup",i.onDocMouseUp,i),o.on("mousemove",i.onDocMouseMove,i),i.cellMouseDown=!0,i.activeRowIndex=n.rowIndex)}},initEnterLeave:function(){var t=this,n=e.select(t.dropCls);return 0===n.length?void setTimeout(function(){t.initEnterLeave()},500):(n.on("mouseenter",t.onMouseEnterDropGroup,t),void n.on("mouseleave",t.onMouseLeaveDropGroup,t))},onMouseEnterDropGroup:function(t){var i=this;if(i.cellMouseDown){var r=e.get(t.currentTarget);if(i.dropGrid=e.getWidget(r.closest("."+n).attr("id")),i.dropGrid&&i.dropGrid.dragdrop&&i.dropGrid.dragdrop.droppable===!1)return i.dropOK=!1,void(i.tip&&i.tip.el.replaceClass(i.dropOkCls,i.dropNotOkCls));i.setDropGridCellsMask(),i.dropGridEventInited||i.onsDropGrid(),r.addCls(i.dropZoneCls),i.dropOK=!0,i.tip&&i.tip.el.replaceClass(i.dropNotOkCls,i.dropOkCls)}},onMouseLeaveDropGroup:function(t){var n=this;n.cellMouseDown&&(e.get(t.currentTarget).removeCls(n.dropZoneCls),n.dropOK=!1,n.tip.el.replaceClass(n.dropOkCls,n.dropNotOkCls),n.clearCellsMask())},setDropGridCellsMask:function(){var e,t=this,n=t.dropGrid;n&&t.cellMouseDown&&(e=n.getTotal(),0===e?n.el.addCls(t.dropHeaderMaskCls):n.el.select("."+i+'[index="'+(e-1)+'"]').addCls(t.cellMaskCls))},onsDropGrid:function(){var e=this;e.dropGrid.on("rowenter",e.onDropGridRowEnter,e),e.dropGrid.on("rowleave",e.onDropGridRowLeave,e),e.dropGridEventInited=!0},onDropGridRowEnter:function(e,t){var n=this;n.cellMouseDown===!1&&(n.dropGrid.un("rowenter",n.onDropGridRowEnter),n.dropGrid.un("rowleave",n.onDropGridRowLeave)),n.clearCellsMask(),0===t.rowIndex?e.el.addCls(n.dropHeaderMaskCls):e.el.select("."+i+'[index="'+(t.rowIndex-1)+'"]').addCls(n.cellMaskCls),n.cellMouseDown===!1&&n.clearCellsMask(),n.dropGrid&&(n.dropGrid.activeRowEnterIndex=t.rowIndex)},onDropGridRowLeave:function(e,t){var n=this;n.clearCellsMask(),n.setDropGridCellsMask(),n.dropGrid&&delete n.dropGrid.activeRowEnterIndex},clearCellsMask:function(){var e=this,t=e.cellMaskCls;e.dropGrid&&(e.dropGrid.el.removeCls(e.dropHeaderMaskCls),e.dropGrid.el.select("."+t).removeCls(t))},onDocMouseUp:function(t){var n=this,i=n.widget,r=e.get(document);n.cellMouseDown=!1,n.tip&&n.tip.hide(),i.enableSelection(),r.un("mousemove",n.onDocMouseMove),n.dropOK===!0&&(i.clearSelection(),n.dropGrid.clearSelection(),n.fire("drop",n.dragItems)),delete n.dragItems,n.dropOK=!1,e.select("."+n.dropZoneCls).removeCls(n.dropZoneCls),n.clearCellsMask(),n.dropGrid&&(n.dropGrid.un("rowenter",n.onDropGridRowEnter),n.dropGrid.un("rowleave",n.onDropGridRowLeave)),delete n.dropGridEventInited},onDocMouseMove:function(e){this.dragItems&&this.tip.show(e.pageX+20,e.pageY+20)},onCellLeave:function(t,n){var i=this,r=i.widget,o=r.lang;setTimeout(function(){if(i.onceStopDrag)return void(i.onceStopDrag=!1);if(i.cellMouseDown===!0&&!i.dragItems){var t=r.getSelection(),a=e.String.format(o.dragText,[t.length,t.length>1?"s":""]);r.stopSelection(),i.initTip(a,n.e),i.tip.show(),i.tip.el.css("display","block"),i.dragItems=t}},1)},onCellEnter:function(e,t){var n=this;n.cellMouseDown!==!0||n.dragItems||t.rowIndex!==n.activeRowIndex&&(n.onceStopDrag=!0,n.activeRowIndex=t.rowIndex)},initTip:function(t,n){var i=this,r=i.dropNotOkCls;i.tip||(i.tip=new e.ToolTip({cls:r,text:t})),n&&i.tip.show(n.pageX+20,n.pageY+20),i.tip.update(t),i.tip.el.replaceClass(i.dropOkCls,r)}})}(),function(){var e=Fancy,t=e.GRID_BODY_CLS,n=(e.GRID_CLS,e.GRID_CELL_CLS),i=(e.GRID_ROW_DRAG_EL_CLS,e.GRID_CELL_SELECTED_CLS);e.define("Fancy.grid.plugin.RowDragDrop",{extend:e.Plugin,ptype:"grid.rowdragdrop",inWidgetName:"rowdragdrop",dropOK:!1,cellMaskCls:"fancy-drop-cell-mask",cellFirstRowMaskCls:"fancy-drop-cell-first-mask",dropZoneCls:"fancy-drop-zone-active",dropOkCls:"fancy-drop-ok",dropNotOkCls:"fancy-drop-not-ok",droppable:!0,dropZoneOverClass:t,tipShown:!1,constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.addEvents("drop"),e.ons(),e.initDropCls(),e.initEnterLeave(),e.disableSelectionMove()},ons:function(){var e=this,t=e.widget;t.on("beforecellmousedown",e.onBeforeCellMouseDown,e),t.on("cellmousedown",e.onCellMouseDown,e),t.on("rowenter",e.onRowEnter,e),t.on("cellleave",e.onCellLeave,e),e.on("drop",e.onDrop,e)},disableSelectionMove:function(){var e=this,t=e.widget;t.selection.disableSelectionMove()},showTip:function(e){var t=this,n=t.widget,i=n.getSelection();0!==i.length&&(t.tip||t.initTip(),t.updateTipText(),e&&t.tip.show(e.pageX+20,e.pageY+20),t.tipShown=!0)},hideTip:function(){var e=this;e.tip&&e.tip.hide(),e.tipShown=!1},onCellMouseDown:function(t,n){var i=this,r=(i.widget,e.get(document));i.cellMouseDown=e.get(n.cell),r.once("mouseup",i.onDocMouseUp,i)},onDocMouseUp:function(t){var n=this,i=n.widget,r=e.get(document);n.cellMouseDown=!1,n.mouseDownDragEl=!1,i.enableSelection(),n.tipShown&&(r.un("mousemove",n.onDocMouseMove),n.hideTip(),n.clearCellsMask(),n.dropOK&&n.fire("drop"),n.tipShown=!1)},onRowEnter:function(t,n){var r=this,o=r.widget,a=o.getSelection();if(r.cellMouseDown&&0!==a.length&&r.tipShown){if(0!==n.rowIndex){var s=n.rowIndex-1;if(o.body.getCell(s,0).hasClass(i))return r.dropOK=!1,r.clearCellsMask(),void delete r.activeRowIndex;if(o.body.getCell(n.rowIndex,0).hasClass(i)&&1===a.length)return r.dropOK=!1,r.clearCellsMask(),void delete r.activeRowIndex;if(a.length>1){var s,l=!0;if(e.each(a,function(e){if(void 0===s)return void(s=o.getRowById(e.id));var t=o.getRowById(e.id);return s!==t-1?(l=!1,!0):void(s=t)}),l&&o.body.getCell(n.rowIndex,0).hasClass(i))return r.dropOK=!1,r.clearCellsMask(),void delete r.activeRowIndex}r.dropOK=!0;var d=o.get(s);r.insertItem=d}else{if(o.body.getCell(n.rowIndex,0).hasClass(i)){if(!(a.length>1))return r.dropOK=!1,r.clearCellsMask(),void delete r.activeRowIndex;var s,l=!0;if(e.each(a,function(e){if(void 0===s)return void(s=o.getRowById(e.id));var t=o.getRowById(e.id);return s!==t-1?(l=!1,!0):void(s=t)}),l&&o.body.getCell(n.rowIndex,0).hasClass(i))return r.dropOK=!1,r.clearCellsMask(),void delete r.activeRowIndex;r.dropOK=!0}else r.dropOK=!0;r.insertItem=0}r.activeRowIndex=n.rowIndex,r.showCellsDropMask()}},onCellLeave:function(t,n){var r=this,o=e.get(document),a=e.get(n.cell);r.cellMouseDown&&(r.tipShown||a.hasClass(i)&&(r.tip||r.initTip(),r.updateTipText(),r.showTip(n.e),o.on("mousemove",r.onDocMouseMove,r)))},initTip:function(){var t=this,n=t.dropNotOkCls;t.tip||(t.tip=new e.ToolTip({cls:n,text:""}))},updateTipText:function(){var t=this,n=t.widget,i=n.lang,r=n.getSelection(),o=e.String.format(i.dragText,[r.length,r.length>1?"s":""]);t.tip.update(o),r.length&&0!=t.dropOK?t.tip.el.replaceClass(t.dropNotOkCls,t.dropOkCls):t.tip.el.replaceClass(t.dropOkCls,t.dropNotOkCls)},onDocMouseMove:function(e){var t=this;t.cellMouseDown&&t.cellMouseDown.hasClass(i)?t.showTip(e):t.hideTip()},showCellsDropMask:function(){var e=this,t=e.widget,i=e.activeRowIndex-1;e.clearCellsMask(),-1===i?t.el.select("."+n+'[index="0"]').addCls(e.cellFirstRowMaskCls):t.el.select("."+n+'[index="'+i+'"]').addCls(e.cellMaskCls)},clearCellsMask:function(){var e=this,t=e.widget;t.el.select("."+e.cellMaskCls).removeCls(e.cellMaskCls),t.el.select("."+e.cellFirstRowMaskCls).removeCls(e.cellFirstRowMaskCls)},onDrop:function(){var t,n=this,i=n.widget,r=i.getSelection();i.selection.memory||i.clearSelection(),i.remove(r),t=0===n.insertItem?0:i.getRowById(n.insertItem.id)+1,i.insert(t,r),e.each(r,function(e){var t=i.getRowById(e.id);i.flashRow(t)})},onBeforeCellMouseDown:function(e,t){var n=this,r=Fancy.get(document),o=n.widget,a=o.getSelection();"select"!==t.column.type&&("rowdrag"===t.column.type&&(Fancy.get(t.cell).hasClass(i)||o.selectRow(t.rowIndex),n.mouseDownDragEl=!0,r.once("mousemove",function(e){n.showTip(e),r.on("mousemove",n.onDocMouseMove,n)})),Fancy.get(t.cell).hasClass(i)&&a.length>1&&o.stopSelection())},initDropCls:function(){var e=this,t=e.widget,n="#"+t.id+" ."+e.dropZoneOverClass;e.dropCls=n},initEnterLeave:function(){var t=this,n=e.select(t.dropCls);return 0===n.length?void setTimeout(function(){t.initEnterLeave()},500):void n.on("mouseleave",t.onMouseLeaveDropGroup,t)},onMouseLeaveDropGroup:function(){var e=this;e.dropOK=!1,e.clearCellsMask()}})}(),Fancy.define("Fancy.grid.plugin.Exporter",{extend:Fancy.Plugin,ptype:"grid.exporter",inWidgetName:"exporter",constructor:function(e){this.Super("const",arguments),Fancy.fullBuilt&&Fancy.loadModule("excel")},init:function(){},exportToExcel:function(){function e(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i!=e.length;++i)n[i]=255&e.charCodeAt(i);return t}var t=this,n=t.widget,i=t.getColumnsData(),r=t.getData(),o=[i].concat(r),a=function(){return this instanceof a?(this.SheetNames=[],void(this.Sheets={})):new a},s=new a,l=t.sheet_from_array_of_arrays(o);l["!cols"]=[],Fancy.each(t.widths,function(e){l["!cols"].push({wch:e})});var d=n.title;Fancy.isObject(d)&&(d=d.text);var c=d||"grid_data";s.SheetNames.push(c),s.Sheets[c]=l;var u=XLSX.write(s,{bookType:"xlsx",bookSST:!0,type:"binary"});saveAs(new Blob([e(u)],{type:"application/octet-stream"}),c+".xlsx")},getColumnsData:function(){var e=this,t=e.widget,n=[].concat(t.leftColumns).concat(t.columns).concat(t.rightColumns),i=[];return e.widths=[],Fancy.each(n,function(t){"$selected"!==t.index&&(e.widths.push(t.width),i.push(t.title||""))}),i},getData:function(){var e=this,t=e.widget,n=[],i=t.getDisplayedData();return Fancy.each(i,function(e){var t=[];Fancy.each(e,function(e){t.push(e)}),n.push(t)}),n},sheet_from_array_of_arrays:function(e,t){for(var n={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0,o=e.length,a=function(e,t){t&&(e+=1462);var n=Date.parse(e);return(n-new Date(Date.UTC(1899,11,30)))/864e5};r!=o;++r)for(var s=0;s!=e[r].length;++s){i.s.r>r&&(i.s.r=r),i.s.c>s&&(i.s.c=s),i.e.r<r&&(i.e.r=r),i.e.c<s&&(i.e.c=s);var l={v:e[r][s]};if(null!=l.v){var d=XLSX.utils.encode_cell({c:s,r:r});"number"==typeof l.v?l.t="n":"boolean"==typeof l.v?l.t="b":l.v instanceof Date?(l.t="n",l.z=XLSX.SSF._table[14],l.v=a(l.v)):l.t="s",n[d]=l}}return i.s.c<1e7&&(n["!ref"]=XLSX.utils.encode_range(i)),n}}),function(){var e=Fancy;e.define("Fancy.grid.plugin.State",{extend:e.Plugin,ptype:"grid.state",inWidgetName:"state",stateful:!1,constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.ons()},ons:function(){var e=this,t=e.widget;t.on("beforeinit",e.onBeforeInit,e),e.stateful&&(t.on("sort",e.onSort,e),t.on("filter",e.onFilter,e),t.on("filter",e.onFilter,e),t.on("columnresize",e.onColumnResize,e),t.on("columndrag",e.onColumnDrag,e),t.on("lockcolumn",e.onColumnLock,e),t.on("rightlockcolumn",e.onColumnRightLock,e),t.on("unlockcolumn",e.onColumnUnLock,e),t.on("changepage",e.onChangePage,e),t.on("columnhide",e.onColumnHide,e),t.on("columnshow",e.onColumnShow,e),t.on("init",function(){t.panel&&t.panel.on("resize",e.onResize,e)}))},onSort:function(){var e=this,t=e.widget,n=t.store,i=t.getStateName(),r=localStorage.getItem(i);r=r?JSON.parse(r):{},r.sorters=JSON.stringify(n.sorters),localStorage.setItem(i,JSON.stringify(r)),e.copyColumns()},onFilter:function(){var e=this,t=e.widget,n=t.store,i=t.getStateName(),r=localStorage.getItem(i);r=r?JSON.parse(r):{},r.filters=JSON.stringify(n.filters),localStorage.setItem(i,JSON.stringify(r)),e.copyColumns()},onColumnResize:function(){this.copyColumns()},onColumnDrag:function(){this.copyColumns()},onColumnLock:function(){this.copyColumns()},onColumnRightLock:function(){this.copyColumns()},onColumnUnLock:function(){this.copyColumns()},onColumnHide:function(){this.copyColumns()},onColumnShow:function(){this.copyColumns()},copyColumns:function(){var t=this,n=t.widget,i=n.getStateName(),r=localStorage.getItem(i);r=r?JSON.parse(r):{};var o=[].concat(n.leftColumns).concat(n.columns).concat(n.rightColumns),a=[];e.each(o,function(t){var n={};e.each(t,function(t,i){(e.isString(t)||e.isNumber(t)||e.isBoolean(t))&&(n[i]=t)}),a.push(n)}),r.columns=JSON.stringify(a),localStorage.setItem(i,JSON.stringify(r))},onBeforeInit:function(){var t=this,n=t.widget,i=n.getStateName(),r=localStorage.getItem(i),o=t.startState;if(o){if(n.store.loading)return void n.once("load",t.onBeforeInit,t);o.filters&&setTimeout(function(){for(var e in o.filters){var t=o.filters[e];for(var i in t)n.addFilter(e,t[i],i)}},100),o.sorters&&setTimeout(function(){e.each(o.sorters,function(e){n.sort(e.key,e.dir)})},100),void 0!==o.page&&setTimeout(function(){n.setPage(Number(o.page)+1)},100)}if(r){if(r=JSON.parse(r),r.sorters&&(r.sorters=JSON.parse(r.sorters),e.each(r.sorters,function(e){n.sort(e.key,e.dir)})),r.filters){r.filters=JSON.parse(r.filters);for(var a in r.filters){var s=r.filters[a];for(var l in s)n.addFilter(a,s[l],l)}}r.page&&n.setPage(Number(r.page)+1),r.width&&n.setWidth(r.width),r.height&&n.setHeight(r.height)}},onChangePage:function(e,t){var n=this,i=n.widget,r=i.getStateName(),o=localStorage.getItem(r);void 0!==t&&o&&i.inited&&(o=JSON.parse(o),o.page=t,localStorage.setItem(r,JSON.stringify(o)))},onResize:function(e,t){var n=this,i=n.widget,r=i.getStateName(),o=localStorage.getItem(r)||"{}";o=JSON.parse(o),o.width=t.width,o.height=t.height,localStorage.setItem(r,JSON.stringify(o))}})}(),Fancy.define("Fancy.grid.plugin.Licence",{extend:Fancy.Plugin,ptype:"grid.licence",inWidgetName:"licence",constructor:function(e){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.once("render",function(){e.render()})},render:function(){},showConsoleText:function(){window.console&&console.log&&!Fancy.isChrome},configWatermark:function(){var e=this,t=e.widget,n=t.watermark;if(n.text){var i=e.licenceEl.firstChild();i.css("background-image","none"),i.css("font-size","11px"),i.update(n.text),e.licenceEl.css("width","initial")}n.style&&e.licenceEl.css(n.style)},checkLicence:function(){var e=this,t="FancyGrid";if(!Fancy.LICENSE&&!FancyGrid.LICENSE)return!1;var n,i,r,o=String(e.md5(location.host.replace(/^www\./,""),t)),a=Fancy.LICENSE||FancyGrid.LICENSE||[],s=e.md5("UNIVERSAL",t),l=e.md5("SAAS",t),d=e.md5("INTERNAL",t),c=e.md5("OEM",t),u=e.md5("ENTERPRISE",t);for(n=0,i=a.length;i>n;n++)switch(r=String(a[n])){case o:case s:case l:case d:case c:case u:return!0}return!1},md5:function(e,t,n){var i=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},r=function(e,t){return e<<t|e>>>32-t},o=function(e,t,n,o,a,s){return i(r(i(i(t,e),i(o,s)),a),n)},a=function(e,t,n,i,r,a,s){return o(t&n|~t&i,e,t,r,a,s)},s=function(e,t,n,i,r,a,s){return o(t&i|n&~i,e,t,r,a,s)},l=function(e,t,n,i,r,a,s){return o(t^n^i,e,t,r,a,s)},d=function(e,t,n,i,r,a,s){return o(n^(t|~i),e,t,r,a,s)},c=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n,r,o,c,u,h=1732584193,f=-271733879,g=-1732584194,p=271733878;for(n=0;n<e.length;n+=16)r=h,o=f,c=g,u=p,h=a(h,f,g,p,e[n],7,-680876936),p=a(p,h,f,g,e[n+1],12,-389564586),g=a(g,p,h,f,e[n+2],17,606105819),f=a(f,g,p,h,e[n+3],22,-1044525330),h=a(h,f,g,p,e[n+4],7,-176418897),p=a(p,h,f,g,e[n+5],12,1200080426),g=a(g,p,h,f,e[n+6],17,-1473231341),f=a(f,g,p,h,e[n+7],22,-45705983),h=a(h,f,g,p,e[n+8],7,1770035416),p=a(p,h,f,g,e[n+9],12,-1958414417),g=a(g,p,h,f,e[n+10],17,-42063),f=a(f,g,p,h,e[n+11],22,-1990404162),h=a(h,f,g,p,e[n+12],7,1804603682),p=a(p,h,f,g,e[n+13],12,-40341101),g=a(g,p,h,f,e[n+14],17,-1502002290),f=a(f,g,p,h,e[n+15],22,1236535329),h=s(h,f,g,p,e[n+1],5,-165796510),p=s(p,h,f,g,e[n+6],9,-1069501632),g=s(g,p,h,f,e[n+11],14,643717713),f=s(f,g,p,h,e[n],20,-373897302),h=s(h,f,g,p,e[n+5],5,-701558691),p=s(p,h,f,g,e[n+10],9,38016083),g=s(g,p,h,f,e[n+15],14,-660478335),f=s(f,g,p,h,e[n+4],20,-405537848),h=s(h,f,g,p,e[n+9],5,568446438),p=s(p,h,f,g,e[n+14],9,-1019803690),g=s(g,p,h,f,e[n+3],14,-187363961),f=s(f,g,p,h,e[n+8],20,1163531501),h=s(h,f,g,p,e[n+13],5,-1444681467),p=s(p,h,f,g,e[n+2],9,-51403784),g=s(g,p,h,f,e[n+7],14,1735328473),f=s(f,g,p,h,e[n+12],20,-1926607734),h=l(h,f,g,p,e[n+5],4,-378558),p=l(p,h,f,g,e[n+8],11,-2022574463),g=l(g,p,h,f,e[n+11],16,1839030562),f=l(f,g,p,h,e[n+14],23,-35309556),h=l(h,f,g,p,e[n+1],4,-1530992060),p=l(p,h,f,g,e[n+4],11,1272893353),g=l(g,p,h,f,e[n+7],16,-155497632),f=l(f,g,p,h,e[n+10],23,-1094730640),h=l(h,f,g,p,e[n+13],4,681279174),p=l(p,h,f,g,e[n],11,-358537222),g=l(g,p,h,f,e[n+3],16,-722521979),f=l(f,g,p,h,e[n+6],23,76029189),h=l(h,f,g,p,e[n+9],4,-640364487),p=l(p,h,f,g,e[n+12],11,-421815835),g=l(g,p,h,f,e[n+15],16,530742520),f=l(f,g,p,h,e[n+2],23,-995338651),h=d(h,f,g,p,e[n],6,-198630844),p=d(p,h,f,g,e[n+7],10,1126891415),g=d(g,p,h,f,e[n+14],15,-1416354905),f=d(f,g,p,h,e[n+5],21,-57434055),h=d(h,f,g,p,e[n+12],6,1700485571),p=d(p,h,f,g,e[n+3],10,-1894986606),g=d(g,p,h,f,e[n+10],15,-1051523),f=d(f,g,p,h,e[n+1],21,-2054922799),h=d(h,f,g,p,e[n+8],6,1873313359),p=d(p,h,f,g,e[n+15],10,-30611744),g=d(g,p,h,f,e[n+6],15,-1560198380),f=d(f,g,p,h,e[n+13],21,1309151649),h=d(h,f,g,p,e[n+4],6,-145523070),p=d(p,h,f,g,e[n+11],10,-1120210379),g=d(g,p,h,f,e[n+2],15,718787259),f=d(f,g,p,h,e[n+9],21,-343485551),h=i(h,r),f=i(f,o),g=i(g,c),p=i(p,u);return[h,f,g,p]},u=function(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n},h=function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n},f=function(e){return u(c(h(e),8*e.length))},g=function(e,t){var n,i,r=h(e),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=c(r,8*e.length)),n=0;16>n;n+=1)o[n]=909522486^r[n],a[n]=1549556828^r[n];return i=c(o.concat(h(t)),512+8*t.length),u(c(a.concat(i),640))},p=function(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r},m=function(e){return unescape(encodeURIComponent(e))},v=function(e){return f(m(e))},y=function(e){return p(v(e))},C=function(e,t){return g(m(e),m(t))},w=function(e,t){return p(C(e,t))},b=function(e,t,n){return t?n?C(t,e):w(t,e):n?v(e):y(e)};return b(e,t,n)}}),function(){var e=Fancy,t=e.GRID_CELL_CLS,n=e.GRID_CELL_EVEN_CLS,i=e.GRID_CELL_SELECTED_CLS,r=e.GRID_COLUMN_CLS,o=e.GRID_COLUMN_TEXT_CLS,a=e.GRID_COLUMN_ELLIPSIS_CLS,s=e.GRID_COLUMN_ORDER_CLS,l=e.GRID_COLUMN_SELECT_CLS,d=e.GRID_CELL_INNER_CLS,c=e.GRID_CELL_DIRTY_CLS,u=e.GRID_CELL_DIRTY_EL_CLS,h=e.GRID_PSEUDO_CELL_CLS,f=e.GRID_EMPTY_CLS,g=e.GRID_COLUMN_SPARKLINE_CLS,p=e.GRID_COLUMN_SPARKLINE_BULLET_CLS,m=e.GRID_COLUMN_CHART_CIRCLE_CLS,v=e.GRID_COLUMN_SPARK_PROGRESS_DONUT_CLS,y=e.GRID_COLUMN_GROSSLOSS_CLS,C=e.GRID_COLUMN_PROGRESS_CLS,w=e.GRID_COLUMN_PROGRESS_BAR_CLS,b=e.GRID_COLUMN_H_BAR_CLS,x=e.GRID_COLUMN_ROW_DRAG_CLS;e.ns("Fancy.grid.body.mixin"),e.grid.body.mixin.Updater=function(){},e.grid.body.mixin.Updater.prototype={update:function(){var e=this,t=e.widget,n=t.store;e.checkDomColumns(),n.loading||(e.checkDomCells(),e.updateRows(),e.showEmptyText())},checkDomColumns:function(){var t=this,n=t.widget,i=t.el.select("."+r).length,d=t.getColumns(),c=0,u=d.length;if(!(i>=u)){for(;u>c;c++){var h=d[c],f=h.width,g=e.get(document.createElement("div"));if(h.hidden&&g.css("display","none"),g.addCls(r),g.attr("grid",n.id),"$selected"===h.index)g.addCls(l);else switch(h.type){case"order":g.addCls(s);break;case"rowdrag":g.addCls(x)}if(h.cls&&g.addCls(h.cls),"text"===h.type&&g.addCls(o),g.css({width:f+"px"}),g.attr("index",c),h.cellAlign&&g.css("text-align",h.cellAlign),h.ellipsis===!0)switch(h.type){case"string":case"text":case"number":case"date":case"combo":g.addCls(a)}t.el.dom.appendChild(g.dom)}t.fire("adddomcolumns")}},checkDomCells:function(o){var a,s,l,d=this,c=d.widget,u=c.body,f=c.store,g=0,p=f.dataView.length,m=0;switch(d.side){case"left":s=c.leftColumns;break;case"center":s=c.columns;break;case"right":s=c.rightColumns}a=s.length;var v=d.el.select("."+r),y=f.getLength(),C=d.cellTpl;for(c.cellWrapper&&(C=d.cellWrapperTpl),void 0!==o&&(m=o,a=o);a>m;m++){l=s[m];var w=v.item(m);g=0;var b=y-w.select("."+t).length;for(g=p-b;p>g;g++){var x=C.getHTML({}),S=e.get(document.createElement("div"));S.css({height:c.cellHeight+"px"}),S.addCls(t),S.attr("index",g),g%2!==0&&c.striped&&S.addCls(n),S.update(x),w.dom.appendChild(S.dom),u.el.select("."+t+"."+i+'[index="'+g+'"]').length&&S.addCls(i)}if(c.nativeScroller&&("left"===d.side||"right"===d.side)){w.select("."+h).destroy();var x=C.getHTML({cellValue:"&nbsp;"}),S=e.get(document.createElement("div"));S.css({height:c.cellHeight+"px"}),S.addCls(h),S.update(x),w.dom.appendChild(S.dom)}}},updateRows:function(e,t){var n,i,r=this,o=r.widget,a=0;switch(void 0===e?r.clearDirty():r.clearDirty(e),r.side){case"left":n=o.leftColumns;break;case"center":n=o.columns;break;case"right":n=o.rightColumns}for(i=n.length,void 0!==t&&(a=t,i=t+1);i>a;a++){var s=n[a];switch(s.type){case"string":case"number":case"combo":case"action":case"text":case"date":case"currency":r.renderUniversal(a,e);break;case"tree":r.renderTree(a,e);break;case"order":r.renderOrder(a,e);break;case"expand":r.renderExpand(a,e);break;case"select":r.renderSelect(a,e);break;case"color":r.renderColor(a,e);break;case"checkbox":r.renderCheckbox(a,e);break;case"switcher":r.renderCheckbox(a,e,!0);break;case"image":r.renderImage(a,e);break;case"sparklineline":r.renderSparkLine(a,e,"line");break;case"sparklinebar":r.renderSparkLine(a,e,"bar");break;case"sparklinetristate":r.renderSparkLine(a,e,"tristate");break;case"sparklinediscrete":r.renderSparkLine(a,e,"discrete");break;case"sparklinebullet":r.renderSparkLine(a,e,"bullet");break;case"sparklinepie":r.renderSparkLine(a,e,"pie");break;case"sparklinebox":r.renderSparkLine(a,e,"box");break;case"circle":r.renderCircle(a,e);break;case"progressdonut":r.renderProgressDonut(a,e);break;case"progressbar":r.renderProgressBar(a,e);break;case"hbar":r.renderHBar(a,e);break;case"grossloss":r.renderGrossLoss(a,e);break;case"rowdrag":r.renderRowDrag(a,e);break;default:throw new Error("[FancyGrid error] - not existed column type "+s.type)}}r.removeNotUsedCells()},renderUniversal:function(e,n){var i,o,a,s=this,l=s.widget,c=l.lang,u=l.emptyValue,h=l.store,f=s.getColumns(),g=f[e],p=s.el.select("."+r),m=p.item(e),v=m.select("."+t),y=m.select("."+t+" ."+d),C=c.currencySign;for(i=void 0!==g.key?g.key:void 0!==g.index?g.index:"action"===g.type?"none":void 0,void 0!==n?(o=n,a=n+1):(o=0,a=h.getLength());a>o;o++){var w,b=h.get(o),x=h.getId(o),S=y.item(o),E=v.item(o),I={rowIndex:o,data:b,style:{},column:g,id:x,item:h.getItem(o),inner:S,cell:E},T=!1;switch(h.changed[I.id]&&h.changed[I.id][g.index]&&(T=!0),w=g.smartIndexFn?g.smartIndexFn(b):h.get(o,i),I.value=w,g.format&&(I.value=s.format(I.value,g.format),w=I.value),g.type){case"currency":""!==w&&(w=C+w),I.value=w}switch(g.render&&(I=g.render(I),w=I.value),w){case"":case void 0:w=u}l.cellStylingCls&&s.clearCls(E),I.cls&&E.addCls(I.cls),T&&l.dirtyEnabled&&s.enableCellDirty(E),E.css(I.style),I.column.widget||S.update(w)}},renderOrder:function(e){var n=this,i=n.widget,o=i.store,a=n.getColumns(),s=a[e],l=n.el.select("."+r),c=l.item(e),u=c.select("."+t),h=c.select("."+t+" ."+d),f=0,g=o.getLength(),p=0;for(i.paging&&(p+=o.showPage*o.pageSize);g>f;f++){var m=o.get(f),v=o.getId(f),y={rowIndex:f,data:m,style:{},column:s,id:v,item:o.getItem(f)},C=f+1+p;y.value=C,s.render&&(y=s.render(y),C=y.value);var w=u.item(f);i.cellStylingCls&&n.clearCls(w),y.cls&&w.addCls(y.cls),w.css(y.style),h.item(f).update(C)}},renderRowDrag:function(e){var n=this,i=n.widget,o=i.store,a=n.getColumns(),s=a[e],l=n.el.select("."+r),c=l.item(e),u=c.select("."+t),h=c.select("."+t+" ."+d),f=0,g=o.getLength(),p=0;for(i.paging&&(p+=o.showPage*o.pageSize);g>f;f++){var m=o.get(f),v=o.getId(f),y={rowIndex:f,data:m,style:{},column:s,id:v,item:o.getItem(f)},C='<svg style="opacity: 0;" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2h2V0H0v2zm0 4h2V4H0v2zm0 3.999h2V8H0v1.999zM0 14h2v-2H0v2zM4 0v2h2V0H4zm0 6h2V4H4v2zm0 3.999h2V8H4v1.999zM4 14h2v-2H4v2z"></path></svg>';y.value=C,s.render&&(y=s.render(y),C=y.value);var w=u.item(f);i.cellStylingCls&&n.clearCls(w),y.cls&&w.addCls(y.cls),w.css(y.style),h.item(f).update(C)}},renderTree:function(e,n){var i,o,a=this,s=a.widget,l=s.store,c=a.getColumns(),u=c[e],h=a.el.select("."+r),f=h.item(e),g=f.select("."+t+" ."+d),p=u.index;for(void 0!==n?(i=n,o=n+1):(i=0,o=l.getLength());o>i;i++){var m=(g.item(i),s.get(i)),v=m.get(p),y=Number(m.get("$deep"))-1,C="fancy-grid-tree-expander";m.get("leaf")&&(C="fancy-grid-tree-expander-leaf"),m.get("expanded")&&(C+=" fancy-grid-tree-expander-expanded");var w=15*y,b="";if(u.render){var x=u.render({item:m,data:m.data,deep:y,leaf:m.get("leaf"),rowIndex:n,column:u,value:v});x.nodeImgCls&&(b='<div class="fancy-grid-tree-expander-node '+x.nodeImgCls+'"></div>'),void 0!==x.value&&(v=x.value)}m.get("leaf")&&(w-=8),g.item(i).update(['<div class="'+C+'" style="margin-left: '+w+'px;"></div>'+b+'<div class="fancy-grid-tree-expander-text">'+v+"</div>"].join(""))}},renderExpand:function(n,i){var o,a,s=this,l=s.widget,c=l.store,u=s.getColumns(),h=u[n],f=s.el.select("."+r),g=f.item(n),p=g.select("."+t+" ."+d);for(void 0!==i?(o=i,a=i+1):(o=0,a=c.getLength());a>o;o++){var m,v=p.item(o),y=v.select(".fancy-field-checkbox"),C=0!==y.length,w=l.get(o),b=w.id;C===!1?(p.item(o).update(""),y=new e.CheckBox({renderTo:p.item(o).dom,renderId:!0,value:!1,label:!1,expander:!0,style:{padding:"0px",display:"inline-block"},events:[{change:function(e,t){i=e.el.parent().parent().attr("index"),t?l.expander.expand(i):l.expander.collapse(i)}}]})):(m=y.dom.id,y=e.getWidget(m),l.expander._expandedIds[b]?y.set(!0,!1):y.set(!1,!1));var x=c.get(o),S=c.getId(o),E={rowIndex:o,data:x,style:{},column:h,id:S,item:c.getItem(o)};h.render&&(h.render(E).hidden===!0?y.hide():y.show())}},clearCls:function(t){var n=this.widget;e.each(n.cellStylingCls,function(e){t.removeCls(e)})},renderColor:function(e,n){var i,o,a=this,s=a.widget,l=s.store,c=a.getColumns(),u=c[e],h=u.key||u.index,f=a.el.select("."+r),g=f.item(e),p=g.select("."+t);for(void 0!==n?(i=n,o=n+1):(i=0,o=l.getLength());o>i;i++){var m,v=l.get(i),y={rowIndex:i,data:v,style:{},column:u};m=u.smartIndexFn?u.smartIndexFn(v):l.get(i,h),u.render&&(y=u.render(y),m=y.value),y.value=m;var C=p.item(i);C.css(y.style);var w=C.select("."+d);w.update('<div class="fancy-grid-color-cell" style="background: '+m+';"></div>')}},renderCombo:function(e,n){var i,o,a=this,s=a.widget,l=s.store,c=a.getColumns(),u=c[e],h=u.key||u.index,f=a.el.select("."+r),g=f.item(e),p=g.select("."+t),m=g.select("."+t+" ."+d);for(void 0!==n?(i=n,o=n+1):(i=0,o=l.getLength());o>i;i++){var v=l.get(i,h),y={rowIndex:i,value:v,style:{}};u.render&&(y=u.render(y),v=y.value),p.item(i).css(y.style),m.item(i).update(v)}},renderCheckbox:function(n,i,o){var a,s,l=this,c=l.widget,u=c.store,h=l.getColumns(),f=h[n],g=f.key||f.index,p=l.el.select("."+r),m=p.item(n),v=m.select("."+t),y=m.select("."+t+" ."+d),C="CheckBox";for(o&&(C="Switcher"),void 0!==i?(a=i,s=i+1):(a=0,s=u.getLength());s>a;a++){var w,b=u.get(a),x=u.get(a,g),S=y.item(a),E=S.select(".fancy-field-checkbox"),I=0!==E.length,T=!1,L=u.getId(a),F={rowIndex:a,data:b,style:{},column:f,id:L,item:u.getItem(a),value:x};if(u.changed[F.id]&&u.changed[F.id][f.index]&&(T=!0),f.render&&(F=f.render(F),x=F.value),I===!1)if(F.stopped)y.item(a).update(x);else{var _=!0;c.rowEdit&&(_=!1),y.item(a).update(""),new e[C]({renderTo:y.item(a).dom,renderId:!0,value:x,label:!1,editable:_,style:{padding:"0px",display:"inline-block"},events:[{beforechange:function(e){"$selected"!==f.index&&f.editable!==!0&&(e.canceledChange=!0)}},{change:function(e,t){"$selected"!==f.index&&(c.celledit.checkBoxChangedValue=t)}}]})}else w=E.dom.id,E=e.getWidget(w),F.stopped?(E.destroy(),y.item(a).update(x)):E.set(x,!1);if(T&&c.dirtyEnabled){var D=v.item(a);l.enableCellDirty(D)}}},renderSelect:function(n,o){var a,s,l=this,c=l.widget,u=c.store,h=l.getColumns(),f=h[n],g=f.key||f.index,p=l.el.select("."+r),m=p.item(n),v=m.select("."+t+" ."+d);for(void 0!==o?(a=o,s=o+1):(a=0,s=u.getLength());s>a;a++){var y,C=u.get(a,g),w=u.get(a,"id"),b=v.item(a),x=b.select(".fancy-field-checkbox"),S=0!==x.length,E=!0;c.selection.memory?c.selection.memory.all&&!c.selection.memory.except[w]?(C=!0,c.selection.domSelectRow(a)):c.selection.memory.selected[w]?(C=!0,c.selection.domSelectRow(a)):(C=!1,c.selection.domDeSelectRow(a)):b.parent().hasClass(i)&&(C=!0),c.selection.disabled&&(E=!1),S===!1?(v.item(a).update(""),new e.CheckBox({renderTo:v.item(a).dom,renderId:!0,value:C,label:!1,stopIfCTRL:!0,editable:E,disabled:!E,style:{padding:"0px",display:"inline-block"}})):(y=x.dom.id,x=e.getWidget(y),x.set(C,!1))}},renderImage:function(e,n){var i,o,a=this,s=a.widget,l=s.store,c=a.getColumns(),u=c[e],h=u.key||u.index,f=a.el.select("."+r),g=f.item(e),p=g.select("."+t),m=g.select("."+t+" ."+d);for(void 0!==n?(i=n,o=n+1):(i=0,o=l.getLength());o>i;i++){var v=l.get(i,h),y=l.get(i),C={rowIndex:i,value:v,data:y,style:{}},w="";if(u.render&&(C=u.render(C),v=C.value),C.attr)for(var b in C.attr)w+=b+'="'+C.attr[b]+'"';v="<img "+w+' src="'+C.value+'">',p.item(i).css(C.style),m.item(i).update(v)}},renderSparkLine:function(n,i,o){var a,s,l=this,c=l.widget,u=c.cellHeight,h=c.store,f=l.getColumns(),m=f[n],v=m.width,y=m.key||m.index,C=l.el.select("."+r),w=C.item(n),b=w.select("."+t),x=w.select("."+t+" ."+d),S=m.sparkConfig||{};w.addCls(g),void 0!==i?(a=i,s=i+1):(a=0,s=h.getLength());var E,I=u-1,T=v-20;switch(o){case"line":case"pie":case"box":E="width";break;case"bullet":E="width",I-=11,w.addCls(p);break;case"discrete":E="width",T=v,I-=2;break;case"bar":case"tristate":E="barWidth"}for(;s>a;a++){var L=h.get(a,y),F=h.get(a),_={rowIndex:a,value:L,data:F,style:{}};if(m.render&&(_=m.render(_),L=_.value),e.isArray(m.values)){var D=0,k=m.values.length;for(L=[];k>D;D++)L.push(h.get(a,m.values[D]))}b.item(a).css(_.style);var R=x.item(a).dom,M={type:o,fillColor:"transparent",height:I};e.apply(M,S),("bar"===o||"tristate"===o)&&(T=v-20,T/=L.length),M[E]=T,e.$(R).sparkline(L,M)}},renderProgressDonut:function(n,i){var o,a,s=this,l=s.widget,c=l.store,u=s.getColumns(),h=u[n],f=h.key||h.index,g=s.el.select("."+r),p=g.item(n),m=p.select("."+t),y=p.select("."+t+" ."+d);for(p.addCls(v),void 0!==i?(o=i,a=i+1):(o=0,a=c.getLength());a>o;o++){var C,w=c.get(o),b={rowIndex:o,data:w,style:{},column:h};C=h.smartIndexFn?h.smartIndexFn(w):c.get(o,f),b.value=C,h.format&&(b.value=s.format(b.value,h.format),C=b.value),h.render&&(b=h.render(b),C=b.value),m.item(o).css(b.style);var x=h.sparkConfig||{},S=y.item(o).dom;e.apply(x,{renderTo:S,value:C}),x.size||x.height||x.width||(x.size=l.cellHeaderHeight-6),e.get(S).update(""),new e.spark.ProgressDonut(x)}},renderGrossLoss:function(n,i){var o,a,s=this,l=s.widget,c=l.store,u=s.getColumns(),h=u[n],f=h.key||h.index,g=s.el.select("."+r),p=g.item(n),m=p.select("."+t),v=p.select("."+t+" ."+d);p.addCls(y),void 0!==i?(o=i,a=i+1):(o=0,a=c.getLength());var C=h.sparkConfig||{};for(C.showOnMax&&(C.maxValue=Math.max.apply(Math,c.getColumnData(f,h.smartIndexFn)));a>o;o++){var w,b=c.get(o),x={rowIndex:o,data:b,style:{},column:h};w=h.smartIndexFn?h.smartIndexFn(b):c.get(o,f),x.value=w,h.format&&(x.value=s.format(x.value,h.format),w=x.value),h.render&&(x=h.render(x),w=x.value),m.item(o).css(x.style),e.apply(C,{renderTo:v.item(o).dom,value:w,column:h}),new e.spark.GrossLoss(C)}},renderProgressBar:function(n,i){var o,a,s=this,l=s.widget,c=l.store,u=s.getColumns(),h=u[n],f=h.key||h.index,g=s.el.select("."+r),p=g.item(n),m=p.select("."+t),v=p.select("."+t+" ."+d),y=100;p.addCls(C),void 0!==i?(o=i,a=i+1):(o=0,a=c.getLength());var b=h.sparkConfig||{};for(b.percents===!1&&(y=Math.max.apply(Math,c.getColumnData(f)));a>o;o++){var x,S=c.get(o),E={rowIndex:o,data:S,style:{},column:h};x=h.smartIndexFn?h.smartIndexFn(S):c.get(o,f),E.value=x,h.format&&(E.value=s.format(E.value,h.format),x=E.value),h.render&&(E=h.render(E),x=E.value),m.item(o).css(E.style);var I=e.get(v.item(o).dom);if(I.select("."+w).length){var T=e.getWidget(I.select("."+w).item(0).attr("id"));T.value=x,T.maxValue=y,T.update()}else e.apply(b,{renderTo:v.item(o).dom,value:x,column:h,maxValue:y}),new e.spark.ProgressBar(b)}},renderHBar:function(n,i){var o,a,s=this,l=s.widget,c=l.store,u=s.getColumns(),h=u[n],f=h.key||h.index,g=s.el.select("."+r),p=g.item(n),m=p.select("."+t),v=p.select("."+t+" ."+d),y=h.sparkConfig||{},C=h.disabled||{};p.addCls(b);var w,x,S={},n=0,E=Number.MIN_VALUE;if(e.isArray(h.index))for(w=h.index.length;w>n;n++){var I=h.index[n];if(!C[I]){S[I]=c.getColumnData(I);var T=Math.max.apply(Math,S[I]);T>E&&(E=T),x=S[I].length}}else{var L=c.getColumnData(h.index),F=[];for(w=L.length;w>n;n++)for(var _=0,D=L[n].length;D>_;_++)C[_]||(S[_]=S[_]||[],S[_].push(L[n][_]));for(var k in S){var T=Math.max.apply(Math,S[k]);F.push(k),T>E&&(E=T),x=S[k].length}h.fields||(h.fields=F)}for(var R=[],M=0;x>M;M++){R[M]=0;for(var k in S)h.fields&&C[h.index+"."+k]||C[k]||(R[M]+=S[k][M])}for(maxValue=Math.max.apply(Math,R),y.maxItemValue=E,void 0!==i?(o=i,a=i+1):(o=0,a=c.getLength());a>o;o++){var B,L=c.get(o),A={rowIndex:o,data:L,style:{},column:h};B=h.smartIndexFn?h.smartIndexFn(L):c.get(o,f),A.value=B,h.format&&(A.value=s.format(A.value,h.format),B=A.value),h.render&&(A=h.render(A),B=A.value),m.item(o).css(A.style);var N=e.get(v.item(o).dom);if(N.select(".fancy-spark-hbar").length){var O=e.getWidget(N.select(".fancy-spark-hbar").item(0).attr("id"));O.maxValue=maxValue,O.maxItemValue=E,O.update(L)}else e.apply(y,{renderTo:v.item(o).dom,value:B,data:L,column:h,maxValue:maxValue,height:l.cellHeight-1}),new e.spark.HBar(y)}},renderCircle:function(e,n){function i(e,t){var n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg:svg");i.setAttribute("width",t),i.setAttribute("height",t),i.setAttribute("viewBox","0 0 "+t+" "+t);var r=document.createElementNS(n,"circle");r.setAttributeNS(null,"cx",t/2),r.setAttributeNS(null,"cy",t/2),r.setAttributeNS(null,"r",t/2);var o="#F0F0F0";t>50&&(o="F0F0F0"),0>e&&(o="#F9DDE0"),r.setAttributeNS(null,"fill",o),i.appendChild(r);var a=document.createElementNS(n,"path"),s=2*Math.PI/100,l=0,d=e*s-.001,c=t/2+t/2*Math.sin(l),u=t/2-t/2*Math.cos(l),h=t/2+t/2*Math.sin(d),f=t/2-t/2*Math.cos(d),g=0;d-l>Math.PI&&(g=1);var p="M "+t/2+","+t/2+" L "+c+","+u+" A "+t/2+","+t/2+" 0 "+g+" 1 "+h+","+f+" Z";a.setAttribute("d",p),0>e?a.setAttribute("fill","#EA7369"):a.setAttribute("fill","#44A4D3"),i.appendChild(a);var m=document.createElementNS(n,"circle");return m.setAttributeNS(null,"cx",t/2),m.setAttributeNS(null,"cy",t/2),m.setAttributeNS(null,"r",.25*t),m.setAttributeNS(null,"fill","#fff"),i.appendChild(m),i}var o,a,s=this,l=s.widget,c=l.store,u=s.getColumns(),h=u[e],f=h.key||h.index,g=s.el.select("."+r),p=g.item(e),v=p.select("."+t+" ."+d),y=l.cellHeight-4;for(p.addCls(m),void 0!==n?(o=n,a=n+1):(o=0,a=c.getLength());a>o;o++){var C,w=c.get(o),b={rowIndex:o,data:w,style:{}};C=h.smartIndexFn?h.smartIndexFn(w):c.get(o,f),b.value=C,h.render&&(b=h.render(b),C=b.value);var x=v.item(o).dom;""===x.innerHTML&&x.appendChild(i(C,y))}},removeNotUsedCells:function(){for(var e=this,n=e.widget,i=n.store,o=e.el.select("."+r),a=0,s=o.length;s>a;a++)for(var l=o.item(a),d=l.select("."+t),c=i.getLength(),u=d.length;u>c;c++)d.item(c).remove()},getFormat:function(t){var n=this,i=n.widget,r=i.lang;switch(t){case"number":return function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,r.thousandSeparator)};case"date":return function(n){var i=e.Date.parse(n,r.date.read,t.mode);return n=e.Date.format(i,r.date.write,t.mode)}}switch(t.type){case"date":return function(n){if(0===n.length)return"";var i=e.Date.parse(n,t.read,t.mode);return n=e.Date.format(i,t.write,void 0,t.mode)}}return t.inputFn?t.inputFn:void 0},format:function(t,n){switch(e.typeOf(n)){case"string":t=this.getFormat(n)(t);break;case"function":t=n(t);break;case"object":t=n.inputFn?n.inputFn(t):this.getFormat(n)(t)}return t},enableCellDirty:function(e){e.hasCls(c)||(e.addCls(c),e.append('<div class="'+u+'"></div>'))},clearDirty:function(e){var n=this;return void 0!==e?(n.el.select("."+t+'[index="'+e+'"] .'+u).destroy(),void n.el.select("."+c+'[index="'+e+'"]').removeCls(c)):(n.el.select("."+u).destroy(),void n.el.select("."+c).removeCls(c))},showEmptyText:function(){var t=this,n=t.widget,i=n.store;if("center"===t.side&&(t.emptyTextEl&&(t.emptyTextEl.destroy(),delete t.emptyTextEl),0===i.dataView.length)){var r=e.get(document.createElement("div"));r.addCls(f),r.update(n.emptyText),t.emptyTextEl=e.get(t.el.dom.appendChild(r.dom))}}}}(),function(){var e=Fancy,t=e.GRID_CELL_CLS,n=e.GRID_CELL_INNER_CLS,i=e.GRID_COLUMN_CLS,r=e.GRID_BODY_CLS,o=e.GRID_CELL_WRAPPER_CLS,a=e.GRID_COLUMN_SELECT_CLS,s=e.GRID_COLUMN_ELLIPSIS_CLS,l=e.GRID_COLUMN_ORDER_CLS,d=e.GRID_COLUMN_TEXT_CLS,c=e.GRID_COLUMN_SPARKLINE_CLS,u=(e.GRID_COLUMN_SPARKLINE_BULLET_CLS,e.GRID_COLUMN_CHART_CIRCLE_CLS),h=e.GRID_COLUMN_SPARK_PROGRESS_DONUT_CLS,f=e.GRID_COLUMN_GROSSLOSS_CLS,g=e.GRID_COLUMN_PROGRESS_CLS,p=(e.GRID_COLUMN_PROGRESS_BAR_CLS,e.GRID_COLUMN_H_BAR_CLS),m=e.GRID_COLUMN_ROW_DRAG_CLS,v=e.ANIMATE_DURATION;e.define("Fancy.grid.Body",{extend:e.Widget,mixins:[e.grid.body.mixin.Updater],cls:r,cellTpl:['<div class="'+n+'">{cellValue}</div>'],cellWrapperTpl:['<div class="'+o+'">','<div class="'+n+'">{cellValue}</div>',"</div>"],constructor:function(){this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.addEvents("adddomcolumns"),e.initTpl(),e.render(),e.ons()},initTpl:function(){var t=this;t.cellTpl=new e.Template(t.cellTpl),t.cellWrapperTpl=new e.Template(t.cellWrapperTpl)},ons:function(){var e=this,n=e.widget,r=n.id;n.on("afterrender",e.onAfterRender,e);var o="."+i+'[grid="'+r+'"]',a=o+" div."+t;e.el.on("click",e.onCellClick,e,a),e.el.on("dblclick",e.onCellDblClick,e,a),e.el.on("mouseenter",e.onCellMouseEnter,e,a),e.el.on("mouseleave",e.onCellMouseLeave,e,a),e.el.on("mousedown",e.onCellMouseDown,e,a),e.el.on("mouseenter",e.onColumnMouseEnter,e,o),e.el.on("mouseleave",e.onColumnMouseLeave,e,o),e.el.on("contextmenu",e.onContextMenu,e,a)},render:function(){var t,n=this,i=n.widget,o=e.get(document.createElement("div"));o.addCls(r),t=i.el.select(".fancy-grid-"+n.side).dom,n.el=e.get(t.appendChild(o.dom))},onAfterRender:function(){this.update(),this.setHeight()},setColumnsPosition:function(e){var t=this,n=t.widget,r=t.getColumns(),o=0,a=r.length,s=0,l=t.el.select("."+i+'[grid="'+n.id+'"]'),e=e||t.scrollLeft||0;for(s+=e;a>o;o++){var d=r[o],c=l.item(o);c.css({left:s+"px"}),d.hidden||(s+=d.width)}},wheelScroll:function(e){var t=this,n=t.widget,r=n.knobOffSet,o=t.el.select("."+i+'[grid="'+n.id+'"]');if(0!==o.length){for(var a=parseInt(o.item(0).css("top")),s=0,l=o.length,d=n.getBodyHeight(),c=n.getCellsViewHeight(),u=c-d+r,h={oldScroll:parseInt(o.item(0).css("top")),newScroll:parseInt(o.item(0).css("top"))+30*e,deltaScroll:30*e};l>s;s++){var f=o.item(s),g=parseInt(f.css("top"))+30*e;g>0?(g=0,h.newScroll=0):Math.abs(g)>u&&(g=-u-r,h.newScroll=g),g>0&&(g=0),f.css("top",g+"px")}return h.scrolled=a!==parseInt(o.item(0).css("top")),h}},scroll:function(e,t){var n=this,r=n.widget,o=n.el.select("."+i+'[grid="'+r.id+'"]'),a=0,s=o.length,l={};if(e!==!1&&null!==e&&void 0!==e)for(l.scrollTop=e;s>a;a++){var d=o.item(a);d.css("top",-e+"px")}return t!==!1&&null!==t&&void 0!==t&&(l.scrollLeft=t,r.header&&r.header.scroll(t),n.scrollLeft=t,r.body.setColumnsPosition(t),"center"===n.side&&(r.grouping&&r.grouping.scrollLeft(t),r.summary&&r.summary.scrollLeft(t))),l},setHeight:function(){var e=this.widget.getBodyHeight();this.css("height",e+"px")},onCellClick:function(e){var t=this,n=t.widget;n.fire("cellclick",t.getEventParams(e)),n.fire("rowclick",t.getEventParams(e)),n.fire("columnclick",t.getColumnEventParams(e)),n.activated===!1&&(n.activated=!0,n.fire("activate"))},onCellDblClick:function(e){var t=this,n=t.widget;n.fire("celldblclick",t.getEventParams(e)),n.fire("rowdblclick",t.getEventParams(e)),n.fire("columndblclick",t.getColumnEventParams(e))},getEventParams:function(t){var n=this,i=n.widget,r=i.store,o=n.getColumns(),a=t.currentTarget,s=e.get(t.currentTarget),l=s.parent();if(void 0===s.parent().dom)return!1;if(0===r.getLength())return!1;var d=parseInt(l.attr("index")),c=parseInt(s.attr("index")),u=o[d],h=u.index||u.key,f=r.get(c,h),g=r.getId(c),p=r.get(c),m=r.getById(g);return u.smartIndexFn&&(f=u.smartIndexFn(p)),{e:t,id:g,side:n.side,cell:a,column:u,rowIndex:c,columnIndex:d,value:f,data:p,item:m}},getColumnEventParams:function(t){var n=this,i=n.widget,r=i.store,o=e.get(t.currentTarget),a=o.parent(),s=parseInt(a.attr("index")),l=n.getColumns(),d=l[s],c={e:t,side:n.side,columnIndex:s,column:d,columnDom:a.dom,cell:o.dom};return i.columnClickData&&(c.data=r.getColumnData(d.index,d.smartIndexFn)),c},getColumnHoverEventParams:function(t){var n=this,i=e.get(t.currentTarget),r=parseInt(i.attr("index")),o=n.getColumns(),a=o[r];return{e:t,side:n.side,columnIndex:r,column:a,columnDom:i.dom,cell:t.target}},getColumns:function(){return this.widget.getColumns(this.side)},onCellMouseEnter:function(t){var n=this,i=n.widget,r=n.getEventParams(t),o=n.prevCellOver;e.nojQuery&&o&&n.fixZeptoBug&&(r.rowIndex!==o.rowIndex||r.columnIndex!==o.columnIndex||r.side!==o.side)&&(i.fire("cellleave",o),r.rowIndex!==o.rowIndex&&i.fire("rowleave",o)),o?r.rowIndex!==n.prevCellOver.rowIndex&&i.fire("rowenter",r):i.fire("rowenter",r),i.fire("cellenter",r),n.prevCellOver=r},onCellMouseDown:function(t){var n=this,i=n.widget,r=n.getEventParams(t),o={e:r.e,side:r.side,columnDom:e.get(r.cell).parent().dom,column:r.column,columnIndex:r.columnIndex,cell:r.cell};2===t.button&&2===t.buttons||3===t.which||(i.fire("beforecellmousedown",r),i.fire("cellmousedown",r),i.fire("columnmousedown",o),i.activated===!1&&(i.activated=!0,i.fire("activate")))},onCellMouseLeave:function(t){var n=this,i=n.widget,r=n.getEventParams(t),o=n.prevCellOver;if(e.nojQuery){if(void 0===o)return;return void(n.fixZeptoBug=r)}i.fire("rowleave",o),i.fire("cellleave",o),delete n.prevCellOver},onColumnMouseEnter:function(e){var t=this,n=t.widget,i=t.getColumnHoverEventParams(e),r=t.prevColumnOver;r?t.prevCellOver&&i.rowIndex!==t.prevCellOver.rowIndex&&n.fire("rowenter",i):n.fire("columnenter",i),t.prevColumnOver=i},onColumnMouseLeave:function(e){var t=this,n=t.widget;n.fire("columnleave",t.prevColumnOver),delete t.prevColumnOver},getCell:function(e,n){var r=this,o=r.widget;return this.el.select("."+i+'[index="'+n+'"][grid="'+o.id+'"] .'+t+'[index="'+e+'"]')},getDomCell:function(e,n){var r=this,o=r.widget;return r.el.select("."+i+'[index="'+n+'"][grid="'+o.id+'"] .'+t+'[index="'+e+'"]').dom},getDomColumn:function(e){var t=this,n=t.widget;return t.el.select("."+i+'[index="'+e+'"][grid="'+n.id+'"]').dom},destroy:function(){var e=this,n=e.el,r="div."+t,o="div."+i;n.un("click",e.onCellClick,e,r),n.un("dblclick",e.onCellDblClick,e,r),n.un("mouseenter",e.onCellMouseEnter,e,r),n.un("mouseleave",e.onCellMouseLeave,e,r),n.un("mousedown",e.onCellMouseDown,e,r),n.un("mouseenter",e.onColumnMouseEnter,e,o),n.un("mouseleave",e.onColumnMouseLeave,e,o)},hideColumn:function(e){var t=this,n=t.el.select("."+i),r=n.item(e),o=parseInt(r.css("width")),a=e+1,s=n.length;for(r.hide();s>a;a++){var l=n.item(a),d=parseInt(l.css("left"))-o;l.css("left",d)}},showColumn:function(e){var t,n=this,r=n.el.select("."+i),o=r.item(e),a=e+1,s=r.length;for(o.show(),t=parseInt(o.css("width"));s>a;a++){var l=r.item(a),d=parseInt(l.css("left"))+t;l.css("left",d)}},removeColumn:function(e){var t=this,n=t.el.select("."+i),r=n.item(e),o=parseInt(r.css("width")),a=e+1,s=n.length;for(r.destroy();s>a;a++){var l=n.item(a),d=parseInt(l.css("left"))-o;l.attr("index",a-1),l.css("left",d)}},insertColumn:function(t,n){var r,o=this,c=o.widget,u=o.getColumns(),h=o.el.select("."+i),f=n.width,g=e.get(document.createElement("div")),p=t,v=h.length,y=0,C=0,w=t;for("center"===o.side&&(y=-c.scroller.scrollLeft);w>C;C++)u[C].hidden||(y+=u[C].width);for(r=y;v>p;p++)if(!u[p].hidden){var b=h.item(p);y=parseInt(b.css("left"))+n.width,b.css("left",y),b.attr("index",p+1)}if(g.addCls(i),g.attr("grid",c.id),"$selected"===n.index)g.addCls(a);else switch(n.type){case"order":g.addCls(l);break;case"rowdrag":g.addCls(m)}if(n.cls&&g.addCls(n.cls),"text"===n.type&&g.addCls(d),g.css({width:f+"px"}),g.attr("index",t),n.cellAlign&&g.css("text-align",n.cellAlign),n.ellipsis===!0)switch(n.type){case"string":case"text":case"number":case"date":case"combo":g.addCls(s)}var x=c.scroller.getScroll();g.css("top",-x),0===t&&h.length?(g.css("left","0px"),o.el.dom.insertBefore(g.dom,h.item(t).dom)):0!==t&&h.length&&(t===h.length?(g.css("left",y+"px"),o.el.dom.appendChild(g.dom)):(g.css("left",r+"px"),o.el.dom.insertBefore(g.dom,h.item(t).dom))),o.checkDomCells(),o.updateRows(void 0,t)},reSetIndexes:function(){var t=this,n=t.getColumns();e.each(n,function(e,n){t.el.select("."+i+'[index="'+n+'"]').attr("index",n)})},clearColumnsStyles:function(){var e=this,n=e.el.select("div."+t);n.each(function(e){e.css("color",""),e.css("background-color","")})},updateColumnsSizes:function(){var t=this,n=t.widget,r=t.getColumns(),o=0;"center"===t.side&&(o=-n.scroller.scrollLeft),e.each(r,function(e,n){if(!e.hidden){var r=t.el.select("."+i+'[index="'+n+'"]');Fancy.nojQuery?(r.animate({width:e.width},v),r.animate({left:o},v)):(r.animate({width:e.width,left:o},v),r.css("overflow","")),o+=e.width}})},reSetColumnsAlign:function(){var e=this,t=e.getColumns(),n=this.el.select("."+i);n.each(function(e,n){var i=t[n];e.css("text-align",i.cellAlign||"")})},reSetColumnsCls:function(){var t=this,n=t.getColumns(),r=t.el.select("."+i);r.each(function(t,r){var o=n[r],d=t.attr("class").split(" ");switch(e.each(d,function(e){switch(e){case i:break;case o.cls:break;case y[o.type]:break;default:t.removeCls(e)}}),o.cls&&t.addCls(o.cls),o.ellipsis&&t.addCls(s),o.type){case"order":t.addCls(l);break;case"select":t.addCls(a);break;case"rowdrag":t.addCls(m)}})},onContextMenu:function(e){var t=this,n=t.widget;n.fire("contextmenu",t.getEventParams(e))},updateColumnsVisibility:function(){var e=this,t=e.getColumns(),n=e.el.select("."+i);n.each(function(e,n){var i=t[n];i.hidden?e.hide():"none"===e.css("display")&&e.show()})}});var y={sparklineline:c,sparklinebar:c,sparklinetristate:c,sparklinediscrete:c,sparklinebullet:c,sparklinepie:c,sparklinebox:c,circle:u,progressdonut:h,grossloss:f,progressbar:g,hbar:p}}(),function(){var e=Fancy,t=e.GRID_HEADER_COLUMN_TRIGGERED_CLS,n=e.GRID_HEADER_CELL_TRIGGER_UP_CLS,i=e.GRID_HEADER_CELL_TRIGGER_DOWN_CLS;e.Mixin("Fancy.grid.header.mixin.Menu",{triggeredColumnCls:t,triggerUpCls:n,triggerDownCls:i,showMenu:function(n,i,r,o){var a=this,s=a.widget,l=n.offset();a.hideMenu(),n.addCls(t),r.menu.rendered?a.updateColumnsMenu(r,o):(r.menu=a.generateMenu(r,o),r.menu=new e.Menu({column:r,items:r.menu,theme:s.theme,events:[{hide:a.onMenuHide,scope:a}]})),r.menu.showAt(l.left+parseInt(n.css("width"))-26,l.top+parseInt(n.css("height"))-1),a.activeMenu=r.menu,a.activeCell=n},hideMenu:function(){var e=this,n=e.widget,i=n.header,r=n.rightHeader,o=n.leftHeader;switch(e.side){case"left":i.activeMenu&&(i.activeMenu.hide(),i.activeCell.removeCls(t),delete i.activeMenu,delete i.activeCell),r.activeMenu&&(r.activeMenu.hide(),r.activeCell.removeCls(t),delete r.activeMenu,delete r.activeCell);break;case"center":o.activeMenu&&(o.activeMenu.hide(),o.activeCell.removeCls(t),delete o.activeMenu,delete o.activeCell),r.activeMenu&&(r.activeMenu.hide(),r.activeCell.removeCls(t),delete r.activeMenu,delete r.activeCell);break;case"right":o.activeMenu&&(o.activeMenu.hide(),o.activeCell.removeCls(t),delete o.activeMenu,delete o.activeCell),i.activeMenu&&(i.activeMenu.hide(),i.activeCell.removeCls(t),delete i.activeMenu,delete i.activeCell)}e.activeMenu&&(e.activeMenu.hide(),e.activeCell.removeCls(t)),delete e.activeMenu,delete e.activeCell},generateMenu:function(e,t){for(var r,o=this,a=o.widget,s=a.lang,l=[],d="",c=0,u=t.length;u>c;c++)if(e.index===t[c].index){r=c;break}switch(e.sortable===!1&&(d="fancy-menu-item-disabled"),e.sortable&&(l.push({text:s.sortAsc,cls:d,imageCls:n,handler:function(){a.sorter.sort("asc",e.index,o.side),e.menu.hide()}}),l.push({text:s.sortDesc,cls:d,imageCls:i,handler:function(){a.sorter.sort("desc",e.index,o.side),e.menu.hide()}}),l.push("-")),l.push({text:s.columns,index:"columns",items:o.prepareColumns(t)}),o.side){case"left":case"right":e.lockable!==!1&&(l.push("-"),l.push({text:s.unlock,handler:function(){e.menu.hide(),a.unLockColumn(r,o.side)}}));break;case"center":t.length>1&&a.leftColumns.length&&e.lockable!==!1&&(l.push("-"),l.push({text:s.lock,handler:function(){e.menu.hide(),a.lockColumn(r,o.side)}})),t.length>1&&a.rightColumns.length&&e.lockable!==!1&&("-"!==l[l.length-2]&&l.push("-"),l.push({text:s.rightLock,handler:function(){e.menu.hide(),a.rightLockColumn(r,o.side)}}))}return l},prepareColumns:function(e){for(var t,n=this,i=n.widget,r=[],o=0,a=e.length,s=[];a>o;o++){var l=!0,d=e[o];d.hidden&&(l=!1);var c={text:d.title,checked:l,index:d.index,handler:function(e,t){return t.checked!==!0||t.checkbox.get()||t.checkbox.set(!0),t.checked&&1===e.el.select(".fancy-checkbox-on").length?void t.checkbox.set(!0):(t.checked=!t.checked,t.checkbox.set(t.checked),t.checked?i.showColumn(n.side,t.index):i.hideColumn(n.side,t.index),void(i.responsive&&i.onWindowResize()))}};d.grouping?(s=s||[],s.push(c),t=d.grouping):(s.length&&(r.push({text:t,items:s}),t=void 0,s=[]),r.push(c))}return s.length&&r.push({text:t,items:s}),r},onMenuHide:function(){this.el.select("."+t).removeCls(t)},updateColumnsMenu:function(e,t,n){for(var i,r,o=this,a=e.menu,s=0,l=a.items.length;l>s;s++)if(r=a.items[s],"columns"===r.index){i=r;break}s=0,l=i.items.length;for(var d=!1;l>s;s++){r=i.items[s];var c=t[s];r.checkbox&&(r.checkbox.set(!c.hidden,!1),d=!0)}d||n||(i.items=o.prepareColumns(t))},destroyMenus:function(){for(var t,n=this,i=n.widget,r=i.getColumns(n.side),o=0,a=r.length;a>o;o++)t=r[o],e.isObject(t.menu)&&t.menu.destroy()}})}(),function(){var e=Fancy,t=e.GRID_HEADER_CLS,n=e.GRID_HEADER_CELL_CLS,i=e.GRID_HEADER_CELL_CONTAINER_CLS,r=e.GRID_HEADER_CELL_TEXT_CLS,o=e.GRID_HEADER_CELL_TRIGGER_CLS,a=e.GRID_HEADER_CELL_TRIGGER_IMAGE_CLS,s=e.GRID_HEADER_CELL_TRIGGER_DISABLED_CLS,l=e.GRID_HEADER_CELL_GROUP_LEVEL_1_CLS,d=e.GRID_HEADER_CELL_GROUP_LEVEL_2_CLS,c=e.GRID_HEADER_CELL_SELECT_CLS,u=e.GRID_HEADER_CELL_FILTER_FULL_CLS,h=e.GRID_HEADER_CELL_FILTER_SMALL_CLS,f=e.GRID_HEADER_CELL_TRIPLE_CLS,g=e.GRID_HEADER_CELL_CHECKBOX_CLS,p=(e.GRID_COLUMN_SORT_ASC,e.GRID_COLUMN_SORT_DESC,e.FIELD_CHECKBOX_CLS),m=e.ANIMATE_DURATION;e.define("Fancy.grid.Header",{extend:e.Widget,cls:t,mixins:["Fancy.grid.header.mixin.Menu"],cellTpl:['<div class="'+n+' {cls}" style="display:{display};width:{columnWidth}px;height: {height};left: {left};" {groupIndex} index="{index}">','<div class="'+i+'" style="height: {height};">','<span class="'+r+'">{columnName}</span>','<span class="'+o+'">','<div class="'+a+'"></div>',"</span>","</div>","</div>"],constructor:function(e){this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.initTpl(),e.render(),e.renderHeaderCheckBox(),e.setAlign(),e.setCellsPosition(),e.ons()},initTpl:function(){this.cellTpl=new e.Template(this.cellTpl)},ons:function(){var e=this,t=e.widget,i=e.el,r="div."+n;t.on("render",e.onAfterRender,e),t.on("docmove",e.onDocMove,e),i.on("click",e.onTriggerClick,e,"span."+o),i.on("click",e.onCellClick,e,r),i.on("mousemove",e.onCellMouseMove,e,r),i.on("mousedown",e.onCellMouseDown,e,r),i.on("mousedown",e.onMouseDown,e)},render:function(){var t,n=this,i=n.widget,r=n.getColumns(),o=e.get(document.createElement("div")),a="",d=0,f=r.length,g=1,p={},m=0,v=i.filter&&i.filter.header,y="full",C=i.cellHeaderHeight;for(i.groupheader&&(v&&!i.filter.groupHeader?y="small":g=2),v&&g++;f>d;d++){var w=r[d],b=w.title||w.header,x=C,S="",E="";if(1!==g&&(w.grouping?(p[w.grouping]||(p[w.grouping]={width:0,title:w.grouping,left:m}),x=v&&i.filter.groupHeader?2*C+"px":C+"px",w.hidden||(p[w.grouping].width+=w.width),E='group-index="'+w.grouping+'"',S=l):x=g*C+"px"),m+=w.width,"$selected"===w.index&&(S+=" "+c),w.menu||(S+=" "+s),w.filter&&w.filter.header)switch(y){case"small":S+=" "+h;break;case"full":S+=" "+u}e.isNumber(x)&&(x+="px");var I={cls:S,columnName:b,columnWidth:w.width,index:d,height:x,left:"initial",groupIndex:E,display:w.hidden?"none":""};a+=n.cellTpl.getHTML(I)}o.css({height:C*g+"px",width:n.getColumnsWidth()}),o.addCls(n.cls),i.groupheader&&(o.addCls("fancy-grid-header-grouped"),a+=n.getGroupingCellsHTML(p)),o.update(a),t=i.el.select(".fancy-grid-"+n.side).dom,n.el=e.get(t.appendChild(o.dom))},insertCell:function(t,i){var r=this,o=r.widget,a=r.el.select("."+n+":not(."+d+")"),l=r.getColumns(),u="",h=i.title||i.header,f=parseInt(a.item(0).css("height")),g="",p=0;if("center"===r.side&&(p=-o.scroller.scrollLeft),o.groupheader){f=2*o.cellHeight;var m=r.el.select("."+d);t!==o.columns.length-1&&m.each(function(e){var t=parseInt(e.css("left")||0)+i.width;e.css("left",t)})}"$selected"===i.index&&(u+=" "+c),i.menu||(u+=" "+s);for(var v=0,y=t;y>v;v++)l[v].hidden||(p+=l[v].width);for(var C=t,w=l.length-1;w>C;C++){var b=l[C];if(!b.hidden){var x=a.item(C),S=parseInt(x.css("left")||0)+i.width;x.css("left",S)}}var E=r.cellTpl.getHTML({cls:u,columnName:h,columnWidth:i.width,index:t,height:String(f)+"px",left:String(p)+"px",groupIndex:g});0===t&&a.length?e.get(a.item(0).before(E)):0!==t&&a.length&&(t===a.length?r.el.append(E):e.get(a.item(t).before(E)));r.getCell(t);r.css("width",parseInt(r.css("width"))+i.width)},setAlign:function(){for(var e=this,t=e.getColumns(),n=0,i=t.length;i>n;n++){var r=t[n];r.align&&e.getDomCell(n).css("text-align",r.align)}},onAfterRender:function(){},setCellsPosition:function(){var t=this,i=t.widget,r=t.getColumns(),o=0,a=t.el.select("."+n);if(o+=t.scrollLeft||0,e.each(r,function(e,t){var n=a.item(t),r="0px";e.grouping&&(r=i.cellHeaderHeight+"px"),n.css({top:r,left:o+"px"}),e.hidden||(o+=e.width)}),i.groupheader){var s=t.el.select("."+d);s.each(function(n){var i=n.attr("index"),o=t.el.select('[group-index="'+i+'"]'),a=parseInt(o.item(0).css("left")),s=0;e.each(r,function(e){e.grouping!==i||e.hidden||(s+=e.width)}),n.css("left",a),n.css("width",s)})}},fixGroupHeaderSizing:function(){var t=this,i=t.widget,r=i.cellHeaderHeight,o=t.getColumns(),a=t.el.select("."+n),s=0,c={},f={},g={},p=t.calcRows();"center"===t.side&&(s=i.scroller.scrollLeft),e.each(o,function(e,t){var n=a.item(t),o=e.grouping,d="0px",m=r*p;c[o]=!0,o?(void 0===f[o]?(f[o]=e.width,g[o]=s):f[o]+=e.width,n.addCls(l),d=r+"px",m=r,e.filter&&e.filter.header&&(m=2*r,setTimeout(function(){n.addCls(u)},30))):(n.removeCls(l),e.filter&&e.filter.header&&(setTimeout(function(){n.addCls(h)},30),n.addCls(h))),!i.groupheader||m!==r||o||e.filter||(m=2*r),n.css({top:d,height:m}),s+=e.width});for(var m in f){var v=t.el.select('[index="'+m+'"]');v.css({left:g[m],width:f[m]})}var y=t.el.select("."+d);y.each(function(e){var t=e.attr("index");c[t]||e.destroy()})},getColumnsWidth:function(){for(var e=this,t=e.getColumns(),n=0,i=0,r=t.length;r>i;i++){var o=t[i];n+=o.width}return n},getColumns:function(){var e,t=this,n=t.widget;switch(t.side){case"left":e=n.leftColumns;break;case"center":e=n.columns;break;case"right":e=n.rightColumns}return e},getDomCell:function(e){return this.el.select("."+n).item(e)},onCellClick:function(t){var n=this,i=n.widget,r=i.columndrag,s=t.currentTarget,l=e.get(t.target),c=parseInt(e.get(s).attr("index"));r&&"dragging"===r.status||l.hasCls(o)||l.hasCls(a)||e.get(s).hasCls(d)||i.fire("headercellclick",{e:t,side:n.side,cell:s,index:c})},onCellMouseMove:function(t){var n=this,i=n.widget,r=t.currentTarget,o=e.get(r),a=o.hasCls(d),s=parseInt(e.get(r).attr("index"));a||i.fire("headercellmousemove",{e:t,side:n.side,cell:r,index:s})},onMouseDown:function(t){var n=e.get(t.target);"INPUT"===n.prop("tagName")||t.preventDefault()},onCellMouseDown:function(t){var n=this.widget,i=t.currentTarget,r=parseInt(e.get(i).attr("index"));n.fire("headercellmousedown",{e:t,side:this.side,cell:i,index:r})},scroll:function(e){this.scrollLeft=e,this.setCellsPosition()},getGroupingCellsHTML:function(t){var n=this,i=n.widget,r="";return e.each(t,function(e,t){r+=n.cellTpl.getHTML({cls:d,columnName:e.title,columnWidth:e.width,index:t,height:i.cellHeaderHeight+"px",left:e.left+"px",groupIndex:""})}),r},destroy:function(){var e=this,t=e.el,i="div."+n;t.un("click",e.onCellClick,e,i),t.un("mousemove",e.onCellMouseMove,e,i),t.un("mousedown",e.onCellMouseDown,e,i),t.un("mousedown",e.onMouseDown,e)},getCell:function(e){return this.el.select("."+n+'[index="'+e+'"]')},onTriggerClick:function(t){var n=this,i=e.get(t.currentTarget),r=i.parent().parent(),o=parseInt(r.attr("index")),a=n.getColumns(),s=a[o];t.stopPropagation(),n.showMenu(r,o,s,a)},hideCell:function(t){var i=this,r=i.el.select("."+n+":not(."+d+")"),o=r.item(t),a=parseInt(o.css("width")),s=t+1,c=r.length,u=i.getColumns();if(o.hasCls(l)){var h=o.attr("group-index"),f=i.el.select("."+d+'[index="'+h+'"]').item(0),g=parseInt(f.css("width"));f.css("width",g-a)}o.hide();for(var p={};c>s;s++){var m=r.item(s),v=parseInt(m.css("left"))-a,y=u[s];y.grouping&&u[t].grouping!==y.grouping&&(p[y.grouping]=!0),m.css("left",v)}e.each(p,function(e,t){var n=i.el.select("."+d+'[index="'+t+'"]').item(0);n.css("left",parseInt(n.css("left"))-a)})},showCell:function(e){var t,i=this,r=i.el.select("."+n+":not(."+d+")"),o=r.item(e),a=e+1,s=r.length,c=i.getColumns();if(o.show(),t=parseInt(o.css("width")),o.hasCls(l)){var u=o.attr("group-index"),h=i.el.select("."+d+'[index="'+u+'"]').item(0),f=parseInt(h.css("width"));h.css("width",f+t)}for(var g={};s>a;a++){var p=r.item(a),m=parseInt(p.css("left"))+t,v=c[a];v.grouping&&c[e].grouping!==v.grouping&&(g[v.grouping]=!0),p.css("left",m)}for(var y in g){var h=i.el.select("."+d+'[index="'+y+'"]').item(0);h.css("left",parseInt(h.css("left"))+t)}},removeCell:function(e){var t=this,i=t.el.select("."+n+":not(."+d+")"),r=i.item(e),o=parseInt(r.css("width")),a=e+1,s=i.length,l={},c=!1;for(r.attr("group-index")&&(c=r.attr("group-index"),l[c]=!0),r.destroy();s>a;a++){var u=i.item(a),h=parseInt(u.css("left"))-o;u.attr("group-index")&&(l[u.attr("group-index")]=!0),u.attr("index",a-1),u.css("left",h)}for(var f in l){var g=t.el.select('[index="'+f+'"]'),p=parseInt(g.css("width"))-o,m=parseInt(g.css("left"))-o;c&&g?(g.css("width",p),g.attr("index")!==c&&g.css("left",m)):g.css("left",m)}if(c&&0===t.el.select('[group-index="'+c+'"]').length){var g=t.el.select('[index="'+c+'"]');g.destroy()}"center"!==t.side&&t.css("width",parseInt(t.css("width"))-o)},renderHeaderCheckBox:function(){for(var t=this,i=t.widget,o=t.getColumns(),a=0,s=o.length,l=t.el.select("."+n+":not(."+d+")");s>a;a++){var u=o[a];if(e.isObject(u.headerCheckBox)){var h=u.headerCheckBox.el,f=h.attr("id"),h=e.get(f);h.dom||(u.headerCheckBox=!0)}if(u.headerCheckBox===!0&&"select"!==u.type){var p=l.item(a),m=p.firstChild(),v=p.select("."+r),y=(v.dom.innerHTML,u.title?u.title:!1),C=0;switch(u.type){case"checkbox":case"switcher":p.addCls(g);break;case"select":p.addCls(c)}v.update(""),y.length&&(C=15*y.width),u.headerCheckBox=new e.CheckBox({renderTo:m.dom,renderId:!0,labelWidth:C,value:!1,label:y,labelAlign:"right",style:{padding:"0px",display:"inline-block"},events:[{change:function(e,t){for(var n=0,r=i.getViewTotal();r>n;n++)i.set(n,u.index,t)}}]})}}},reSetIndexes:function(){var e=this.el.select("."+n+":not(."+d+")");e.each(function(e,t){e.attr("index",t)})},reSetGroupIndexes:function(){var e=this,t=e.getColumns(),i=this.el.select("."+n+":not(."+d+")");i.each(function(e,n){var i=t[n],r=i.grouping;e.attr("group-index")&&!r?e.removeAttr("group-index"):r&&e.attr("group-index")!==r&&e.attr("group-index",r)})},updateTitles:function(){var t=this,i=t.getColumns();e.each(i,function(e,i){e.headerCheckBox||t.el.select("div."+n+'[index="'+i+'"] .'+r).update(e.title||"")})},updateCellsSizes:function(){var t=this,i=t.widget,r=t.getColumns(),o=0;"center"===t.side&&(o=-i.scroller.scrollLeft),e.each(r,function(e,i){if(!e.hidden){var r=t.el.select("div."+n+'[index="'+i+'"]'),a=parseInt(r.css("left")),s=parseInt(r.css("width"));if(a===o&&s===e.width)return void(o+=e.width);Fancy.nojQuery?(r.animate({width:e.width},m),r.animate({left:o},m)):r.animate({width:e.width,left:o},m),o+=e.width}})},calcRows:function(){var e=this,t=e.widget,n=t.columns.concat(t.leftColumns).concat(t.rightColumns),i=1;if(Fancy.each(n,function(e){e.grouping&&(2>i&&(i=2),e.filter&&e.filter.header&&3>i&&(i=3)),e.filter&&e.filter.header&&2>i&&(i=2)}),t.groupheader&&2===i){var r=t.el.select("."+f);r.length&&(i=3)}return i},reSetColumnsAlign:function(){var e=this,t=e.getColumns(),i=this.el.select("."+n+":not(."+d+")");i.each(function(e,n){var i=t[n];e.css("text-align",i.align||"")})},destroyMenus:function(){},onDocMove:function(){var e=this,t=e.widget;("none"===t.el.css("display")||t.panel&&t.panel.el&&"none"===t.panel.el.css("display")&&e.hideMenu)&&e.hideMenu()},reSetColumnsCls:function(){var e=this,t=e.getColumns(),i=this.el.select("."+n+":not(."+d+")");i.each(function(e,n){var i=t[n];i.menu?e.removeCls(s):e.addCls(s)})},updateCellsVisibility:function(){var e=this,t=e.getColumns(),i=this.el.select("."+n+":not(."+d+")");i.each(function(e,n){var i=t[n];i.hidden?e.hide():"none"===e.css("display")&&e.show()})},reSetCheckBoxes:function(){var t=this,i=t.getColumns(),r=this.el.select("."+n+":not(."+d+")");e.each(i,function(t,n){var i=r.item(n),o=i.select("."+p);if(o.length){var a=e.getWidget(o.item(0).attr("id"));switch(i.removeCls(g),i.removeCls(c),t.type){case"select":i.addCls(c);break;case"checkbox":i.addCls(g);break;default:t.headerCheckBox||a.destroy()}}}),t.renderHeaderCheckBox()}})}(),function(){var e=Fancy,t=e.PICKER_DATE_CELL_ACTIVE_CLS,n=e.PICKER_DATE_CLS,i=e.PICKER_DATE_CELL_TODAY_CLS,r=e.PICKER_DATE_CELL_OUT_RANGE_CLS,o="fancy-date-picker-cell-out-min-max",a=e.PICKER_BUTTON_BACK_CLS,s=e.PICKER_BUTTON_NEXT_CLS,l=e.PICKER_BUTTON_DATE_CLS,d=e.PICKER_BUTTON_DATE_WRAPPER_CLS,c=e.PICKER_BUTTON_TODAY_CLS,u=e.PICKER_BUTTON_TODAY_WRAPPER_CLS;e.define("Fancy.datepicker.Manager",{singleton:!0,opened:[],add:function(e){this.hide(),this.opened.push(e)},hide:function(){for(var e=this.opened,t=0,n=e.length;n>t;t++)e[t].hide();this.opened=[]}}),e.define(["Fancy.picker.Date","Fancy.DatePicker"],{extend:e.Grid,type:"datepicker",mixins:["Fancy.grid.mixin.Grid",e.panel.mixin.PrepareConfig,e.panel.mixin.methods,"Fancy.grid.mixin.PrepareConfig","Fancy.grid.mixin.ActionColumn","Fancy.grid.mixin.Edit"],width:308,height:299,frame:!1,i18n:"en",cellTrackOver:!0,cellStylingCls:[r,i,t],activeCellCls:t,todayCellCls:i,pickerDateCls:n,outRangeCellCls:r,buttonBackCls:a,buttonDateCls:l,buttonDateWrapperCls:d,buttonNextCls:s,buttonTodayCls:c,buttonTodayWrapperCls:u,defaults:{type:"string",width:44,align:"center",cellAlign:"center"},gridBorders:[1,0,1,1],panelBodyBorders:[0,0,0,0],barScrollEnabled:!1,constructor:function(t){var n=this;e.apply(n,t),n.initFormat(),n.initColumns(),n.initDate(),n.initData(),n.initBars(),n.Super("constructor",[n])},init:function(){var e=this;e.Super("init",arguments),e.onUpdate(),e.addEvents("changedate"),e.on("update",e.onUpdate,e),e.on("cellclick",e.onCellClick,e),e.addCls(n),e.el.on("mousewheel",e.onMouseWheel,e),e.panel.el.on("mousedown",e.onMouseDown,e)},initFormat:function(){var t=this;t.format||(t.format=e.i18n[t.i18n].date)},initMonthPicker:function(){var t=this;return t.monthPicker?void t.monthPicker.setDate(t.date):void((e.fullBuilt||e.MODULELOAD===!1||e.MODULELOAD===!1||!t.monthPicker&&e.modules.grid)&&(t.monthPicker=new e.MonthPicker({date:t.date,renderTo:t.panel.el.dom,style:{position:"absolute",top:"-"+t.panel.el.height()+"px",left:"0px"},events:[{cancelclick:t.onMonthCancelClick,scope:t},{okclick:t.onMonthOkClick,scope:t}]})))},initData:function(){this.data=this.generateData()},initDate:function(){var e=this;(void 0===e.date||"Invalid Date"===e.date.toString())&&(e.date=new Date),e.showDate=e.date,e.maxValue&&e.showDate>e.maxValue?e.showDate=e.maxValue:e.minValue&&e.showDate<e.minValue&&(e.showDate=e.minValue)},initColumns:function(){for(var n=this,a=n.format,s=a.days,l=a.startDay,d=l,c=s.length,u=e.Date.dayIndexes,h=[],f=new Date,g=function(e){switch(e.cls="",e.rowIndex){case 0:Number(e.value)>20&&(e.cls+=" "+r);break;case 4:case 5:Number(e.value)<15&&(e.cls+=" "+r)}var a=n.date,s=n.showDate;f.getMonth()===s.getMonth()&&f.getFullYear()===s.getFullYear()&&e.value===f.getDate()&&(0===e.rowIndex?e.value<20&&(e.cls+=" "+i):4===e.rowIndex||5===e.rowIndex?e.value>20&&(e.cls+=" "+i):e.cls+=" "+i),a.getMonth()===s.getMonth()&&a.getFullYear()===s.getFullYear()&&e.value===a.getDate()&&(0===e.rowIndex?e.value<20&&(e.cls+=" "+t):4===e.rowIndex||5===e.rowIndex?e.value>20&&(e.cls+=" "+t):e.cls+=" "+t);var l=e.value,d=s.getMonth(),c=s.getFullYear();Number(l)>20&&e.rowIndex<2?(d--,0===d&&(c--,d=11)):Number(l)<10&&e.rowIndex>3&&(d++,12===d&&(c++,d=0));var u=new Date(c,d,l),h=!1;return n.maxValue&&n.maxValue<u&&(h=!0),n.minValue&&n.minValue>u&&(h=!0),h?e.cls+=" "+o:e.cell&&e.cell.removeCls(o),e};c>d;d++)h.push({index:u[d],title:s[d][0].toLocaleUpperCase(),render:g});for(d=0,c=l;c>d;d++)h.push({index:u[d],title:s[d][0].toLocaleUpperCase(),render:g});n.columns=h},getDataFields:function(){for(var t=this,n=[],i=t.format,r=i.days,o=i.startDay,a=o,s=r.length,l=e.Date.dayIndexes;s>a;a++)n.push(l[a]);for(a=0,s=o;s>a;a++)n.push(l[a]);return n},generateData:function(){for(var t=this,n=t.format,i=n.startDay,r=t.showDate,o=e.Date.getDaysInMonth(r),a=e.Date.getFirstDayOfMonth(r),s=[],l=t.getDataFields(),d=0,c=o,u=0;c>d;d++){var h=d+a-i+u;0>h&&(h=7-i,u=h+1),0===h&&(h=7,u=h),s[h]=d+1}var f=r.getMonth(),g=r.getFullYear(),p=r.getDate(),m=r.getHours(),v=r.getMinutes(),y=r.getSeconds(),C=r.getMilliseconds();0===f?(f=11,g--):f--;var w=new Date(g,f,p,m,v,y,C),b=e.Date.getDaysInMonth(w);for(d=7;d--;)void 0===s[d]&&(s[d]=b,b--);for(var d=28,c=42,x=1;c>d;d++)void 0===s[d]&&(s[d]=x,x++);for(var S=[],d=0,c=6;c>d;d++)S[d]=s.splice(0,7);return{fields:l,items:S}},initBars:function(){this.initTBar(),this.initBBar()},initTBar:function(){var e=this,t=[];t.push({cls:a,handler:e.onBackClick,scope:e,style:{}}),t.push({cls:l,wrapper:{cls:d},handler:e.onDateClick,scope:e,text:"                       "}),t.push("side"),t.push({cls:s,handler:e.onNextClick,scope:e}),e.tbar=t},initBBar:function(){var e=this,t=[];t.push({text:e.format.today,cls:c,wrapper:{cls:u},handler:e.onClickToday,scope:e}),e.bbar=t},onBackClick:function(){var e=this,t=e.showDate,n=t.getMonth(),i=t.getFullYear(),r=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds();0===n?(n=11,i--):n--,e.showDate=new Date(i,n,r,o,a,s,l);var d=e.generateData();e.store.setData(d.items),e.update()},onNextClick:function(){var e=this,t=e.showDate,n=t.getMonth(),i=t.getFullYear(),r=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds();11===n?(n=0,i++):n++,e.showDate=new Date(i,n,r,o,a,s,l);var d=e.generateData();e.store.setData(d.items),e.update()},onUpdate:function(){var t=this,n=e.Date.format(t.showDate,"F Y",{date:t.format}),i=9*n.length+35;t.tbar[1].setText(n,i)},onClickToday:function(){var e=this,t=new Date;e.showDate=t,e.date=t;var n=e.generateData();e.store.setData(n.items),e.update()},onCellClick:function(n,i){var a,s=this,l=s.showDate,d=l.getFullYear(),c=l.getMonth(),u=l.getHours(),h=l.getMinutes(),f=l.getSeconds(),g=l.getMilliseconds(),p=e.get(i.cell);if(!p.hasCls(o)&&(s.date=new Date(d,c,Number(i.value),u,h,f,g),s.el.select("."+t).removeCls(t),p.addCls(t),s.fire("changedate",s.date),p.hasCls(r))){a=Number(i.value),i.rowIndex<3?0===c?(d--,c=11):c--:11===c?(d++,c=11):c++,s.date=new Date(d,c,a,u,h,f,g),s.showDate=s.date;var m=s.generateData();s.store.setData(m.items),s.update()}},onMouseWheel:function(t){var n=e.getWheelDelta(t.originalEvent||t);0>n?this.onBackClick():this.onNextClick()},onDateClick:function(){var t=this;t.initMonthPicker(),t.monthPicker.panel.css("display","block"),e.$.fn.animate?t.monthPicker.panel.el.animate({top:"0px"}):t.monthPicker.panel.css({top:"0px"})},onMonthCancelClick:function(){this.hideMonthPicker()},onMonthOkClick:function(){var e=this,t=e.monthPicker.date,n=t.getMonth(),i=t.getFullYear(),r=e.date.getDate(),o=e.date.getHours(),a=e.date.getMinutes(),s=e.date.getSeconds(),l=e.date.getMilliseconds();e.hideMonthPicker(),r>28&&(r=1),e.date=new Date(i,n,r,o,a,s,l),e.showDate=e.date;var d=e.generateData();e.store.setData(d.items),e.update(),e.fire("changedate",e.date,!1)},hideMonthPicker:function(){var t=this.monthPicker.panel.el;e.$.fn.animate?t.animate({top:"-"+t.css("height")},{complete:function(){t.css("display","none")}}):t.css("display","none")},onMouseDown:function(e){e.preventDefault()},setDate:function(e,t){var n=this;n.date=e,t&&n.showDate||(n.showDate=e),n.store.setData(n.generateData().items),n.update()}})}(),function(){var e=Fancy,t=e.PICKER_MONTH_CELL_ACTIVE_CLS,n=e.PICKER_MONTH_CLS,i=e.PICKER_BUTTON_BACK_CLS,r=e.PICKER_BUTTON_NEXT_CLS,o=e.PICKER_MONTH_ACTION_BUTTONS_CLS;e.define(["Fancy.picker.Month","Fancy.MonthPicker"],{extend:e.Grid,type:"monthpicker",mixins:["Fancy.grid.mixin.Grid",e.panel.mixin.PrepareConfig,e.panel.mixin.methods,"Fancy.grid.mixin.PrepareConfig","Fancy.grid.mixin.ActionColumn","Fancy.grid.mixin.Edit"],width:308,height:299,frame:!1,cellHeight:37,i18n:"en",cellTrackOver:!0,cellStylingCls:[t],activeCellCls:t,buttonBackCls:i,buttonNextCls:r,actionButtonsCls:o,defaults:{type:"string",width:76,align:"center",cellAlign:"center"},gridBorders:[1,0,1,1],panelBodyBorders:[0,0,0,0],header:!1,constructor:function(t){var n=this;e.apply(n,t),n.initLang(),n.initColumns(),n.initDate(),n.initData(),n.initBars(),n.Super("constructor",[n])},init:function(){var e=this;e.Super("init",arguments),e.addEvents("cancelclick","okclick"),e.addEvents("changedate"),e.on("cellclick",e.onCellClick,e),e.panel.addCls(n)},initData:function(){this.data=this.generateData()},initDate:function(){var e=this;void 0===e.date&&(e.date=new Date),e.showDate=e.date},initLang:function(){var t=this;t.lang||(t.lang=e.Object.copy(e.i18n[t.i18n]))},initColumns:function(){var e=this,n=function(n){var i=e.date,r=i.getMonth();return e.lang.date.months[r].substr(0,3)===n.value&&(n.cls=t),n},i=function(n){var i=e.date,r=i.getFullYear();return r===Number(n.value)&&(n.cls=t),n};e.columns=[{index:"month1",render:n,locked:!0},{index:"month2",render:n,locked:!0,width:77},{index:"year1",render:i,width:77},{index:"year2",render:i,width:77}]},generateData:function(){var e,t,n=this,i=n.lang,r=n.showDate,o=r.getFullYear(),a=i.date.months,s=[],l=[];for(e=0,t=12;t>e;e++)l.push(o-5+e);for(e=0,t=6;t>e;e++)s[e]={},s[e].month1=a[e].substr(0,3),s[e].month2=a[6+e].substr(0,3),s[e].year1=l[e],s[e].year2=l[6+e];return{fields:["month1","month2","year1","year2"],items:s}},initBars:function(){this.initTBar(),this.initBBar()},initTBar:function(){var e=this,t=[];t.push("side"),t.push({cls:i,handler:e.onBackClick,scope:e}),t.push({width:30,cls:r,handler:e.onNextClick,scope:e}),e.tbar=t},initBBar:function(){var e=this,t=[],n=e.lang;t.push({type:"wrapper",cls:o,items:[{text:n.date.ok,handler:e.onClickOk,scope:e},{text:n.date.cancel,handler:e.onClickCancel,scope:e}]}),e.bbar=t},onBackClick:function(){var e=this,t=e.showDate,n=t.getFullYear(),i=t.getMonth(),r=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds();n-=10,e.showDate=new Date(n,i,r,o,a,s,l);var d=e.generateData();e.store.setData(d.items),e.update()},onNextClick:function(){var e=this,t=e.showDate,n=t.getFullYear(),i=t.getMonth(),r=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds();n+=10,e.showDate=new Date(n,i,r,o,a,s,l);var d=e.generateData();e.store.setData(d.items),e.update()},onClickOk:function(){this.fire("okclick")},onClickCancel:function(){this.fire("cancelclick")},onCellClick:function(n,i){var r,o=this,a=o.date,s=a.getFullYear(),l=a.getMonth(),d=a.getDate(),c=a.getHours(),u=a.getMinutes(),h=a.getSeconds(),f=a.getMilliseconds(),g=e.get(i.cell);"center"===i.side?(r=o.body,s=Number(i.value)):(r=o.leftBody,l=i.rowIndex+6*i.columnIndex),r.el.select("."+t).removeCls(t),g.addCls(t),d>28&&(d=1),o.showDate=new Date(s,l,d,c,u,h,f),o.date=o.showDate,o.fire("changedate",o.date)},onMouseWheel:function(t){var n=e.getWheelDelta(t.originalEvent||t);0>n?this.onBackClick():this.onNextClick()},onDateClick:function(){this.initMonthPicker()},setDate:function(e){var t=this;t.date=e,t.showDate=e;var n=t.generateData();t.store.setData(n.items),t.update()}})}(),Fancy.define("Fancy.spark.ProgressDonut",{svgns:"http://www.w3.org/2000/svg",sum:100,prefix:"fancy-spark-progress-donut-",constructor:function(e){var t=this;Fancy.apply(t,e),t.init()},init:function(){var e=this;e.initId(),e.initChart(),e.setSize(),e.setRadius(),e.setInnerRadius(),e.setParams(),e.iniColors(),e.preRender(),e.render(),e.inited!==!0&&(e.renderTo.appendChild(e.chart),e.ons())},initId:function(){var e=this,t=e.prefix||Fancy.prefix;e.id=e.id||Fancy.id(null,t),Fancy.addWidget(e.id,e)},ons:function(){var e=this;e.el.on("mouseenter",e.onMouseEnter,e),e.el.on("mouseleave",e.onMouseLeave,e),e.el.on("mousemove",e.onMouseMove,e)},onMouseEnter:function(e){var t=this,n=t.el.attr("value");if(t.tipTpl){var i=new Fancy.Template(t.tipTpl);n=i.getHTML({value:n})}t.tooltip=new Fancy.ToolTip({text:'<span style="color: '+t.color+';">●</span> '+n})},onMouseLeave:function(e){var t=this;t.tooltip.destroy()},onMouseMove:function(e){var t=this;t.tooltip&&(t.tooltip.css("display","block"),t.tooltip.show(e.pageX+15,e.pageY-25))},iniColors:function(){var e=this;e.value<0?(e.backColor="#F9DDE0",e.color="#EA7369"):(e.backColor="#eee",e.color="#44A4D3")},preRender:function(){var e=this,t=e.size,n=e.chart;n.setAttribute("width",t),n.setAttribute("height",t),n.setAttribute("viewBox","0 0 "+t+" "+t)},render:function(){var e=this;e.renderBack(),e.renderProgress()},renderBack:function(){var e=this,t=e.radius,n=e.innerRadius,i=["M",e.cx,e.y1,"A",t,t,0,1,1,e.x2,e.y1,"L",e.x2,e.y2,"A",n,n,0,1,0,e.cx,e.y2].join(" "),r=document.createElementNS(e.svgns,"path");r.setAttribute("d",i),r.setAttribute("fill",e.backColor),e.chart.appendChild(r)},renderProgress:function(){var e=this,t=e.radius,n=e.innerRadius,i=document.createElementNS(e.svgns,"path"),r=e.value,o=0;r>99&&(r=99.99999),-99>r&&(r=99.99999),0>r&&(o=100+r,r*=-1);var a=r/e.sum,s=o+r,l=["M"].concat(e.scale(o,t),"A",t,t,0,a>.5?1:0,1,e.scale(s,t),"L");n?l=l.concat(e.scale(s,n),"A",n,n,0,a>.5?1:0,0,e.scale(o,n)):l.push(cx,cy),l=l.join(" "),i.setAttribute("d",l),i.setAttribute("fill",e.color),e.chart.appendChild(i)},initChart:function(){var e=this,t=Fancy.get(e.renderTo);e.renderTo=Fancy.get(e.renderTo).dom,0===t.select("svg").length?e.chart=document.createElementNS(e.svgns,"svg:svg"):(e.chart=t.select("svg").dom,e.chart.innerHTML="",e.inited=!0),e.el=Fancy.get(e.chart),e.el.attr("id",e.id),e.value<1&&e.value>0?e.el.attr("value",e.value.toFixed(1)):e.value>-1&&e.value<0?e.el.attr("value",e.value.toFixed(1)):e.el.attr("value",e.value.toFixed(0))},scale:function(e,t){var n=this,i=Math.PI,r=n.sum,o=e/r*i*2-i/2;return[t*Math.cos(o)+n.cx,t*Math.sin(o)+n.cy]},radians:function(e){return e*Math.PI/180},setSize:function(){var e=this;e.width=e.width||e.height||e.size||30,e.height=e.height||e.width||e.size||30,e.size=e.size||e.height},setRadius:function(){var e=this;e.radius=e.radius||e.height/2},setInnerRadius:function(){var e=this;e.innerRadius=e.innerRadius||e.height/2-e.height/4},setParams:function(){var e=this,t=e.radius,n=e.innerRadius,i=e.height,r=e.width;e.cy=i/2,e.y1=e.cy-t,e.y2=e.cy-n,e.cx=r/2,e.x2=e.cx-.01}}),Fancy.define("Fancy.spark.GrossLoss",{maxValue:100,tipTpl:'<span style="color: {color};">●</span> {value} {suffix}',constructor:function(e){Fancy.apply(this,e),this.init()},init:function(){var e=this;e.preRender(),e.render(),e.inited!==!0&&e.ons()},ons:function(){var e=this;e.el.on("mouseenter",e.onMouseEnter,e),e.el.on("mouseleave",e.onMouseLeave,e),e.el.on("mousemove",e.onMouseMove,e)},onMouseEnter:function(){var e,t=this,n=t.el.attr("value"),i=t.el.css("background-color"),r="";t.percents&&(r=" %");var o=new Fancy.Template(t.tipTpl);e=o.getHTML({value:n,color:i,suffix:r}),t.tooltip=new Fancy.ToolTip({text:e})},onMouseLeave:function(){this.tooltip.destroy()},onMouseMove:function(e){this.tooltip.el.css("display","block"),this.tooltip.show(e.pageX+15,e.pageY-25)},preRender:function(){},render:function(){var e=this,t=e.column,n=t.width,i=n/e.maxValue,r=0,o=0,a=e.value,s="";0>a?(r=-a*i/2,e.lossColor&&(s="background-color:"+e.lossColor+";"),a='<div class="fancy-grid-grossloss-loss" style="'+s+"width:"+r+'%">&nbsp;</div>'):(o=a*i/2,e.grossColor&&(s="background-color:"+e.grossColor+";"),a='<div class="fancy-grid-grossloss-gross" style="'+s+"width:"+o+'%">&nbsp;</div>'),e.renderTo.innerHTML=a,e.value<0?e.el=Fancy.get(e.renderTo).select(".fancy-grid-grossloss-loss").item(0):e.el=Fancy.get(e.renderTo).select(".fancy-grid-grossloss-gross").item(0),e.el.attr("value",e.value.toFixed(2))}}),Fancy.define("Fancy.spark.ProgressBar",{tipTpl:"{value} {suffix}",constructor:function(e){var t=this;Fancy.apply(t,e),t.init()},init:function(){var e=this;e.initId(),e.render(),e.inited!==!0&&e.ons()},initId:function(){var e=this,t=e.prefix||Fancy.prefix;e.id=e.id||Fancy.id(null,t),Fancy.addWidget(e.id,e)},ons:function(){var e=this;e.tip!==!1&&(e.el.on("mouseenter",e.onMouseEnter,e),e.el.on("mouseleave",e.onMouseLeave,e),e.el.on("mousemove",e.onMouseMove,e))},onMouseEnter:function(e){var t=this,n=t.el.attr("value"),i="%";t.percents===!1&&(i="");var r=new Fancy.Template(t.tipTpl),o=r.getHTML({value:n,suffix:i});Fancy.tip.update(o)},onMouseLeave:function(e){Fancy.tip.hide(500)},onMouseMove:function(e){Fancy.tip.show(e.pageX+15,e.pageY-25)},render:function(){var e,t=this,n=t.column,i=n.width-18,r=i/t.maxValue,o=t.value*r,a=t.value,s=n.sparkConfig;a=t.percents===!1?t.value:1>a?t.value.toFixed(1):t.value.toFixed(0);var l="&nbsp;",d="",c="";if(s.label)switch(s.label.type){case"left":l='<div class="fancy-grid-bar-label" style="float: left;">'+a+"</div>",o<7*String(a).length&&(l="&nbsp;",d='<div class="fancy-grid-bar-label-out" style="">'+a+"</div>");break;case"right":l='<div class="fancy-grid-bar-label" style="float: right;">'+a+"</div>",o<7*String(a).length&&(l="&nbsp;",d="right"===s.align?'<div class="fancy-grid-bar-label-out-left" style="">'+a+"</div>":'<div class="fancy-grid-bar-label-out" style="">'+a+"</div>");break;default:l='<div class="fancy-grid-bar-label" style="float: left;">'+a+"</div>",o<7*String(a).length&&(l="&nbsp;",c='<div class="fancy-grid-bar-label-out-left" style="">'+a+"</div>")}var u="width:"+o+"px;",h="";if(s.align&&(h="float:"+s.align+";"),e='<div id="'+t.id+'" value="'+a+'" class="fancy-grid-column-progress-bar" style="'+u+h+'">'+l+"</div>"+d+c,t.renderTo.innerHTML=e,t.el=Fancy.get(t.renderTo).select(".fancy-grid-column-progress-bar").item(0),Fancy.isFunction(t.style)){var f=t.style({value:t.value,column:t.column,rowIndex:t.rowIndex,data:t.data});t.el.css(f)}},update:function(){var e=this,t=e.column,n=t.width-18,i=10,r=n/e.maxValue,o=e.value,a=o*r,s=t.sparkConfig,l=e.el.parent();if(e.el.css("width",a),e.el.attr("value",o),s.label)if("right"===s.label.type){var d=l.select(".fancy-grid-column-progress-bar"),c=l.select(".fancy-grid-bar-label"),u=l.select(".fancy-grid-bar-label-out");String(o).length*i+10>a?(c.dom&&(d.update("&nbsp;"),c.destroy()),u.dom?u.update(o):l.append('<div class="fancy-grid-bar-label-out">'+o+"</div>")):(c.dom||(d.append('<div class="fancy-grid-bar-label" style="float: right;"></div>'),c=l.select(".fancy-grid-bar-label")),c.update(o),u.dom&&u.destroy())}else{var d=l.select(".fancy-grid-column-progress-bar"),c=l.select(".fancy-grid-bar-label"),h=l.select(".fancy-grid-bar-label-out-left");String(o).length*i+10>a?(c.dom&&(d.update("&nbsp;"),c.destroy()),h.dom?h.update(o):l.append('<div class="fancy-grid-bar-label-out-left">'+o+"</div>")):(c.dom||(d.append('<div class="fancy-grid-bar-label" style="float: left;"></div>'),c=l.select(".fancy-grid-bar-label")),c.update(o),h.dom&&h.destroy())}}}),Fancy.define("Fancy.spark.HBar",{tipTpl:"{value}",maxValue:100,stacked:!1,fullStack:!1,constructor:function(e){var t=this;Fancy.apply(t,e),t.init()},init:function(){var e=this;e.initId(),e.render(),e.inited!==!0&&e.ons()},initId:function(){var e=this,t=e.prefix||Fancy.prefix;e.id=e.id||Fancy.id(null,t),Fancy.addWidget(e.id,e)},ons:function(){var e=this;e.tip!==!1&&(e.el.on("mouseenter",e.onMouseEnter,e,".fancy-grid-column-h-bar-node"),e.el.on("mouseleave",e.onMouseLeave,e,".fancy-grid-column-h-bar-node"),e.el.on("mousemove",e.onMouseMove,e,".fancy-grid-column-h-bar-node"))},onMouseEnter:function(e){var t=this,n=Fancy.get(e.target),i=n.attr("key"),r=n.attr("data-title"),o=Number(n.attr("value")),a=Number(n.attr("percents"));if(t.tipFormat){var s={value:o,percents:a,key:i,column:t.column,data:t.data,title:r};o=t.tipFormat(s)}var l=new Fancy.Template(t.tipTpl),d=l.getHTML({value:o});Fancy.tip.update(d)},onMouseLeave:function(e){Fancy.tip.hide(500)},onMouseMove:function(e){Fancy.tip.show(e.pageX+15,e.pageY-25)},render:function(){var e,t,n=this,i=n.column,r=i.width-18,o=r/100,a=i.index,s=0,l=i.disabled||{},d="",c="",u=2,h=0,f=a.length;i.fields?(f=i.fields.length,Fancy.each(i.fields,function(e){var t=i.index+"."+e;l[t]||(s+=n.data[i.index][t])})):Fancy.each(a,function(e){l[e]||(s+=n.data[e])}),n.stacked?n.fullStack||(s=n.maxValue):(s=n.maxItemValue,d="line-height:"+((n.height-1)/a.length-u)+"px;"),e=s/100,h=0;var g="fancy-spark-hbar";for(n.stacked&&(g+=" fancy-spark-stacked "),t='<div id="'+n.id+'" class="'+g+'">';f>h;h++){if(i.fields)var p=i.fields[h],m=n.data[i.index][p];else var p=a[h],m=n.data[p];var v=m/e,y=v*o;if(!l[p]){0!==h&&y--,n.stacked||(c=0===h?"margin-top:"+u+"px;":"margin-top:"+u+"px;"),y>0&&1>y&&(y=2);var C="background: "+Fancy.COLORS[h]+";",w="width:"+y+";",b="",x='data-title=""';0===y&&(b="display: none;"),n.title&&(x='data-title="'+n.title[h]+'" ');var S='key="'+p+'" ';m='value="'+m+'" ';var E='percents="'+v+'" ';t+="<div "+x+S+m+E+'" class="fancy-grid-column-h-bar-node" style="'+b+w+C+d+c+'">&nbsp;</div>'}}t+="</div>",n.renderTo.innerHTML=t,n.el=Fancy.get(n.renderTo)},update:function(e){var t,n,i=this,r=i.column,o=r.width-18,a=o/100,s=r.index,l=0,d=r.disabled||{},c=2;i.data=e;var u=0,h=s.length,f=0;for(r.fields?(h=r.fields.length,Fancy.each(r.fields,function(e){return d[r.index+"."+e]?void f++:void(l+=i.data[r.index][e])})):Fancy.each(s,function(e){return d[e]?void f++:void(l+=i.data[e])}),i.stacked?i.fullStack||(l=i.maxValue):(l=i.maxItemValue,n=(i.height-1)/(s.length-f)-c),t=l/100,u=0;h>u;u++){if(r.fields)var g=r.fields[u],p=i.data[r.index][g];else var g=s[u],p=i.data[g];var m=p/t,v=m*a,y=i.el.select('.fancy-grid-column-h-bar-node[key="'+g+'"]');r.fields&&d[r.index+"."+g]?(y.css("width","0px"),y.hide()):d[g]?(y.css("width","0px"),y.hide()):(0!==u&&v--,i.stacked||(y.css("line-height",n+"px"),0===u?y.css("margin-top",c+"px"):y.css("margin-top",c+"px")),0===v||-1===v?y.css("display","none"):y.css("display","block"),v>0&&2>v&&(v=2),y.animate({duration:2,width:v}))}}}),function(){var e=Fancy,t=e.TOOLTIP_CLS,n=e.TOOLTIP_INNER_CLS;e.define("Fancy.ToolTip",{extend:e.Widget,constructor:function(e){this.Super("const",arguments)},init:function(){this.initTpl(),this.render(),this.ons()},tpl:['<div class="'+n+'">{text}</div>'],widgetCls:t,cls:"",extraCls:"",render:function(){var t=this,n=e.get(t.renderTo||document.body).dom,i=e.get(document.createElement("div"));i.addCls(e.cls,t.widgetCls,t.cls,t.extraCls),i.update(t.tpl.getHTML({text:t.text})),t.el=e.get(n.appendChild(i.dom))},show:function(e,t){var n=this;n.timeout&&(clearInterval(n.timeout),delete n.timeout),"none"===n.css("display")&&n.css({display:"block"}),n.css({left:e,top:t})},hide:function(e){var t=this;t.timeout&&(clearInterval(t.timeout),delete t.timeout),e?t.timeout=setTimeout(function(){t.el.hide()},e):t.el.hide()},destroy:function(){this.el.destroy()},update:function(e){this.el.select("."+n).update(e)},ons:function(){var e=this;e.el.on("mouseenter",e.onMouseEnter,e)},onMouseEnter:function(e){var t=this;t.hide(500)}}),e.tip={update:function(t){e.tip=new e.ToolTip({text:t})},show:function(t,n){e.tip=new e.ToolTip({text:" "}),e.tip.show(t,n)},hide:function(){e.tip=new e.ToolTip({text:" "})}}}(),function(){"use strict";function e(t,i){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,l=0,d=a.length;d>l;l++)s[a[l]]=r(s[a[l]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,l,d,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(d=e.changedTouches[0],c=document.elementFromPoint(d.pageX-window.pageXOffset,d.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return i&&!r&&(l=c.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),Fancy.enableCompo=function(){function e(){if(0!==r)for(var e in o){var n,a,s=o[e],l=i.querySelectorAll(e),d=s.appPreSelector?s.appPreSelector+"-":"data-",c=s.preSelector?s.preSelector+"-":"fancy-",u=0,h=l.length;if(0===l.length)return;for(;h>u;u++){var f={},g=l[u],p=g.id||"rand-id-"+ +new Date,m=g.attributes;for(n=0,a=m.length;a>n;n++){var v=m[n],y=v.name,C=v.value;new RegExp(d).test(y)&&(C=t(C),f[y.replace(d,"")]=C)}!function(){var e=g.getElementsByTagName("*");for(n=0,a=e.length;a>n;n++){var i,r,o=e[n],s=o.tagName.toLowerCase();new RegExp(c).test(s)&&(i=s.replace(c,""),r=t(o.innerHTML),f[i.replace(d,"")]=r)}}(g,f),g.outerHTML='<div id="'+p+'"></div>',s.init(i.getElementById(p),f)}}}function t(e){return/\[/.test(e)||/\{/.test(e)?(e=e.replace(/\n/g,""),e=new Function("return "+e+";")()):e=isNaN(Number(e))?e.replace(/\n/g,""):Number(e),e}var n,i=document,r=0,o={};Fancy.Component=function(e,t){r++,o[e]=t},Fancy.stopWatch=function(){clearInterval(n)},e(),i.addEventListener("DOMContentLoaded",function(){e()}),setTimeout(function(){e()},1),n=setInterval(function(){e()},250),Fancy.Component("fancy-grid",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyGrid(t)}}),Fancy.Component("fancy-form",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyForm(t)}}),Fancy.Component("fancy-tab",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyTab(t)}})},Fancy});

	//window.apis.util.importJS__Reuse( window.apis.url.getServerURL_WebServer_SCODE( "SYS0015" ) + "/libs/FancyGrid/1.7.20/fancy.full.min.js" );

	//----------------------------------------------------------------------------------------------------;

	window.TtwLog.log( "- [ E ] - Import templates FancyGrid 1.7.20" );
	return;
})();